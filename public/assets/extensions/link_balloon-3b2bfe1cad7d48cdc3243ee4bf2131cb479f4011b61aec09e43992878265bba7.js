"use strict";function BalloonLink(){go.Link.call(this),this.layerName="Background",this.base=10}go.Diagram.inherit(BalloonLink,go.Link),Object.defineProperty(BalloonLink.prototype,"base",{get:function(){return this._base},set:function(t){this._base=t}}),BalloonLink.prototype.makeGeometry=function(){var t=this.fromNode.actualBounds,e=this.toNode.actualBounds,o=this.pointsCount,n=t.center,i=this.getPoint(o-1);t.intersectsRect(e)&&(i=e.center);var a=this.routeBounds,r=i.directionPoint(n),h=new go.Point(this.base,0).rotate(r-90).add(n),g=new go.Point(this.base,0).rotate(r+90).add(n);this.getLinkPointFromPoint(this.fromNode,this.fromNode,h,i,!0,h),this.getLinkPointFromPoint(this.fromNode,this.fromNode,g,i,!0,g);var s=new go.PathFigure(i.x-a.x,i.y-a.y,!0);s.add(new go.PathSegment(go.PathSegment.Line,g.x-a.x,g.y-a.y));var d=0;return h.y>=t.bottom||g.y>=t.bottom?d=2:h.x<=t.x&&g.x<=t.x?d=1:h.x>=t.right&&g.x>=t.right&&(d=3),this.pathToCorner(d,t,s,a,h,g),this.pathToCorner(d+1,t,s,a,h,g),this.pathToCorner(d+2,t,s,a,h,g),this.pathToCorner(d+3,t,s,a,h,g),s.add(new go.PathSegment(go.PathSegment.Line,h.x-a.x,h.y-a.y).close()),(new go.Geometry).add(s)},BalloonLink.prototype.pathToCorner=function(t,e,o,n,i,a){switch(t%4){case 0:i.y<=e.y&&a.x<=e.x||o.add(new go.PathSegment(go.PathSegment.Line,e.x-n.x,e.y-n.y));break;case 1:i.x<=e.x&&a.y>=e.bottom||o.add(new go.PathSegment(go.PathSegment.Line,e.x-n.x,e.bottom-n.y));break;case 2:i.y>=e.bottom&&a.x>=e.right||o.add(new go.PathSegment(go.PathSegment.Line,e.right-n.x,e.bottom-n.y));break;case 3:i.x>=e.right&&a.y<=e.y||o.add(new go.PathSegment(go.PathSegment.Line,e.right-n.x,e.y-n.y))}};