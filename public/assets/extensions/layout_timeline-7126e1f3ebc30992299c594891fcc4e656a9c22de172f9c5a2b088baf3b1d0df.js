function TimelineLayout(){go.Layout.call(this)}go.Diagram.inherit(TimelineLayout,go.Layout),TimelineLayout.prototype.doLayout=function(e){var t=this.diagram;if(null!==t){e=this.collectParts(e),t.startTransaction("TimelineLayout");for(var a=null,i=[],o=e.iterator;o.next();){var n=o.value;if(!(n instanceof go.Link))if("timeline_line"!==n.category){i.push(n);var l=n.data.date;l===undefined&&(l=new Date,n.data.date=l)}else a=n}if(!a)throw Error("No node of category 'timeline_line' for TimelineLayout");if(a.location=new go.Point(0,0),i.length>0){var r=a.findMainElement(),u=(r.strokeWidth,r.actualBounds.x,r.actualBounds.y,a.data.lineSpacing);u||(u=30);for(var d=0;d<i.length;d++){for(var n=i[d],g=n.actualBounds,c=n.data.date,f=t.model.findNodeDataForKey("timeline"),s=f.start,h=s.getTime()+6e4*s.getTimezoneOffset(),m=c.getTime()+6e4*c.getTimezoneOffset(),y=m-h,T=864e5,L=y/T,v=a.graduatedPointForValue(L),w=new go.Point(v.x,v.y-g.height/2-u),x=0;x<d;x++){var p=new go.Rect(w.x,w.y,g.width,g.height),B=i[x].location,P=i[x].actualBounds,D=new go.Rect(B.x,B.y,P.width,P.height);p.intersectsRect(D)&&(w.offset(0,-P.height-10),x=0)}n.location=w}}t.commitTransaction("TimelineLayout")}};