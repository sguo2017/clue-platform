function WallBuildingTool(){go.Tool.call(this),this.name="WallBuilding",this._startPoint=null,this._endPoint=null,this._wallReshapingTool=null}function WallReshapingTool(){go.Tool.call(this),this.name="WallReshaping";var t=new go.Shape;t.figure="Diamond",t.desiredSize=new go.Size(7,7),t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this._handleArchetype=t,this._handle=null,this._adornedShape=null,this._reshapeObjectName="SHAPE",this._angle=0,this._length,this._isBuilding=!1,this._returnPoint=null,this._returnData=null}function reshapeWall(t,e,i,n,o){var r=t.memberParts,a=[],s=t.rotateObject.angle;r.iterator.each(function(t){a.push(t)});for(var l=new go.Map("string","number"),h=null,u=Number.MAX_VALUE,c=0;c<a.length;c++){var f=a[c],d=Math.sqrt(f.location.distanceSquaredPoint(e));l.add(f.data.key,d);var p=getWallPartEndpoints(f),g=Math.min(Math.sqrt(p[0].distanceSquaredPoint(i)),Math.sqrt(p[1].distanceSquaredPoint(i)));g<u&&(u=g,h=f)}if(null!==h){var y=h.location,m=h.data.width,v=s,b=new go.Point(y.x+m/2,y.y),x=new go.Point(y.x-m/2,y.y);b.offset(-y.x,-y.y).rotate(v).offset(y.x,y.y),x.offset(-y.x,-y.y).rotate(v).offset(y.x,y.y);var w,k,S=Math.sqrt(e.distanceSquaredPoint(b)),M=Math.sqrt(e.distanceSquaredPoint(x));S>M?(w=S,k=b):(w=M,k=x);Math.sqrt(e.distanceSquaredPoint(n))<w&&(n=k)}i===t.data.endpoint?o.model.setDataProperty(t.data,"endpoint",n):o.model.setDataProperty(t.data,"startpoint",n),o.updateWall(t);var P=t.rotateObject.angle,T=P-s;l.iterator.each(function(t){var n=o.findPartForKey(t.key),r=t.value,a=Math.sqrt(e.distanceSquaredPoint(i)),s=new go.Point(e.x+r/a*(i.x-e.x),e.y+r/a*(i.y-e.y));n.location=s,n.angle=(n.angle+T)%360})}function GoTools(t){go.Diagram.call(this,t),this._goToolsFilesSystem=null,this._goToolsUI=null,this._palettes=[],this._pointNodes=new go.Set(go.Node),this._dimensionLinks=new go.Set(go.Link),this._angleNodes=new go.Set(go.Node);var e=go.GraphObject.make;this.initialContentAlignment=go.Spot.Center,this.initialAutoScale=go.Diagram.UniformToFill,this.initialDocumentSpot=go.Spot.TopCenter,this.initialViewportSpot=go.Spot.TopCenter,this.allowDrop=!0,this.allowLink=!0,this.allowSelect=!0,this.undoManager.isEnabled=!0,this.layout.isOngoing=!1,this.model=e(go.GraphLinksModel,{modelData:{units:"centimeters",unitsAbbreviation:"cm",gridSize:10,wallWidth:5,preferences:{showWallGuidelines:!0,showWallLengths:!0,showWallAngles:!0,showOnlySmallWallAngles:!0,showGrid:!0,gridSnap:!0}}}),this.isReadOnly=!1,this.scrollMode=go.Diagram.DocumentScroll,this.resizingTool=new go.ResizingTool,this.resizingTool.isGridSnapEnabled=!0,this.draggingTool=new go.DraggingTool,this.draggingTool.isGridSnapEnabled=!0,this.draggingTool.gridSnapCellSpot=go.Spot.TopLeft,this.draggingTool.gridCellSize=this.model.modelData.gridSize,this.draggingTool.dragsTree=!0,this.rotatingTool=new go.RotatingTool,this.rotatingTool.snapAngleEpsilon=10,this.grid=e(go.Panel,"Grid",{gridCellSize:new go.Size(this.model.modelData.gridSize,this.model.modelData.gridSize),visible:!0},e(go.Shape,"LineH",{stroke:"lightgray"}),e(go.Shape,"LineV",{stroke:"lightgray"})),this.contextMenu=makeContextMenu(),this.commandHandler.canGroupSelection=!0,this.commandHandler.canUngroupSelection=!0,this.commandHandler.archetypeGroupData={isGroup:!0},this.commandHandler.copiesTree=!0,this.commandHandler.deletesTree=!0,this.addModelChangedListener(function(t){if(t.isTransactionFinished){var e=null,i=t.object;null!==i&&i.changes.each(function(i){"nodeDataArray"==i.modelChange?i.change===go.ChangedEvent.Insert?console.log(t.propertyName+" \u6dfb\u52a0\u4e86\u4e3b\u952e\u4e3a: "+i.newValue.key+" \u7684\u8282\u70b9"):i.change===go.ChangedEvent.Remove&&console.log(t.propertyName+" \u5220\u9664\u4e86\u4e3b\u952e\u4e3a: "+i.oldValue.key+" \u7684\u8282\u70b9"):"linkDataArray"==i.modelChange?i.change===go.ChangedEvent.Insert?console.log(t.propertyName+" \u6dfb\u52a0\u4e86\u8fde\u7ebf: "+i.newValue):i.change===go.ChangedEvent.Remove&&console.log(t.propertyName+" \u5220\u9664\u4e86\u8fde\u7ebf: "+i.oldValue):"linkFromKey"==i.modelChange?i.change===go.ChangedEvent.Property&&console.log(t.propertyName+" \u4fee\u6539\u4e86\u8fde\u7ebf: "+i.object+" \u7684\u8d77\u70b9\uff0c\u4ece: "+i.oldValue.key+" \u5230: "+i.newValue.key):"linkToKey"==i.modelChange&&i.change===go.ChangedEvent.Property&&console.log(t.propertyName+" \u4fee\u6539\u4e86\u8fde\u7ebf: "+i.object+" \u7684\u672b\u7aef\uff0c\u4ece: "+i.oldValue.key+" \u5230: "+i.newValue.key),i.diagram instanceof GoTools&&(e=i.diagram)}),e&&e.goToolsUI&&e.goToolsUI.updateStatistics()}}),this.addDiagramListener("Modified",function(t){var e=t.diagram;if(e.goToolsFilesSystem){var i=document.getElementById(e.goToolsFilesSystem.state.currentFileId);if(i){var n=i.textContent.indexOf("\uff08\u672a\u4fdd\u5b58\uff09");e.isModified?n<0&&(i.textContent=i.textContent+"\uff08\u672a\u4fdd\u5b58\uff09"):n>=0&&(i.textContent=i.textContent.substr(0,n))}}}),this.addDiagramListener("InitialLayoutCompleted",function(t){console.log("GoTools \u521d\u59cb\u5316\u5b8c\u6bd5");var e=t.diagram.model.nodeDataArray;if(e.length>0){var i=e[Math.floor(Math.random()*e.length)];t.diagram.findNodeForData(i)}}),this.addDiagramListener("ExternalObjectsDropped",function(t){if("PaletteWallNode"===t.diagram.selection.first().category){var e=t.diagram.selection.first(),i=getWallPartEndpoints(e),n={key:"wall",category:"WallGroup",caption:"Wall",startpoint:i[0],endpoint:i[1],strokeWidth:parseFloat(t.diagram.model.modelData.wallWidth),isGroup:!0,notes:""};t.diagram.model.addNodeData(n);var o=t.diagram.findPartForKey(n.key);t.diagram.updateWall(o),t.diagram.remove(e)}if(t.diagram.goToolsUI){var r=t.diagram.goToolsUI;t.diagram.toolManager.mouseDownTools.elt(0).isEnabled&&r.setBehavior("dragging",t.diagram)}}),this.addDiagramListener("ClipboardPasted",function(t){t.diagram.selection.iterator.each(function(e){"WallGroup"===e.category&&t.diagram.updateWall(e)})}),this.addDiagramListener("ChangedSelection",function(t){var e=t.diagram;e.skipsUndoManager=!0,e.startTransaction("remove dimension links and angle nodes"),e.pointNodes.iterator.each(function(e){t.diagram.remove(e)}),e.dimensionLinks.iterator.each(function(e){t.diagram.remove(e)});var i=[];e.links.iterator.each(function(t){t.data&&"DimensionLink"==t.data.category&&i.push(t)});for(var n=0;n<i.length;n++)t.diagram.remove(i[n]);if(e.pointNodes.clear(),e.dimensionLinks.clear(),e.angleNodes.iterator.each(function(e){t.diagram.remove(e)}),e.angleNodes.clear(),e.commitTransaction("remove dimension links and angle nodes"),e.skipsUndoManager=!1,e.updateWallDimensions(),e.updateWallAngles(),e.goToolsUI){var o=(e.goToolsUI,e.selection);e.selection.first();if(o.count>1){var r=!1;o.iterator.each(function(t){"WindowNode"!==t.category&&"DoorNode"!==t.category&&"WallGroup"!==t.category||(r=!0)})}}}),this.addDiagramListener("SelectionMoved",function(t){var e=t.diagram.findNodeForKey(0);if(e){var i=e.location.x;t.diagram.selection.each(function(t){if("mindmap"==t.category){var e=t.location.x;console.log("1"),i<e&&"right"!==t.data.dir?updateMindmapDirection(t,"right"):i>e&&"left"!==t.data.dir&&updateMindmapDirection(t,"left"),layoutMindMap(t)}})}}),this.brushes={wood:e(go.Brush,"Linear",{0:"#964514",1:"#5E2605"}),wall:e(go.Brush,"Linear",{0:"#A8A8A8",1:"#545454"}),blue:e(go.Brush,"Linear",{0:"#42C0FB",1:"#009ACD"}),metal:e(go.Brush,"Linear",{0:"#A8A8A8",1:"#474747"}),green:e(go.Brush,"Linear",{0:"#9CCB19",1:"#698B22"}),bluegrad:e(go.Brush,"Linear",{0:"rgb(150, 150, 250)",.5:"rgb(86, 86, 186)",1:"rgb(86, 86, 186)"}),greengrad:e(go.Brush,"Linear",{0:"rgb(158, 209, 159)",1:"rgb(67, 101, 56)"}),redgrad:e(go.Brush,"Linear",{0:"rgb(206, 106, 100)",1:"rgb(180, 56, 50)"}),yellowgrad:e(go.Brush,"Linear",{0:"rgb(254, 221, 50)",1:"rgb(254, 182, 50)"}),lightgrad:e(go.Brush,"Linear",{1:"#E6E6FA",0:"#FFFAF0"})},this.makeNodeTemplateMap(),this.makeGroupTemplateMap(),this.makeLinkTemplateMap(),jQuery("#dataInspector").length>0&&(this.dataInspector=new Inspector("dataInspector",this,{properties:{key:{readOnly:!0},comments:{}}})),jQuery("#debugInspector").length>0&&(this.debugInspector=new DebugInspector("debugInspector",this,{acceptButton:!0,resetButton:!0})),this.cxElement=document.getElementById("contextMenu");var i=this;this.cxcommand=function(t,e){switch(e===undefined&&(e=t.currentTarget.id),e){case"cut":i.commandHandler.cutSelection();break;case"copy":i.commandHandler.copySelection();break;case"paste":i.commandHandler.pasteSelection(i.lastInput.documentPoint);break;case"delete":i.commandHandler.deleteSelection();break;case"color":var n=window.getComputedStyle(document.elementFromPoint(t.clientX,t.clientY).parentElement)["background-color"];changeColor(i,n)}i.currentTool.stopTool()},this.cxElement.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),this.contextMenu=e(go.HTMLInfo,{show:function(t,e){e.commandHandler;e.cxElement.style.display="block";var i=e.lastInput.viewPoint;e.cxElement.style.left=i.x+"px",e.cxElement.style.top=i.y+38+"px"},mainElement:this.cxElement}),$(".tools_search").draggable({handle:"#pushpin"});var n=new WallBuildingTool;this.toolManager.mouseDownTools.insertAt(0,n);var o=new WallReshapingTool;this.toolManager.mouseDownTools.insertAt(3,o),this.toolManager.draggingTool.doMouseUp=function(){go.DraggingTool.prototype.doMouseUp.call(this),this.diagram.updateWallAngles(),this.diagram.model.modelData.preferences&&(this.isGridSnapEnabled=this.diagram.model.modelData.preferences.gridSnap)},this.toolManager.draggingTool.doMouseMove=function(){this.diagram.lastInput.shift?this.isGridSnapEnabled=!1:this.diagram.model.modelData.preferences&&(this.isGridSnapEnabled=this.diagram.model.modelData.preferences.gridSnap),go.DraggingTool.prototype.doMouseMove.call(this),this.isActive},this.toolManager.resizingTool.doMouseMove=function(){this.adornedObject;this.diagram.updateWallDimensions(),go.ResizingTool.prototype.doMouseMove.call(this)},this.toolManager.resizingTool.computeMaxSize=function(){var t=this,e=t.adornedObject.part,i=this.diagram.findPartForKey(e.data.group);if(("DoorNode"===e.category||"WindowNode"===e.category)&&null!==i){var n,o,r=null;e.adornments.iterator.each(function(t){"WallPartResizeAdornment"===t.name&&(r=t)}),r.elements.iterator.each(function(e){e instanceof go.Shape&&e.alignment===t.handle.alignment&&(o=e.getDocumentPoint(go.Spot.Center)),e instanceof go.Shape&&e.alignment!==t.handle.alignment&&(n=e.getDocumentPoint(go.Spot.Center))});var a,s=Number.MAX_VALUE;i.memberParts.iterator.each(function(t){if(t.data.key!==e.data.key)for(var i=getWallPartEndpoints(t),r=0;r<i.length;r++){var l=i[r],h=Math.sqrt(l.distanceSquaredPoint(o));if(h<s){var u=Math.sqrt(l.distanceSquaredPoint(n));u>h&&(s=h,a=l)}}}),a!==undefined&&null!==a||(a=i.data.startpoint.distanceSquaredPoint(o)>i.data.startpoint.distanceSquaredPoint(n)?i.data.endpoint:i.data.startpoint);var l=Math.sqrt(n.distanceSquaredPoint(a));return new go.Size(l,i.data.strokeWidth)}return go.ResizingTool.prototype.computeMaxSize.call(t)},this.toolManager.draggingTool.isGridSnapEnabled=!0,this.toolManager.clickCreatingTool.archetypeNodeData={text:"new node"}}function getAdjustedPoint(t,e,i,n){var o=t.copy();return t.offset(0,-.5*e.data.strokeWidth-n),t.offset(-o.x,-o.y).rotate(i).offset(o.x,o.y),t}function buildDimensionLink(t,e,i,n,o,r,a,s){go.GraphObject.make;i=getAdjustedPoint(i,t,o,r),n=getAdjustedPoint(n,t,o,r);var l={key:t.data.key+"PointNode"+e,category:"PointNode",loc:go.Point.stringify(i)},h={key:t.data.key+"PointNode"+(e+1),category:"PointNode",loc:go.Point.stringify(n)},u={key:t.data.key+"DimensionLink",category:"DimensionLink",from:l.key,to:h.key,stroke:"gray",angle:o,wall:t.data.key,soloWallFlag:a},c=$$(go.Node,"Position",new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify)),f=$$(go.Node,"Position",new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify)),d=$$(go.Link,{locationSpot:go.Spot.TopLeft},$$(go.Shape,{stroke:"gray",strokeWidth:2,name:"SHAPE"}),$$(go.Shape,{toArrow:"OpenTriangle",stroke:"gray",strokeWidth:2}),$$(go.Shape,{fromArrow:"BackwardOpenTriangle",stroke:"gray",strokeWidth:2}),$$(go.TextBlock,{text:"sometext",segmentOffset:new go.Point(0,-10),font:"13px sans-serif"},new go.Binding("text","",function(t){var e=t.diagram;if(e){var i=null,n=null;if(e.pointNodes.iterator.each(function(e){e.data.key===t.data.from&&(i=e),e.data.key===t.data.to&&(n=e)}),null!==i){var o=i.location,r=n.location;return e.convertPixelsToUnits(Math.sqrt(o.distanceSquaredPoint(r))).toFixed(2)+e.model.modelData.unitsAbbreviation}return null}return null}).ofObject(),new go.Binding("angle","angle",function(t){return t>90&&t<270?(t+180)%360:t}),new go.Binding("segmentOffset","angle",function(t,e){var i=e.part.diagram;if(i){var n=i.findPartForKey(e.part.data.wall);return n.rotateObject.angle>135&&n.rotateObject.angle<315?new go.Point(0,10):new go.Point(0,-10)}return new go.Point(0,0)}).ofObject(),new go.Binding("font","",function(t){var e=t.diagram,i=null,n=null;if(e.pointNodes.iterator.each(function(e){e.data.key===t.data.from&&(i=e),e.data.key===t.data.to&&(n=e)}),null!==i){var o=i.location,r=n.location,a=Math.sqrt(o.distanceSquaredPoint(r));return a>40?"13px sans-serif":a<=40&&a>=20?"11px sans-serif":"9px sans-serif"}return"13px sans-serif"}).ofObject()));s.pointNodes.add(c),s.pointNodes.add(f),s.dimensionLinks.add(d),s.add(c),s.add(f),s.add(d),c.data=l,f.data=h,d.data=u,d.fromNode=c,d.toNode=f}function diagram_ruler(){function t(){goTools.viewportBounds;goTools.startTransaction("add scales"),e(),goTools.add(n),goTools.add(o),goTools.add(r),goTools.add(a),goTools.commitTransaction("add scales")}function e(){var t=goTools.viewportBounds;goTools.startTransaction("update scales"),n.location=new go.Point(t.x,t.y),n.graduatedMin=t.x,n.graduatedMax=t.x+t.width,n.elt(0).width=t.width,o.location=new go.Point(t.x,t.y),o.graduatedMin=t.y,o.graduatedMax=t.y+t.height,o.elt(0).height=t.height,goTools.commitTransaction("update scales")}function i(){var t=goTools.viewportBounds,e=goTools.lastInput.documentPoint;goTools.startTransaction("update indicators"),r.location=new go.Point(Math.max(e.x,t.x),t.y),a.location=new go.Point(t.x,Math.max(e.y,t.y)),goTools.commitTransaction("update indicators")}var n=$$(go.Node,"Graduated",{graduatedTickUnit:10,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1},$$(go.Shape,{geometryString:"M0 0 H400"}),$$(go.Shape,{geometryString:"M0 0 V3",interval:1}),$$(go.Shape,{geometryString:"M0 0 V15",interval:5}),$$(go.TextBlock,{font:"10px sans-serif",interval:5,alignmentFocus:go.Spot.TopLeft,segmentOffset:new go.Point(0,7)})),o=$$(go.Node,"Graduated",{graduatedTickUnit:10,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1},$$(go.Shape,{geometryString:"M0 0 V400"}),$$(go.Shape,{geometryString:"M0 0 V3",interval:1,alignmentFocus:go.Spot.Bottom}),$$(go.Shape,{geometryString:"M0 0 V15",interval:5,alignmentFocus:go.Spot.Bottom}),$$(go.TextBlock,{font:"10px sans-serif",segmentOrientation:go.Link.OrientOpposite,interval:5,alignmentFocus:go.Spot.BottomLeft,segmentOffset:new go.Point(0,-7)})),r=$$(go.Node,{pickable:!1,layerName:"Foreground",visible:!1,isInDocumentBounds:!1,isAnimated:!1,locationSpot:go.Spot.Top},$$(go.Shape,{geometryString:"M0 0 V15",strokeWidth:2,stroke:"red"})),a=$$(go.Node,{pickable:!1,layerName:"Foreground",visible:!1,isInDocumentBounds:!1,isAnimated:!1,locationSpot:go.Spot.Left},$$(go.Shape,{geometryString:"M0 0 H15",strokeWidth:2,stroke:"red"}));goTools.addDiagramListener("InitialLayoutCompleted",t),goTools.addDiagramListener("ViewportBoundsChanged",e),goTools.addDiagramListener("ViewportBoundsChanged",i),goTools.toolManager.doMouseMove=function(){go.ToolManager.prototype.doMouseMove.call(this),i()},goTools.toolManager.linkingTool.doMouseMove=function(){go.LinkingTool.prototype.doMouseMove.call(this),i()},goTools.toolManager.draggingTool.doMouseMove=function(){go.DraggingTool.prototype.doMouseMove.call(this),i()},goTools.toolManager.dragSelectingTool.doMouseMove=function(){go.DragSelectingTool.prototype.doMouseMove.call(this),i()},$("#tools_main_diagram").unbind("mouseover").bind("mouseover",function(){goTools.startTransaction("show indicators"),r.visible=!0,a.visible=!0,goTools.commitTransaction("show indicators")}),$("#tools_main_diagram").unbind("mouseout").bind("mouseout",function(){goTools.startTransaction("hide indicators"),r.visible=!1,a.visible=!1,goTools.commitTransaction("hide indicators")})}function GoToolsFilesSystem(t,e){this._goTools=t,this._UNSAVED_FILENAME="(Unsaved File)",this._DEFAULT_MODELDATA={units:"centimeters",unitsAbbreviation:"cm",gridSize:10,wallWidth:5,preferences:{showWallGuidelines:!0,showWallLengths:!0,showWallAngles:!0,showOnlySmallWallAngles:!0,showGrid:!0,gridSnap:!0}},this._state=e}function checkLocalStorage(){try{return window.localStorage.setItem("item","item"),window.localStorage.removeItem("item"),!0}catch(t){return!1}}function updateFileList(t){for(var e,i=document.getElementById(t);e=i.lastChild;)i.removeChild(e);for(key in window.localStorage){if(window.localStorage.getItem(key)){var n=document.createElement("option");n.value=key,n.text=key,i.add(n,null)}}}function openWindow(t,e){var i=document.getElementById(t);"hidden"===i.style.visibility&&(updateFileList(e),i.style.visibility="visible")}function getRadioValue(t){for(var e=document.getElementsByName(t),i=0;i<e.length;i++)if(e[i].checked)return e[i].value}function makeContextMenu(){go.GraphObject.make;return $$(go.Adornment,"Vertical",$$("ContextMenuButton",$$(go.TextBlock,"Make Group"),{click:function(t,e){function i(t){var e=t.containingGroup;t.containingGroup=null,null!=e&&(0===e.memberParts.count?n.remove(e):1===e.memberParts.count&&(e.memberParts.first().containingGroup=null))}var n=e.part.diagram;n.startTransaction("group selection");var o=n.selection,r=[];o.iterator.each(function(t){t instanceof go.Group?t.memberParts.iterator.each(function(t){r.push(t)}):r.push(t)});for(var a=0;a<r.length;a++)r[a].isSelected=!0;n.startTransaction("ungroup selection");var o=n.selection,s=[];o.iterator.each(function(t){t instanceof go.Group?s.push(t):i(t)});for(var r=[],a=0;a<s.length;a++)s[a].memberParts.iterator.each(function(t){r.push(t)});for(var a=0;a<r.length;a++)i(r[a]);var r=n.nodes,l=[];for(r.iterator.each(function(t){t instanceof go.Group&&0===t.memberParts.count&&"WallGroup"!==t.category&&l.push(t)}),a=0;a<l.length;a++)n.remove(l[a]);n.commitTransaction("ungroup selection"),n.commandHandler.groupSelection();var h=n.selection.first();n.model.setDataProperty(h.data,"caption","Group"),n.model.setDataProperty(h.data,"notes","");var r=n.nodes,l=[];for(r.iterator.each(function(t){t instanceof go.Group&&0===t.memberParts.count&&"WallGroup"!==t.category&&l.push(t)}),a=0;a<l.length;a++)n.remove(l[a]);n.clearSelection(),n.select(h),n.commitTransaction("group selection")}},new go.Binding("visible","visible",function(t,e){var i=e.part.diagram;if(i.selection.count<=1)return!1;var n=!0;return i.selection.iterator.each(function(t){"WallGroup"!==t.category&&"WindowNode"!==t.category&&"DoorNode"!==t.category||(n=!1)}),n}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Ungroup"),{click:function(t,e){function i(t){var e=t.containingGroup;t.containingGroup=null,null!=e&&(0===e.memberParts.count?n.remove(e):1===e.memberParts.count&&(e.memberParts.first().containingGroup=null))}var n=e.part.diagram;n.startTransaction("ungroup selection");var o=n.selection,r=[];o.iterator.each(function(t){t instanceof go.Group?r.push(t):i(t)});for(var a=[],s=0;s<r.length;s++)r[s].memberParts.iterator.each(function(t){a.push(t)});for(var s=0;s<a.length;s++)i(a[s]);var a=n.nodes,l=[];for(a.iterator.each(function(t){t instanceof go.Group&&0===t.memberParts.count&&"WallGroup"!==t.category&&l.push(t)}),s=0;s<l.length;s++)n.remove(l[s]);n.commitTransaction("ungroup selection")}},new go.Binding("visible","",function(t,e){var i=e.part.diagram;if(null!==i){var n=i.selection.first();return n instanceof go.Node&&null!=n.containingGroup&&"WallGroup"!=n.containingGroup.category||n instanceof go.Group&&""===n.category}return!1}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Copy"),{click:function(t,e){e.part.diagram.commandHandler.copySelection()}},new go.Binding("visible","",function(t,e){return null!==e.part.diagram&&e.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Cut"),{click:function(t,e){e.part.diagram.commandHandler.cutSelection()}},new go.Binding("visible","",function(t,e){return null!==e.part.diagram&&e.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Delete"),{click:function(t,e){e.part.diagram.commandHandler.deleteSelection()}},new go.Binding("visible","",function(t,e){return null!==e.part.diagram&&e.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Paste"),{click:function(t,e){e.part.diagram.commandHandler.pasteSelection(e.part.diagram.lastInput.documentPoint)}}),$$("ContextMenuButton",$$(go.TextBlock,"Show Selection Info"),{click:function(t){if(t.diagram.floorplanUI){"visible"!==document.getElementById(t.diagram.floorplanUI.state.windows.selectionInfoWindow.id).style.visibility&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")}}},new go.Binding("visible","",function(t,e){return null!==e.part.diagram&&e.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Flip Dimension Side"),{click:function(t,e){var i=e.part.diagram;if(null!==i){i.startTransaction("flip dimension link side");var n=[];i.selection.iterator.each(function(t){"WallGroup"===t.category&&n.push(t)});for(var o=0;o<n.length;o++){var r=n[o],a=r.data.startpoint.copy(),s=r.data.endpoint.copy();i.model.setDataProperty(r.data,"startpoint",s),i.model.setDataProperty(r.data,"endpoint",a),i.updateWall(r)}i.commitTransaction("flip dimension link side")}}},new go.Binding("visible","",function(t,e){if(null!==e.part.diagram){var i=e.part.diagram.selection;if(0===i.count)return!1;var n=!1;return i.iterator.each(function(t){"WallGroup"===t.category&&(n=!0)}),n}return!1}).ofObject()))}function getWallPartEndpoints(t){var e=t.location,i=t.data.width;if(null!==t.containingGroup)var n=t.containingGroup.rotateObject.angle;else var n=180;var o=new go.Point(e.x+i/2,e.y),r=new go.Point(e.x-i/2,e.y);o.offset(-e.x,-e.y).rotate(n).offset(e.x,e.y),r.offset(-e.x,-e.y).rotate(n).offset(e.x,e.y);var a=[];return a.push(o),a.push(r),a}function getWallPartStretch(t){var e=t.containingGroup,i=e.data.startpoint.copy(),n=e.data.endpoint.copy(),o=new go.Set(go.Point),r=new go.Set(go.Point);e.memberParts.iterator.each(function(e){if(e.data.key!==t.data.key)for(var i=getWallPartEndpoints(e),n=0;n<i.length;n++)i[n].x<t.location.x||i[n].y>t.location.y&&i[n].x===t.location.x?o.add(i[n]):r.add(i[n])}),parseFloat(i.x.toFixed(2))<parseFloat(t.location.x.toFixed(2))||i.y>t.location.y&&parseFloat(i.x.toFixed(2))===parseFloat(t.location.x.toFixed(2))?o.add(i):r.add(i),parseFloat(n.x.toFixed(2))<parseFloat(t.location.x.toFixed(2))||n.y>t.location.y&&parseFloat(n.x.toFixed(2))===parseFloat(t.location.x.toFixed(2))?o.add(n):r.add(n);var a,s=Number.MAX_VALUE;o.iterator.each(function(e){var i=Math.sqrt(e.distanceSquaredPoint(t.location));i<s&&(s=i,a=e)});var l,h=Number.MAX_VALUE;return r.iterator.each(function(e){var i=Math.sqrt(e.distanceSquaredPoint(t.location));i<h&&(h=i,l=e)}),{point1:a,point2:l}}function GoToolsPalette(t,e){go.Palette.call(this,t);go.GraphObject.make;this.paletteMap=new go.Map,this.contentAlignment=go.Spot.Center,this.nodeTemplateMap=e.nodeTemplateMap,this.toolManager.contextMenuTool.isEnabled=!1,this.initial(),this.changePalette("floor_planner"),e.palettes.push(this)}function GoToolsUI(t,e,i,n){this._goTools=t,this._name=e,this._goToolsName=i,this._state=n,this._furnitureNodeData=null}function Inspector(t,e,i){var n=document.getElementById(t);n.className="inspector",n.innerHTML="",this._div=n,this._diagram=e,this._inspectedProperties={},this.inspectedObject=null,this.includesOwnProperties=!0,this.declaredProperties={},this.inspectsSelection=!0,this.propertyModified=null,i!==undefined&&(i.includesOwnProperties!==undefined&&(this.includesOwnProperties=i.includesOwnProperties),i.properties!==undefined&&(this.declaredProperties=i.properties),i.inspectSelection!==undefined&&(this.inspectsSelection=i.inspectSelection),i.propertyModified!==undefined&&(this.propertyModified=i.propertyModified));var o=this;e.addModelChangedListener(function(t){t.isTransactionFinished&&o.inspectObject()}),this.inspectsSelection&&e.addDiagramListener("ChangedSelection",function(){o.inspectObject()})}function DebugInspector(t,e,i){function n(t){t.isTransactionFinished&&l.rebuildViews()}this.inspectedProps={},this.collection=null,this.tracked={},this.diagram=e,this.acceptButton=!!i.acceptButton,this.resetButton=!!i.resetButton,this.acceptFocus=!!i.acceptFocus,this.whenSelected=i.whenSelected===undefined||!!i.whenSelected,this.inspectPredicate=i.inspectPredicate||null,this.propertyPredicate=i.propertyPredicate||null,this.propertyNames=i.propertyNames||null;var o=document.getElementById(t);o.className="inspector-container";var r=document.createElement("select");o.appendChild(r);var a=document.createElement("div");a.className="inspector",o.appendChild(a);var s=document.createElement("div");s.className="inspector-button-container",o.appendChild(s),this.div=a,this.acceptResetDiv=s,this.chooser=r,this.lastIndex=0;var l=this;if(e.addModelChangedListener?e.addModelChangedListener(n):e.model.addChangedListener(n),this.whenSelected){var h=this.inspectPredicate;e.addDiagramListener("ChangedSelection",function(){var t=[],i=e.selection.first();if(null===i)return void l.toggleVisibility(!1);null!==l.propertyNames?l.populatePropertyNames(t,h,i):l.populateDefault(t,h,i),r.innerHTML="";for(var n=0;n<t.length;n++){var o=document.createElement("option");o.value=n,o.text=t[n]instanceof go.GraphObject?t[n].toString():"data",r.appendChild(o)}r.onchange=function(){var e=this.selectedIndex;null!==l.propertyNames?l.change(i):l.change(t[e]),l.lastIndex=e},l.toggleVisibility(!0);var a=l.lastIndex<=t.length-1;null!==l.propertyNames?l.change(i):l.change(t[a?l.lastIndex:0]),a&&(r.value=l.lastIndex)})}this.acceptFocus&&(o.tabIndex=3,o.addEventListener("focusout",function(){l.setAllProperties()})),this.toggleVisibility(!1)}function View(t,e){e=e||{},this.options=e,this.getter=e.getter||View.defaultGetter,this.setter=e.setter||View.defaultSetter,this.inialized=!1,this.visible=!0,this.dom=null,this.originalValue=null,this.object=t}function ExtendedBrush(t){0===arguments.length?go.Brush.call(this):go.Brush.call(this,t)}function getFontAwesomeList(){for(var t=parseInt("f000",16),e=parseInt("f2e0",16),i=[],n=[parseInt("f00f",16),parseInt("f01f",16),parseInt("f03f",16),parseInt("f04f",16),parseInt("f05f",16),parseInt("f06f",16),parseInt("f07f",16),parseInt("f08f",16),parseInt("f09f",16),parseInt("f0af",16),parseInt("f0bf",16),parseInt("f0cf",16),parseInt("f0df",16),parseInt("f0ef",16),parseInt("f0ff",16),parseInt("f10f",16),parseInt("f11f",16),parseInt("f12f",16),parseInt("f13f",16),parseInt("f14f",16),parseInt("f15f",16),parseInt("f16f",16),parseInt("f17f",16),parseInt("f18f",16),parseInt("f19f",16),parseInt("f1af",16),parseInt("f1bf",16),parseInt("f1cf",16),parseInt("f1df",16),parseInt("f1ef",16),parseInt("f1ff",16),parseInt("f20f",16),parseInt("f21f",16),parseInt("f22f",16),parseInt("f23f",16),parseInt("f24f",16),parseInt("f25f",16),parseInt("f26f",16),parseInt("f27f",16),parseInt("f28f",16),parseInt("f29f",16),parseInt("f2af",16),parseInt("f2bf",16),parseInt("f2cf",16),parseInt("f2df",16),parseInt("f116",16),parseInt("f117",16),parseInt("f020",16),parseInt("f220",16),parseInt("f22e",16),parseInt("f0b3",16),parseInt("f0b4",16),parseInt("f0b5",16),parseInt("f0b6",16),parseInt("f0b7",16),parseInt("f0b8",16),parseInt("f0b9",16),parseInt("f0ba",16),parseInt("f0bb",16),parseInt("f0bc",16),parseInt("f0bd",16),parseInt("f0be",16)],o=t;o<=e;o++)if(!(n.indexOf(o)>-1)){var r='{"ustr": "\\u'+o.toString(16)+'"}',a=JSON.parse(r);i.push({text:a.ustr,category:"font-awesome"})}return i}function foo(t){return t="000"+t,t.substring(t.length-3,t.length)}function getGlyphiconsList(){for(var t=parseInt("001",10),e=parseInt("260",10),i=[{text:"*",category:"glyphicons"},{text:"+",category:"glyphicons"},{text:"\u20ac",category:"glyphicons"},{text:"\u2212",category:"glyphicons"},{text:"\u2601",category:"glyphicons"},{text:"\u2709",category:"glyphicons"},{text:"\u270f",category:"glyphicons"},{text:"\xa5",category:"glyphicons"},{text:"\u20bd",category:"glyphicons"},{text:"\u231b",category:"glyphicons"},{text:"\u26fa",category:"glyphicons"},{text:"\uf8ff",category:"glyphicons"}],n=t;n<=e;n++){var o=n-t+1;if(4!=o&&61!=o&&98!=o&&99!=o&&100!=o&&147!=o&&196!=o&&207!=o&&208!=o&&217!=o&&220!=o&&222!=o&&228!=o&&229!=o){var r='{"ustr": "\\ue'+foo(n)+'"}',a=JSON.parse(r);i.push({text:a.ustr,category:"glyphicons"})}}return i}function ContinuousForceDirectedLayout(){go.ForceDirectedLayout.call(this),this._isObserving=!1}function FishboneLayout(){go.TreeLayout.call(this),this.alignment=go.TreeLayout.AlignmentBusBranching,this.setsPortSpot=!1,this.setsChildPortSpot=!1}function FishboneLink(){go.Link.call(this)}function GenogramLayout(){go.LayeredDigraphLayout.call(this),this.initializeOption=go.LayeredDigraphLayout.InitDepthFirstIn,this.spouseSpacing=30}function SankeyLayout(){go.LayeredDigraphLayout.call(this)}function getAutoHeightForNode(t){for(var e=0,i=t.findLinksInto();i.next();){var n=i.value;e+=n.computeThickness()}for(var o=0,i=t.findLinksOutOf();i.next();){var n=i.value;o+=n.computeThickness()}var r=Math.max(e,o);return r<10&&(r=10),r}function TimelineLayout(){go.Layout.call(this)}function WheelLayout(){go.CircularLayout.call(this)}function BalloonLink(){go.Link.call(this),this.layerName="Background",this.base=10}function BarLink(){go.Link.call(this)}function DimensioningLink(){go.Link.call(this),this.isLayoutPositioned=!1,this.isTreeLink=!1,this.routing=go.Link.Orthogonal,this._direction=0,this._extension=30,this._inset=10,this._gap=10}function convertTimeToY(t){return t*MessageSpacing+LinePrefix}function convertYToTime(t){return(t-LinePrefix)/MessageSpacing}function MessageLink(){go.Link.call(this),this.time=0}function ensureLifelineHeights(){for(var t=myDiagram.model.nodeDataArray,e=-1,i=0;i<t.length;i++){var n=t[i];n.isGroup||(e=Math.max(e,n.start+n.duration))}if(e>0)for(var i=0;i<t.length;i++){var o=t[i];o.isGroup&&(e>o.duration&&myDiagram.model.setDataProperty(o,"duration",e))}}function MessagingTool(){go.LinkingTool.call(this);var t=go.GraphObject.make;this.temporaryLink=t(MessageLink,t(go.Shape,"Rectangle",{stroke:"magenta",strokeWidth:2}),t(go.Shape,{toArrow:"OpenTriangle",stroke:"magenta"}))}!function(t){function e(t,e,i){_h.mc(this),this.XB=t,this.Qb=e,this.WG=i}function i(){this.VB=[]}function n(){}function o(t){void 0===t&&(t=42),this.seed=t,this.ny=48271,this.Pu=2147483647,this.HB=this.Pu/this.ny,this.DG=this.Pu%this.ny,this.CG=1/this.Pu,this.random()}function r(){}function a(t){this.key=-1,this.value=t}function s(t,e){this.jl=t,this.kl=e,this.Ru=!1}function l(t){this.vc=t,this.Wh=null,t.Ob=null,this.Ta=t.C,this.uc=-1}function h(t){this.vc=t,t.Li=null,this.Ta=t.C,this.uc=t.n.length}function u(t){_h.mc(this),this.Q=!1,this.n=[],this.C=0,this.Li=this.Ob=null,void 0===t||null===t?this.ma=null:"string"==typeof t?"object"===t||"string"===t||"number"===t||"boolean"===t||"function"===t?this.ma=t:_h.Ea(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof t?this.ma=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:_h.Ea(t,"null, a primitive type name, or a class type","List constructor: type")}function c(t){this.Yh=t,t.Ob=null,this.Ta=t.C,this.Va=null}function f(t){_h.mc(this),this.Q=!1,void 0===t||null===t?this.ma=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.ma=t:_h.Ea(t,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof t?this.ma=t===Object?"object":t===String?"string":t===Number?"number":t:_h.Ea(t,"null, a primitive type name, or a class type","Set constructor: type"),this.od={},this.nd=0,this.Ob=null,this.C=0,this.Rh=this.Ca=null}function d(t){this.Fa=t,this.Ta=t.C,this.Va=null}function p(t){_h.mc(this),this.Q=!0,this.Fa=t}function g(t){this.Fa=t,t.Mi=null,this.Ta=t.C,this.Va=null}function y(t,e){this.key=t,this.value=e,this.jp=this.Xa=null}function m(t){this.Fa=t,t.Ob=null,this.Ta=t.C,this.Va=null}function v(t,e){_h.mc(this),this.Q=!1,
void 0===t||null===t?this.Qh=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.Qh=t:_h.Ea(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof t?this.Qh=t===Object?"object":t===String?"string":t===Number?"number":t:_h.Ea(t,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===e||null===e?this.pt=null:"string"==typeof e?"object"===e||"string"===e||"boolean"===e||"number"===e||"function"===e?this.pt=e:_h.Ea(e,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof e?this.pt=e===Object?"object":e===String?"string":e===Number?"number":e===Boolean?"boolean":e===Function?"function":e:_h.Ea(e,"null, a primitive type name, or a class type","Map constructor: valtype"),this.od={},this.nd=0,this.Mi=this.Ob=null,this.C=0,this.Rh=this.Ca=null}function b(t,e){void 0===t?this.y=this.x=0:(this.x=t,this.y=e)}function x(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}function w(t,e){return e.li(t),t}function k(t,e){void 0===t?this.height=this.width=0:(this.width=t,this.height=e)}function S(t,e,i,n){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof b?e instanceof b?(this.x=Math.min(t.x,e.x),this.y=Math.min(t.y,e.y),this.width=Math.abs(t.x-e.x),this.height=Math.abs(t.y-e.y)):e instanceof k?(this.x=t.x,this.y=t.y,this.width=e.width,this.height=e.height):_h.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=e,this.width=i,this.height=n)}function M(t,e,i){t.width=e,t.height=i}function P(t,e){return J(t.x,e.x)&&J(t.y,e.y)&&J(t.width,e.width)&&J(t.height,e.height)}function T(t,e,i,n,o){var r=t.width;return i+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=i+o),i=t.height,e+n<=-i?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}function L(t,e,i,n,o){var r=Math.max(t.x,e),a=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+o),t.x=r,t.y=a,t.width=Math.max(0,e-r),t.height=Math.max(0,i-a),t}function N(t,e){var i=t.width,n=e.width+10+10,o=t.x,r=e.x-10;return!(o>n+r||r>i+o)&&(i=t.height,n=e.height+10+10,o=t.y,r=e.y-10,!(o>n+r||r>i+o))}function C(t,e,i,n,o){var r=Math.min(t.x,e),a=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+o),t.x=r,t.y=a,t.width=e-r,t.height=i-a,t}function A(t,e,i,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===i?(n=e,this.top=t,this.right=e,this.bottom=t,this.left=n):void 0!==n?(this.top=t,this.right=e,this.bottom=i,this.left=n):_h.k("Invalid arguments to Margin constructor")}function B(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function D(t,e,i,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n)}function F(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function j(){this.Tb=[1,0,0,1,0,0]}function E(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.pE=[],this.pattern=null}function I(t,e,i){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.Jn=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.Jp=!1,this.Bg=this.Ys=this.Xs=0,this.document=e||document,this.EE=i,this.Ax=null,this.path=[],this.uh=new j,this.stack=[],this.wf=[],this.$w=t,this.bJ="http://www.w3.org/2000/svg",this.width=this.$w.width,this.height=this.$w.height,this.gm=O(this,"svg",{width:this.width+"px",height:this.height+"px",UL:"0 0 "+this.$w.width+" "+this.$w.height}),this.gm.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.gm.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),H(this,1,0,0,1,0,0),t=_h.mm++,e=O(this,"clipPath",{id:"mainClip"+t}),e.appendChild(O(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.gm.appendChild(e),this.wf[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")}function O(t,e,i,n){if(t=t.document.createElementNS(t.bJ,e),_h.Qa(i))for(var o in i)t.setAttributeNS("href"===o?"http://www.w3.org/1999/xlink":"",o,i[o]);return void 0!==n&&(t.textContent=n),t}function z(t,e,i,n,o){1!==t.globalAlpha&&(i.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof E?i.fill=G(t,t.fillStyle):(/^rgba\(/.test(t.fillStyle)&&(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),i.fill="rgb("+e[1]+","+e[2]+","+e[3]+")",i["fill-opacity"]=e[4]),i.fill=t.fillStyle),i.stroke="none"):"stroke"===e&&(i.fill="none",t.strokeStyle instanceof E?i.stroke=G(t,t.strokeStyle):(/^rgba\(/.test(t.strokeStyle)&&(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),i.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",i["stroke-opacity"]=e[4]),i.stroke=t.strokeStyle),i["stroke-width"]=t.lineWidth,i["stroke-linecap"]=t.lineCap,i["stroke-linejoin"]=t.lineJoin,i["stroke-miterlimit"]=t.miterLimit),t=n.Tb,t="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")",void 0!==o&&(t+=o),i.transform=t}function G(t,e){var i,n="GRAD"+_h.mm++;if("linear"===e.type)i=O(t,"linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if("radial"===e.type)i=O(t,"radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else{if("pattern"!==e.type)throw Error("invalid gradient");var o=e.pattern;i={width:o.width,height:o.height,id:n,patternUnits:"userSpaceOnUse"};var r="";o instanceof HTMLCanvasElement&&(r=o.toDataURL()),o instanceof HTMLImageElement&&(r=o.src),o={x:0,y:0,width:o.width,height:o.height,href:r},i=O(t,"pattern",i),i.appendChild(O(t,"image",o))}for(var o=e.pE,r=o.length,a=[],s=0;s<r;s++){var l=o[s],h=l.color,l={offset:l.offset,"stop-color":h};/^rgba\(/.test(h)&&(h=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(h),l["stop-color"]="rgb("+h[1]+","+h[2]+","+h[3]+")",l["stop-opacity"]=h[4]),a.push(l)}for(a.sort(function(t,e){return t.offset>e.offset?1:-1}),s=0;s<r;s++)i.appendChild(O(t,"stop",a[s]));return t.gm.appendChild(i),"url(#"+n+")"}function R(t,e,i,n){i={x:i[0],y:i[1],width:i[2],height:i[3]},z(t,e,i,n),t.addElement("rect",i)}function q(t,e,i,n){for(var o=[],r=0;r<i.length;r++){var a=_h.Il(i[r]),s=[a.shift()];if("A"===s[0])s.push(a.shift()+","+a.shift(),a.shift(),a.shift()+","+a.shift(),a.shift()+","+a.shift());else for(;a.length;)s.push(a.shift()+","+a.shift());o.push(s.join(" "))}i={d:o.join(" ")},z(t,e,i,n),"clipPath"===e?(e="CLIP"+_h.mm++,n=O(t,"clipPath",{id:e}),n.appendChild(O(t,"path",i)),t.gm.appendChild(n),0<t.wf.length&&t.wf[t.wf.length-1].setAttributeNS(null,"clip-path","url(#"+e+")")):t.addElement("path",i)}function W(t,e,i,n,o,r,a){var s=Math.abs(o-r);if(o!==r){var l=e+n*Math.cos(r);r=i+n*Math.sin(r),s>=2*Math.PI?(W(t,e,i,n,o,o+Math.PI,a),W(t,e,i,n,o+Math.PI,o+2*Math.PI,a),t.path.push(["M",l,r])):(e+=n*Math.cos(o),i+=n*Math.sin(o),s=180*s/Math.PI,o=a?0:1,a=180<=s==!!a?0:1,0!==t.path.length?t.path.push(["L",e,i]):t.path.push(["M",e,i]),t.path.push(["A",n,n,s,a,o,l,r]))}}function H(t,e,i,n,o,r,a){var s=new j;s.Tb=[e,i,n,o,r,a],e={},z(t,"g",e,s),s=t.addElement("g",e),t.wf.push(s)}function V(t,e){this.ownerDocument=void 0===e?document:e;var i=this.ownerDocument.createElement("canvas");i.tabIndex=0,this.Hd=i,this.xk=new U(i),i.Z=t,Object.seal(this)}function U(t){t.getContext&&t.getContext("2d")||_h.k("Browser does not support HTML Canvas Element"),this.ta=t.getContext("2d"),this.Ay=this.Cy=this.By="",this.Sq=!1,this.Bg=this.Ys=this.Xs=0,Object.seal(this)}function _(t){if(0>=t)return 0;var e=ec;if(null===e){for(var e=[],i=0;2e3>=i;i++)e[i]=Math.sqrt(i);ec=e}return 1>t?(i=1/t,2e3>=i?1/e[0|i]:Math.sqrt(t)):2e3>=t?e[0|t]:Math.sqrt(t)}function K(t,e){var i=t-e;return.5>i&&-.5<i}function J(t,e){var i=t-e;return 5e-8>i&&-5e-8<i}function Y(t,e,i,n,o,r,a){0>=o&&(o=1e-6);var s=0,l=0,h=0,u=0;if(t<i?(l=t,s=i):(l=i,s=t),e<n?(u=e,h=n):(u=n,h=e),t===i)return u<=a&&a<=h&&t-o<=r&&r<=t+o;if(e===n)return l<=r&&r<=s&&e-o<=a&&a<=e+o;if(s+=o,(l-=o)<=r&&r<=s&&(h+=o,(u-=o)<=a&&a<=h))if(s-l>h-u){if(!(t-i>o||i-t>o))return!0;if((r=(n-e)/(i-t)*(r-t)+e)-o<=a&&a<=r+o)return!0}else{if(!(e-n>o||n-e>o))return!0;if((a=(i-t)/(n-e)*(a-e)+t)-o<=r&&r<=a+o)return!0}return!1}function $(t,e,i,n,o,r,a,s,l,h,u,c){if(Y(t,e,a,s,c,i,n)&&Y(t,e,a,s,c,o,r))return Y(t,e,a,s,c,h,u);var f=(t+i)/2,d=(e+n)/2,p=(i+o)/2,g=(n+r)/2;o=(o+a)/2,r=(r+s)/2,n=(f+p)/2,i=(d+g)/2;var p=(p+o)/2,g=(g+r)/2,y=(n+p)/2,m=(i+g)/2;return $(t,e,f,d,n,i,y,m,l,h,u,c)||$(y,m,p,g,o,r,a,s,l,h,u,c)}function X(t,e,i,n,o,r,a,s,l,h){if(Y(t,e,a,s,l,i,n)&&Y(t,e,a,s,l,o,r))C(h,t,e,0,0),C(h,a,s,0,0);else{var u=(t+i)/2,c=(e+n)/2,f=(i+o)/2,d=(n+r)/2;o=(o+a)/2,r=(r+s)/2,n=(u+f)/2,i=(c+d)/2;var f=(f+o)/2,d=(d+r)/2,p=(n+f)/2,g=(i+d)/2;X(t,e,u,c,n,i,p,g,l,h),X(p,g,f,d,o,r,a,s,l,h)}}function Q(t,e,i,n,o,r,a,s,l,h){if(Y(t,e,a,s,l,i,n)&&Y(t,e,a,s,l,o,r))0===h.length&&(h.push(t),h.push(e)),h.push(a),h.push(s);else{var u=(t+i)/2,c=(e+n)/2,f=(i+o)/2,d=(n+r)/2;o=(o+a)/2,r=(r+s)/2,n=(u+f)/2,i=(c+d)/2;var f=(f+o)/2,d=(d+r)/2,p=(n+f)/2,g=(i+d)/2;Q(t,e,u,c,n,i,p,g,l,h),Q(p,g,f,d,o,r,a,s,l,h)}}function Z(t,e,i,n,o,r,a,s,l,h,u,c,f,d){var p=1-l;t=t*p+i*l,e=e*p+n*l,i=i*p+o*l,n=n*p+r*l,o=o*p+a*l,r=r*p+s*l,s=t*p+i*l,a=e*p+n*l,i=i*p+o*l,n=n*p+r*l,h.x=t,h.y=e,u.x=s,u.y=a,c.x=s*p+i*l,c.y=a*p+n*l,f.x=i,f.y=n,d.x=o,d.y=r}function tt(t,e,i,n,o,r,a,s,l,h){if(Y(t,e,o,r,h,i,n))return Y(t,e,o,r,h,s,l);var u=(t+i)/2,c=(e+n)/2;i=(i+o)/2,n=(n+r)/2;var f=(u+i)/2,d=(c+n)/2;return tt(t,e,u,c,f,d,a,s,l,h)||tt(f,d,i,n,o,r,a,s,l,h)}function et(t,e,i,n,o,r,a,s){if(Y(t,e,o,r,a,i,n))C(s,t,e,0,0),C(s,o,r,0,0);else{var l=(t+i)/2,h=(e+n)/2;i=(i+o)/2,n=(n+r)/2;var u=(l+i)/2,c=(h+n)/2;et(t,e,l,h,u,c,a,s),et(u,c,i,n,o,r,a,s)}}function it(t,e,i,n,o,r,a,s){if(Y(t,e,o,r,a,i,n))0===s.length&&(s.push(t),s.push(e)),s.push(o),s.push(r);else{var l=(t+i)/2,h=(e+n)/2;i=(i+o)/2,n=(n+r)/2;var u=(l+i)/2,c=(h+n)/2;it(t,e,l,h,u,c,a,s),it(u,c,i,n,o,r,a,s)}}function nt(t,e,i,n,o,r,a,s,l,h,u,c,f,d){if(0>=f&&(f=1e-6),Y(t,e,a,s,f,i,n)&&Y(t,e,a,s,f,o,r)){var p=(t-a)*(h-c)-(e-s)*(l-u);if(0===p)return!1;if(f=((t*s-e*a)*(l-u)-(t-a)*(l*c-h*u))/p,p=((t*s-e*a)*(h-c)-(e-s)*(l*c-h*u))/p,(l>u?l-u:u-l)<(h>c?h-c:c-h)){if(a=l=0,e<s?(l=e,a=s):(l=s,a=e),p<l||p>a)return!1}else if(t<a?l=t:(l=a,a=t),f<l||f>a)return!1;return d.x=f,d.y=p,!0}var p=(t+i)/2,g=(e+n)/2;i=(i+o)/2,n=(n+r)/2,o=(o+a)/2,r=(r+s)/2;var y=(p+i)/2,m=(g+n)/2;i=(i+o)/2,n=(n+r)/2;var v=(y+i)/2,b=(m+n)/2,x=(u-l)*(u-l)+(c-h)*(c-h),w=!1;return nt(t,e,p,g,y,m,v,b,l,h,u,c,f,d)&&(e=(d.x-l)*(d.x-l)+(d.y-h)*(d.y-h))<x&&(x=e,w=!0),t=d.x,p=d.y,nt(v,b,i,n,o,r,a,s,l,h,u,c,f,d)&&(e=(d.x-l)*(d.x-l)+(d.y-h)*(d.y-h),e<x?w=!0:(d.x=t,d.y=p)),w}function ot(t,e,i,n,o,r,a,s,l,h,u,c,f){var d=0;if(0>=f&&(f=1e-6),Y(t,e,a,s,f,i,n)&&Y(t,e,a,s,f,o,r)){if(0===(f=(t-a)*(h-c)-(e-s)*(l-u)))return d;var p=((t*s-e*a)*(l-u)-(t-a)*(l*c-h*u))/f,g=((t*s-e*a)*(h-c)-(e-s)*(l*c-h*u))/f;if(p>=u)return d;if((l>u?l-u:u-l)<(h>c?h-c:c-h)){if(t=l=0,e<s?(l=e,t=s):(l=s,t=e),g<l||g>t)return d}else if(t<a?(l=t,t=a):l=a,p<l||p>t)return d;0<f?d++:0>f&&d--}else{var p=(t+i)/2,g=(e+n)/2,y=(i+o)/2,m=(n+r)/2;o=(o+a)/2,r=(r+s)/2,n=(p+y)/2,i=(g+m)/2;var y=(y+o)/2,m=(m+r)/2,v=(n+y)/2,b=(i+m)/2,d=d+ot(t,e,p,g,n,i,v,b,l,h,u,c,f),d=d+ot(v,b,y,m,o,r,a,s,l,h,u,c,f)}return d}function rt(t,e,i,n,o,r,a){if(J(t,i)){var s=0;return i=0,(e<n?(s=e,i=n):(s=n,i=e),(n=r)<s)?(a.x=t,a.y=s,!1):n>i?(a.x=t,a.y=i,!1):(a.x=t,a.y=n,!0)}return J(e,n)?(t<i?s=t:(s=i,i=t),(n=o)<s?(a.x=s,a.y=e,!1):n>i?(a.x=i,a.y=e,!1):(a.x=n,a.y=e,!0)):-5e-6>(s=((t-o)*(t-i)+(e-r)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)))?(a.x=t,a.y=e,!1):1.000005<s?(a.x=i,a.y=n,!1):(a.x=t+s*(i-t),a.y=e+s*(n-e),!0)}function at(t,e,i,n,o,r,a,s,l){return K(t,i)&&K(e,n)?(l.x=t,l.y=e,!1):J(o,a)?J(t,i)?(rt(t,e,i,n,o,r,l),!1):(r=(n-e)/(i-t)*(o-t)+e,rt(t,e,i,n,o,r,l)):(s=(s-r)/(a-o),J(t,i)?(r=s*(t-o)+r,i=a=0,e<n?(a=e,i=n):(a=n,i=e),r<a?(l.x=t,l.y=a,!1):r>i?(l.x=t,l.y=i,!1):(l.x=t,l.y=r,!0)):(a=(n-e)/(i-t),J(s,a)?(rt(t,e,i,n,o,r,l),!1):(o=(a*t-s*o+r-e)/(a-s),J(a,0)?(t<i?a=t:(a=i,i=t),o<a?(l.x=a,l.y=e,!1):o>i?(l.x=i,l.y=e,!1):(l.x=o,l.y=e,!0)):(r=a*(o-t)+e,rt(t,e,i,n,o,r,l)))))}function st(t,e,i,n,o,r,a,s,l){var h=1e21,u=t,c=e;if(at(t,e,t,n,o,r,a,s,l)){var f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r);f<h&&(h=f,u=l.x,c=l.y)}return at(i,e,i,n,o,r,a,s,l)&&(f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r))<h&&(h=f,u=l.x,c=l.y),at(t,e,i,e,o,r,a,s,l)&&(f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r))<h&&(h=f,u=l.x,c=l.y),at(t,n,i,n,o,r,a,s,l)&&(f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r))<h&&(h=f,u=l.x,c=l.y),l.x=u,l.y=c,1e21>h}function lt(t,e,i,n,o,r,a,s,l){i=t-i;var h=o-a,u=a=0;return 0===i||0===h?0===i?(s=(r-s)/h,a=t,u=s*a+(r-s*o)):(n=(e-n)/i,a=o,u=n*a+(e-n*t)):(n=(e-n)/i,s=(r-s)/h,t=e-n*t,a=(r-s*o-t)/(n-s),u=n*a+t),l.m(a,u),l}function ht(t,e,i){var n=e.x,o=e.y,r=i.x,a=i.y,s=t.left,l=t.right,h=t.top,u=t.bottom;return n===r?(r=t=0,o<a?(t=o,r=a):(t=a,r=o),s<=n&&n<=l&&t<=u&&r>=h):o===a?(n<r?t=n:(t=r,r=n),h<=o&&o<=u&&t<=l&&r>=s):!!(t.Ha(e)||t.Ha(i)||ut(s,h,l,h,n,o,r,a)||ut(l,h,l,u,n,o,r,a)||ut(l,u,s,u,n,o,r,a)||ut(s,u,s,h,n,o,r,a))}function ut(t,e,i,n,o,r,a,s){return 0>=ct(t,e,i,n,o,r)*ct(t,e,i,n,a,s)&&0>=ct(o,r,a,s,t,e)*ct(o,r,a,s,i,n)}function ct(t,e,i,n,o,r){return i-=t,n-=e,t=o-t,e=r-e,r=t*n-e*i,0===r&&0<(r=t*i+e*n)&&0>(r=(t-i)*i+(e-n)*n)&&(r=0),0>r?-1:0<r?1:0}function ft(t){return 0>t&&(t+=360),360<=t&&(t-=360),t}function dt(t,e,i,n){var o=Math.PI;n||(e*=o/180,i*=o/180),n=e<i?1:-1;var r=[],a=o/2,s=e;for(e=Math.min(2*o,Math.abs(i-e));1e-5<e;){i=s+n*Math.min(e,a);var o=(i-s)/2,l=t*Math.cos(o),h=t*Math.sin(o),u=-h,c=l*l+u*u,f=c+l*l+u*h,c=4/3*(Math.sqrt(2*c*f)-f)/(l*h-u*l),h=l-c*u,l=u+c*l,u=-l,c=o+s,o=Math.cos(c),c=Math.sin(c);r.push([0+t*Math.cos(s),0+t*Math.sin(s),0+h*o-l*c,0+h*c+l*o,0+h*o-u*c,0+h*c+u*o,0+t*Math.cos(i),0+t*Math.sin(i)]),e-=Math.abs(i-s),s=i}return r}function pt(t,e,i,n,o,r,a){i=Math.floor((t-i)/o)*o+i,n=Math.floor((e-n)/r)*r+n;var s=i;i+o-t<o/2&&(s=i+o),t=n,n+r-e<r/2&&(t=n+r),a.m(s,t)}function gt(t,e){var i=Math.max(t,e),n=Math.min(t,e),o=1,r=1;do{o=i%n,i=r=n,n=o}while(0<o);return r}function yt(t,e,i,n){var o=0>i,r=0>n,a=0,s=a=0;t<e?(a=1,s=0):(a=0,s=1);var l=0,h=0,u=0,c=0,l=0===a?t:e,u=0===a?i:n;if((0===a?o:r)&&(u=-u),a=s,h=0===a?t:e,c=0===a?i:n,(0===a?o:r)&&(c=-c),t=t=0,0<c)if(0<u){for(e=l*l,t=h*h,l*=u,i=h*c,n=-t+i,o=-t+Math.sqrt(l*l+i*i),h=n,r=0;9999999999>r&&((h=.5*(n+o))!==n&&h!==o);++r)if(s=l/(h+e),a=i/(h+t),0<(s=s*s+a*a-1))n=h;else{if(!(0>s))break;o=h}u=e*u/(h+e)-u,c=t*c/(h+t)-c,t=Math.sqrt(u*u+c*c)}else t=Math.abs(c-h);else c=l*l-h*h,t=l*u,t<c?(c=t/c,t=h*Math.sqrt(Math.abs(1-c*c)),u=l*c-u,t=Math.sqrt(u*u+t*t)):t=Math.abs(u-l);return t}function mt(t){1<arguments.length&&_h.k("Geometry constructor can take at most one optional argument, the Geometry type."),_h.mc(this),this.Q=!1,void 0===t&&(t=rc),this.ma=t,this.Gb=this.yb=this.Gc=this.xc=0,this.Oj=new u(Pt),this.wv=this.Oj.C,this.gv=(new S).freeze(),this.bb=!0,this.Hq=this.lo=null,this.Iq=NaN,this.di=iu,this.ei=uu,this.Po=this.Ro=NaN,this.Ci=zf}function vt(t,e){if(t.type!==ic||e.type!==rc)return!1;if(1===e.dc.count){var i=e.dc.da(0);if(1===i.vb.count&&K(t.ia,i.ia)&&K(t.ga,i.ga)&&(i=i.vb.da(0),i.type===hc&&K(t.D,i.D)&&K(t.F,i.F)))return!0}return!1}function bt(t,e){for(var i=t.length,n=_h.K(),o=0;o<i;o++){var r=t[o];n.x=r[0],n.y=r[1],e.nb(n),r[0]=n.x,r[1]=n.y,n.x=r[2],n.y=r[3],e.nb(n),r[2]=n.x,r[3]=n.y,n.x=r[4],n.y=r[5],e.nb(n),r[4]=n.x,r[5]=n.y,n.x=r[6],n.y=r[7],e.nb(n),r[6]=n.x,r[7]=n.y}_h.v(n)}function xt(t,e,i){switch(t.type){case ic:case nc:case oc:i?e.m(t.xc,t.Gc,0,0):C(e,t.xc,t.Gc,0,0),C(e,t.yb,t.Gb,0,0);break;case rc:var n=t.dc;t=n.n;for(var n=n.length,o=0;o<n;o++){var r=t[o];i&&0===o?e.m(r.ia,r.ga,0,0):C(e,r.ia,r.ga,0,0);for(var a=r.vb.n,s=a.length,l=r.ia,h=r.ga,u=0;u<s;u++){var c=a[u];switch(c.type){case hc:case lc:l=c.D,h=c.F,C(e,l,h,0,0);break;case uc:X(l,h,c.sc,c.Pc,c.Ah,c.Bh,c.D,c.F,.5,e),l=c.D,h=c.F;break;case cc:et(l,h,c.sc,c.Pc,c.D,c.F,.5,e),l=c.D,h=c.F;break;case fc:case dc:var f=c.type===fc?Lt(c,r):Nt(c,r,l,h),d=f.length;if(0===d){l=c.ka,h=c.ra,C(e,l,h,0,0);break}for(var c=null,p=0;p<d;p++)c=f[p],X(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.5,e);null!==c&&(l=c[6],h=c[7]);break;default:_h.k("Unknown Segment type: "+c.type)}}}break;default:_h.k("Unknown Geometry type: "+t.type)}}function wt(t,e,i,n,o,r,a,s){if(Y(o,r,a,s,.05,t,e))return NaN;var l=(t-i)*(r-s);if(0===l)return 0;var h=((t*n-e*i)*(o-a)-(t-i)*(o*s-r*a))/l;if(e=(t*n-e*i)*(r-s)/l,h>=t)return 0;if((o>a?o-a:a-o)<(r>s?r-s:s-r)){if(o=t=0,r<s?(t=r,o=s):(t=s,o=r),e<t||e>o)return 0}else if(o<a?(t=o,o=a):t=a,h<t||h>o)return 0;return 0<l?1:-1}function kt(t,e,i,n){t=t.dc.n;for(var o=t.length,r=0;r<o;r++)if(t[r].Ha(e,i,n))return!0;return!1}function St(t){if(null===t.lo){t.vx()&&t.ly();var e=t.lo=[],i=t.Hq=[],n=[],o=[];if(t.type===ic)n.push(t.ia),n.push(t.ga),n.push(t.D),n.push(t.F),e.push(n),o.push(Math.sqrt((t.ia-t.D)*(t.ia-t.D)+(t.ga-t.F)*(t.ga-t.F))),i.push(o);else if(t.type===nc)n.push(t.ia),n.push(t.ga),n.push(t.D),n.push(t.ga),n.push(t.D),n.push(t.F),n.push(t.ia),n.push(t.F),n.push(t.ia),n.push(t.ga),e.push(n),o.push(Math.abs(t.ia-t.D)),o.push(Math.abs(t.ga-t.F)),o.push(Math.abs(t.ia-t.D)),o.push(Math.abs(t.ga-t.F)),i.push(o);else if(t.type===oc){var r=new Pt;r.ia=t.D,r.ga=(t.ga+t.F)/2;var a=new Tt(fc);if(a.ye=0,a.of=360,a.ka=(t.ia+t.D)/2,a.ra=(t.ga+t.F)/2,a.radiusX=Math.abs(t.ia-t.D)/2,a.radiusY=Math.abs(t.ga-t.F)/2,r.add(a),t=Lt(a,r),0===(o=t.length))n.push(a.ka),n.push(a.ra);else for(var a=r.ia,r=r.ga,s=0;s<o;s++){var l=t[s];Q(a,r,l[2],l[3],l[4],l[5],l[6],l[7],.5,n),a=l[6],r=l[7]}e.push(n),i.push(Mt(n))}else for(var h=t.dc.i;h.next();){var u=h.value,n=[];n.push(u.ia),n.push(u.ga);for(var a=u.ia,r=u.ga,c=a,f=r,d=u.vb.n,p=d.length,g=0;g<p;g++){var y=d[g];switch(y.ma){case lc:4<=n.length&&(e.push(n),i.push(Mt(n))),n=[],n.push(y.D),n.push(y.F),a=y.D,r=y.F,c=a,f=r;break;case hc:n.push(y.D),n.push(y.F),a=y.D,r=y.F;break;case uc:Q(a,r,y.Bd,y.Ve,y.mh,y.Ag,y.yb,y.Gb,.5,n),a=y.D,r=y.F;break;case cc:it(a,r,y.Bd,y.Ve,y.yb,y.Gb,.5,n),a=y.D,r=y.F;break;case fc:if(t=Lt(y,u),0===(o=t.length)){n.push(y.ka),n.push(y.ra),a=y.ka,r=y.ra;break}for(s=0;s<o;s++)l=t[s],Q(a,r,l[2],l[3],l[4],l[5],l[6],l[7],.5,n),a=l[6],r=l[7];break;case dc:if(t=Nt(y,u,a,r),0===(o=t.length)){n.push(y.ka),n.push(y.ra),a=y.ka,r=y.ra;break}for(s=0;s<o;s++)l=t[s],Q(a,r,l[2],l[3],l[4],l[5],l[6],l[7],.5,n),a=l[6],r=l[7];break;default:_h.k("Segment not of valid type: "+y.ma)}y.Ph&&(n.push(c),n.push(f))}4<=n.length&&(e.push(n),i.push(Mt(n)))}}}function Mt(t){for(var e=[],i=0,n=0,o=t.length,r=0;r<o;r+=2){var a=t[r],s=t[r+1];0!==r&&(i=Math.sqrt($h(i,n,a,s)),e.push(i)),i=a,n=s}return e}function Pt(t,e,i,n){_h.mc(this),this.Q=!1,void 0===i&&(i=!0),this.Bm=i,void 0===n&&(n=!0),this.So=n,this.xc=void 0!==t?t:0,this.Gc=void 0!==e?e:0,this.np=new u(Tt),this.tw=this.np.C,this.bb=!0}function Tt(t,e,i,n,o,r,a,s){_h.mc(this),this.Q=!1,void 0===t&&(t=hc),this.ma=t,this.yb=void 0!==e?e:0,this.Gb=void 0!==i?i:0,void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===a&&(a=0),t===dc?(t=r%360,0>t&&(t+=360),this.Bd=t,this.Ve=0,this.mh=Math.max(n,0),this.Ag=Math.max(o,0),this.Xo="boolean"==typeof a&&!!a,this.qo=!!s):(this.Bd=n,this.Ve=o,t===fc&&(r=Math.max(r,0)),this.mh=r,"number"==typeof a?(t===fc&&(a=Math.max(a,0)),this.Ag=a):this.Ag=0,this.qo=this.Xo=!1),this.Ph=!1,this.bb=!0,this.kg=null}function Lt(t,e){if(null!==t.kg&&!1===e.bb)return t.kg;var i=t.radiusX,n=t.radiusY;if(void 0===n&&(n=i),0===i||0===n)return t.kg=[],t.kg;var o=t.Bd,r=t.Ve,a=dt(i<n?i:n,t.ye,t.ye+t.of,!1);if(i!==n){var s=_h.Ff();s.reset(),i<n?s.scale(1,n/i):s.scale(i/n,1),bt(a,s),_h.ue(s)}for(i=a.length,n=0;n<i;n++)s=a[n],s[0]+=o,s[1]+=r,s[2]+=o,s[3]+=r,s[4]+=o,s[5]+=r,s[6]+=o,s[7]+=r;return t.kg=a,t.kg}function Nt(t,e,i,n){function o(t,e,i,n){return(t*n<e*i?-1:1)*Math.acos((t*i+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n)))}if(null!==t.kg&&!1===e.bb)return t.kg;e=t.mh;var r=t.Ag;if(0===e||0===r)return t.kg=[],t.kg;var a=Math.PI/180*t.Bd,s=t.Xo,l=t.qo,h=t.yb,u=t.Gb,c=Math.cos(a),f=Math.sin(a),d=c*(i-h)/2+f*(n-u)/2,a=-f*(i-h)/2+c*(n-u)/2,p=d*d/(e*e)+a*a/(r*r);return 1<p&&(e*=Math.sqrt(p),r*=Math.sqrt(p)),p=(s===l?-1:1)*Math.sqrt((e*e*r*r-e*e*a*a-r*r*d*d)/(e*e*a*a+r*r*d*d)),isNaN(p)&&(p=0),s=p*e*a/r,p=p*-r*d/e,isNaN(s)&&(s=0),isNaN(p)&&(p=0),i=(i+h)/2+c*s-f*p,n=(n+u)/2+f*s+c*p,u=o(1,0,(d-s)/e,(a-p)/r),c=(d-s)/e,h=(a-p)/r,d=(-d-s)/e,s=(-a-p)/r,a=o(c,h,d,s),d=(c*d+h*s)/(Math.sqrt(c*c+h*h)*Math.sqrt(d*d+s*s)),-1>=d?a=Math.PI:1<=d&&(a=0),!l&&0<a&&(a-=2*Math.PI),l&&0>a&&(a+=2*Math.PI),l=e>r?1:e/r,d=e>r?r/e:1,e=dt(e>r?e:r,u,u+a,!0),r=_h.Ff(),r.reset(),r.translate(i,n),r.rotate(t.Bd,0,0),r.scale(l,d),bt(e,r),_h.ue(r),t.kg=e,t.kg}function Ct(){this.Z=null,this.Jz=new b(0,0).freeze(),this.Oy=new b(0,0).freeze(),this.dv=this.aw=0,this.ev=1,this.Qv="",this.Dw=this.sv=!1,this.pv=this.fv=0,this.Jj=this.Bv=this.Mv=!1,this.tr=null,this.Bw=0,this.Dg=this.Aw=null}function At(){this.Z=null,this.Qb="",this.hw=this.yw=null,this.Pq=!1}function Bt(){this.Qq=gc,this.Tm=this.$v="",this.ps=this.qs=this.us=this.vs=this.ts=this.Z=this.ke=null}function Dt(t){1<arguments.length&&_h.k("Model constructor can only take one optional argument, the Array of node data."),_h.mc(this),this.er=this.Qb="",this.Ji=!1,this.lz={},this.Ce=[],this.Ec=new v(null,Object),this.fk="key",this.vo=this.ap=null,this.Wq=this.Xq=!1,this.Gq=null,this.Om="category",this.Di=new v(null,f),this.bk=null,this.cj=!1,this.Iz=null,this.oa=new re,void 0!==t&&(this.dg=t)}function Ft(t){return',\n  "modelData": '+Rt(t,t.Gk)}function jt(t,e){var i=e.modelData;_h.Qa(i)&&(t.yu(i),t.Gk=i)}function Et(t,e,i,n){if(e===i)return!0;if(typeof e!=typeof i||"function"==typeof e||"function"==typeof i)return!1;if(Array.isArray(e)&&Array.isArray(i)){if(n.ja(e)===i)return!0;if(n.add(e,i),e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(!Et(t,e[o],i[o],n))return!1;return!0}if(_h.Qa(e)&&_h.Qa(i)){if(n.ja(e)===i)return!0;n.add(e,i);for(o in e){var r=e[o];if(!zt(o,r)){var a=i[o];if(void 0===a||!Et(t,r,a,n))return!1}}for(var s in i)if(a=i[s],!(zt(s,a)||void 0!==(r=e[s])&&Et(t,r,a,n)))return!1;return!0}return!1}function It(t,e,i){t[i]!==e[i]&&_h.k("Model.computeJsonDifference: Model."+i+' is not the same in both models: "'+t[i]+'" and "'+e[i]+'"')}function Ot(t,e,n){void 0===n&&(n=!1);var o=_h.Ya(e);if(0>=o)return"[]";var r=new i;r.add("[ "),n&&1<o&&r.add("\n");for(var a=0;a<o;a++){var s=_h.Da(e,a);void 0!==s&&(0<a&&(r.add(","),n&&r.add("\n")),r.add(t.Ou(s)))}return n&&1<o&&r.add("\n"),r.add(" ]"),r.toString()}function zt(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function Gt(t){return isNaN(t)?"NaN":Infinity===t?"9e9999":-Infinity===t?"-9e9999":t}function Rt(t,i){var n=i;if(n instanceof b)i={"class":"go.Point",x:Gt(n.x),y:Gt(n.y)};else if(n instanceof k)i={"class":"go.Size",width:Gt(n.width),height:Gt(n.height)};else if(n instanceof S)i={"class":"go.Rect",x:Gt(n.x),y:Gt(n.y),width:Gt(n.width),height:Gt(n.height)};else if(n instanceof A)i={"class":"go.Margin",top:Gt(n.top),right:Gt(n.right),bottom:Gt(n.bottom),left:Gt(n.left)};else if(n instanceof D)i=n.fd()?{"class":"go.Spot",x:Gt(n.x),y:Gt(n.y),offsetX:Gt(n.offsetX),offsetY:Gt(n.offsetY)}:{"class":"go.Spot","enum":n.toString()};else if(n instanceof mo){if(i={"class":"go.Brush",type:n.type.name},n.type===mf?i.color=n.color:n.type!==vf&&n.type!==bf||(i.start=n.start,i.end=n.end,n.type===bf&&(0!==n.Ju&&(i.startRadius=Gt(n.Ju)),isNaN(n.Ht)||(i.endRadius=Gt(n.Ht)))),null!==n.uk){for(var o={},n=n.uk.i;n.next();)o[n.key]=n.value;i.colorStops=o}}else if(n instanceof mt)i={"class":"go.Geometry",type:n.type.name},0!==n.ia&&(i.startX=Gt(n.ia)),0!==n.ga&&(i.startY=Gt(n.ga)),0!==n.D&&(i.endX=Gt(n.D)),0!==n.F&&(i.endY=Gt(n.F)),n.A.L(iu)||(i.spot1=n.A),n.B.L(uu)||(i.spot2=n.B),n.type===rc&&(i.path=ac(n));else if(n instanceof e)i={"class":"go.EnumValue",classType:_h.hf(n.De),name:n.name};else if(n instanceof Mo||n instanceof Ii||n instanceof Di||n instanceof Dt||n instanceof ce||n instanceof se||n instanceof Es||n instanceof zs||n instanceof re||n instanceof oe)return _h.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+n.toString()),"{}";var r,o="{",n=!0;for(r in i){var a=_h.sb(i,r);if(!zt(r,a))if(n?n=!1:o+=", ",o+='"'+r+'":',"points"===r&&a instanceof u&&a.ma===b){for(var s="[",a=a.i;a.next();){var l=a.value;1<s.length&&(s+=","),s+=t.Ou(l.x),s+=",",s+=t.Ou(l.y)}s+="]",o+=s}else o+=t.Ou(a)}return o+"}"}function qt(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?Infinity:"-9e9999"===t?-Infinity:parseFloat(t)}function Wt(t,e,i,n,o,r,a,s,l){void 0===s&&(s=null),void 0===l&&(l=null);var h=new Bt;h.ba=t,h.yc=i,h.nf=e,h.propertyName=n,h.object=o,h.oldValue=r,h.Bj=s,h.newValue=a,h.Aj=l,t.Qw(h)}function Ht(t,e,i){"string"!=typeof t&&"function"!=typeof t&&_h.yd(t,"string or function",e,i)}function Vt(t){return"number"==typeof t||"string"==typeof t}function Ut(t,e,i){var n=t.ub(e);void 0!==n&&t.Ec.ja(n)===e||(t.HA(e),n=t.ub(e),void 0===n?_h.k("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.Ec.add(n,e),n=null,i&&(n=_h.Ya(t.Ce),_h.qh(t.Ce,n,e)),Wt(t,"nodeDataArray",yc,"nodeDataArray",t,null,e,null,n),t.lq(e),t.kq(e)))}function _t(t,e,i){var n=t.ub(e);if(void 0!==n&&t.Ec.remove(n),n=null,i){if(0>(n=_h.Fl(t.Ce,e)))return;_h.Hg(t.Ce,n)}Wt(t,"nodeDataArray",mc,"nodeDataArray",t,e,null,n,null),t.Mu(e)}function Kt(t,e,i){if(void 0!==e){var n=t.Di.ja(e);null===n&&(n=new f(Object),t.Di.add(e,n)),n.add(i)}}function Jt(t,e,i){if(void 0!==e){var n=t.Di.ja(e);n instanceof f&&(void 0===i||null===i?t.Di.remove(e):(n.remove(i),0===n.count&&t.Di.remove(e)))}}function Yt(t,e){if(void 0===e)return null;var i=t.Di.ja(e);return i instanceof f?i:null}function $t(t,e,i){if(t.Zz&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var o=$t(t,e[i],t.Yz);n.push(o)}return _h.mc(n),n}if(i&&_h.Qa(e)){i=(i=e.constructor)?new i:{};for(n in e)if("__gohashid"!==n){var r,o=_h.sb(e,n);r=o,r instanceof Mo||r instanceof Ii||r instanceof Di||r instanceof Mr||r instanceof mi||r instanceof ce||r instanceof se||r instanceof Es||r instanceof Ct||r instanceof At?("_"!==n[0]&&_h.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+n+'" of data object: '+e.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+r.toString()),r=!0):r=r instanceof Dt||r instanceof re||r instanceof oe||r instanceof Bt,r||(o=$t(t,o,!1)),_h.Ma(i,n,o)}return _h.mc(i),i}return e instanceof b?e.copy():e instanceof k?e.copy():e instanceof S?e.copy():e instanceof D?e.copy():e instanceof A?e.copy():e}function Xt(t,e){Dt.call(this),2<arguments.length&&_h.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),this.df=[],this.Pi=new f(Object),this.ad=new v(null,Object),this.nl="",this.pm=this.uo=this.bp=null,this.Sh="from",this.Th="to",this.Km=this.Jm="",this.Im="category",this.wg="",this.fp="isGroup",this.jh="group",this.Yq=!1,void 0!==t&&(this.dg=t),void 0!==e&&(this.Ng=e)}function Qt(t,e,i){if(""!==t.yj){var n=t.Sf(e);if(void 0!==n&&t.ad.ja(n)===e)return;if(t.GA(e),void 0===(n=t.Sf(e)))return void _h.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.ad.add(n,e)}t.Pi.add(e),n=null,i&&(n=_h.Ya(t.df),_h.qh(t.df,n,e)),Wt(t,"linkDataArray",yc,"linkDataArray",t,null,e,null,n),te(t,e)}function Zt(t,e,i){t.Pi.remove(e);var n=t.Sf(e);if(void 0!==n&&t.ad.remove(n),n=null,i){if(0>(n=_h.Fl(t.df,e)))return;_h.Hg(t.df,n)}if(Wt(t,"linkDataArray",mc,"linkDataArray",t,e,null,n,null),i=t.Tl(e),Jt(t,i,e),i=t.Ul(e),Jt(t,i,e),n=t.Bk(e),_h.isArray(n))for(var o=_h.Ya(n),r=0;r<o;r++)i=_h.Da(n,r),Jt(t,i,e)}function te(t,e){var i=t.Tl(e),i=t.Mn(i);null===t.te(i)&&Kt(t,i,e),i=t.Ul(e),i=t.Mn(i),null===t.te(i)&&Kt(t,i,e);var n=t.Bk(e);if(_h.isArray(n))for(var o=_h.Ya(n),r=0;r<o;r++)i=_h.Da(n,r),null===t.te(i)&&Kt(t,i,e)}function ee(t){1<arguments.length&&_h.k("TreeModel constructor can only take one optional argument, the Array of node data."),Dt.call(this),this.kh="parent",this.Zq=!1,this.Rm="parentLinkCategory",void 0!==t&&(this.dg=t)}function ie(t,e,i){_h.mc(this),this.Q=!1,void 0===t?t="":_h.j(t,"string",ie,"constructor:targetprop"),void 0===e?e=t:_h.j(e,"string",ie,"constructor:sourceprop"),void 0===i?i=null:null!==i&&_h.j(i,"function",ie,"constructor:conv"),this.GD=-1,this.Dg=null,this.zp=t,this.yp=this.ht=0,this.vw=null,this.Nr=!1,this.pp=e,this.Vq=i,this.gs=bc,this.Oq=null,this.Xy=new f}function ne(t,e,i){t=t.xq;return null===t||""===t?e:"/"===t?i.U:"."===t?i:".."===t?i.O:e.ud(t)}function oe(){this.EG=new u(Bt).freeze(),this.Qb="",this.LC=!1}function re(){this.mz=new f(Dt),this.cf=!1,this.IG=new u(oe).freeze(),this.dh=-1,this.$C=999,this.Ki=!1,this.ov=null,this.zl=0,this.WB=!1,this.ih=new u("string").freeze(),this.ep=new u("number"),this.Yy=!0,this.hz=!1}function ae(t,e,i){if(t.gb)return!1;t.Tz&&1>t.Fh&&_h.trace("Ending transaction without having started a transaction: "+i);var n=1===t.Fh;n&&e&&t.cd("CommittingTransaction",i,t.lj);var o=0;if(0<t.Fh&&(t.zl--,t.isEnabled)){var r=t.ih.count;0<r&&(""===i&&(i=t.ih.da(0)),t.ih.Ra(),t.ih.Yc(r-1),t.ih.freeze()),r=t.ep.count,0<r&&(o=t.ep.da(r-1),t.ep.Yc(r-1))}if(r=t.lj,n){if(e){if(t.hz=!1,t.isEnabled&&null!==r){for(e=r,e.Zt=!0,e.name=i,n=t.history,n.Ra(),o=n.count-1;o>t.qj;o--)r=n.da(o),null!==r&&r.clear(),n.Yc(o),t.hz=!0;o=t.xF,0===o&&(o=1),0<o&&n.count>=o&&(r=n.da(0),null!==r&&r.clear(),n.Yc(0),t.dh--),n.add(e),t.dh++,n.freeze(),r=e}t.cd("CommittedTransaction",i,r)}else{t.Ki=!0;try{t.isEnabled&&null!==r&&(r.Zt=!0,r.undo())}finally{t.cd("RolledBackTransaction",i,r),t.Ki=!1}null!==r&&r.clear()}return t.ov=null,!0}if(t.isEnabled&&!e&&null!==r){for(t=o,i=r.Qf,e=i.count-1;e>=t;e--)n=i.da(e),null!==n&&n.undo(),i.Ra(),i.Yc(e);i.freeze()}return!1}function se(){0<arguments.length&&_h.hd(se),_h.mc(this),this.Z=null,this.ZB=!1,this.tC=this.$B=!0,this.bC=this.cC=this.uC=this.dC=!1,this.ql=this.PB=null,this.$D=1.05,this.qC=1,this.iz=NaN,this.WC=null,this.Mz=NaN,this.Lz=Iu,this.bj=null}function le(t,e,i,n,o,r){if(void 0===r&&(r=null),!(t.contains(e)||null!==r&&!r(e)||e instanceof Aa))if(t.add(e),e instanceof Ba){if(i&&e instanceof Cs)for(var a=e.Nc;a.next();)le(t,a.value,i,n,o,r);if(o)for(a=e.fe;a.next();){var s=a.value;if(!t.contains(s)){var l=s.Y,h=s.$;null!==l&&t.contains(l)&&null!==h&&t.contains(h)?le(t,s,i,n,o,r):null!==l&&null!==h||le(t,s,i,n,o,r)}}if(1<n)for(e=e.NE();e.next();)le(t,e.value,i,n-1,o,r)}else if(e instanceof Ua)for(e=e.Wf;e.next();)le(t,e.value,i,n,o,r)}function he(t,e,i,n,o){if(null===e||o&&!e.canCopy())return null;if(n.contains(e))return n.ja(e);var r=null,a=e.data;if(null!==a&&null!==i){var s=i.ba;e instanceof Ua?s instanceof Xt&&(a=s.Tw(a),_h.Qa(a)&&(s.ut(a),r=i.Rf(a))):(a=s.copyNodeData(a),_h.Qa(a)&&(s.Cl(a),r=i.vh(a)))}else vr(e),null!==(r=e.copy())&&(null!==i?i.add(r):null!==a&&null!==t.g&&t.yH&&(s=t.g.ba,a=r instanceof Ua&&s instanceof Xt?s.Tw(a):s.copyNodeData(a),_h.Qa(a)&&(r.data=a)));if(!(r instanceof sa))return null;if(r.fb=!1,r.Mg=!1,n.add(e,r),e instanceof Ba){for(a=e.fe;a.next();){if(s=a.value,s.Y===e){var l=n.ja(s);null!==l&&(l.Y=r)}s.$===e&&null!==(l=n.ja(s))&&(l.$=r)}if(e instanceof Cs&&r instanceof Cs)for(a=r,e=e.Nc;e.next();)(s=he(t,e.value,i,n,o))instanceof Ua||null===s||(s.Ka=a)}else if(e instanceof Ua&&r instanceof Ua)for(a=e.Y,null!==a&&null!==(a=n.ja(a))&&(r.Y=a),a=e.$,null!==a&&null!==(a=n.ja(a))&&(r.$=a),e=e.Wf;e.next();)null!==(a=he(t,e.value,i,n,o))&&a instanceof Ba&&(a.Mc=r);return r}function ue(t){var e=_h.lb();for(t=t.i;t.next();){var i=t.value;i instanceof Ua||e.push(i)}t=new f(sa);for(var i=e.length,n=0;n<i;n++){for(var o=e[n],r=!0,a=0;a<i;a++)if(o.mi(e[a])){r=!1;break}r&&t.add(o)}return _h.wa(e),t}function ce(){0<arguments.length&&_h.hd(ce),_h.mc(this),this.Z=null,this.Qb="",this.cf=!0,this.JC=!1,this.UD=null,this.Gw=-1}function fe(t,e,i){if(e.Ac=!1,null===t||t.$t()){var n=0;e.left?n=1===e.Fe?1:2===e.Fe?2:1:e.right&&1===e.Fe&&(n=3);var o="";if(null!==t){switch(n){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==n&&i.Aa(o,t)}else{switch(n){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==n&&i.Aa(o)}if(null!==t)for(;null!==t;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.Gt?t.Gt:t.click;break
;case 3:i=t.Wz}if(null!==i&&(i(e,t),e.Ac))break;t=t.O}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.Gt?i.Gt:i.click;break;case 3:t=i.Wz}null!==t&&t(e)}}}function de(){ce.call(this),0<arguments.length&&_h.hd(de),this.name="Dragging",this.aC=this.NC=!0,this.Ir=this.zC=!1,this.RC=!0,this.Zy=new k(NaN,NaN).freeze(),this.$y=iu,this.az=new b(NaN,NaN).freeze(),this.yC=!1,this.qz=this.pz=this.Py=this.YB=this.xC=this.iC=this.$i=null,this.or=this.PC=!1,this.sp=new b(NaN,NaN),this.ww=new b,this.zw=!1,this.MC=!0,this.Co=100,this.Nj=[],this.HG=new f(sa).freeze()}function pe(t,e){if(t.nj){var i=t.g;null!==i&&i.hn&&(i.ba instanceof Xt&&1===e.count&&e.first()instanceof Ua?(t.ed=e.first(),t.ed.canRelinkFrom()&&t.ed.canRelinkTo()&&t.ed.Bt(),t.$i=i.ab.MF,null===t.$i&&(t.$i=new Ve,t.$i.Qc(i))):(t.ed=null,t.$i=null))}}function ge(t){return new Ie(void 0===t?Eu:t.copy())}function ye(t,e,i,n){if(!e.contains(i)&&(!n||i.canMove()||i.canCopy()))if(i instanceof Ba){if(e.add(i,ge(i.location)),i instanceof Cs)for(var o=i.Nc;o.next();)ye(t,e,o.value,n);for(o=i.fe;o.next();){var r=o.value;if(!e.contains(r)){var a=r.Y,s=r.$;null!==a&&e.contains(a)&&null!==s&&e.contains(s)&&ye(t,e,r,n)}}if(t.NH)for(i=i.NE();i.next();)ye(t,e,i.value,n)}else if(i instanceof Ua)for(r=i,e.add(r,ge()),i=r.Wf;i.next();)ye(t,e,i.value,n);else i instanceof Aa||e.add(i,ge(i.location))}function me(t){var e=t.g;if(null!==e){var i=e.wb;e.wb=!0,Ae(t,e.R,null),e.wb=i}t.Nj.length=0}function ve(){var t=Pc;Se(t),Le(t);var e=t.g;null!==e&&t.sp.H()&&(e.position=t.sp),null!==e&&no(e)}function be(t,e){if(null!==e){t.zw=!0;for(var i=e.i;i.next();){var n=i.key;n instanceof Ua&&(n.fm=!0)}}}function xe(t,e){if(null!==e){for(var i=e.i;i.next();){var n=i.key;n instanceof Ua&&(n.fm=!1,ts(n)&&n.Yb())}t.zw=!1}}function we(t,e){for(var i=Infinity,n=Infinity,o=-Infinity,r=-Infinity,a=t.i;a.next();){var s=a.value;if(s.de()&&s.isVisible()){var l=s.location,s=l.x,l=l.y;isNaN(s)||isNaN(l)||(s<i&&(i=s),l<n&&(n=l),s>o&&(o=s),l>r&&(r=l))}}Infinity===i?e.m(0,0,0,0):e.m(i,n,o-i,r-n)}function ke(t,e){if(null===t.bc){var i=t.g;if(!(null===i||e&&(i.eb||i.yf))&&null!==t.Xb){var n=i.oa;for(n.isEnabled&&n.mF?null!==n.lj&&0<n.lj.Qf.count&&(i.oa.mq(),i.Ub("Drag")):Le(t),i.wb=!e,i.Eq=!e,t.Kk=i.zc.ca,n=t.AH?t.Xb.Gj():i.selection,n=i.Mp(n,i,!0),i=n.i;i.next();)i.value.location=i.key.location;i=_h.Ef(),we(n,i),_h.Db(i);for(var i=new v(sa),o=t.Xb.i;o.next();){var r=o.key;r.de()&&r.canCopy()&&null!==(r=n.ja(r))&&(r.Ze(),i.add(r,ge(r.location)))}for(n=n.i;n.next();)(o=n.value)instanceof Ua&&o.canCopy()&&i.add(o,ge());t.bc=i,pe(t,i.Gj()),null!==t.ed&&(i=t.ed,n=i.Wn,i.Hk(t.Kk.x-(n.x+n.width/2),t.Kk.y-(n.y+n.height/2)))}}}function Se(t){var e=t.g;if(null!==e){if(null!==t.bc&&(e.XA(t.bc.Gj(),!1),t.bc=null,null!==t.Xb))for(var i=t.Xb.i;i.next();)i.key instanceof Ua&&(i.value.point=new b(0,0));e.wb=!1,e.Eq=!1,t.Kk=e.zc.ca}}function Me(t){if(null!==t.ed){if(t.nj&&null!==t.$i){var e=t.$i;null!==e.g&&(e.g.remove(e.Rd),e.g.remove(e.Sd))}t.ed=null,t.$i=null}}function Pe(t,e,i){var n=t.g;if(null!==n){var o=t.Kk,r=_h.K();r.assign(n.R.ca),t.moveParts(e,r.$n(o),i),_h.v(r)}}function Te(t,e,i){if(null!==(e=e.Ka)){if(null!==(t=Te(t,e,i)))return t;if(null!==(t=i.ja(e)))return t}return null}function Le(t){if(null!==t.Xb){for(var e=t.g,i=t.Xb.i;i.next();){var n=i.key;n.de()&&(n.location=i.value.point)}for(i=t.Xb.i;i.next();)if((n=i.key)instanceof Ua&&n.fm){var o=i.value.point;t.Xb.add(n,ge()),n.Hk(-o.x,-o.y)}e.Zf()}}function Ne(t,e){if(null===e)return!0;var i=e.U;return!!(null===i||i instanceof Aa||i.layer.Kc||t.Xb&&t.Xb.contains(i)||t.bc&&t.bc.contains(i))}function Ce(t,e,i,n){var o=t.g;if(null!==o){t.nj&&(null!==t.ed&&(t.ed.Y=null,t.ed.$=null),Fe(t,!1));var r=Yi(o,e,null,function(e){return!Ne(t,e)}),a=o.R;a.Pe=r;var s=o.wb,l=!1;try{if(o.wb=!0,l=Ae(t,a,r),!t.sa&&null===Pc)return;if(null===r){var h=o.YI;null!==h&&(h(a),l=!0)}if(!t.sa&&null===Pc)return;if(t.doDragOver(e,r),!t.sa&&null===Pc)return}finally{o.wb=s,l&&o.Zf()}(o.me||o.ne)&&(i||n)&&o.dA(a.bf)}}function Ae(t,e,i){var n=!1,o=t.Nj.length,r=0<o?t.Nj[0]:null;if(i===r)return!1;e.Ac=!1;for(var a=0;a<o;a++){var s=t.Nj[a],l=s.XI;if(null!==l&&(l(e,s,i),n=!0,e.Ac))break}if(t.Nj.length=0,!t.sa&&null===Pc||null===i)return n;for(e.Ac=!1;null!==i;)t.Nj.push(i),i=Be(i);for(o=t.Nj.length,a=0;a<o&&(s=t.Nj[a],null===(l=s.WI)||(l(e,s,r),n=!0,!e.Ac));a++);return n}function Be(t){var e=t.O;return null!==e?e:t instanceof sa&&!(t instanceof Cs)&&null!==(t=t.Ka)&&t.gI?t:null}function De(t,e,i){var n=t.$i;if(null===n)return null;var o=t.g.wn(e,n.KF,function(t){return n.findValidLinkablePort(t,i)});t=_h.K();for(var r=Infinity,a=null,o=o.i;o.next();){var s=o.value;if(null!==s.U){var l=s.Wa(au,t),l=e.uf(l);l<r&&(a=s,r=l)}}return _h.v(t),a}function Fe(t,e){var i=t.ed;if(null!==i&&!(2>i.qa)){var n=t.g;if(null!==n&&!n.eb){var o=t.$i;if(null!==o){var r=null,a=null;null===i.Y&&null!==(r=De(t,i.l(0),!1))&&(a=r.U);var s=null,l=null;null===i.$&&null!==(s=De(t,i.l(i.qa-1),!0))&&(l=s.U),o.isValidLink(a,r,l,s)?e?(i.Np=i.l(0),i.Op=i.l(i.qa-1),i.fm=!1,i.Y=a,null!==r&&(i.Lg=r.Qd),i.$=l,null!==s&&(i.Eh=s.Qd),i.Jc!==t.pz&&n.Aa("LinkRelinked",i,t.pz),i.jd!==t.qz&&n.Aa("LinkRelinked",i,t.qz)):Ue(o,a,r,l,s):Ue(o,null,null,null,null)}}}}function je(t,e){var i=t.g;if(null!==i){t.nj&&Fe(t,!0),me(t);var n=Yi(i,e,null,function(e){return!Ne(t,e)}),o=i.R;if(o.Pe=n,null!==n){o.Ac=!1;for(var r=n;null!==r;){var a=r.KA;if(null!==a&&(a(o,r),o.Ac))break;r=Be(r)}}else null!==(r=i.KA)&&r(o);if(t.sa||null!==Pc){for(o=(t.bc||t.Xb).i;o.next();)(r=o.key)instanceof Ba&&r.fe.each(function(t){t.fm=!1});if(t.doDropOnto(e,n),t.sa||null!==Pc){for(n=_h.Ef(),o=i.selection.i;o.next();)(r=o.value)instanceof Ba&&Zn(i,r.getAvoidableRect(n));_h.Db(n)}}}}function Ee(t,e,i){if(null===t.bc){var n=t.g;if(null!==n&&!n.eb&&!n.yf){n.wb=!i,n.Eq=!i,t.Kk=n.R.ca,n=n.Mp(e,n,!0),i=_h.Ef(),we(e,i);var o=i.x+i.width/2,r=i.y+i.height/2;_h.Db(i);var a=t.ww;i=new v(sa);var s=_h.K();for(e=e.i;e.next();){var l=e.value,h=n.ja(l);l.de()&&l.canCopy()?(l=l.location,s.m(a.x-(o-l.x),a.y-(r-l.y)),h.location=s,h.Ze(),i.add(h,ge(s))):l instanceof Ua&&l.canCopy()&&h.Hk(a.x-o,a.y-r)}for(_h.v(s),n=n.i;n.next();)(o=n.value)instanceof Ua&&o.canCopy()&&i.add(o,ge());t.bc=i,pe(t,i.Gj()),null!==t.ed&&(i=t.ed,n=i.Wn,i.Hk(t.Kk.x-(n.x+n.width/2),t.Kk.y-(n.y+n.height/2)))}}}function Ie(t){this.point=t,this.hG=Eu}function Oe(t,e,i){this.Oc=t,this.info=e,this.dI=i}function ze(){0<arguments.length&&_h.hd(ze),ce.call(this),this.tD=100,this.UC=!1;var t=new Ua,e=new Tr;e.Vf=!0,e.stroke="blue",t.add(e),e=new Tr,e.yq="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.Xf="Tool",this.ND=t,t=new Ba,e=new Tr,e.Qd="",e.Cb="Rectangle",e.fill=null,e.stroke="magenta",e.kb=2,e.Ba=Hu,t.add(e),t.cm=!1,t.Xf="Tool",this.LD=t,this.MD=e,t=new Ba,e=new Tr,e.Qd="",e.Cb="Rectangle",e.fill=null,e.stroke="magenta",e.kb=2,e.Ba=Hu,t.add(e),t.cm=!1,t.Xf="Tool",this.OD=t,this.PD=e,this.rD=this.qD=this.mD=this.lD=this.nD=null,this.QC=!0,this.VG=new v(Mo,"boolean"),this.uD=this.ol=this.HD=null}function Ge(t,e,i,n){if(e===i)return!0;var o=e.Y;return!(null===o||!o.lf||(n.add(o),!Ge(t,o.Mc,i,n)))||!(null===(e=e.$)||!e.lf||(n.add(e),!Ge(t,e.Mc,i,n)))}function Re(t,e,i,n,o){if(e===i)return!0;if(null===e||null===i)return!1;for(var r=e.fe;r.next();){var a=r.value;if(a!==n&&(!o||a.Lc)&&a.$===e&&(a=a.Y)!==e&&Re(t,a,i,n,o))return!0}return!1}function qe(t,e,i,n,o){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var r=i.fe;r.next();){var a=r.value;if(a!==o&&a.$===i&&(a=a.Y)!==i&&qe(t,e,a,n,o))return!0}return!1}function We(t,e,i,n,o){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var r=i.fe;r.next();){var a=r.value;if(a!==o){var s=a.Y,a=a.$,s=s===i?a:s;if(s!==i&&We(t,e,s,n,o))return!0}}return!1}function He(){0<arguments.length&&_h.hd(He),ze.call(this),this.name="Linking",this.RB={},this.QB=null,this.aa=Lc,this.CD=null}function Ve(){0<arguments.length&&_h.hd(Ve),ze.call(this),this.name="Relinking";var t=new Tr;t.Cb="Diamond",t.Ba=Uu,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Me=0,this.DC=t,t=new Tr,t.Cb="Diamond",t.Ba=Uu,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Me=-1,this.QD=t,this.fc=null,this.oD=new S}function Ue(t,e,i,n,o){null!==t.g&&(null!==e?(t.copyPortProperties(e,i,t.Rd,t.ao,!1),t.g.add(t.Rd)):t.g.remove(t.Rd),null!==n?(t.copyPortProperties(n,o,t.Sd,t.bo,!0),t.g.add(t.Sd)):t.g.remove(t.Sd))}function _e(){0<arguments.length&&_h.hd(_e),ce.call(this),this.name="LinkReshaping";var t=new Tr;t.Cb="Rectangle",t.Ba=Vu,t.fill="lightblue",t.stroke="dodgerblue",this.dl=t,t=new Tr,t.Cb="Diamond",t.Ba=Vu,t.fill="lightblue",t.stroke="dodgerblue",this.aD=t,this.vD=3,this.zy=this.fc=null,this.hp=new b,this.ew=null}function Ke(t,e,i,n,o,r){return r?Math.abs(e.y-i.y)<t.Ch&&Math.abs(i.y-n.y)<t.Ch&&Math.abs(n.y-o.y)<t.Ch:Math.abs(e.x-i.x)<t.Ch&&Math.abs(i.x-n.x)<t.Ch&&Math.abs(n.x-o.x)<t.Ch}function Je(){0<arguments.length&&_h.hd(Je),ce.call(this),this.name="Resizing",this.Vh=new k(1,1).freeze(),this.Uh=new k(9999,9999).freeze(),this.Kj=new k(NaN,NaN).freeze(),this.Ir=!1,this.Dc=null;var t=new Tr;t.oh=au,t.Cb="Rectangle",t.Ba=Vu,t.fill="lightblue",t.stroke="dodgerblue",t.kb=1,t.cursor="pointer",this.dl=t,this.fc=null,this.hp=new b,this.kD=new k,this.pD=new b,this.Wy=new k(0,0),this.Vy=new k(Infinity,Infinity),this.Uy=new k(1,1),this.hD=!0}function Ye(){0<arguments.length&&_h.hd(Ye),ce.call(this),this.name="Rotating",this.AD=45,this.zD=2,this.Dc=null;var t=new Tr;t.Cb="Ellipse",t.Ba=Uu,t.fill="lightblue",t.stroke="dodgerblue",t.kb=1,t.cursor="pointer",this.dl=t,this.fc=null,this.dw=0,this.wD=new b}function $e(){ce.call(this),0<arguments.length&&_h.hd($e),this.name="ClickSelecting"}function Xe(){ce.call(this),0<arguments.length&&_h.hd(Xe),this.name="Action",this.jo=null}function Qe(){ce.call(this),0<arguments.length&&_h.hd(Qe),this.name="ClickCreating",this.pm=null,this.OC=!0,this.CC=new b(0,0)}function Ze(){this.WD=this.ZC=this.cz=this.Az=null}function ti(t,e,i){this.text=t,this.qE=e,this.visible=i}function ei(){ce.call(this),0<arguments.length&&_h.hd(ei),this.name="ContextMenu",this.hC=this.Gy=this.eC=null,this.eD=new b,this.Iy=this.vm=null;var t=this;this.Hz=function(){t.stopTool()},ii(this)}function ii(e){var i=new Ze;if(i.show=function(t,e,i){i.showDefaultContextMenu()},i.En=function(t,e){e.hideDefaultContextMenu()},e.vm=i,e.Hz=function(){e.stopTool()},!1===_h.xE){var i=_h.createElement("div"),n=_h.createElement("div");i.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var o=_h.createElement("style");t.document.getElementsByTagName("head")[0].appendChild(o),o.sheet.insertRule(".goCXul { list-style: none; }",0),o.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),o.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i.addEventListener("contextmenu",ni,!1),i.addEventListener("selectstart",ni,!1),n.addEventListener("contextmenu",ni,!1),t.document.body&&(t.document.body.appendChild(i),t.document.body.appendChild(n)),_h.Dt=i,_h.Ct=n,_h.xE=!0}}function ni(t){return t.preventDefault(),!1}function oi(t){var e=t.g;if(null!==e)if(t.sa){var i=t.Jl;if(null!==i){if(!(i instanceof Ze)){var n=e.Je(e.R.ca,null,null);null!==n&&n.Xl(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.Za=t,t.doMouseUp())}}else t.canStart()&&(ri(t,!0),t.sa||t.stopTool())}function ri(t,e,i){if(void 0===i&&(i=null),e&&t.standardMouseSelect(),!t.standardMouseClick())if(t.sa=!0,e=t.vm,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var n=i.contextMenu;null!==n?(t.Vw=i instanceof Mo?i:null,t.showContextMenu(n,t.Vw)):null!==e&&t.showContextMenu(e,t.Vw)}else null!==e&&t.showContextMenu(e,null)}function ai(t){return null===t.g?null:(t=new u(ti),t.add(new ti("Copy",function(t){t.ob.copySelection()},function(t){return t.ob.canCopySelection()})),t.add(new ti("Cut",function(t){t.ob.cutSelection()},function(t){return t.ob.canCutSelection()})),t.add(new ti("Delete",function(t){t.ob.deleteSelection()},function(t){return t.ob.canDeleteSelection()})),t.add(new ti("Paste",function(t){t.ob.pasteSelection(t.R.ca)},function(t){return t.ob.canPasteSelection()})),t.add(new ti("Select All",function(t){t.ob.selectAll()},function(t){return t.ob.canSelectAll()})),t.add(new ti("Undo",function(t){t.ob.undo()},function(t){return t.ob.canUndo()})),t.add(new ti("Redo",function(t){t.ob.redo()},function(t){return t.ob.canRedo()})),t.add(new ti("Scroll To Part",function(t){t.ob.scrollToPart()},function(t){return t.ob.canScrollToPart()})),t.add(new ti("Zoom To Fit",function(t){t.ob.zoomToFit()},function(t){return t.ob.canZoomToFit()})),t.add(new ti("Reset Zoom",function(t){t.ob.resetZoom()},function(t){return t.ob.canResetZoom()})),t.add(new ti("Group Selection",function(t){t.ob.groupSelection()},function(t){return t.ob.canGroupSelection()})),t.add(new ti("Ungroup Selection",function(t){t.ob.ungroupSelection()},function(t){return t.ob.canUngroupSelection()})),t.add(new ti("Edit Text",function(t){t.ob.editTextBlock()},function(t){return t.ob.canEditTextBlock()})),t)}function si(){ce.call(this),0<arguments.length&&_h.hd(si),this.name="DragSelecting",this.Co=175,this.TC=!1;var t=new sa;t.Xf="Tool",t.cm=!1;var e=new Tr;e.name="SHAPE",e.Cb="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.rm=t}function li(){ce.call(this),0<arguments.length&&_h.hd(li),this.name="Panning",this.rz=new b,this.Jj=!1;var e=this;this.ED=function(){t.document.removeEventListener("scroll",e.ED,!1),e.stopTool()}}function hi(){0<arguments.length&&_h.hd(hi),ce.call(this),this.name="TextEditing",this.Fz=this.lk=null,this.DD=zc,this.xl=null,this.Ta=Rc,this.sl=null,this.bD=1,this.xD=!0;var t=new Ze;this.jC=null,this.rC=t,this.Jy=null,ui(this,t)}function ui(t,e){var i=_h.createElement("textarea");t.Jy=i,i.addEventListener("input",function(){if(null!==t.Xg){var e=t.QI(this.value),i=this.JJ;this.style.width=20+e.za.width*i+"px",this.style.height=10+e.za.height*i+"px",this.rows=e.EI}},!1),i.addEventListener("keydown",function(e){if(null!==t.Xg){var i=e.which;13===i?(!1===t.Xg.xx&&e.preventDefault(),t.acceptText(Oc)):9===i?(t.acceptText(Ic),e.preventDefault()):27===i&&(t.doCancel(),null!==t.g&&t.g.doFocus())}},!1),i.addEventListener("focus",function(){fi(t)},!1),i.addEventListener("blur",function(){di(t)},!1),e.zB=function(){return i.value},e.FA=i,e.show=function(t,e,n){if(n.state===Vc)i.style.border="3px solid red",i.focus();else{var o=t.Wa(au),r=e.position,a=e.scale,s=t.oj()*a;s<n.AF&&(s=n.AF);var l=t.Ia.width*s+6,h=t.Ia.height*s+2,u=(o.x-r.x)*a,o=(o.y-r.y)*a;i.value=t.text,e.mj.style.font=t.font,i.style.cssText="position: absolute;z-index: 100;font: inherit;fontSize: "+100*s+"%;lineHeight: normal;width: "+l+"px;height: "+h+"px;left: "+((u-l/2|0)-1)+"px;top: "+((o-h/2|0)-1)+"px;textAlign: "+t.textAlign+";margin: 0;padding: 1px;border: 0;outline: none;white-space: pre-wrap;overflow: hidden;",i.JJ=s,e.mj.appendChild(i),i.focus(),n.$x&&(i.select(),i.setSelectionRange(0,9999))}},e.En=function(t){t.mj.removeChild(i)}}function ci(t){var e=t.Xg,i=t.g,n=t.kj;if(null!==e&&null!==n){var o=e.text,r="";n instanceof Ze?null!==n.zB&&(r=n.zB()):(r=n.value,r="function"==typeof r?r():r),t.isValidText(e,o,r)?(t.Ub(t.name),t.Ta=Uc,n instanceof Ze?n.show(e,i,t):null!==t.sl&&(n.style.border=t.sl,t.sl=null),t.Gf=t.name,e.text=r,null!==e.nG&&e.nG(e,o,r),null!==i&&i.Aa("TextEdited",e,o),t.Lk(),t.stopTool(),null!==i&&i.doFocus()):(t.Ta=Vc,null!==e.gA&&e.gA(t,o,r),n instanceof Ze?n.show(e,i,t):(null===t.sl&&(t.sl=n.style.border,n.style.border="3px solid red"),"function"==typeof n.focus&&n.focus()))}}function fi(t){if(null!==t.kj){var e=t.Jy;t.Ta===qc&&(t.Ta=Wc),"function"==typeof e.select&&t.$x&&(e.select(),e.setSelectionRange(0,9999))}}function di(t){if(null!==t.kj){var e=t.Jy;"function"==typeof e.focus&&e.focus(),"function"==typeof e.select&&t.$x&&(e.select(),e.setSelectionRange(0,9999))}}function pi(){ce.call(this),this.name="ToolManager",this.KG=new u(ce),this.LG=new u(ce),this.MG=new u(ce),this.GC=this.HC=850,this.wC=new k(2,2).Ga(),this.RD=5e3,this.fD=_c,this.EC=Jc,this.nv=this.kC=null,this.en=-1}function gi(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.sa?t.bF:t.jI,e.R)}function yi(t,e,i,n){_h.j(e,"string",pi,"replaceStandardTool:name"),_h.G(n,u,pi,"replaceStandardTool:list"),null!==i&&(_h.G(i,ce,pi,"replaceStandardTool:newtool"),i.g&&i.g!==t.g&&_h.k("Cannot share tools between Diagrams: "+i.toString()),i.name=e,i.Qc(t.g)),t.findTool(e)?t.replaceTool(e,i):null!==i&&n.add(i)}function mi(){this.lC=vi,this.jr=this.kr=this.Z=null,this.mo=this.lr=this.mr=0,this.no=this.pc=this.To=this.Wj=!1,this.Xj=this.cf=!0,this.lv=this.kv=this.gC=null,this.fC=0,this.mv=null,this.$u=new f("string"),this.Ry=600,this.NG=new b(0,0),this.UB=this.TB=this.VD=!1,this.Pm=new v(Mo,Bi)}function vi(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function bi(t){if(t.cf&&(t.$u.clear(),t.pc))if(t.no){if(0===t.mo){var e=+new Date;t.mo=e,requestAnimationFrame(function(){if(!1!==t.pc&&!t.Wj&&t.mo===e){var i=t.Z;i.pj("temporaryPixelRatio")&&(i.kk=1),Ri(i),t.pc=!1,i.Aa("AnimationStarting"),ki(t,e)}})}}else t.pc=!1}function xi(t,e,i,o,r,a){if(!(!t.pc||"position"===i&&o.L(r)||e instanceof sa&&!e.fF)){var s=t.Pm;if(s.contains(e)){var s=s.ja(e),l=s.start,h=s.end;void 0===l[i]&&(l[i]=wi(o)),s.Uw&&void 0!==h[i]?s.It[i]=wi(r):(a||(s.It[i]=wi(r)),h[i]=wi(r)),a&&0===i.indexOf("position:")&&e instanceof sa&&(s.It.location=wi(e.location))}else l=new n,h=new n,l[i]=wi(o),h[i]=wi(r),o=h,r=l.position,r instanceof b&&!r.H()&&t.$u.contains("Expand SubGraph")&&r.assign(o.position),l=new Bi(l,h,a),a&&0===i.indexOf("position:")&&e instanceof sa&&(l.It.location=wi(e.location)),s.add(e,l);t.no=!0}}function wi(t){return t instanceof b?t.copy():t instanceof k?t.copy():t}function ki(t,e){function i(){if(!1!==a.Wj&&a.mo===e){var t=+new Date,n=t>g?u:t-p;Si(a),Pi(a,r,d,s,n,u),a.kv&&a.kv(),rn(r),Mi(a),t>g?Ti(a):requestAnimationFrame(i)}}var o;void 0===o&&(o=new n);var r=t.Z;if(null!==r){t.Wj=!0;var a=t,s=o.RK||t.lC,l=o.rL||null,h=o.sL||null,u=o.duration||t.Ry,c=t.NG;for(o=t.Pm.i;o.next();){var f=o.value.start.position;f instanceof b&&(f.H()||f.assign(c))}t.gC=s,t.kv=l,t.lv=h,t.fC=u,t.mv=t.Pm;var d=t.mv;for(o=d.i;o.next();)l=o.value.end,l["position:placeholder"]&&(h=l["position:placeholder"],c=h.Wa(iu),c.x+=h.padding.left,c.y+=h.padding.top,l["position:placeholder"]=c);Si(t),Pi(t,r,d,s,0,u),rn(t.Z),Mi(t);var p=+new Date,g=p+u;a.mo===e&&requestAnimationFrame(function(){i()})}}function Si(t){if(!t.To){var e=t.Z;t.VD=e.wb,t.TB=e.Ne,t.UB=e.Iu,e.wb=!0,e.Ne=!0,e.Iu=!0,t.To=!0}}function Mi(t){var e=t.Z;e.wb=t.VD,e.Ne=t.TB,e.Iu=t.UB,t.To=!1}function Pi(t,e,i,n,o,r){for(i=i.i;i.next();){var a,s=i.key,l=i.value,h=l.start,l=l.end;for(a in l)"position"===a&&(l["position:placeholder"]||l["position:node"])||void 0===Xc[a]||Xc[a](s,h[a],l[a],n,o,r)}n=e.yA,e.yA=!0,a=t.lC,0!==t.mr&&0!==t.lr&&(i=t.mr,e.tb=a(o,i,t.lr-i,r)),null!==t.kr&&null!==t.jr&&(i=t.kr,t=t.jr,e.ib=new b(a(o,i.x,t.x-i.x,r),a(o,i.y,t.y-i.y,r))),e.yA=n}function Ti(t){t.Wj=!1,t.no=!1,Si(t);for(var e=t.Z,i=t.gC,n=t.fC,o=t.mv.i;o.next();){var r,a=o.key,s=o.value,l=s.start,h=s.end,u=s.It;for(r in h)if(void 0!==Xc[r]){var c=r;!s.Uw||"position:node"!==c&&"position:placeholder"!==c||(c="position"),Xc[c](a,l[r],void 0!==u[r]?u[r]:s.Uw?l[r]:h[r],i,n,n)}s.Uw&&void 0!==u.location&&a instanceof sa&&(a.location=u.location),s.Tx&&a instanceof sa&&a.vd(!1)}for(i=t.Z.links;i.next();)n=i.value,null!==n.mp&&(n.points=n.mp,n.mp=null);e.Gx.clear(),e.kk=null,e.rc(),e.na(),e.Zf(),nn(e),Mi(t),t.lv&&t.lv(),t.mo=0,t.mv=null,t.lv=null,t.kv=null,t.kr=null,t.jr=null,t.mr=0,t.lr=0,t.Pm=new v(Mo,Bi),e.Aa("AnimationFinished"),e.Le()}function Li(t,e,i){var n=e.W,o=i.W,r=null;if(i instanceof Cs&&(r=i.placeholder),null!==r?(n=r.Wa(iu),n.x+=r.padding.left,n.y+=r.padding.top,xi(t,e,"position",n,e.position,!1)):xi(t,e,"position",new b(o.x+o.width/2-n.width/2,o.y+o.height/2-n.height/2),e.position,!1),xi(t,e,"scale",.01,e.scale,!1),e instanceof Cs)for(e=e.Nc;e.next();)(r=e.value)instanceof Ba&&Li(t,r,i)}function Ni(t,e,i){if(e.isVisible()){var n=null;if(i instanceof Cs&&(n=i.placeholder),null!==n?xi(t,e,"position:placeholder",e.position,n,!0):xi(t,e,"position:node",e.position,i,!0),xi(t,e,"scale",e.scale,.01,!0),t.pc&&(n=t.Pm,n.contains(e)&&(n.ja(e).Tx=!0)),e instanceof Cs)for(e=e.Nc;e.next();)(n=e.value)instanceof Ba&&Ni(t,n,i)}}function Ci(t,e,i){t.pc&&(null===t.kr&&e.H()&&null===t.jr&&(t.kr=e.copy()),t.jr=i.copy(),t.no=!0)}function Ai(t,e,i){t.pc&&t.Z.Hn&&(0===t.mr&&0===t.lr&&(t.mr=e),t.lr=i,t.no=!0)}function Bi(t,e,i){this.start=t,this.end=e,this.It=new n,this.Uw=i,this.Tx=!1}function Di(){0<arguments.length&&_h.hd(Di),_h.mc(this),this.Z=null,this.zb=new u(sa),this.Qb="",this.wc=1,this.gz=!1,this.tl=this.Kz=this.Vk=this.Uk=this.Tk=this.Sk=this.Qk=this.Rk=this.Pk=this.Xk=this.Ok=this.Wk=this.Nk=this.Mk=!0,this.dz=!1,this.fw=[]}function Fi(t,e,i,n){if(t.visible&&0!==t.wc){1!==t.wc&&(e.globalAlpha=t.wc);var o=t.fw;o.length=0;var r=i.scale;t=t.zb.n;for(var a=t.length,s=n.length,l=0;l<a;l++){var h=t[l];if(Ma(h)){if(h instanceof Ua){var u=h;if(u.jc&&o.push(u),!1===u.Zg)continue}var c,u=da(h,h.W);t:{c=u;for(var f=n,d=s,p=2/r,g=4/r,y=0;y<d;y++){var m=f[y];if(0!==m.width&&0!==m.height&&c.dF(m.x-p,m.y-p,m.width+g,m.height+g)){c=!0;break t}}c=!1}c&&(1<u.width*r||1<u.height*r?h.se(e,i):ba(h,e))}}e.globalAlpha=1}}function ji(t,e,i){if(e=Ei(t,e,i),i instanceof Cs&&null!==i&&isNaN(i.ho)){if(0!==i.Nc.count){for(var n=-1,o=t.zb.n,r=o.length,a=0;a<r;a++){var s=o[a];if(s===i&&(e=a,0<=n))break;if(0>n&&s.Ka===i&&(n=a,0<=e))break}!(0>n)&&n<e&&(o=t.zb,o.Yc(e),o.Md(n,i))}i=i.Ka,null!==i&&ji(t,-1,i)}}function Ei(t,e,i){var n=i.ho;if(isNaN(n))return e;t=t.zb;var o=t.count;if(1>=o)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var r=e-1,a=NaN;0<=r&&(a=t.da(r).ho,isNaN(a));)r--;for(var s=e+1,l=NaN;s<o&&(l=t.da(s).ho,isNaN(l));)s++;if(!isNaN(a)&&a>n)for(;;){if(-1===r||a<=n){if(++r===e)break;return t.Yc(e),t.Md(r,i),r}for(a=NaN;0<=--r&&(a=t.da(r).ho,isNaN(a)););}else if(!isNaN(l)&&l<n)for(;;){if(s===o||l>=n){if(--s===e)break;return t.Yc(e),t.Md(s,i),s}for(l=NaN;++s<o&&(l=t.da(s).ho,isNaN(l)););}return e}function Ii(e){function i(){t.document.removeEventListener("DOMContentLoaded",i,!1),zi(n)}1<arguments.length&&_h.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),_h.mc(this),Pd=[],this.Sc=!0,this.OB=new mi,this.OB.Qc(this),this.Dd=17,this.Kr=!1,this.vz="default";var n=this;null!==t.document.body?zi(this):t.document.addEventListener("DOMContentLoaded",i,!1),this.ac=new u(Di),this.Lb=this.Ib=0,this.hk=this.Mb=this.qf=this.Fb=null,this.TF(),this.Qo=null,this.SF(),this.ib=new b(NaN,NaN).freeze(),this.tb=1,this.Gv=new b(NaN,NaN).freeze(),this.Hv=NaN,this.Zv=1e-4,this.Xv=100,this.dd=new B,this.Hw=new b(NaN,NaN).freeze(),this.yv=new S(NaN,NaN,NaN,NaN).freeze(),this.pw=new A(0,0,0,0).freeze(),this.qw=lf,this.mw=this.kw=null,this.qm=Qc,this.to=eu,this.gl=Qc,this.No=eu,this.Iv=this.Fv=iu,this.Be=!0,this.Gr=!1,this.sg=new f(sa),this.al=new v(Ua,S),this.Eo=!0,this.Mq=250,this.oo=-1,this.cv=new A(16,16,16,16).freeze(),this.qv=this.Nf=!1,this.Io=!0,this.Hi=new Ct,this.Uc=new Ct,this.Pb=new Ct,this.gh=this.vi=null,this.gt=!1,this.My=this.Ny=null,$n(this),this.gp=new f(Ba),this.yl=new f(Cs),this.$o=new f(Ua),this.zb=new f(sa),this.Ov=!0,this.Cw=uf,this.KC=!1,this.Ew=ef,this.Hy=this.Ky=this.Gz=null,this.jv="",this.ir="auto",this.zi=this.dj=this.Si=this.bw=this.Ti=this.Ui=this.Vi=this.yi=this.Ei=this.wi=null,this.nz=!1,this.sD={},this.jw=0,this.Zi=[null,null],this.Ey=null,this.Eq=this.Ly=this.Bz=this.yD=this.cj=!1,this.VC=!0,this.fz=this.Xd=!1,this.ke=null;var o=this;this.cD=function(t){if(t.ba===o.ba&&o.Ua){o.Ua=!1;try{var e=t.yc;""===t.nf&&e===gc&&Pn(o,t.object,t.propertyName)}finally{o.Ua=!0}}},this.dD=function(t){Mn(o,t)},this.YD=!0,this.dh=-2,this.Ai=new v(Object,sa),this.Lj=new v(Object,Ua),this.Em=new v(Object,Array),this.ip=new v("string",Array),this.sz=new u(Hr),this.Ji=!1,this.Nk=this.Mk=this.Su=this.cf=!0,this.Uu=this.Tu=!1,this.Zu=this.Xu=this.Vk=this.Uk=this.Tk=this.Sk=this.Qk=this.Rk=this.Pk=this.Wu=this.Xk=this.Ok=this.Wk=!0,this.Cm=this.SC=!1,this.Yu=this.Vu=this.Dv=this.Cv=!0,this.sw=this.ow=16,this.xz=this.nw=!1,this.Qs=this.rw=null,this.yz=this.zz=0,this.ff=new A(5).freeze(),this.uw=new f(sa).freeze(),this.Yv=999999999,this.Ev=new f(sa).freeze(),this.hl=this.Am=this.Vj=!0,this.el=this.Uj=!1,this.ie=null,this.av=!0,this.eh=!1,this.JG=new f(Ua),this.IC=new f(ps),this.Cd=null,this.jD=1,this.BD=0,this.nh={scale:1,position:new b,bounds:new S,isScroll:!1},this.XD=new S(NaN,NaN,NaN,NaN).freeze(),this.rv=new S(NaN,NaN,NaN,NaN).freeze(),this.Pv=!1,this.tv=null,this.gw=new f(uo),qi(this),this.Tv=this.Av=this.cw=this.oC=this.nC=this.pC=this.ak=this.cl=this.Wi=null,Oi(this),this.pd=null,this.zv=!1,this.wo=null,this.ab=new pi,this.ab.initializeStandardTools(),this.Za=this.Et=this.ab,this.ob=new se,this.ba=new Xt,this.cj=!0,this.Sb=new Es,this.cj=!1,this.AC=this.Qy=null,this.Ad=1,this.kk=null;var r=_h.vfo.split(".");!0!==_h.Zw.licenseKey&&"1"===r[0]&&7>parseInt(r[1],10)&&(_h.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version "+_h.vfo+". This license key will do nothing until you upgrade to GoJS 1.7 or later."),_h.Zw.licenseKey=!0),this.ll=1,this.Gm=0,this.XC=new b,this.TD=500,this.bv=new b,this.Zs=null,this.il=!1,this.preventDefault=this.Sx=this.IF=this.JF=this.HF=this.Qn=this.Og=this.Rn=this.On=this.Pn=this.BB=this.sB=this.tB=this.uB=this.vl=this.Ms=this.ul=this.Ls=null,this.fl=new ao,void 0!==e&&lo(this,e),this.Lv=!1,this.gD=1,this.Sc=!1}function Oi(t){t.Wi=new v("string",sa);var e=new Ba,i=new Er;i.bind(new ie("text","",wc)),e.add(i),t.pC=e,t.Wi.add("",e),e=new Ba,i=new Er,i.stroke="brown",i.bind(new ie("text","",wc)),e.add(i),t.Wi.add("Comment",e),e=new Ba,e.cm=!1,e.Rz=!1,i=new Tr,i.Cb="Ellipse",i.fill="black",i.stroke=null,i.Ba=new k(3,3).Ga(),e.add(i),t.Wi.add("LinkLabel",e),t.cl=new v("string",Cs),e=new Cs,e.cB="GROUPPANEL",e.type=Yf,i=new Er,i.font="bold 12pt sans-serif",i.bind(new ie("text","",wc)),e.add(i),i=new Zo(Xf),i.name="GROUPPANEL";var n=new Tr;n.Cb="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),n=new js,n.padding=new A(5,5,5,5).Ga(),i.add(n),e.add(i),t.nC=e,t.cl.add("",e),t.ak=new v("string",Ua),e=new Ua,i=new Tr,i.Vf=!0,e.add(i),i=new Tr,i.yq="Standard",i.fill="black",i.stroke=null,i.kb=0,e.add(i),t.oC=e,t.ak.add("",e),e=new Ua,i=new Tr,i.Vf=!0,i.stroke="brown",e.add(i),t.ak.add("Comment",e),e=new Aa,e.type=Xf,i=new Tr,i.fill=null,i.stroke="dodgerblue",i.kb=3,e.add(i),i=new js,i.margin=new A(1.5,1.5,1.5,1.5).Ga(),e.add(i),t.cw=e,t.Av=e,e=new Aa,e.type=ed,i=new Tr,i.Vf=!0,i.fill=null,i.stroke="dodgerblue",i.kb=3,e.add(i),t.Tv=e}function zi(e){var i=_h.createElement("p");i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box";var n=_h.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.style.boxSizing="content-box",n.appendChild(i),t.document.body.appendChild(n);var o=i.offsetWidth;n.style.overflow="scroll",i=i.offsetWidth,o===i&&(i=n.clientWidth),t.document.body.removeChild(n),n=o-i,0!==n||_h.lF||(n=11),e.Dd=n,n=_h.createElement("div"),n.dir="rtl",n.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",n.textContent="A",t.document.body.appendChild(n),o="reverse",0<n.scrollLeft?o="default":(n.scrollLeft=1,0===n.scrollLeft&&(o="negative")),t.document.body.removeChild(n),e.vz=o}function Gi(e){var i=e.Fb;i.addEventListener("touchstart",e.uB,!1),i.addEventListener("touchmove",e.tB,!1),i.addEventListener("touchend",e.sB,!1),i.addEventListener("mousemove",e.Pn,!1),i.addEventListener("mousedown",e.On,!1),i.addEventListener("mouseup",e.Rn,!1),i.addEventListener("mousewheel",e.Og,!1),i.addEventListener("DOMMouseScroll",e.Og,!1),i.addEventListener("mouseout",e.Qn,!1),i.addEventListener("keydown",e.AI,!1),i.addEventListener("keyup",e.BI,!1),i.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),i.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),i.addEventListener("gesturechange",function(t){e.ab.Wp===Yc&&t.preventDefault()},!1),i.addEventListener("pointerdown",e.HF,!1),i.addEventListener("pointermove",e.JF,!1),i.addEventListener("pointerleave",e.IF,!1),t.addEventListener("resize",e.BB,!1)}function Ri(t){if(null!==t.Fb){var e=t.Mb;if(0!==e.clientWidth&&0!==e.clientHeight){var i=t.el?t.Dd:0,n=t.Uj?t.Dd:0,o=t.Ad;t.Ad=t.computePixelRatio(),t.Ad!==o&&(t.Gr=!0,t.Le()),e.clientWidth===t.Ib+i&&e.clientHeight===t.Lb+n||(t.Am=!0,t.Be=!0,e=t.Sb,null!==e&&e.zx&&t.Gl===Qc&&e.J(),t.Xd||t.Le())}}}function qi(t){var e=new Di;e.name="Background",t.tt(e),e=new Di,e.name="",t.tt(e),e=new Di,e.name="Foreground",t.tt(e),e=new Di,e.name="Adornment",e.Kc=!0,t.tt(e),e=new Di,e.name="Tool",e.Kc=!0,e.gF=!0,t.tt(e),e=new Di,e.name="Grid",e.tf=!1,e.Tg=!1,e.Kc=!0,t.bH(e,t.Kt("Background"))}function Wi(t){t.pd=new Zo(id),t.pd.name="GRID";var e=new Tr;e.Cb="LineH",e.stroke="lightgray",e.kb=.5,e.interval=1,t.pd.add(e),e=new Tr,e.Cb="LineH",e.stroke="gray",e.kb=.5,e.interval=5,t.pd.add(e),e=new Tr,e.Cb="LineH",e.stroke="gray",e.kb=1,e.interval=10,t.pd.add(e),e=new Tr,e.Cb="LineV",e.stroke="lightgray",e.kb=.5,e.interval=1,t.pd.add(e),e=new Tr,e.Cb="LineV",e.stroke="gray",e.kb=.5,e.interval=5,t.pd.add(e),e=new Tr,e.Cb="LineV",e.stroke="gray",e.kb=1,e.interval=10,t.pd.add(e),e=new sa,e.add(t.pd),e.Xf="Grid",e.ho=0,e.AA=!1,e.fF=!1,e.Tg=!1,e.EA="GRID",t.add(e),t.zb.remove(e),t.pd.visible=!1}function Hi(){this.Z.isEnabled?this.Z.KH(this):mn(this.Z)}function Vi(t){this.Z.isEnabled?(this.Z.xz=!0,this.Z.zz=t.target.scrollTop,this.Z.yz=t.target.scrollLeft):mn(this.Z)}function Ui(t){if(t.OE.H()){var e=t.OE.copy();return e.Iw(t.padding),e}for(var i=!0,n=t.ac.n,o=n.length,r=0;r<o;r++){var a=n[r];if(a.visible&&(!a.Kc||a.gF))for(var a=a.zb.n,s=a.length,l=0;l<s;l++){var h=a[l];h.AA&&h.isVisible()&&(h=h.W,h.H()&&(i?(i=!1,e=h.copy()):e.Gh(h)))}}return i&&(e=new S(0,0,0,0)),e.Iw(t.padding),e}function _i(t,e){if((e||t.eh)&&!t.Sc&&null!==t.Fb&&!t.Pa.kf&&t.qe.H()){t.Sc=!0;var i=t.qm;e&&t.gl!==Qc&&(i=t.gl);var n=i!==Qc?Ki(t,i):t.scale,i=t.pb.copy(),o=t.Ib/n,r=t.Lb/n,a=null,s=t.Pa;s.pc&&(a=t.ib.copy()),t.position.Ra();var l=t.to;e&&!l.fd()&&t.No.fd()&&(l=t.No),Ji(t,t.ib,t.qe,o,r,l,e),t.position.freeze(),null!==a&&Ci(s,a,t.ib),o=t.scale,t.scale=n,t.Sc=!1,n=t.pb,n.Ic(i)||t.tu(i,n,o,t.scale,!1)}}function Ki(t,e){var i=t.ob.Xw;if(null===t.Fb)return i;t.Vj&&Un(t,t.sh());var n=t.qe;if(!n.H())return i;var o=n.width,n=n.height,r=t.Ib,a=t.Lb,s=r/o,l=a/n;return e===Zc?(o=Math.min(l,s),o>i&&(o=i),o<t.yh&&(o=t.yh),o>t.xh&&(o=t.xh),o):e===tf?(o=l>s?(a-t.Dd)/n:(r-t.Dd)/o,o>i&&(o=i),o<t.yh&&(o=t.yh),o>t.xh&&(o=t.xh),o):t.scale}function Ji(t,e,i,n,o,r,a){var s=e.x,l=e.y;(a||t.$A===lf)&&(r.fd()&&(n>i.width&&(s=i.x+(r.x*i.width+r.offsetX)-(r.x*n-r.offsetX)),o>i.height&&(l=i.y+(r.y*i.height+r.offsetY)-(r.y*o-r.offsetY))),r=t.$F,a=n-i.width,n<i.width+r.left+r.right?(s=Math.min(s+n/2,i.right+Math.max(a,r.right)-n/2),s=Math.max(s,i.left-Math.max(a,r.left)+n/2),s-=n/2):s>i.left?s=i.left:s<i.right-n&&(s=i.right-n),n=o-i.height,o<i.height+r.top+r.bottom?(l=Math.min(l+o/2,i.bottom+Math.max(n,r.bottom)-o/2),l=Math.max(l,i.top-Math.max(n,r.top)+o/2),l-=o/2):l>i.top?l=i.top:l<i.bottom-o&&(l=i.bottom-o)),e.x=isFinite(s)?s:-t.padding.left,e.y=isFinite(l)?l:-t.padding.top,null!==t.LF&&(t=t.LF(t,e),e.x=t.x,e.y=t.y)}function Yi(t,e,i,n){for(void 0===i&&(i=null),void 0===n&&(n=null),sn(t),t=t.ac.In;t.next();){var o=t.value;if(o.visible&&!o.Kc&&null!==(o=o.Je(e,i,n)))return o}return null}function $i(t,e,i,n,o){n.g=e,n.event=i,o?tn(t,i,n):(n.bf=e.Pb.bf,n.ca=e.Pb.ca),t=0,i.ctrlKey&&(t+=1),i.altKey&&(t+=2),i.shiftKey&&(t+=4),i.metaKey&&(t+=8),n.wd=t,n.button=i.button,void 0===i.buttons||_h.tI||(n.buttons=i.buttons),_h.Fk&&0===i.button&&i.ctrlKey&&(n.button=2),n.Ol=!1,n.up=!1,n.Fe=1,n.Nl=0,n.Ac=!1,n.bubbles=!1,n.timestamp=Date.now(),n.cu=!1,n.Vg=i.target.Z?i.target.Z:null,n.Pe=null}function Xi(t,e,i,n,o){n.g=t,tn(t,i,n),n.wd=0,n.button=0,n.buttons=1,n.Ol=!0,n.up=!1,n.Fe=1,n.Nl=0,n.Ac=!1,n.bubbles=!0,n.event=e,
n.timestamp=Date.now(),n.cu=o,n.Vg=e.target.Z?e.target.Z:null,n.Pe=null,t.Hi=n.copy(),Pc=null}function Qi(e,i,n,o,r){var a=null;o.g=e,null!==n?((a=t.document.elementFromPoint(n.clientX,n.clientY))&&a.Z?a=a.Z:(n=i.changedTouches[0],a=e),o.Vg=a,tn(e,n,o)):null!==e.Uc?(o.ca=e.Uc.ca,o.bf=e.Uc.bf,o.Vg=e.Uc.Vg):null!==e.Hi&&(o.ca=e.Hi.ca,o.bf=e.Hi.bf,o.Vg=e.Hi.Vg),o.wd=0,o.button=0,o.buttons=1,o.Ol=!1,o.up=!1,o.Fe=1,o.Nl=0,o.Ac=!1,o.bubbles=!1,o.event=i,o.timestamp=Date.now(),o.cu=r,o.Pe=null}function Zi(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),(void 0===e.touches||2>e.touches.length)&&e.preventDefault(),e.cancelBubble=!0,!1)}function tn(t,e,i){var n=t.Fb,o=t.Ib,r=t.Lb,a=0,s=0;null!==n&&(n=n.getBoundingClientRect(),a=e.clientX-o/n.width*n.left,s=e.clientY-r/n.height*n.top),i.bf.m(a,s),null!==t.dd?(e=_h.xb(a,s),t.dd.li(e),i.ca.assign(e),_h.v(e)):i.ca.m(a,s)}function en(t,e,i,n){var o=null;if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;o=e.targetTouches[i]}else{if(null===t.Zi[0])return;o=t.Zi[i]}i=t.Fb,e=t.Ib,t=t.Lb;var r=0,a=0;null!==i&&null!==o&&(i=i.getBoundingClientRect(),r=o.clientX-e/i.width*i.left,a=o.clientY-t/i.height*i.top),n.m(r,a)}function nn(t){t.Xd||sn(t),t.Vj&&Un(t,t.sh())}function on(t,e){t.Pa.kf||t.Sc||!t.Am||mn(t)||(e&&sn(t),_i(t,!1))}function rn(t){if(!t.Xd&&(t.Nf=!1,null!==t.Mb)){t.Xd=!0;var e=t.Pa,i=t.sz;if(!e.To&&0!==i.length){for(var n=i.n,o=n.length,r=0;r<o;r++){var a=n[r];_o(a,!1),a.I()}i.clear()}i=t.IC,0<i.count&&(i.each(function(t){t.yB()}),i.clear()),n=i=!1,e.kf&&(n=!0,i=t.wb,t.wb=!0),e.pc||Ri(t),on(t,!1),null!==t.pd&&(t.pd.visible&&!t.zv&&(wn(t),t.zv=!0),!t.pd.visible&&t.zv&&(t.zv=!1)),sn(t),o=!1,t.eh&&!t.av||(t.eh?Jn(t,!t.qv):(t.Ub("Initial Layout"),!1===e.isEnabled&&e.pi(),Jn(t,!1)),o=!0),t.qv=!1,sn(t),t.Bz||e.kf||nn(t),on(t,!0),o&&(t.eh||an(t),t.Aa("LayoutCompleted")),sn(t),o&&!t.eh&&(t.eh=!0,t.Gd("Initial Layout"),t.wb||t.oa.clear(),_h.setTimeout(function(){t.ni=!1},1)),fn(t),bi(e),t.se(t.qf),n&&(t.wb=i),t.Xd=!1}}function an(t){var e=t.ac.n;if(t.Cf(e,e.length,t),t.gl!==Qc?t.scale=Ki(t,t.gl):t.qm!==Qc?t.scale=Ki(t,t.qm):(e=t.nI,isFinite(e)&&0<e&&(t.scale=e)),e=t.mI,e.H())t.position=e;else{e=_h.K(),e.Xn(t.qe,t.lI);var i=t.pb,i=_h.hg(0,0,i.width,i.height),n=_h.K();n.Xn(i,t.oI),n.m(e.x-n.x,e.y-n.y),t.position=n,_h.Db(i),_h.v(n),_h.v(e),dn(t),on(t,!0),_i(t,!0)}t.Aa("InitialLayoutCompleted"),wn(t)}function sn(t){if((t.Xd||!t.Pa.kf)&&0!==t.sg.count){for(var e=0;23>e;e++){var i=t.sg.i;if(null===i||0===t.sg.count)break;t.sg=new f(sa),t.yB(i,t.sg)}t.eg.each(function(t){t instanceof Cs&&0!=(65536&t.ya)!=!1&&(t.ya^=65536)})}}function ln(t,e){for(var i=_h.lb(),n=_h.lb(),o=e.Nc;o.next();){var r=o.value;r.isVisible()&&(r instanceof Cs?(Uo(r)||Ko(r)||wa(r))&&ln(t,r):r instanceof Ua?r.Y===e||r.$===e?n.push(r):i.push(r):(Ao(r,Infinity,Infinity),r.hc()))}for(var o=i.length,a=0;a<o;a++)r=i[a],Ao(r,Infinity,Infinity),r.hc();for(_h.wa(i),Ao(e,Infinity,Infinity),e.hc(),o=n.length,a=0;a<o;a++)r=n[a],Ao(r,Infinity,Infinity),r.hc();_h.wa(n)}function hn(t,e,i,n,o){null===t.Mb&&_h.k("No div specified");var r=t.Fb;if(null===r&&_h.k("No canvas specified"),!t.Pa.pc){var a=t.qf;if(t.Be){gn(t);var s=t.Ad;_h.Fn?(r.width=r.width,a.Ee(!0)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t.Ib*s,t.Lb*s)),a.by(!1),a.drawImage(t.Qy.Hd,0<n?0:Math.round(-n),0<o?0:Math.round(-o)),o=t.ib;var r=t.tb,l=Math.round(o.x*r)/r,h=Math.round(o.y*r)/r;for(n=t.dd,n.reset(),1!==r&&n.scale(r),0===o.x&&0===o.y||n.translate(-l,-h),a.save(),a.beginPath(),o=i.length,r=0;r<o;r++)l=i[r],0!==l.width&&0!==l.height&&a.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));for(a.clip(),a.setTransform(1,0,0,1,0,0),a.scale(s,s),a.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),i=t.ac.n,o=i.length,t.Cf(i,o,t),cn(t,a),r=0;r<o;r++)Fi(i[r],a,t,e);a.restore(),a.Ee(!0),t.fl?t.fl.km(t)&&t.tv():t.yr=function(){return new b(0,0)},t.hl=!1,t.Be=!1,t.Sx()}}}function un(t,e,i,n,o,r,a,s,l,h){null===t.Mb&&_h.k("No div specified"),null===t.Fb&&_h.k("No canvas specified"),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=!1),void 0===h&&(h=!1),gn(t),t.qf.Ee(!0),pn(t),t.fz=!0;var u=t.tb;t.tb=o;var c=t.ac.n,d=c.length;try{var p=new S(r.x,r.y,n.width/o,n.height/o),g=p.copy();g.Iw(i),wn(t,g),sn(t),t.Cf(c,d,t,p);var y=t.Ad;e.setTransform(1,0,0,1,0,0),e.scale(y,y),e.clearRect(0,0,n.width,n.height),null!==s&&""!==s&&(e.fillStyle=s,e.fillRect(0,0,n.width,n.height));var m=_h.Ff();m.reset(),m.translate(i.left,i.top),m.scale(o),0===r.x&&0===r.y||m.translate(-r.x,-r.y),e.setTransform(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),_h.ue(m),cn(t,e);var v;if(null!==a){var x=new f(sa),w=a.i;for(w.reset();w.next();){var k=w.value;!1===h&&"Grid"===k.layer.name||null===k||x.add(k)}v=function(i){var n=l;if(i.visible&&0!==i.wc&&(void 0===n&&(n=!0),n||!i.Kc)){var n=i.zb.n,o=n.length;if(0!==o){1!==i.wc&&(e.globalAlpha=i.wc),i=i.fw,i.length=0;for(var r=t.scale,a=0;a<o;a++){var s=n[a];if(Ma(s)&&x.contains(s)){if(s instanceof Ua){var h=s;if(h.jc&&i.push(h),!1===h.Zg)continue}h=s.W,1<h.width*r||1<h.height*r?s.se(e,t):ba(s,e)}}e.globalAlpha=1}}}}else if(!l&&h){var M=t.Dn.U,P=M.layer;v=function(i){i===P?M.se(e,t):i.se(e,t,l)}}else v=function(i){i.se(e,t,l)};for(i=0;i<d;i++)v(c[i]);t.fz=!1,t.fl?t.fl.km(t)&&t.tv():t.yr=function(){return new b(0,0)}}finally{t.tb=u,t.qf.Ee(!0),pn(t),t.Cf(c,d,t),wn(t)}}function cn(t,e){var i=t.hk;null!==i&&(void 0!==i.imageSmoothingEnabled&&e.by(!!i.imageSmoothingEnabled),void 0!==(i=i.defaultFont)&&null!==i&&(e.font=i))}function fn(t){if(0===t.oa.Fh&&0!==t.al.count){for(;0<t.al.count;){var e=t.al;for(t.al=new v(Ua,S),e=e.i;e.next();){var i=e.key;us(i,e.value),i.Ke()}}t.na()}}function dn(t){!1===t.Am&&(t.Am=!0)}function pn(t){!1===t.hl&&(t.hl=!0)}function gn(t){!1!==t.Gr&&(t.Gr=!1,yn(t,t.Ib,t.Lb))}function yn(t,e,i){var n=t.Fb,o=t.Ad,r=e*o,o=i*o;n.width===r&&n.height===o||(n.width=r,n.height=o,n.style.width=e+"px",n.style.height=i+"px",t.Be=!0,t.qf.Ee(!0))}function mn(t){var e=t.Fb;if(null===e)return!0;var i=t.Mb,n=t.Ib,o=t.Lb,r=t.XD.copy();if(!r.H())return!0;var a=!1,s=t.el?t.Dd:0,l=t.Uj?t.Dd:0,h=i.clientWidth||n+s,u=i.clientHeight||o+l;h===n+s&&u===o+l||(t.el=!1,t.Uj=!1,l=s=0,t.Ib=h,t.Lb=u,a=t.Gr=!0),t.Am=!1;var c=t.pb,i=t.qe,h=i.width,u=i.height,f=c.width,d=c.height,p=i.x,g=c.x,y=i.right,m=c.right+s,v=i.y,b=c.y,x=i.bottom,c=c.bottom+l,w="1px",k="1px",i=t.scale;if(t.$A===lf&&h<f+s&&u<d+l||(t.sA&&t.me&&(w=1,p+1<g&&(w=Math.max((g-p)*i+t.Ib,w)),y>m+1&&(w=Math.max((y-m)*i+t.Ib,w)),f+s+1<h&&(w=Math.max((h-f+s)*i+t.Ib,w)),w=w.toString()+"px"),t.tA&&t.ne&&(s=1,v+1<b&&(s=Math.max((b-v)*i+t.Lb,s)),x>c+1&&(s=Math.max((x-c)*i+t.Lb,s)),d+l+1<u&&(s=Math.max((u-d+l)*i+t.Lb,s)),k=s.toString()+"px")),l="1px"!==w,s="1px"!==k,!(l&&s||!l&&!s)){s&&(m-=t.Dd),l&&(c-=t.Dd),t.sA&&t.me&&(w=1,p+1<g&&(w=Math.max((g-p)*i+t.Ib,w)),y>m+1&&(w=Math.max((y-m)*i+t.Ib,w)),f+1<h&&(w=Math.max((h-f)*i+t.Ib,w)),w=w.toString()+"px");var l="1px"!==w,S=l!==t.Uj?t.Lb-t.Dd:t.Lb;t.tA&&t.ne&&(s=1,v+1<b&&(s=Math.max((b-v)*i+S,s)),x>c+1&&(s=Math.max((x-c)*i+S,s)),d+1<u&&(s=Math.max((u-d)*i+S,s)),k=s.toString()+"px"),s="1px"!==k}if(t.nw&&l===t.Uj&&s===t.el)return n===t.Ib&&o===t.Lb||t.Zf(),!1;if(l!==t.Uj&&(t.Lb="1px"===w?t.Lb+t.Dd:Math.max(t.Lb-t.Dd,1),a=!0),t.Uj=l,t.Qs.style.width=w,s!==t.el&&(t.Ib="1px"===k?t.Ib+t.Dd:Math.max(t.Ib-t.Dd,1),a=!0,t.Kr&&(l=_h.K(),s?(e.style.left=t.Dd+"px",t.position=l.m(t.ib.x+t.Dd/t.scale,t.ib.y)):(e.style.left="0px",t.position=l.m(t.ib.x-t.Dd/t.scale,t.ib.y)),_h.v(l))),t.el=s,t.Qs.style.height=k,e=t.rw,l=e.scrollLeft,t.sA&&t.me&&(f+1<h?l=(t.position.x-p)*i:p+1<g?l=e.scrollWidth-e.clientWidth:y>m+1&&(l=t.position.x*i)),t.Kr)switch(t.vz){case"negative":l=-(e.scrollWidth-l-e.clientWidth);break;case"reverse":l=e.scrollWidth-l-e.clientWidth}return e.scrollLeft=l,t.tA&&t.ne&&(d+1<u?e.scrollTop=(t.position.y-v)*i:v+1<b?e.scrollTop=e.scrollHeight-e.clientHeight:x>c+1&&(e.scrollTop=t.position.y*i)),a&&(t.Gr=!0),h=t.Ib,u=t.Lb,e.style.width=h+(t.el?t.Dd:0)+"px",e.style.height=u+(t.Uj?t.Dd:0)+"px",t.xz=!1,n===h&&o===u&&!t.Pa.pc||(c=t.pb,t.tu(r,c,i,t.scale,a),!1)}function vn(t,e,i){var n=e.layer;null!==n&&n.g===t&&(e.fb=!1,e.Mg=!1,e.J(Ad),i&&e.vn(),i=n.jf(-1,e,!1),0<=i&&t.Xc(mc,"parts",n,e,null,i,null),null!==(t=e.Cx)&&t(e,n,null))}function bn(t,e,i){if(_h.G(e,Di,Ii,"addLayer:layer"),null!==e.g&&e.g!==t&&_h.k("Cannot share a Layer with another Diagram: "+e+" of "+e.g),null===i?null!==e.g&&_h.k("Cannot add an existing Layer to this Diagram again: "+e):(_h.G(i,Di,Ii,"addLayer:existingLayer"),i.g!==t&&_h.k("Existing Layer must be in this Diagram: "+i+" not in "+i.g),e===i&&_h.k("Cannot move a Layer before or after itself: "+e)),e.g!==t){e=e.name,t=t.ac,i=t.count;for(var n=0;n<i;n++)t.da(n).name===e&&_h.k("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function xn(t,e,i){if(t.Sc||t.Xd)t.tb=i,i=t.Pa,i.pc&&Ai(i,e,t.tb);else if(t.Sc=!0,null===t.Fb)t.tb=i;else{var n=t.pb.copy(),o=t.Ib,r=t.Lb;n.width=t.Ib/e,n.height=t.Lb/e;var a=t.lm.x,s=t.lm.y,l=t.tE;isNaN(a)&&(l.uj()?l.rj(xu)?a=0:l.rj(wu)&&(a=o-1):a=l.fd()?l.x*(o-1):o/2),isNaN(s)&&(l.uj()?l.rj(bu)?s=0:l.rj(ku)&&(s=r-1):s=l.fd()?l.y*(r-1):r/2),null!==t.ZF&&(i=t.ZF(t,i)),i<t.yh&&(i=t.yh),i>t.xh&&(i=t.xh),o=_h.xb(t.ib.x+a/e-a/i,t.ib.y+s/e-s/i),t.position=o,_h.v(o),t.tb=i,t.tu(n,t.pb,e,i,!1),t.Sc=!1,_i(t,!1),i=t.Pa,i.pc&&Ai(i,e,t.tb),t.na(),dn(t)}}function wn(t,e){void 0===e&&(e=null);var i=t.pd;if(null!==i&&i.visible){for(var n=_h.im(),o=1,r=1,a=i.xa.n,s=a.length,l=0;l<s;l++){var h=a[l],u=h.interval;2>u||(rr(h.Cb)?r=r*u/gt(r,u):o=o*u/gt(o,u))}if(a=i.ox,n.m(r*a.width,o*a.height),a=r=l=s=0,null!==e)s=e.width,l=e.height,r=e.x,a=e.y;else{for(o=_h.Ef(),r=t.pb,o.m(r.x,r.y,r.width,r.height),a=t.gw.i;a.next();)r=a.value.pb,r.H()&&C(o,r.x,r.y,r.width,r.height);if(!o.H())return void _h.Db(o);s=o.width,l=o.height,r=o.x,a=o.y,_h.Db(o)}i.width=s+2*n.width,i.height=l+2*n.height,o=_h.K(),pt(r,a,0,0,n.width,n.height,o),o.offset(-n.width,-n.height),_h.Ak(n),i.U.location=o,_h.v(o)}}function kn(t){if(t=t.selection,0<t.count){for(var e=t.ec(),i=e.length,n=0;n<i;n++)e[n].fb=!1;t.Ra(),t.clear(),t.freeze()}}function Sn(t){var e=t.ni;t.YD!==e&&(t.YD=e,t.Aa("Modified"))}function Mn(t,e){if(e.ba===t.ba){var i=e.yc,n=e.propertyName;if(i===pc&&"S"===n[0])if("StartingFirstTransaction"===n)i=t.ab,i.af.each(function(e){e.Qc(t)}),i.$f.each(function(e){e.Qc(t)}),i.ag.each(function(e){e.Qc(t)}),t.Xd||t.eh||(t.qv=!0,t.Io&&(t.Nf=!0));else if("StartingUndo"===n||"StartingRedo"===n){var o=t.Pa;o.kf&&!t.wb&&o.pi(),t.Aa("ChangingSelection")}else"StartedTransaction"===n&&(o=t.Pa,o.kf&&!t.wb&&o.pi());else if(t.Ua){t.Ua=!1;try{var r=e.nf;if(""!==r)if(i===gc){if("linkFromKey"===r){var a=e.object,s=t.Rf(a);if(null!==s){var l=e.newValue,h=t.Ie(l);s.Y=h}}else if("linkToKey"===r)a=e.object,null!==(s=t.Rf(a))&&(l=e.newValue,h=t.Ie(l),s.$=h);else if("linkFromPortId"===r){if(a=e.object,null!==(s=t.Rf(a))){var u=e.newValue;"string"==typeof u&&(s.Lg=u)}}else if("linkToPortId"===r)a=e.object,null!==(s=t.Rf(a))&&"string"==typeof(u=e.newValue)&&(s.Eh=u);else if("nodeGroupKey"===r){var a=e.object,c=t.vh(a);if(null!==c){var f=e.newValue;if(void 0!==f){var d=t.Ie(f);c.Ka=d instanceof Cs?d:null}else c.Ka=null}}else if("linkLabelKeys"===r){if(a=e.object,null!==(s=t.Rf(a))){var p=e.oldValue,g=e.newValue;if(_h.isArray(p))for(var y=_h.Ya(p),m=0;m<y;m++){var v=_h.Da(p,m),h=t.Ie(v);null!==h&&(h.Mc=null)}if(_h.isArray(g))for(y=_h.Ya(g),m=0;m<y;m++)v=_h.Da(g,m),null!==(h=t.Ie(v))&&(h.Mc=s)}}else if("nodeParentKey"===r){var b=e.object,x=t.Ie(e.newValue),w=t.ix(b);if(null!==w){var k=w.xn();null!==k?null===x?t.remove(k):t.Pd?k.Y=x:k.$=x:On(t,x,w)}}else if("parentLinkCategory"===r){var b=e.object,w=t.ix(b),S=e.newValue;null!==w&&"string"==typeof S&&null!==(k=w.xn())&&(k.td=S)}else if("nodeCategory"===r){var a=e.object,M=t.vh(a),S=e.newValue;null!==M&&"string"==typeof S&&(M.td=S)}else if("linkCategory"===r){var a=e.object,P=t.Rf(a),S=e.newValue;null!==P&&"string"==typeof S&&(P.td=S)}else if("nodeDataArray"===r){var T=e.oldValue;qn(t,T);var L=e.newValue;Fn(t,L)}else"linkDataArray"===r&&(T=e.oldValue,qn(t,T),L=e.newValue,zn(t,L));t.ni=!0}else i===yc?(L=e.newValue,"nodeDataArray"===r&&_h.Qa(L)?jn(t,L):"linkDataArray"===r&&_h.Qa(L)?Gn(t,L):"linkLabelKeys"===r&&Vt(L)&&(s=t.Rf(e.object),h=t.Ie(L),null!==s&&null!==h&&(h.Mc=s)),t.ni=!0):i===mc?(T=e.oldValue,"nodeDataArray"===r&&_h.Qa(T)?Wn(t,T):"linkDataArray"===r&&_h.Qa(T)?Wn(t,T):"linkLabelKeys"===r&&Vt(T)&&null!==(h=t.Ie(T))&&(h.Mc=null),t.ni=!0):i===pc&&("SourceChanged"===r?null!==e.object?Pn(t,e.object,e.propertyName):(t.SJ(),t.xG()):"ModelDisplaced"===r&&t.bm());else if(i===gc){var N=e.propertyName,a=e.object;a===t.ba?"nodeKeyProperty"!==N&&"nodeCategoryProperty"!==N&&"linkFromKeyProperty"!==N&&"linkToKeyProperty"!==N&&"linkFromPortIdProperty"!==N&&"linkToPortIdProperty"!==N&&"linkLabelKeysProperty"!==N&&"nodeIsGroupProperty"!==N&&"nodeGroupKeyProperty"!==N&&"nodeParentKeyProperty"!==N&&"linkCategoryProperty"!==N||t.oa.gb||t.bm():Pn(t,a,N),t.ni=!0}else if(i===yc||i===mc)Tn(t,e),t.ni=!0;else if(i===pc){"FinishedUndo"!==n&&"FinishedRedo"!==n||(t.oa.Ki=!0,t.Aa("ChangedSelection"),sn(t),t.oa.Ki=!1),o=t.Pa,"RolledBackTransaction"===n&&o.pi(),t.qv=!0,t.Zf(),0===t.oa.Fh&&bi(o),"CommittedTransaction"===n&&t.oa.hz&&(t.dh=Math.min(t.dh,t.oa.qj-1));var C=e.rF;C&&(Sn(t),t.Gx.clear()),!t.nz&&C&&(t.nz=!0,_h.setTimeout(function(){t.Za.standardMouseOver(),t.nz=!1},10))}}finally{t.Ua=!0}}}}function Pn(t,e,i){if("string"==typeof i){var n=t.vh(e);if(null!==n)n.Hb(i),t.ba instanceof ee&&null!==(n=t.Rf(e))&&n.Hb(i);else{for(var n=null,o=t.Em.i;o.next();){for(var r=o.value,a=0;a<r.length;a++){var s=r[a].QH(e);null!==s&&(null===n&&(n=_h.lb()),n.push(s))}if(null!==n)break}if(null!==n){for(o=0;o<n.length;o++)n[o].Hb(i);_h.wa(n)}}e===t.ba.Gk&&t.xG(i)}}function Tn(t,e){var i=e.yc===yc,n=i?e.Aj:e.Bj,o=i?e.newValue:e.oldValue,r=t.Em.ja(e.object);if(Array.isArray(r))for(var a=0;a<r.length;a++){var s=r[a];if(i)xr(s,o,n);else{var l=n;if(!(0>l)){var h=l;br(s)&&h++,s.jf(h),wr(s,h,l)}}}}function Ln(t,e){var i=e.$j;if(_h.isArray(i)){var n=t.Em.ja(i);if(null===n)n=[],n.push(e),t.Em.add(i,n);else{for(i=0;i<n.length;i++)if(n[i]===e)return;n.push(e)}}}function Nn(t,e){var i=e.$j;if(_h.isArray(i)){var n=t.Em.ja(i);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===e){n.splice(o,1),0===n.length&&t.Em.remove(i);break}}}function Cn(t,e){for(var i=e.xa.n,n=i.length,o=0;o<n;o++){var r=i[o];r instanceof Hr&&An(t,r)}}function An(t,e){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){var n=e.Se;if(null!==n&&(n.Ko instanceof Event&&null!==e.Te&&e.Te(e,n.Ko),!0===n.Kv&&(null!==e.gi&&e.gi(e,n.wz),null!==e.g&&e.g.sz.add(e))),i=i.src,null===(n=t.ip.ja(i)))n=[],n.push(e),t.ip.add(i,n);else{for(i=0;i<n.length;i++)if(n[i]===e)return;n.push(e)}}}function Bn(t,e){for(var i=e.xa.n,n=i.length,o=0;o<n;o++){var r=i[o];r instanceof Hr&&Dn(t,r)}}function Dn(t,e){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){var i=i.src,n=t.ip.ja(i);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===e){n.splice(o,1),0===n.length&&t.ip.remove(i);break}}}function Fn(t,e){if(null!==e){for(var i=t.ba,n=i instanceof Xt,o=_h.Ya(e),r=0;r<o;r++){var a=_h.Da(e,r);i.Ge(a)?jn(t,a,!1):n&&Gn(t,a)}if(n||i instanceof ee){for(r=0;r<o;r++)a=_h.Da(e,r),i.Ge(a)&&In(t,a);if(n)for(i=t.links;i.next();)_a(i.value)}_n(t,!1)}}function jn(t,e,i){if(void 0!==e&&null!==e&&!t.oa.gb&&!t.Ai.contains(e)){void 0===i&&(i=!0);var n=t.nA(e),o=En(t,e,n);if(null!==o&&(vr(o),null!==(o=o.copy()))){var r=t.Ne;t.Ne=!0,o.ui=n,o.Vd=e,t.add(o),o.Vd=null,o.data=e,i&&In(t,e),t.Ne=r}}}function En(t,e,i){var n=!1,o=t.ba;return o instanceof Xt&&(n=o.zA(e)),n?null===(e=t.rA.ja(i))&&null===(e=t.rA.ja(""))&&(pf||(pf=!0,_h.trace('No Group template found for category "'+i+'"'),_h.trace("  Using default group template")),e=t.nC):null===(e=t.QA.ja(i))&&null===(e=t.QA.ja(""))&&(df||(df=!0,_h.trace('No Node template found for category "'+i+'"'),_h.trace("  Using default node template")),e=t.pC),e}function In(t,e){var i=t.ba;if(i instanceof Xt||i instanceof ee){var n=i.ub(e);if(void 0!==n){var o=Yt(i,n),r=t.vh(e);if(null!==o&&null!==r){for(o=o.i;o.next();){var a=o.value;if(i instanceof Xt){var s=i;if(s.Ge(a)){if(r instanceof Cs&&s.An(a)===n){var l=r,a=t.vh(a);null!==a&&(a.Ka=l)}}else{var h=t.Rf(a);if(null!==h&&r instanceof Ba&&(l=r,s.Tl(a)===n&&(h.Y=l),s.Ul(a)===n&&(h.$=l),a=s.Bk(a),_h.isArray(a)))for(s=0;s<_h.Ya(a);s++)if(_h.Da(a,s)===n){l.Mc=h;break}}}else i instanceof ee&&(h=i,h.Ge(a)&&r instanceof Ba&&(l=r,h.Cn(a)===n&&(a=t.ix(a),On(t,l,a))))}Jt(i,n)}i instanceof Xt?void 0!==(i=i.An(e))&&(i=t.Ie(i))instanceof Cs&&(r.Ka=i):i instanceof ee&&void 0!==(i=i.Cn(e))&&r instanceof Ba&&(l=r,r=t.Ie(i),On(t,r,l))}}}function On(t,e,i){if(null!==e&&null!==i){var n=t.ab.wF,o=e,r=i;if(t.Pd){for(e=r.fe;e.next();)if(e.value.$===r)return}else for(o=i,r=e,e=o.fe;e.next();)if(e.value.Y===o)return;if((null===n||!Re(n,o,r,null,!0))&&(n=t.lx(i.data),null!==(e=Rn(t,n))&&(vr(e),null!==(e=e.copy())))){var a=t.Ne;t.Ne=!0,e.ui=n,e.Vd=i.data,e.Y=o,e.$=r,t.add(e),e.Vd=null,e.data=i.data,t.Ne=a}}}function zn(t,e){if(null!==e){for(var i=_h.Ya(e),n=0;n<i;n++){Gn(t,_h.Da(e,n))}_n(t,!1)}}function Gn(t,e){if(void 0!==e&&null!==e&&!t.oa.gb&&!t.Lj.contains(e)){var i=t.lx(e),n=Rn(t,i);if(null!==n&&(vr(n),null!==(n=n.copy()))){var o=t.Ne;t.Ne=!0,n.ui=i,n.Vd=e;var i=t.ba,r=i.XH(e);if(""!==r&&(n.Lg=r),r=i.Tl(e),void 0!==r&&(r=t.Ie(r))instanceof Ba&&(n.Y=r),r=i.aI(e),""!==r&&(n.Eh=r),r=i.Ul(e),void 0!==r&&(r=t.Ie(r))instanceof Ba&&(n.$=r),i=i.Bk(e),_h.isArray(i))for(var r=_h.Ya(i),a=0;a<r;a++){var s=_h.Da(i,a),s=t.Ie(s);null!==s&&(s.Mc=n)}t.add(n),n.Vd=null,n.data=e,t.Ne=o}}}function Rn(t,e){var i=t.DA.ja(e);return null===i&&null===(i=t.DA.ja(""))&&(gf||(gf=!0,_h.trace('No Link template found for category "'+e+'"'),_h.trace("  Using default link template")),i=t.oC),i}function qn(t,e){for(var i=_h.Ya(e),n=0;n<i;n++){Wn(t,_h.Da(e,n))}}function Wn(t,e){if(void 0!==e&&null!==e){var i=t.vh(e);if(null!==i){vn(t,i,!1);var n=t.ba;if(n instanceof Xt&&i instanceof Ba){var o=n.ub(i.data);if(void 0!==o){for(var r=i.fe;r.next();)Kt(n,o,r.value.data);if(i.lf&&null!==(r=i.Mc)&&Kt(n,o,r.data),i instanceof Cs)for(i=i.Nc;i.next();)r=i.value.data,n.Ge(r)&&Kt(n,o,r)}}else if(n instanceof ee&&i instanceof Ba){if(null!==(r=t.Rf(i.data))){r.fb=!1,r.Mg=!1;var a=r.layer;if(null!==a){var s=a.jf(-1,r,!1);0<=s&&t.Xc(mc,"parts",a,r,null,s,null),s=r.Cx,null!==s&&s(r,a,null)}}for(r=t.Pd,i=i.fe;i.next();)a=i.value,a=(r?a.$:a.Y).data,n.Ge(a)&&Kt(n,o,a)}}}}function Hn(t,e,i){for(var n in i){var o=e[n],r=i[n];if(_h.isArray(r)){if(!_h.isArray(o)||o.length<r.length)return!1;for(var a=0;a<o.length;a++){var s=o[a],l=r[a];if(void 0!==l&&!Vn(t,s,l))return!1}}else if(!Vn(t,o,r))return!1}return!0}function Vn(t,e,i){if("function"==typeof i){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(_h.Qa(e)&&_h.Qa(i)){if(!Hn(t,e,i))return!1}else if(e!==i)return!1;return!0}function Un(t,e){t.Vj=!1;var i=t.rv;i.L(e)||(e=e.S(),t.rv=e,_i(t,!1),t.Aa("DocumentBoundsChanged",null,i.copy()),dn(t))}function _n(t,e){for(var i=t.yl.i;i.next();)Kn(t,i.value,e);null!==t.Sb&&(e?t.Sb.zf=!1:t.Sb.J())}function Kn(t,e,i){if(null!==e){for(var n=e.dp.i;n.next();)Kn(t,n.value,i);null!==e.Sb&&(i?e.Sb.zf=!1:e.Sb.J())}}function Jn(t,e){if(!t.Ly){var i=t.Sb,n=t.Ua;t.Ua=!0;try{var o=t.oa.Fh;0===o&&t.Ub("Layout");var r=t.Pa;1!==t.oa.Fh||r.kf||r.pc||e||r.Un("Layout");for(var a=t.yl.i;a.next();)Yn(t,a.value,e);i.zf||e&&!i.qF&&0!==o||(i.doLayout(t),sn(t),i.zf=!0)}finally{0===o&&t.Gd("Layout"),t.av=!i.zf,t.Ua=n}}}function Yn(t,e,i){if(null!==e){for(var n=e.dp.i;n.next();)Yn(t,n.value,i);n=e.Sb,null===n||n.zf||i&&!n.qF||(e.Sn=!e.location.H(),n.doLayout(e),e.J(Bd),n.zf=!0,ln(t,e))}}function $n(t){function e(t){var e=t.toLowerCase(),o=new u("function");i.add(t,o),i.add(e,o),n.add(t,t),n.add(e,t)}var i=new v("string",u),n=new v("string","string");e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),t.Ny=i,t.My=n}function Xn(t,e){var i=t.My.ja(e);return null!==i?i:t.My.ja(e.toLowerCase())}function Qn(t,e){var i=t.Ny.ja(e);return null!==i?i:null!==(i=t.Ny.ja(e.toLowerCase()))?i:(_h.k("Unknown DiagramEvent name: "+e),null)}function Zn(t,e){var i=!1;if(t.pb.wk(e)&&(i=!0),i=t.hA(e,function(t){return t.U},function(t){return t instanceof Ua},!0,function(t){return t instanceof Ua},i),0!==i.count)for(i=i.i;i.next();){var n=i.value;n.sj&&n.Yb()}}function to(t,e,i,n){if(null===t.Cd&&(t.Cd=new gs),t.Cd.Xt||t.Cd.group!==i||t.Cd.mB!==n){if(null===i){e=t.computeOccupiedArea(),e.xf(100,100),t.Cd.initialize(e),e=_h.Ef();for(var o=t.eg;o.next();){var r=o.value,a=r.layer;null!==a&&a.visible&&!a.Kc&&eo(t,r,n,e)}}else for(i.W.H()||i.Ze(),e=i.W.copy(),e.xf(20,20),t.Cd.initialize(e),e=_h.Ef(),o=i.Nc;o.next();)(r=o.value)instanceof Ba&&eo(t,r,n,e);_h.Db(e),t.Cd.group=i,t.Cd.mB=n,t.Cd.Xt=!1}else e&&bs(t.Cd);return t.Cd}function eo(t,e,i,n){if(e!==i)if(e.isVisible()&&e.Rz&&!e.lf){i=e.getAvoidableRect(n),n=t.Cd.mn,e=t.Cd.ln;for(var o=i.x+i.width,r=i.y+i.height,a=i.x;a<o;a+=n){for(var s=i.y;s<r;s+=e)vs(t.Cd,a,s);vs(t.Cd,a,r)}for(s=i.y;s<r;s+=e)vs(t.Cd,o,s);vs(t.Cd,o,r)}else if(e instanceof Cs)for(e=e.Nc;e.next();)(o=e.value)instanceof Ba&&eo(t,o,i,n)}function io(t){-1===t.oo&&(t.oo=_h.setTimeout(function(){if(-1!==t.oo){no(t);var e=t.R.event;if(null!==e){var i=oo(t,t.bv);i.Ic(t.position)||(t.position=i,t.R.ca=t.vB(t.bv),t.simulatedMouseMove(e,null,e.target.Z)||t.doMouseMove(),t.Vj=!0,Un(t,t.sh()),t.Be=!0,t.Zf(),io(t))}}},t.Mq))}function no(t){-1!==t.oo&&(_h.clearTimeout(t.oo),t.oo=-1)}function oo(t,e){var i=t.position,n=t.nE;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return i;var o=t.pb,r=t.scale,o=_h.hg(0,0,o.width*r,o.height*r),a=_h.xb(0,0);if(e.x>=o.x&&e.x<o.x+n.left){var s=Math.max(t.Bu,1),s=0|s;a.x-=s,e.x<o.x+n.left/2&&(a.x-=s),e.x<o.x+n.left/4&&(a.x-=4*s)}else e.x<=o.x+o.width&&e.x>o.x+o.width-n.right&&(s=Math.max(t.Bu,1),s|=0,a.x+=s,e.x>o.x+o.width-n.right/2&&(a.x+=s),e.x>o.x+o.width-n.right/4&&(a.x+=4*s));return e.y>=o.y&&e.y<o.y+n.top?(s=Math.max(t.Cu,1),s|=0,a.y-=s,e.y<o.y+n.top/2&&(a.y-=s),e.y<o.y+n.top/4&&(a.y-=4*s)):e.y<=o.y+o.height&&e.y>o.y+o.height-n.bottom&&(s=Math.max(t.Cu,1),s|=0,a.y+=s,e.y>o.y+o.height-n.bottom/2&&(a.y+=s),e.y>o.y+o.height-n.bottom/4&&(a.y+=4*s)),a.Ic(Eu)||(i=new b(i.x+a.x/r,i.y+a.y/r)),_h.Db(o),_h.v(a),i}function ro(t,e){if(t.Pa.pi(),t.Zf(),null===t.Fb)return null;"object"!=typeof e&&_h.k("properties argument must be an Object.");var i=!1,n=e.size||null,o=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(o="NaN");var r=e.maxSize;void 0===e.maxSize&&(i=!0,r="svg"===e.context?new k(Infinity,Infinity):new k(2e3,2e3));var a=e.position||null,s=e.parts||null,l=void 0===e.padding?1:e.padding,h=e.background||null,u=e.omitTemporary;void 0===u&&(u=!0);var c=e.document||document,f=e.elementFinished||null,d=e.showTemporary;void 0===d&&(d=!u),u=e.showGrid,void 0===u&&(u=d),null!==n&&isNaN(n.width)&&isNaN(n.height)&&(n=null),"number"==typeof l?l=new A(l):l instanceof A||(l=new A(0)),l.left=Math.max(l.left,0),l.right=Math.max(l.right,0),l.top=Math.max(l.top,0),l.bottom=Math.max(l.bottom,0),t.Eo=!1,t.qf.Ee(!0);var p=new V(null,c),g=p.xk;if(!(n||o||s||a))return p.width=t.Ib+Math.ceil(l.left+l.right),p.height=t.Lb+Math.ceil(l.top+l.bottom),"svg"===e.context?(g=new I(p.Hd,c,f),un(t,g,l,new k(p.width,p.height),t.tb,t.ib,s,h,d,u),t.Eo=!0,g):(un(t,g,l,new k(p.width,p.height),t.tb,t.ib,s,h,d,u),t.Eo=!0,p);var y=t.ob.Xw,m=new b(0,0),v=t.qe.copy();if(v.HJ(t.padding),d)for(var x=!0,x=t.ac.n,w=x.length,M=0;M<w;M++){var P=x[M];if(P.visible&&P.Kc)for(var P=P.zb.n,T=P.length,L=0;L<T;L++){var N=P[L];N.AA&&N.isVisible()&&(N=N.W,N.H()&&v.Gh(N))}}if(m.x=v.x,m.y=v.y,null!==s){var C,x=!0,w=s.i;for(w.reset();w.next();)(N=w.value)instanceof sa&&(null!==(P=N.layer)&&!P.visible||null!==P&&!d&&P.Kc||!N.isVisible()||(N=N.W,N.H()&&(x?(x=!1,C=N.copy()):C.Gh(N))));x&&(C=new S(0,0,0,0)),v.width=C.width,v.height=C.height,m.x=C.x,m.y=C.y}return null!==a&&a.H()&&(m=a,o||(o=y)),x=N=0,null!==l&&(N=l.left+l.right,x=l.top+l.bottom),M=w=0,null!==n&&(w=n.width,M=n.height,isFinite(w)&&(w=Math.max(0,w-N)),isFinite(M)&&(M=Math.max(0,M-x))),C=a=0,null!==n&&null!==o?("NaN"===o&&(o=y),n.H()?(a=w,C=M):isNaN(M)?(a=w,C=v.height*o):(a=v.width*o,C=M)):null!==n?n.H()?(o=Math.min(w/v.width,M/v.height),a=w,C=M):isNaN(M)?(o=w/v.width,a=w,C=v.height*o):(o=M/v.height,a=v.width*o,C=M):null!==o?"NaN"===o&&r.H()?(o=Math.min((r.width-N)/v.width,(r.height-x)/v.height),o>y?(o=y,a=v.width,C=v.height):(a=r.width,C=r.height)):(a=v.width*o,C=v.height*o):(o=y,a=v.width,C=v.height),null!==l?(a+=N,C+=x):l=new A(0),null!==r&&(n=r.width,r=r.height,"svg"!==e.context&&i&&!yf&&(a>n||C>r)&&(_h.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(a)+"x"+Math.ceil(C)+" vs 2000x2000) Consider increasing the max size."),yf=!0),isNaN(n)&&(n=2e3),isNaN(r)&&(r=2e3),isFinite(n)&&(a=Math.min(a,n)),isFinite(r)&&(C=Math.min(C,r))),p.width=Math.ceil(a),p.height=Math.ceil(C),"svg"===e.context?(g=new I(p.Hd,c,f),un(t,g,l,new k(Math.ceil(a),Math.ceil(C)),o,m,s,h,d,u),t.Eo=!0,g):(un(t,g,l,new k(Math.ceil(a),Math.ceil(C)),o,m,s,h,d,u),t.Eo=!0,p)}function ao(){this.FD=null,this.UG="63ad05bbe23a1786468a4c741b6d2",this.Fi=this.UG===this._tk||null}function so(e){var i="f",n=t[_h.Ig("76a715b2f73f148a")][_h.Ig("72ba13b5")],o=_h.Ig;if(t[o("7da7")]&&t[o("7da7")][o("76a115b6ed251eaf4692")]){e.Fi=!0;var r=t[o("7da7")][o("76a115b6ed251eaf4692")],r=o(r).split(o("39e9"));if(6>r.length)return;var a=o(r[1]).split(".");if("7da71ca0"!==r[4])return;var s=o(_h[o("6cae19")]).split(".");if(!(a[0]>s[0]||a[0]===s[0]&&a[1]>=s[1]))return;for(a=n[o("76ad18b4f73e")],s=n[o("73a612b6fb191d")](o("35e7"))+2;s<a;s++)i+=n[s];if(a=i[o("73a612b6fb191d")](o(r[2])),0>a&&o(r[2])!==o("7da71ca0ad381e90")&&(a=i[o("73a612b6fb191d")](o("76a715b2ef3e149757"))),0>a&&(a=i[o("73a612b6fb191d")](o("76a715b2ef3e149757"))),e.Fi=!(0<=a&&a<i[o("73a612b6fb191d")](o("35"))),!e.Fi)return}for(a=n[o("76ad18b4f73e")],s=n[o("73a612b6fb191d")](o("35e7"))+2;s<a;s++)i+=n[s];a=i[o("73a612b6fb191d")](o(_h.adym)),0>a&&o(_h.adym)!==o("7da71ca0ad381e90")&&(a=i[o("73a612b6fb191d")](o("76a715b2ef3e149757"))),e.Fi=!(0<=a&&a<i[o("73a612b6fb191d")](o("35"))),e.Fi&&(i=t.document[o("79ba13b2f7333e8846865a7d00")]("div"),n=o("02cncncn"),"."===n[0]&&(n=n[o("69bd14a0f724128a44")](1)),i[o("79a417a0f0181a8946")]=n,t.document[o("78a712aa")]?(t.document[o("78a712aa")][o("7bb806b6ed32388c4a875b")](i),n=t[o("7dad0290ec3b0b91578e5b40007031bf")](i)[o("7dad0283f1390b81519f4645156528bf")](o("78a704b7e62456904c9b12701b6532a8")),t.document[o("78a712aa")][o("68ad1bbcf533388c4a875b")](i),n&&-1!==n.indexOf(o(_h.qH))&&-1!==n.indexOf(o(_h.rH))&&(e.Fi=!1)):(e.Fi=null,e.Fi=!1))}function lo(e,i){void 0!==i&&null!==i||_h.k("Diagram setup requires an argument DIV."),null!==e.Mb&&_h.k("Diagram has already completed setup."),"string"==typeof i?e.Mb=t.document.getElementById(i):i instanceof HTMLDivElement?e.Mb=i:_h.k("No DIV or DIV id supplied: "+i),null===e.Mb&&_h.k("Invalid DIV id; could not get element with id: "+i),void 0!==e.Mb.Z&&_h.k("Invalid div id; div already has a Diagram associated with it."),"static"===t.getComputedStyle(e.Mb,null).position&&(e.Mb.style.position="relative"),e.Mb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",e.Mb.style["-ms-touch-action"]="none",e.Mb.innerHTML="",e.Mb.Z=e;var n=new V(e);n.Hd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==n.style&&(n.style.position="absolute",n.style.top="0px",n.style.left="0px","rtl"===t.getComputedStyle(e.Mb,null).getPropertyValue("direction")&&(e.Kr=!0),n.style.zIndex="2",n.style.SL="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none"),e.Ib=e.Mb.clientWidth||1,e.Lb=e.Mb.clientHeight||1,e.Fb=n,e.qf=n.xk;var o=e.qf;e.gD=(t.devicePixelRatio||1)/(o.ta.webkitBackingStorePixelRatio||o.ta.mozBackingStorePixelRatio||o.ta.msBackingStorePixelRatio||o.ta.oBackingStorePixelRatio||o.ta.backingStorePixelRatio||1),e.Ad=e.computePixelRatio(),yn(e,e.Ib,e.Lb),e.tv=function(){return!0},e.Mb.insertBefore(n.Hd,e.Mb.firstChild),n=new V(null),n.width=1,n.height=1,e.Qy=n,e.AC=n.xk;var n=_h.createElement("div"),r=_h.createElement("div");n.style.position="absolute",n.style.overflow="auto",n.style.width=e.Ib+"px",n.style.height=e.Lb+"px",n.style.zIndex="1",r.style.position="absolute",r.style.width="1px",r.style.height="1px",e.Mb.appendChild(n),n.appendChild(r),n.onscroll=Hi,n.onmousedown=Vi,n.ontouchstart=Vi,n.Z=e,n.QG=!0,n.RG=!0,e.rw=n,e.Qs=r,e.Sx=_h.wE(function(){e.kk=null,e.na()},300,!1),e.BB=_h.wE(function(){Ri(e)},250,!1),e.preventDefault=function(t){return t.preventDefault(),!1},e.Pn=function(t){if(e.isEnabled){e.Cm=!0;var i=e.Uc;_h.Fn&&i.vj?(t.preventDefault(),t.simulated=!0,e.Zs=t):(e.Uc=e.Pb,e.Pb=i,$i(e,e,t,i,!0),e.simulatedMouseMove(t,null,t.target.Z)||(e.doMouseMove(),e.Za.isBeyondDragSize()&&(e.ll=0),Zi(i,t)))}},e.On=function(t){if(e.isEnabled){e.Cm=!0;var i=e.Uc;_h.Fn&&null!==e.Zs?(e.Zs=t,t.preventDefault()):_h.Fn&&400>t.timeStamp-e.Gm?t.preventDefault():e.il?t.preventDefault():(e.Uc=e.Pb,e.Pb=i,$i(e,e,t,i,!0),i.Ol=!0,i.Fe=t.detail,(_h.jF||_h.kF)&&(t.timeStamp-e.Gm<e.TD&&!e.Za.isBeyondDragSize()?e.ll++:e.ll=1,e.Gm=t.timeStamp,i.Fe=e.ll),e.Hi=i,!0===i.tr.simulated?(t.preventDefault(),t.simulated=!0):(Pc=null,e.doMouseDown(),e.Hi=e.Hi.copy(),1===t.button?t.preventDefault():Zi(i,t)))}},e.Rn=function(t){if(e.isEnabled)if(e.il&&2===t.button)t.preventDefault();else if(e.il&&0===t.button&&(e.il=!1),e.gt)t.preventDefault();else{e.Cm=!0;var i=e.Uc;if(_h.Fn){if(400>t.timeStamp-e.Gm)return void t.preventDefault();e.Gm=t.timeStamp}_h.Fn&&null!==e.Zs?(e.Zs=null,t.preventDefault()):(e.Uc=e.Pb,e.Pb=i,$i(e,e,t,i,!0),i.up=!0,i.Fe=t.detail,(_h.jF||_h.kF)&&(i.Fe=e.ll),i.bubbles=t.bubbles,t.target.Z&&(i.Vg=t.target.Z),e.simulatedMouseUp(t,null,new b,i.Vg)||(e.doMouseUp(),no(e),Zi(i,t)))}},e.Og=function(t){if(e.isEnabled){var i=e.Uc;e.Uc=e.Pb,e.Pb=i,$i(e,e,t,i,!0),i.bubbles=!0,i.Nl=void 0!==t.wheelDelta?t.wheelDelta:-40*t.detail,e.doMouseWheel(),Zi(i,t)}},e.Qn=function(){if(e.isEnabled){e.Cm=!1;var t=e.Za;t.cancelWaitAfter(),t instanceof pi&&t.hideToolTip()}},e.uB=function(t){if(e.isEnabled){e.gt=!1,e.il=!0;var i=e.Uc;e.Uc=e.Pb,e.Pb=i,Xi(e,t,t.targetTouches[0],i,1<t.touches.length),e.doMouseDown(),Zi(i,t)}},e.tB=function(t){if(e.isEnabled){var i=e.Uc;e.Uc=e.Pb,e.Pb=i;var n=null;0<t.changedTouches.length?n=t.changedTouches[0]:0<t.targetTouches.length&&(n=t.targetTouches[0]),Qi(e,t,n,i,1<t.touches.length),e.simulatedMouseMove(n||t,null,i.Vg)||e.doMouseMove(),Zi(i,t)}},e.sB=function(i){if(e.isEnabled)if(e.gt)i.preventDefault();else{var n=e.Uc;if(e.Uc=e.Pb,e.Pb=n,!(1<i.touches.length)){var o=null,r=null;if(0<i.changedTouches.length?r=i.changedTouches[0]:0<i.targetTouches.length&&(r=i.targetTouches[0]),n.g=e,n.Fe=1,null!==r){o=t.document.elementFromPoint(r.clientX,r.clientY),null!==o&&o.Z instanceof Ii&&o.Z!==e&&tn(o.Z,r,n),tn(e,i.changedTouches[0],n);var a=r.screenX,s=r.screenY,l=e.XC;i.timeStamp-e.Gm<e.TD&&!(25<Math.abs(l.x-a)||25<Math.abs(l.y-s))?e.ll++:e.ll=1,n.Fe=e.ll,e.Gm=i.timeStamp,e.XC.m(a,s)}n.wd=0,n.button=0,n.buttons=1,n.Ol=!1,n.up=!0,n.Nl=0,n.Ac=!1,n.bubbles=!1,n.event=i,n.timestamp=Date.now(),n.Vg=null===o?i.target.Z:o.Z?o.Z:null,n.Pe=null,e.simulatedMouseUp(r||i,null,new b,n.Vg)||e.doMouseUp(),Zi(n,i),e.il=!1}}},e.HF=function(t){if("touch"===t.pointerType){var i=e.sD;void 0===i[t.pointerId]&&(e.jw++,i[t.pointerId]=t),e.Zi[0]=null,e.Zi[1]=null;for(var n in i)if(null===e.Zi[0])e.Zi[0]=i[n];else if(null===e.Zi[1]){e.Zi[1]=i[n];break}e.isEnabled&&(e.gt=!1,e.il=!0,i=e.Uc,e.Uc=e.Pb,e.Pb=i,Xi(e,t,t,i,1<e.jw),e.doMouseDown(),Zi(i,t))}},e.JF=function(t){if("touch"===t.pointerType&&!(2>e.jw)){var i=e.Zi;i[0].pointerId===t.pointerId&&(i[0]=t),i[1].pointerId===t.pointerId&&(i[1]=t),e.isEnabled&&(i=e.Uc,e.Uc=e.Pb,e.Pb=i,Qi(e,t,t,i,!0),e.simulatedMouseMove(t,null,i.Vg)||(e.doMouseMove(),Zi(i,t)))}},
e.IF=function(t){if("touch"===t.pointerType){var i=e.sD;void 0!==i[t.pointerId]&&(e.jw--,delete i[t.pointerId],i=e.Zi,null!==i[0]&&i[0].pointerId===t.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===t.pointerId&&(i[1]=null))}},o.Ee(!0),Gi(e)}function ho(t){1<arguments.length&&_h.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Ii.call(this,t),this.yt=!0,this.El=!1,this.eb=!0,this.tE=nu,this.Sb=new Us}function uo(t){1<arguments.length&&_h.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Ii.call(this,t),this.Pa.isEnabled=!1,this.Sc=!0,this.gk=null,this.uv=!0,this.AJ("drawShadows",!1);var e=new sa,i=new Tr;i.stroke="magenta",i.kb=2,i.fill="transparent",i.name="BOXSHAPE",e.cm=!0,e.cB="BOXSHAPE",e.EA="BOXSHAPE",e.WF="BOXSHAPE",e.cursor="move",e.add(i),this.rm=e,i=new Aa,i.type=$f,i.Af=au;var n=new js;n.Vf=!0,i.add(n),n=new Tr,n.oh=au,n.Cb="Rectangle",n.Ba=new k(64,64),n.cursor="se-resize",n.alignment=uu,i.add(n),e.UF=i,this.gn=this.tk=!1,this.tf=this.At=!0,this.nE=new A(0,0,0,0),this.Dz=new V(null),this.TG=this.Dz.xk,this.ab.re=new po,this.ab.XF=new go;var o=this;this.click=function(){var t=o.gk;if(null!==t){var e=t.pb,i=o.R.ca;t.position=new b(i.x-e.width/2,i.y-e.height/2)}},this.EF=function(){fo(o)},this.DF=function(){null!==o.gk&&(o.rc(),o.na())},this.Gl=Zc,this.Sc=!1}function co(t){t.Sc||t.Xd||!1!==t.Nf||(t.Nf=!0,requestAnimationFrame(function(){if(t.Nf&&!t.Xd&&(t.Nf=!1,null!==t.Mb)){if(t.Xd=!0,sn(t),t.qe.H()||Un(t,t.sh()),null===t.Mb&&_h.k("No div specified"),null===t.Fb&&_h.k("No canvas specified"),t.Be){var e=t.gk;if(null!==e&&!e.Pa.kf&&!e.Pa.pc){var e=t.qf,i=t.Dz;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.Fb.width,t.Fb.height),e.drawImage(i.Hd,0,0),i=t.dd,i.reset(),1!==t.scale&&i.scale(t.scale),0===t.position.x&&0===t.position.y||i.translate(-t.position.x,-t.position.y),e.scale(t.Ad,t.Ad),e.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy);for(var i=t.ac.n,n=i.length,o=0;o<n;o++)i[o].se(e,t);t.hl=!1,t.Be=!1}}t.Xd=!1}}))}function fo(t){var e=t.rh;if(null!==e){var i=t.gk;if(null!==i){t.Be=!0;var i=i.pb,n=e.Du,o=_h.im();o.m(i.width,i.height),n.Ba=o,_h.Ak(o),t=2/t.scale,n instanceof Tr&&(n.kb=t),e.location=new b(i.x-t/2,i.y-t/2)}}}function po(){de.call(this),this.rl=null}function go(){Je.call(this)}function yo(){this.cg=this.Wc=this.xd=this.Bc=0}function mo(t){1<arguments.length&&_h.k("Brush constructor can take at most one optional argument, the Brush type."),_h.mc(this),this.Q=!1,void 0===t?(this.ma=mf,this.ro="black"):"string"==typeof t?(this.ma=mf,this.ro=t):(this.ma=t,this.ro="black");var e=this.ma;e===vf?(this.rp=nu,this.Go=hu):this.Go=this.rp=e===bf?au:tu,this.xw=0,this.vv=NaN,this.bh=this.iw=this.ah=null,this.Fy=this.so=0}function vo(t,e){switch(e){case wf:var i=100*xo(Pf.Bc),n=100*xo(Pf.xd),o=100*xo(Pf.Wc);return Lf.Bc=.4124564*i+.3575761*n+.1804375*o,Lf.xd=.2126729*i+.7151522*n+.072175*o,Lf.Wc=.0193339*i+.119192*n+.9503041*o,Lf.cg=Pf.cg,i=ko(Lf.Bc/Ff[0]),n=ko(Lf.xd/Ff[1]),o=ko(Lf.Wc/Ff[2]),Nf.Bc=116*n-16,Nf.xd=500*(i-n),Nf.Wc=200*(n-o),Nf.cg=Lf.cg,Nf.Bc=Math.min(100,Math.max(0,Nf.Bc+100*t)),i=(Nf.Bc+16)/116,n=i-Nf.Wc/200,Lf.Bc=Ff[0]*So(Nf.xd/500+i),Lf.xd=Ff[1]*(Nf.Bc>Df*Bf?Math.pow(i,3):Nf.Bc/Df),Lf.Wc=Ff[2]*So(n),Lf.cg=Nf.cg,i=-.969266*Lf.Bc+1.8760108*Lf.xd+.041556*Lf.Wc,n=.0556434*Lf.Bc+-.2040259*Lf.xd+1.0572252*Lf.Wc,Pf.Bc=255*wo((3.2404542*Lf.Bc+-1.5371385*Lf.xd+-.4985314*Lf.Wc)/100),Pf.xd=255*wo(i/100),Pf.Wc=255*wo(n/100),Pf.cg=Lf.cg,Pf.Bc=Math.round(Pf.Bc),255<Pf.Bc?Pf.Bc=255:0>Pf.Bc&&(Pf.Bc=0),Pf.xd=Math.round(Pf.xd),255<Pf.xd?Pf.xd=255:0>Pf.xd&&(Pf.xd=0),Pf.Wc=Math.round(Pf.Wc),255<Pf.Wc?Pf.Wc=255:0>Pf.Wc&&(Pf.Wc=0),"rgba("+Pf.Bc+", "+Pf.xd+", "+Pf.Wc+", "+Pf.cg+")";case kf:var o=Pf.Bc/255,r=Pf.xd/255,a=Pf.Wc/255,s=Math.max(o,r,a),n=Math.min(o,r,a),l=s-n,n=(s+n)/2;if(0===l)i=o=0;else{switch(s){case o:i=(r-a)/l%6;break;case r:i=(a-o)/l+2;break;case a:i=(o-r)/l+4}i*=60,0>i&&(i+=360),o=l/(1-Math.abs(2*n-1))}return Tf.Bc=Math.round(i),Tf.xd=Math.round(100*o),Tf.Wc=Math.round(100*n),Tf.cg=Pf.cg,Tf.Wc=Math.min(100,Math.max(0,Tf.Wc+100*t)),"hsla("+Tf.Bc+", "+Tf.xd+"%, "+Tf.Wc+"%, "+Tf.cg+")";default:return _h.k("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function bo(t){Mf.clearRect(0,0,1,1),Mf.fillStyle="#000000";var e=Mf.fillStyle;Mf.fillStyle=t,Mf.fillStyle!==e?(Mf.fillRect(0,0,1,1),t=Mf.getImageData(0,0,1,1).data,Pf.Bc=t[0],Pf.xd=t[1],Pf.Wc=t[2],Pf.cg=t[3]/255):(Mf.fillStyle="#FFFFFF",Mf.fillStyle=t,Pf.Bc=0,Pf.xd=0,Pf.Wc=0,Pf.cg=1)}function xo(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wo(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function ko(t){return t>Bf?Math.pow(t,1/3):(Df*t+16)/116}function So(t){var e=t*t*t;return e>Bf?e:(116*t-16)/Df}function Mo(){_h.mc(this),this.P=4225027,this.wc=1,this.lh=null,this.Qb="",this.$b=this.Eb=null,this.ib=new b(NaN,NaN).freeze(),this.Re=Yu,this.Vh=Wu,this.Uh=Ku,this.dd=new B,this.om=new B,this.Qi=new B,this.tb=this.Do=1,this.ig=0,this.Cg=Ef,this.Lm=Ou,this.qd=new S(NaN,NaN,NaN,NaN).freeze(),this.nc=new S(NaN,NaN,NaN,NaN).freeze(),this.Tc=new S(0,0,NaN,NaN).freeze(),this.V=this.As=this.Bs=null,this.nm=this.ge=eu,this.Ns=0,this.aj=1,this.Tq=0,this.xi=1,this.ct=null,this.Rs=-Infinity,this.Wm=0,this.Xm=Eu,this.Ym=qd,this.br="",this.tc=this.ha=null,this.po=-1,this.bn=this.lg=this.$k=this.qp=null,this.uz=Ac,this.Sm=null}function Po(t){null===t.ha&&(t.ha=new Qo)}function To(t,e,i,n,o,r,a){var s=.001,l=r.length;t.moveTo(e,i),n-=e,s=o-i,0===n&&(n=.001),o=s/n;for(var h=Math.sqrt(n*n+s*s),u=0,c=!0,f=0!==a;.1<=h;){if(f){for(s=r[u++%l],s-=a;0>s;)s+=r[u++%l],c=!c;f=!1}else s=r[u++%l];s>h&&(s=h);var d=Math.sqrt(s*s/(1+o*o));0>n&&(d=-d),e+=d,i+=o*d,c?t.lineTo(e,i):t.moveTo(e,i),h-=s,c=!c}}function Lo(t,e,i){var n=t.Ql();if(null!==n)for(var o=t.tc.i;o.next();){var r=o.value,a=null;if(null!==r.xq){if(null===(a=ne(r,n,t)))continue;r.jy(t,a,i,null)}else if(r.yx){var s=e.g;null===s||s.Ne||r.jy(t,s.ba.Gk,i,n)}else{var l=n.data;if(null===l)continue;s=e.g,null===s||s.Ne||r.jy(t,l,i,n)}a===t&&null!==(s=n.gx(r.hm))&&r.yG(s,a,i)}}function No(t,e,i,n,o){var r=t.qd,a=t.Qi;a.reset(),Eo(t,a,e,i,n,o),t.Qi=a,r.x=e,r.y=i,r.width=n,r.height=o,a.bu()||a.vG(r)}function Co(t,e,i,n){return!1!==t.Tg&&(n.multiply(t.transform),i?t.Tf(e,n):t.qn(e,n))}function Ao(t,e,i,n,o){if(!1!==Uo(t)){var r=t.margin,a=r.right+r.left,r=r.top+r.bottom;e=Math.max(e-a,0),i=Math.max(i-r,0),o=o||0,n=Math.max((n||0)-a,0),o=Math.max(o-r,0);var a=t.angle,r=0,r=t.Ba,s=0;t instanceof Tr&&(s=t.kb),90===a||270===a?(e=isFinite(r.height)?r.height+s:e,i=isFinite(r.width)?r.width+s:i):(e=isFinite(r.width)?r.width+s:e,i=isFinite(r.height)?r.height+s:i);var r=n||0,s=o||0,l=t instanceof Zo;switch(Oo(t,!0)){case jf:s=r=0,l&&(i=e=Infinity);break;case zf:isFinite(e)&&e>n&&(r=e),isFinite(i)&&i>o&&(s=i);break;case Of:isFinite(e)&&e>n&&(r=e),s=0,l&&(i=Infinity);break;case If:isFinite(i)&&i>o&&(s=i),r=0,l&&(e=Infinity)}var l=t.Bf,h=t.zh;r>l.width&&h.width<l.width&&(r=l.width),s>l.height&&h.height<l.height&&(s=l.height),n=Math.max(r/t.scale,h.width),o=Math.max(s/t.scale,h.height),l.width<n&&(n=Math.min(h.width,n)),l.height<o&&(o=Math.min(h.height,o)),e=Math.min(l.width,e),i=Math.min(l.height,i),e=Math.max(n,e),i=Math.max(o,i),90!==a&&270!==a||(r=e,e=i,i=r,r=n,n=o,o=r),t.qd.Ra(),t.Nn(e,i,n,o),t.qd.freeze(),t.qd.H()||_h.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.qd.toString()),_o(t,!1)}}function Bo(t,e,i,n,o){var r=t.W;if(r.x=e,r.y=i,r.width=n,r.height=o,!t.Ba.H()){r=t.qd,i=t.margin,e=i.right+i.left;var a=i.top+i.bottom;switch(i=r.width+e,r=r.height+a,n+=e,o+=a,e=Oo(t,!0),i===n&&r===o&&(e=jf),e){case jf:(i>n||r>o)&&(_o(t,!0),Ao(t,i>n?n:i,r>o?o:r));break;case zf:_o(t,!0),Ao(t,n,o,0,0);break;case Of:_o(t,!0),Ao(t,n,r,0,0);break;case If:_o(t,!0),Ao(t,i,o,0,0)}}}function Do(t,e,i){var n=t.nc;0===n.width||0===n.height||isNaN(n.x)||isNaN(n.y)||(null!==t.$b&&(Fo(t,e,t.$b,!0,!0),t.$b instanceof mo&&t.$b.type===bf?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.Jg(t.$b)):e.fillRect(n.x,n.y,n.width,n.height)),null!==t.Eb&&(Fo(t,e,t.Eb,!0,!1),t.Eb instanceof mo&&t.Eb.type===bf?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.Jg(t.Eb)):e.fillRect(n.x,n.y,n.width,n.height)),t.yk(e,i))}function Fo(t,e,i,n,o){if(null!==i){var r=1,a=1;if("string"==typeof i)n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===mf)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var s,a=t.Ia,r=a.width,a=a.height;if(o)var l=t.W,r=l.width,a=l.height;var h=e instanceof U;if(h&&i.bh&&(i.type===xf||i.so===r&&i.Fy===a))s=i.bh;else{var u=l=0,c=0,f=0,d=0,p=0,p=d=0;if(o&&(l=t.W,r=l.width,a=l.height,d=l.x,p=l.y),l=i.start.x*r+i.start.offsetX,u=i.start.y*a+i.start.offsetY,c=i.end.x*r+i.end.offsetX,f=i.end.y*a+i.end.offsetY,l+=d,c+=d,u+=p,f+=p,i.type===vf)s=e.createLinearGradient(l,u,c,f);else if(i.type===bf)p=isNaN(i.Ht)?Math.max(r,a)/2:i.Ht,isNaN(i.Ju)?(d=0,p=Math.max(r,a)/2):d=i.Ju,s=e.createRadialGradient(l,u,d,c,f,p);else if(i.type===xf)try{s=e.createPattern(i.pattern,"repeat")}catch(t){s=null}else _h.yd(i.type,"Brush type");if(i.type!==xf&&null!==(o=i.uk))for(o=o.i;o.next();)s.addColorStop(o.key,o.value);if(h&&(i.bh=s,null!==s&&(i.so=r,i.Fy=a),null===s&&i.type===xf&&-1!==i.so)){i.so=-1;var g=t.g;null!==g&&-1===i.so&&_h.setTimeout(function(){g.Rx()},600)}}n?e.fillStyle=s:e.strokeStyle=s}}}function jo(t){if(0!=(2048&t.P)==!0){var e=t.dd;if(e.reset(),!t.nc.H()||!t.qd.H())return void Ho(t,!1);e.translate(t.nc.x,t.nc.y),e.translate(-t.za.x,-t.za.y);var i=t.Ia;Eo(t,e,i.x,i.y,i.width,i.height),Ho(t,!1),Vo(t,!0)}0!=(4096&t.P)==!0&&(e=t.O,null===e?(t.om.set(t.dd),t.Do=t.scale,Vo(t,!1)):null!==e.ph&&(i=t.om,i.reset(),e.Yg()?i.multiply(e.om):null!==e.O&&i.multiply(e.O.om),i.multiply(t.dd),t.Do=t.scale*e.Do,Vo(t,!1)))}function Eo(t,e,i,n,o,r){if(1!==t.scale&&e.scale(t.scale),0!==t.angle){var a=au;t.tj()&&t.Af.fd()&&(a=t.Af);var s=_h.K();if(t instanceof sa&&t.Yf!==t)for(i=t.Yf,n=i.Ia,s.Gu(n.x,n.y,n.width,n.height,a),i.Qi.nb(s),s.offset(-i.za.x,-i.za.y),a=i.O;null!==a&&a!==t;)a.Qi.nb(s),s.offset(-a.za.x,-a.za.y),a=a.O;else s.Gu(i,n,o,r,a);e.rotate(t.angle,s.x,s.y),_h.v(s)}}function Io(t){if(!1===Ko(t)){var e=t.O;null!==e?e.I():t.tj()&&null!==(e=t.g)&&(e.sg.add(t),t instanceof Ba&&t.Uf(),e.Le()),Jo(t,!0)}}function Oo(t,e){var i=t.stretch,n=t.O;return null!==n&&n.ma===Qf?zo(t,n.be(t.Zb),n.ae(t.column),e):null!==n&&n.ma===Xf&&n.Jd()===t?Go(t,zf,e):i===Ef?null!==n?n.ma===$f&&n.Jd()===t?Go(t,zf,e):(i=n.Zd,i===Ef?Go(t,jf,e):Go(t,i,e)):Go(t,jf,e):Go(t,i,e)}function zo(t,e,i,n){var o=t.stretch;if(o!==Ef)return Go(t,o,n);var r=o=null;switch(e.stretch){case If:r=!0;break;case zf:r=!0}switch(i.stretch){case Of:o=!0;break;case zf:o=!0}return e=t.O.Zd,null===o&&(o=e===Of||e===zf),null===r&&(r=e===If||e===zf),!0===o&&!0===r?Go(t,zf,n):!0===o?Go(t,Of,n):!0===r?Go(t,If,n):Go(t,jf,n)}function Go(t,e,i){if(i)return e;if(e===jf)return jf;if(i=t.Ba,i.H())return jf;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(e===Of)return jf;if(e===zf)return If}else{if(e===If)return jf;if(e===zf)return Of}if(!isNaN(i.height))if(90!==t&&270!==t){if(e===If)return jf;if(e===zf)return Of}else{if(e===Of)return jf;if(e===zf)return If}return e}function Ro(t,e){t.P=e?512|t.P:-513&t.P}function qo(t){return 0!=(1024&t.P)}function Wo(t,e){t.P=e?1024|t.P:-1025&t.P}function Ho(t,e){t.P=e?2048|t.P:-2049&t.P}function Vo(t,e){t.P=e?4096|t.P:-4097&t.P}function Uo(t){return 0!=(8192&t.P)}function _o(t,e){t.P=e?8192|t.P:-8193&t.P}function Ko(t){return 0!=(16384&t.P)}function Jo(t,e){t.P=e?16384|t.P:-16385&t.P}function Yo(t){var e=t.U;if(e instanceof Ba&&(null!==t.Qd||t===e.port)){var i=e.g;null===i||i.oa.gb||ja(e,t)}}function $o(t){var e=t.g;null===e||e.oa.gb||(t instanceof Zo?t instanceof Ba?t.Uf():sr(t,t,function(t){Yo(t)}):Yo(t))}function Xo(t,i){if("string"==typeof i)if(t instanceof Er)t.text=i;else if(t instanceof Tr)t.Cb=i;else if(t instanceof Hr)t.source=i;else if(t instanceof Zo){var o=Kh(Zo,i);null!==o?t.type=o:_h.k("Unknown Panel type as an argument to GraphObject.make: "+i)}else t instanceof mo?(o=Kh(mo,i),null!==o?t.type=o:_h.k("Unknown Brush type as an argument to GraphObject.make: "+i)):t instanceof mt?(o=Kh(mt,i),null!==o?t.type=o:_h.k("Unknown Geometry type as an argument to GraphObject.make: "+i)):t instanceof Tt?(o=Kh(Tt,i),null!==o?t.type=o:_h.k("Unknown PathSegment type as an argument to GraphObject.make: "+i)):_h.k("Unable to use a string as an argument to GraphObject.make: "+i);else if(i instanceof Mo)o=i,t instanceof Zo||_h.k("A GraphObject can only be added to a Panel, not to: "+t),t.add(o);else if(i instanceof Mr){var r,a=i,o=t;a.ve&&o.getRowDefinition?r=o.getRowDefinition(a.index):!a.ve&&o.getColumnDefinition?r=o.getColumnDefinition(a.index):_h.k("A RowColumnDefinition can only be added to a Panel, not to: "+t),r.Lp(a)}else if(i instanceof e)"function"==typeof t.gc?t.gc(i):_h.Fj(t,i);else if(i instanceof ie)t instanceof Mo?t.bind(i):t instanceof Mr?t.bind(i):_h.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(i instanceof Pt)t instanceof mt?t.dc.add(i):_h.k("A PathFigure can only be added to a Geometry, not to: "+t);else if(i instanceof Tt)t instanceof Pt?t.vb.add(i):_h.k("A PathSegment can only be added to a PathFigure, not to: "+t);else if(i instanceof Es)t instanceof Ii?t.Sb=i:t instanceof Cs?t.Sb=i:_h.k("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(i))for(o=0;o<i.length;o++)Xo(t,i[o]);else if("object"==typeof i&&null!==i)if(t instanceof mo){r=new n;for(o in i)a=parseFloat(o),isNaN(a)?r[o]=i[o]:t.addColorStop(a,i[o]);_h.Eu(t,r)}else if(t instanceof Mr){void 0!==i.row?(r=i.row,(void 0===r||null===r||Infinity===r||isNaN(r)||0>r)&&_h.k("Must specify non-negative integer row for RowColumnDefinition "+i+", not: "+r),t.ve=!0,t.index=r):void 0!==i.column&&(r=i.column,(void 0===r||null===r||Infinity===r||isNaN(r)||0>r)&&_h.k("Must specify non-negative integer column for RowColumnDefinition "+i+", not: "+r),t.ve=!1,t.index=r),r=new n;for(o in i)"row"!==o&&"column"!==o&&(r[o]=i[o]);_h.Eu(t,r)}else _h.Eu(t,i);else _h.k('Unknown initializer "'+i+'" for object being constructed by GraphObject.make: '+t)}function Qo(){this.rr=this.zi=this.dj=this.Aq=this.Dq=this.Cq=this.Bq=this.Si=this.js=this.hs=this.Ti=this.Ui=this.Vi=this.ls=this.ks=this.yi=this.Ei=this.wi=null}function Zo(t){Mo.call(this),void 0===t?this.ma=Jf:(_h.mb(t,Zo,Zo,"type"),this.ma=t),this.xa=new u(Mo),this.ff=Ou,this.ma===id&&(this.Gn=!0),this.fr=eu,this.Ci=Ef,this.ma===Qf&&tr(this),this.Dp=Gf,this.Dr=_u,this.Er=Eu,this.Ar=0,this.zr=100,this.Cr=10,this.Br=0,this.Yk=this.Vd=this.Tj=this.xm=this.zm=null,this.Qr=NaN,this.ug=this.$j=null,this.Vo="category",this.tg=null,this.fj=new S(NaN,NaN,NaN,NaN),this.lk=this.Os=this.dn=null,this.Ij=""}function tr(t){t.Mj=Ou,t.Mh=1,t.Bi=null,t.um=null,t.Lh=1,t.Kh=null,t.tm=null,t.Yd=[],t.Td=[],t.Vm=ld,t.sm=ld,t.ej=0,t.Ni=0}function er(t,e){e.P=6144|t.P,e.wc=t.wc,e.Eb=t.Eb,e.$b=t.$b,e.Re=t.Re.S(),e.Vh=t.Vh.S(),e.Uh=t.Uh.S(),e.Qi=t.Qi.copy(),e.tb=t.tb,e.ig=t.ig,e.Cg=t.Cg,e.Lm=t.Lm.S(),e.ge=t.ge.S(),e.nm=t.nm.S(),e.Wm=t.Wm,e.Xm=t.Xm.S(),e.Ym=t.Ym,null!==t.lg&&(e.lg=t.lg.copy()),e.bn=t.bn,t instanceof Er&&(e.Ed=t.Ed,e.qc=t.qc,e.ng=t.ng,e.wl=t.wl,e.mg=t.mg,e.Al=t.Al,e.Dm=t.Dm,e.Zj=t.Zj,e.Yj=t.Yj,e.Xi=t.Xi,e.rk=t.rk,e.wm=null,e.bi=t.bi,e.ci=t.ci,e.fh=t.fh,e.Yo=t.Yo,e.rg=t.rg,e.qg=t.qg,e.pg=t.pg,e.ym=t.ym)}function ir(t,e,i,n){for(var o=n.length,r=t.W,a=i?t.be(0):t.ae(0),s=0;s<o;s++){var l=n[s];if(void 0!==l&&l!==a&&0!==l.Ja){if(i){if(l.position>r.height)continue}else if(l.position>r.width)continue;var h=l.sq;isNaN(h)&&(h=i?t.Mh:t.Lh);var u=l.rq;null===u&&(u=i?t.Bi:t.Kh),0!==h&&null!==u&&(Fo(t,e,u,!1,!1),e.beginPath(),u=l.position+h,i?u>r.height&&(h-=u-r.height):u>r.width&&(h-=u-r.width),l=l.position+h/2,e.lineWidth=h,u=t.padding,i?(l+=u.top,h=u.left,u=r.width-u.right,e.moveTo(h,l),e.lineTo(u,l)):(l+=u.left,h=u.top,u=r.height-u.bottom,e.moveTo(l,h),e.lineTo(l,u)),e.stroke())}}}function nr(t,e,i,n,o){for(var r=n.length,a=t.W,s=0;s<r;s++){var l=n[s];if(void 0!==l&&null!==l.background&&l.aA!==o&&0!==l.Ja){var h=i?a.height:a.width;if(!(l.position>h)){var u=l.Xe(),c=l.sq;isNaN(c)&&(c=i?t.Mh:t.Lh);var f=l.rq;null===f&&(f=i?t.Bi:t.Kh),null===f&&(c=0),u-=c,c=l.position+c,u+=l.Ja,c+u>h&&(u=h-c),0>=u||(h=t.padding,Fo(t,e,l.background,!0,!1),i?e.fillRect(h.left,c+h.top,a.width-(h.left+h.right),u):e.fillRect(c+h.left,h.top,u,a.height-(h.top+h.bottom)))}}}}function or(t,e,i){if(0!=t%e)return!1;e=i.length;for(var n=0;n<e;n++)if(0==t%i[n])return!1;return!0}function rr(t){return"LineV"===t||"BarV"===t}function ar(t){return null!==t.U?t.U.Yf:null}function sr(t,e,i){if(i(t,e),e instanceof Zo){e=e.xa.n;for(var n=e.length,o=0;o<n;o++)sr(t,e[o],i)}}function lr(t,e){hr(t,t,e)}function hr(t,e,i){i(e),e=e.xa.n;for(var n=e.length,o=0;o<n;o++){var r=e[o];r instanceof Zo&&hr(t,r,i)}}function ur(t,e,i){if(i(e),e instanceof Zo){e=e.xa.n;for(var n=e.length,o=0;o<n;o++)ur(t,e[o],i)}}function cr(t,e,i){if(i(e))return e;if(e instanceof Zo){e=e.xa.n;for(var n=e.length,o=0;o<n;o++){var r=cr(t,e[o],i);if(null!==r)return r}}return null}function fr(t){t=t.xa.n;for(var e=t.length,i=0,n=0;n<e;n++){var o=t[n];if(o instanceof Zo)i=Math.max(i,fr(o));else if(o instanceof Tr){t:{if(null!==!o.Mf)switch(o.Ho){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":o=0;break t}o=o.fi/2*o.cn*o.oj()}i=Math.max(i,o)}}return i}function dr(t,e,i,n){for(var o=t.xa.n,r=o.length;r--;){var a=o[r];if(a.visible){var s=a.W,l=t.Ia;s.x>l.width||s.y>l.height||0>s.x+s.width||0>s.y+s.height||(a instanceof Zo&&dr(a,e,i,n),null!==e&&(a=e(a)),null===a||null!==i&&!i(a)||n.add(a))}}}function pr(t){var e=null;return t instanceof Tr&&(e=t.A,e===eu&&(e=null),null!==(t=t.vf)&&null===e&&(e=t.A)),null===e&&(e=iu),e}function gr(t){var e=null;return t instanceof Tr&&(e=t.B,e===eu&&(e=null),null!==(t=t.vf)&&null===e&&(e=t.B)),null===e&&(e=uu),e}function yr(t,e){t.P=e?16777216|t.P:-16777217&t.P}function mr(t){return null!==(t=t.Yk)&&t.Q}function vr(t){var e=t.Yk;if(null===e)null!==t.data&&_h.k("Template cannot have .data be non-null: "+t),t.Yk=e=new u(ie);else if(e.Q)return;var i=new u(Mo);yr(t,!1),sr(t,t,function(t,n){var o=n.tc;if(null!==o)for(Wo(n,!1),o=o.i;o.next();){var r=o.value;r.mode===xc&&Wo(n,!0);var a=r.xq;null!==a&&("/"===a&&yr(t,!0),null!==(a=ne(r,t,n))&&(i.add(a),null===a.qp&&(a.qp=new u(ie)),a.qp.add(r))),e.add(r)}if(n instanceof Zo&&n.type===Qf){if(0<n.Yd.length)for(o=n.Yd,r=o.length,a=0;a<r;a++){var s=o[a];if(void 0!==s&&null!==s.tc)for(var l=s.tc.i;l.next();){var h=l.value;h.Dg=s,h.ht=2,h.yp=s.index,e.add(h)}}if(0<n.Td.length)for(o=n.Td,r=o.length,a=0;a<r;a++)if(void 0!==(s=o[a])&&null!==s.tc)for(l=s.tc.i;l.next();)h=l.value,h.Dg=s,h.ht=1,h.yp=s.index,e.add(h)}});for(var n=i.i;n.next();){var o=n.value;if(null!==o.qp){Wo(o,!0);for(var r=o.qp.i;r.next();){var a=r.value;null===o.tc&&(o.tc=new u(ie)),o.tc.add(a)}}o.qp=null}for(n=e.i;n.next();)if(o=n.value,null!==(r=o.Dg)){o.Dg=null;var s=o.iy,l=s.indexOf(".");0<l&&r instanceof Zo&&(a=s.substring(0,l),s=s.substr(l+1),l=r.ud(a),null!==l?(r=l,o.iy=s):_h.trace('Warning: unable to find GraphObject named "'+a+'" for Binding: '+o.toString())),r instanceof Mr?(o.hm=_h.Kd(r.O),r.O.po=o.hm):(o.hm=_h.Kd(r),r.po=o.hm)}e.freeze(),t instanceof sa&&t.de()&&t.Ze()}function br(t){return!!(t.type===$f||t.type===Xf||t.type===ed||t.type===Qf&&0<t.xa.length&&(t=t.xa.da(0),t.Vf&&t instanceof Zo&&(t.type===Zf||t.type===td)))}function xr(t,e,i){if(!(void 0===e||null===e||0>i)){var n;n=kr(t,e);var o=t.zI,r=null;null!==o&&(r=o.ja(n)),null===r&&(od||(od=!0,_h.trace('No item template Panel found for category "'+n+'" on '+t),_h.trace("  Using default item template."),n=new Zo,o=new Er,o.bind(new ie("text","",wc)),n.add(o),rd=n),r=rd),n=r,null!==n&&(vr(n),n=n.copy(),0!=(16777216&n.P)&&null!==(o=t.Ql())&&yr(o,!0),"object"==typeof e&&(null===t.tg&&(t.tg=new v(Object,Zo)),t.tg.add(e,n)),o=i,br(t)&&o++,t.Md(o,n),n.Vd=e,wr(t,o,i),n.Vd=null,n.data=e)}}function wr(t,e,i){for(t=t.xa;e<t.length;){var n=t.da(e);if(n instanceof Zo){var o=e,r=i;n.type===Zf?n.Zb=o:n.type===td&&(n.column=o),n.eu=r}e++,i++}}function kr(t,e){if(null===e)return"";var i=t.Vo,n="";if("function"==typeof i)n=i(e);else{if("string"!=typeof i||"object"!=typeof e)return"";if(""===i)return"";n=_h.sb(e,i)}return void 0===n?"":"string"==typeof n?n:(_h.k("Panel.getCategoryForItemData found a non-string category for "+e+": "+n),"")}function Sr(t,e,i){var n=e.FE;if(null!==n&&n(e,i),e instanceof Zo){e=e.xa.n;for(var n=e.length,o=0;o<n;o++){var r=e[o];i&&r instanceof Zo&&!r.isEnabled||Sr(t,r,i)}}}function Mr(){_h.mc(this),this.lh=null,this.Nv=!0,this.uc=0,this.gf=NaN,this.ek=0,this.dk=Infinity,this.ge=eu,this.ib=this.Sa=0,this.tc=null,this.$s=ad,this.Cg=Ef,this.Vs=this.ik=null,this.Ws=NaN,this.Eb=this.Xh=null,this.ar=!1}function Pr(t){if(t.Hu===ad){var e=t.lh;return t.ve?e.uJ:e.sH}return t.Hu}function Tr(){Mo.call(this),this.Mf=this.hb=null,this.Ho="None",this.xr=Ef,this.qc=this.zd="black",this.fi=1,this.tp="butt",this.wp="miter",this.cn=10,this.vp=null,this.sf=0,this.ei=this.di=eu,this.xs=this.ws=NaN,this.Hr=!1,this.zs=null,this.Jo=this.Ap="None",this.rg=1,this.qg=0,this.pg=1}function Lr(t,e,i,n){var o=i.length;if(!(4>o)){for(var r=n.za,a=Math.max(1,r.width),r=r.height,s=i[0],l=i[1],h=0,u=0,c=0,f=0,d=0,p=0,g=f=0,y=_h.lb(),m=2;m<o;m+=2)h=i[m],u=i[m+1],c=h-s,f=u-l,0===c&&(c=.001),d=f/c,p=Math.atan2(f,c),f=Math.sqrt(c*c+f*f),y.push([c,p,d,f]),g+=f,s=h,l=u;s=i[0],l=i[1],c=n.za.width,n instanceof Tr&&(c-=n.kb),1>c&&(c=1);for(var o=i=c,h=a/2,u=0!==h,m=0,f=y[m],c=f[0],p=f[1],d=f[2],f=f[3],v=0;.1<=g;){if(0===v&&(u?(o=i,o-=h,g-=h,u=!1):o=i,0===o&&(o=1)),o>g)return void _h.wa(y);o>f?(v=o-f,o=f):v=0;var b=Math.sqrt(o*o/(1+d*d));if(0>c&&(b=-b),s+=b,l+=d*b,t.translate(s,l),t.rotate(p),t.translate(-a/2,-r/2),0===v&&n.yk(t,e),t.translate(a/2,r/2),t.rotate(-p),t.translate(-s,-l),g-=o,f-=o,0!==v){if(++m===y.length)return void _h.wa(y);f=y[m],c=f[0],p=f[1],d=f[2],f=f[3],o=v}}_h.wa(y)}}function Nr(t,e,i,n){var o=e.length;if(!(4>o)){var r=.001,a=i.length,s=e[0],l=e[1];if(4===o)To(t,s,l,e[2],e[3],i,n);else{t.moveTo(s,l);for(var h=r=0,u=0,c=0,f=0,d=c=0,p=_h.lb(),g=2;g<o;g+=2)r=e[g],h=e[g+1],u=r-s,c=h-l,0===u&&(u=.001),f=c/u,c=Math.sqrt(u*u+c*c),p.push([u,f,c]),d+=c,s=r,l=h;s=e[0],l=e[1],e=0;for(var o=!0,r=i[e%a],h=0!==n,g=0,c=p[g],u=c[0],f=c[1],c=c[2],y=0;.1<=d;){0===y&&(r=i[e%a],e++,h&&(n%=r,r-=n,h=!1)),r>d&&(r=d),r>c?(y=r-c,r=c):y=0;var m=Math.sqrt(r*r/(1+f*f));if(0>u&&(m=-m),s+=m,l+=f*m,o?t.lineTo(s,l):t.moveTo(s,l),d-=r,c-=r,0!==y){if(++g===p.length)return void _h.wa(p);c=p[g],u=c[0],f=c[1],c=c[2],r=y}else o=!o}_h.wa(p)}}}function Cr(t,e,i,n){if(!1!==Uo(t)){t.qd.Ra();var o=t.fi;0===o&&n instanceof Aa&&n.type===ed&&n.rb instanceof Tr&&(o=n.rb.kb),o*=t.tb,n instanceof Ua&&null!==n.hb?(e=n.hb.cb,No(t,e.x-o/2,e.y-o/2,e.width+o,e.height+o)):No(t,-o/2,-o/2,e+o,i+o),t.qd.freeze(),t.qd.H()||_h.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.qd.toString()),_o(t,!1)}}function Ar(t){var e=t.mA;return null!==t.Mf?e===Ef?zf:e:e===Ef?Zu[t.Cb].Zd:e}function Br(t,e,i,n,o){return t=i.x-t,e=i.y-e,e=t*t+e*e,e<n?(o.x=i.x,o.y=i.y,e):n}function Dr(t,e,i,n,o,r,a,s,l){var h=!1,u=(o-a)*(e-n)-(r-s)*(t-i);return 0!==u&&(l.x=((o*s-r*a)*(t-i)-(o-a)*(t*n-e*i))/u,l.y=((o*s-r*a)*(e-n)-(r-s)*(t*n-e*i))/u,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(o=e<n?e:n,t=e<n?n:e,(l.y>o||J(l.y,o))&&(l.y<t||J(l.y,t))&&(h=!0)):(o=t<i?t:i,t=t<i?i:t,(l.x>o||J(l.x,o))&&(l.x<t||J(l.x,t))&&(h=!0)),h)}function Fr(t,e,i,n){if(!t.SE(e,i,n))return!1;t=e.x,e=e.y;var o=i.x;i=i.y;var r=n.x;if(n=n.y,t===o){var a=0;return t=0,e<i?(a=e,t=i):(a=i,t=e),n>=a&&n<=t}return t<o?(a=t,t=o):a=o,r>=a&&r<=t}function jr(t){var e=t.g;null!==e&&e.oa.gb||(t.qq=Jd,"None"!==t.Ap?(t.Me=-1,t.oh=du):"None"!==t.Jo&&(t.Me=0,t.oh=new D(1-du.x,du.y)))}function Er(){Mo.call(this),this.Ed="",this.qc="black",this.ng="13px sans-serif",this.wl="start",this.mg=jf,this.Al=gu,this.Dm=!0,this.Yj=this.Zj=!1,this.Xi=xd,this.rk=bd,this.Wv=this.je=0,this.wm=this.jz=this.kz=null,this.Oi=new Wr,this.qr=!1,this.Te=this.Rq=this.it=this.xl=this.jt=null,this.ci=this.bi=0,this.fh=Infinity,this.Yo=0,this.rg=1,this.qg=0,this.pg=1,this.ym=null}function Ir(t,e,i,n){e=e.replace(/^\s+|\s+$/g,"");var o=0,r=0,a=0,s=t.ng,r=t.bi+t.ci,l=Math.max(0,Gr(t)+r),a=t.Xi===wd?Rr(s):0;if(t.je>=t.fh)return new k(0,l);if(t.rk===md){if(i.gj=1,r=zr(e,s),0===a||r<=n)return i.ef=r,i.pf.push(i.ef),i.Qe.push(e),new k(r,l);var h=Or(e);e=e.substr(h.length);for(var u=Or(e),r=zr(h+u,s);0<u.length&&r<=n;)h+=u,e=e.substr(u.length),u=Or(e),r=zr((h+u).replace(/^\s+|\s+$/g,""),s);for(h+=u.replace(/^\s+|\s+$/g,""),n=Math.max(1,n-a);zr(h,s)>n&&1<h.length;)h=h.substr(0,h.length-1);return h+=pd,a=zr(h,s),i.pf.push(a),i.ef=a,i.Qe.push(h),new k(a,l)}var c=0;for(0===e.length&&(c=1,i.pf.push(0),i.Qe.push(e));0<e.length;){for(h=Or(e),e=e.substr(h.length);zr(h,s)>n;){for(u=1,r=zr(h.substr(0,u),s),a=0;r<=n;)u++,a=r,r=zr(h.substr(0,u),s);if(1===u?(i.pf[t.je+c]=r,o=Math.max(o,r)):(i.pf[t.je+c]=a,o=Math.max(o,a)),u--,1>u&&(u=1),i.Qe[t.je+c]=h.substr(0,u),c++,h=h.substr(u),t.je+c>t.fh)break}for(u=Or(e),r=zr(h+u,s);0<u.length&&r<=n;)h+=u,e=e.substr(u.length),u=Or(e),r=zr((h+u).replace(/^\s+|\s+$/g,""),s);if(""!==(h=h.replace(/^\s+|\s+$/g,""))&&("\xad"===h[h.length-1]&&(h=h.substring(0,h.length-1)+"\u2010"),0===u.length?(i.pf.push(r),o=Math.max(o,r)):(a=zr(h,s),i.pf.push(a),o=Math.max(o,a)),i.Qe.push(h),c++,t.je+c>t.fh))break}return i.gj=Math.min(t.fh,c),i.ef=Math.max(i.ef,o),new k(i.ef,l*i.gj)}function Or(t){for(var e=t.length,i=0;i<e&&!hd.test(t.charAt(i));)i++;for(;i<e&&hd.test(t.charAt(i));)i++;return i>=e?t:t.substr(0,i)}function zr(t,e){return gd!==e&&(gd=yd.font=e),yd.measureText(t).width}function Gr(t){if(null!==t.wm)return t.wm;var e=t.ng;gd!==e&&(gd=yd.font=e);var i=0;return void 0!==ud[e]&&5e3>cd?i=ud[e]:(i=1.3*yd.measureText("M").width,ud[e]=i,cd++),t.wm=i}function Rr(t){gd!==t&&(gd=yd.font=t);var e=0;return void 0!==fd[t]&&5e3>dd?e=fd[t]:(e=yd.measureText(pd).width,fd[t]=e,dd++),e}function qr(t,e,i){var n=t.Ed.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.bi+t.ci,o=Math.max(0,Gr(t)+o);if(0===n.length)return i.ef=0,t.je=1,o;if(!t.xx){var r=n.indexOf("\n",0);0<=r&&(n=n.substr(0,r))}for(var r=0,a=t.je=0,s=-1,l=!1;!l;)s=n.indexOf("\n",a),-1===s&&(s=n.length,l=!0),a<=s&&(a=n.substr(a,s-a),t.rk!==md?(i.gj=0,a=Ir(t,a,i,e),r+=a.height,t.je+=i.gj):(Ir(t,a,i,e),r+=o,t.je++),t.je===t.fh&&(l=!0)),a=s+1;return t.Wv=r}function Wr(){this.ef=this.gj=0,this.pf=[],this.Qe=[]}function Hr(){Mo.call(this),this.Se=null,this.bt="",this.jk=$u,this.Mo=zf,this.gi=this.Te=null,this.Lo=au,this.mg=jf,this.xp=null,this.ez=!1,this.xv=!0,this.Uv=!1,this.op=null}function Vr(){var e=Pd;if(0===e.length)for(var i=t.document.getElementsByTagName("canvas"),n=i.length,o=0;o<n;o++){var r=i[o];r.parentElement&&r.parentElement.Z&&e.push(r.parentElement.Z)}return e}function Ur(t,e){t.Kv=!0,t.Ko=!1;for(var i=null,n=Vr(),o=n.length,r=0;r<o;r++){var a=n[r],s=a.ip.ja(t.src);if(null!==s)for(o=s.length,r=0;r<o;r++)i=s[r],a.sz.add(i),a.Le(),null===t.wz&&(t.wz=e,null!==i.gi&&i.gi(i,e))}}function _r(t,e){t.Ko=e;for(var i=null,n=Vr(),o=n.length,r=0;r<o;r++)if(null!==(i=n[r].ip.ja(t.src))){for(var o=i.length,a=_h.lb(),r=0;r<o;r++)a.push(i[r]);for(r=0;r<o;r++)i=a[r],null!==i.Te&&i.Te(i,e);_h.wa(a)}}function Kr(t){this.Gp=[new Yr(t,1)]}function Jr(t,e,i,n){var o=new V(null),r=o.xk,a=1/e;o.width=i/e,o.height=n/e,e=new Yr(o.Hd,e),i=t.Gp[t.Gp.length-1],r.setTransform(a*i.jq,0,0,a*i.jq,0,0),r.drawImage(i.source,0,0),t.Gp.push(e)}function Yr(t,e){this.source=t,this.jq=e}function $r(){this.o=new mt,this.Vb=null}function Xr(t,e,i,n,o,r){null===t.o&&_h.k("StreamGeometryContext has been closed"),void 0!==o&&!0===o?(null===t.Vb&&_h.k("Need to call beginFigure first"),n=new Tt(lc),n.D=e,n.F=i,t.Vb.vb.add(n)):(t.Vb=new Pt,t.Vb.ia=e,t.Vb.ga=i,t.Vb.au=n,t.o.dc.add(t.Vb)),void 0!==r&&(t.Vb.So=r)}function Qr(t){null===t.o&&_h.k("StreamGeometryContext has been closed"),null===t.Vb&&_h.k("Need to call beginFigure first");var e=t.Vb.vb.length;0<e&&t.Vb.vb.da(e-1).close()}function Zr(t){null===t.o&&_h.k("StreamGeometryContext has been closed"),null===t.Vb&&_h.k("Need to call beginFigure first"),0<t.Vb.vb.length&&(t.Vb.au=!0)}function ta(t,e,i,n,o,r,a,s){void 0===s&&(s=!1),null===t.o&&_h.k("StreamGeometryContext has been closed"),null===t.Vb&&_h.k("Need to call beginFigure first");var l=new Tt(uc);l.sc=e,l.Pc=i,l.Ah=n,l.Bh=o,l.D=r,l.F=a,s&&l.close(),t.Vb.vb.add(l)}function ea(t,e,i,n,o){var r;void 0===r&&(r=!1),null===t.o&&_h.k("StreamGeometryContext has been closed"),null===t.Vb&&_h.k("Need to call beginFigure first");var a=new Tt(cc);a.sc=e,a.Pc=i,a.D=n,a.F=o,r&&a.close(),t.Vb.vb.add(a)}function ia(t,e,i,n,o,r,a,s){var l;void 0===l&&(l=!1),null===t.o&&_h.k("StreamGeometryContext has been closed"),null===t.Vb&&_h.k("Need to call beginFigure first"),e=new Tt(dc,a,s,e,i,n,o,r),l&&e.close(),t.Vb.vb.add(e)}function na(t){t=oa(t);var e=_h.lb();e[0]=t[0];for(var i=1,n=1;n<t.length;)e[i]=t[n],e[i+1]=t[n],e[i+2]=t[n+1],n+=2,i+=3;return _h.wa(t),e}function oa(t){var e=ra(t),i=_h.lb(),n=Math.floor(e.length/2),o=e.length-1;t=0==t%2?2:1;for(var r=0;r<o;r++){var a=e[r],s=e[r+1],l=e[(n+r-1)%o],h=e[(n+r+t)%o];i[2*r]=a,i[2*r+1]=lt(a.x,a.y,l.x,l.y,s.x,s.y,h.x,h.y,new b)}return i[i.length]=i[0],_h.wa(e),i}function ra(t){for(var e=_h.lb(),i=1.5*Math.PI,n=0,o=0;o<t;o++)n=2*Math.PI/t*o+i,e[o]=new b(.5+.5*Math.cos(n),.5+.5*Math.sin(n));return e.push(e[0]),e}function aa(t){var e=tc[t];if(void 0===e){var i=t.toLowerCase();if("none"===i)return"None";if(void 0===(e=tc[i])){var n,o=null;for(n in Nd)if(n.toLowerCase()===i){o=n;break}if(null!==o)return t=sc(Nd[o],!1),tc[o]=t,i!==o&&(tc[i]=o),o}}return"string"==typeof e?e:e instanceof mt?t:null}function sa(t){Zo.call(this,t),this.N=2408959,this.ml=this.ui="",this.Js=this.Gs=this.Ss=this.Sr=null,this.Us="",this.si=this.Fr=this.Ts=this.Zm=null,this.Is="",this.kp=null,this.Hs=Yu,this.Ks="",this.lp=null,this.Ed="",this.Rv=this.Uq=this.Zk=null,this.Ri=new b(NaN,NaN).freeze(),this.Xr="",this.pl=null,this.Yr=iu,this.fs=Ru,this.Zr=qu,this.nr=null,this.Tr=Dd,this.an=Gu,this.$m="gray",this.Bg=4,this.YC=-1,this.st=NaN,this.GG=new S,this.Nm=null,this.ck=NaN}function la(t,e){e.ab.af.each(function(e){e.isEnabled&&e.updateAdornments(t)}),e.ab.updateAdornments(t)}function ha(t){0!=(16384&t.N)!=!1&&(t.updateAdornments(),t.N&=-16385)}function ua(t){if(!1===wa(t)){var e=t.g;null!==e&&(e.sg.add(t),e.Le()),ka(t,!0),t.Ii()}}function ca(t){if(t.N|=2097152,!1!==wa(t)){var e=t.position,i=t.location;i.H()&&e.H()||ga(t,e,i);var i=t.nc,n=i.copy();i.Ra(),i.x=e.x,i.y=e.y,i.freeze(),t.Kx(n,i),ka(t,!1)}}function fa(t,e,i,n){void 0===n&&(n=new b),i=i.Od()?au:i;var o=e.Ia;if(n.m(o.width*i.x+i.offsetX,o.height*i.y+i.offsetY),null===e||e===t)return n;for(e.transform.nb(n),e=e.O;null!==e&&e!==t;)e.transform.nb(n),e=e.O;return t.Qi.nb(n),n.offset(-t.qd.x,-t.qd.y),n}function da(t,e){var i,n=t.GG;isNaN(t.ck)&&(t.ck=fr(t)),i=t.ck;var o=2*i;if(!t.Zl)return n.m(e.x-1-i,e.y-1-i,e.width+2+o,e.height+2+o),n;i=e.x;var o=e.y,r=e.width,a=e.height,s=t.shadowBlur,l=t.BJ,r=r+s,a=a+s;return i-=s/2,o-=s/2,0<l.x?r+=l.x:(i+=l.x,r-=l.x),0<l.y?a+=l.y:(o+=l.y,a-=l.y),n.m(i-1,o-1,r+2,a+2),n}function pa(t,e,i,n){null===e||t instanceof Aa||(e=e.Pa,e.pc&&xi(e,t,"position",n.copy(),i.copy(),!1))}function ga(t,e,i){var n=_h.K(),o=t.Af,r=t.Yf;o.Od()&&_h.k("determineOffset: Part's locationSpot must be real: "+o.toString());var a=r.Ia,s=r instanceof Tr?r.kb:0;if(n.Gu(0,0,a.width+s,a.height+s,o),r!==t)for(n.offset(-s/2,-s/2),r.transform.nb(n),o=r.O;null!==o&&o!==t;)o.transform.nb(n),o=o.O;t.Qi.nb(n),n.offset(-t.qd.x,-t.qd.y),o=t.g,r=i.H(),a=e.H(),r&&a?0!=(2097152&t.N)?ya(t,e,i,o,n):ma(t,e,i,o,n):r?ya(t,e,i,o,n):a&&ma(t,e,i,o,n),t.N|=2097152,_h.v(n),t.Ii()}function ya(t,e,i,n,o){var r=e.x,a=e.y;e.m(i.x-o.x,i.y-o.y),null!==n&&(i=n.Pa,(o=i.Wj)||!i.pc||t instanceof Aa||xi(i,t,"position",new b(r,a),e,!1),o||e.x===r&&e.y===a||(i=n.wb,n.wb=!0,t.h("position",new b(r,a),e),n.wb=i))}function ma(t,e,i,n,o){var r=i.copy();i.m(e.x+o.x,e.y+o.y),i.L(r)||null===n||(e=n.wb,n.wb=!0,t.h("location",r,i),n.wb=e)}function va(t,e,i){Sa(t,!1),t instanceof Ba&&i.xA(t),t.layer.Kc||e||i.rc(),e=t.nc;var n=i.pb;n.H()?(Ma(t)?N(e,n)||t.Cf(!1):e.Tf(n)&&t.Cf(!0),t.updateAdornments()):i.hl=!0}function ba(t,e){var i=t.nc;if(0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)&&t.isVisible()){var n=t.transform;null!==t.$b&&(Fo(t,e,t.$b,!0,!0),
e.fillRect(i.x,i.y,i.width,i.height)),null===t.$b&&null===t.Eb&&(Fo(t,e,"rgba(0,0,0,0.4)",!0,!1),e.fillRect(i.x,i.y,i.width,i.height)),null!==t.Eb&&(n.bu()||e.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),i=t.Ia,Fo(t,e,t.Eb,!0,!1),e.fillRect(0,0,i.width,i.height),n.bu()||(i=1/(n.m11*n.m22-n.m12*n.m21),e.transform(n.m22*i,-n.m12*i,-n.m21*i,n.m11*i,i*(n.m21*n.dy-n.m22*n.dx),i*(n.m12*n.dx-n.m11*n.dy))))}}function xa(t,e,i,n){e.constructor===t.constructor||Fd||(Fd=!0,_h.trace('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),_h.trace("  Old class: "+_h.hf(t)+", new class: "+_h.hf(e)+", part: "+t.toString())),t.Bt();var o=t.data;i=t.Xf;var r=t.fb,a=t.Mg,s=!0,l=!0,h=!1;if(t instanceof Ba)var u=t,s=u.wj,l=u.gd,h=u.Nu;e.ki(t),e.cloneProtected(t),t.ui=n,t.I(),t.na(),e=t.g,n=!0,null!==e&&(n=e.wb,e.wb=!0),t.Vd=o,null!==o&&t.Hb(),null!==e&&(e.wb=n),o=t.Xf,o!==i&&(t.ml=i,t.Xf=o),t instanceof Ba&&(u=t,u.wj=s,u.gd=l,u.Nu=h,u.de()&&u.J(64)),t.fb=r,t.Mg=a}function wa(t){return 0!=(32768&t.N)}function ka(t,e){t.N=e?32768|t.N:-32769&t.N}function Sa(t,e){t.N=e?65536|t.N:-65537&t.N}function Ma(t){return 0!=(131072&t.N)}function Pa(t,e){t.N=e?1048576|t.N:-1048577&t.N}function Ta(t,e){var i=e.Ka;return null!==i?1+Ta(t,i):e instanceof Ba&&null!==(i=e.Mc)?Ta(t,i):0}function La(t,e){var i=e.Ka;return null!==i?La(t,i):e instanceof Ba&&null!==(i=e.Mc)?La(t,i):e}function Na(t,e,i){if(e===i||null===i)return!1;var n=e.Ka;return!(null===n||n!==i&&!Na(t,n,i))||e instanceof Ba&&null!==(e=e.Mc)&&Na(t,e,i)}function Ca(t){return!!t.isVisible()&&(null===(t=t.layer)||!t.Kc)}function Aa(t){0===arguments.length?sa.call(this,Jf):sa.call(this,t),this.N&=-257,this.ml="Adornment",this.Dc=null,this.iD=0,this.ZD=!1,this.Kb=this.$g=null}function Ba(t){sa.call(this,t),this.ya=13,this.oc=new u(Ua),this.nt=this.Wo=this.ol=this.Vr=this.Ur=null,this.Nq=zu,this.le=this.Hh=null,this.Cs=Od,this.qk=!1}function Da(t,e){null!==e&&(null===t.Hh&&(t.Hh=new f(ps)),t.Hh.add(e))}function Fa(t,e,i,n){if(null===e||null===t.Hh)return null;for(var o=t.Hh.i;o.next();){var r=o.value;if(r.hq===t&&r.pu===e&&r.Nx===i&&r.Ox===n||r.hq===e&&r.pu===t&&r.Nx===n&&r.Ox===i)return r}return null}function ja(t,e){for(var i=t.fe;i.next();){var n=i.value;n.Jc!==e&&n.jd!==e||(Ea(t,n.Jc),Ea(t,n.jd),n.Yb())}}function Ea(t,e){if(null!==e){var i=e.Bs;null!==i&&i.$p(),i=t.Ka,null===i||i.we||Ea(i,i.Pl(""))}}function Ia(t,e,i){if(Ea(t,i),!t.oc.contains(e)){t.oc.add(e);var n=t.FI;if(null!==n){var o=!0,r=t.g;null!==r&&(o=r.Ua,r.Ua=!0),n(t,e,i),null!==r&&(r.Ua=o)}e.Lc&&(i=e.Y,e=e.$,null!==i&&null!==e&&i!==e&&(n=!0,r=t.g,null!==r&&(n=r.Pd),t=n?e:i,o=n?i:e,t.qk||(t.qk=o),!o.wj||null!==r&&r.oa.gb||(n?i===o&&(o.wj=!1):e===o&&(o.wj=!1))))}}function Oa(t,e,i){if(Ea(t,i),t.oc.remove(e)){var n=t.GI,o=t.g;if(null!==n){var r=!0;null!==o&&(r=o.Ua,o.Ua=!0),n(t,e,i),null!==o&&(o.Ua=r)}e.Lc&&(i=!0,null!==o&&(i=o.Pd),t=i?e.$:e.Y,e=i?e.Y:e.$,null!==t&&(t.qk=!1),null===e||e.wj||(0===e.oc.count?(e.qk=null,null!==o&&o.oa.gb||(e.wj=!0)):za(e)))}}function za(t){if(t.qk=!1,0!==t.oc.count){var e=!0,i=t.g;if(null===i||!i.oa.gb){for(null!==i&&(e=i.Pd),i=t.oc.i;i.next();){var n=i.value;if(n.Lc)if(e){if(n.Y===t)return void(t.wj=!1)}else if(n.$===t)return void(t.wj=!1)}t.wj=!0}}}function Ga(t){null===t.le?t.le=new v("string",Mo):t.le.clear(),sr(t,t,function(t,e){var i=e.Qd;null!==i&&t.le.add(i,e)}),0===t.le.count&&t.le.add("",t)}function Ra(t,e,i){var n=e.Qd;if(null!==n&&(null!==t.le&&t.le.remove(n),null!==(e=t.g)&&i)){for(i=null,n=t.IE(n);n.next();)t=n.value,null===i&&(i=_h.lb()),i.push(t);if(null!==i){for(n=0;n<i.length;n++)t=i[n],e.remove(t);_h.wa(i)}}}function qa(t,e){var i=e.Rl();return null===i?0:1+qa(t,i)}function Wa(t,e,i,n,o,r,a){if(1<n)for(var s=i?t.hx():t.Kg();s.next();){var l=s.value;l.Lc&&(null===(l=l.oA(t))||l===t||e.contains(l)||(e.add(l),Wa(l,e,i,n-1,o,r,a)))}else Ha(t,e,i,o,r,a)}function Ha(t,e,i,n,o,r){for(var a=o===t||t.gd,s=i?t.hx():t.Kg();s.next();){var l=s.value;l.Lc&&(null===(l=l.oA(t))||l===t||e.contains(l)||(e.add(l),a&&(r&&Ni(n,l,o),l.Ek(),l.vd(!1)),l.gd&&(l.Nu=l.gd,Ha(l,e,i,n,o,r))))}t.gd=!1}function Va(t,e,i,n,o,r,a){for(var s=r!==t&&t.gd,l=i?t.hx():t.Kg();l.next();){var h=l.value;h.Lc&&(s||h.Zg||h.Yb(),null!==(h=h.oA(t))&&h!==t&&!e.contains(h)&&(e.add(h),s||(h.vd(!0),h.Ek(),a&&Li(o,h,r)),2<n||h.Nu))&&(h.Nu=!1,Va(h,e,i,n-1,o,r,a))}t.gd=!0}function Ua(){sa.call(this,ed),this.Wb=8,this.og=null,this.Nh="",this.Eg=this.wr=null,this.hi="",this.mt=null,this.Fq=qd,this.$q=0,this.cr=qd,this.dr=NaN,this.Um=Gd,this.at=.5,this.rf=null,this.bd=new u(b).freeze(),this.$g=this.sC=this.mC=this.ti=this.Gi=this.hb=this.lw=this.mp=this.Ue=null,this.Ez=new b,this.V=this.KD=this.JD=null}function _a(t){var e=t.Y,i=t.$;null!==e&&null!==i?Ka(t,e.PH(i)):Ka(t,null)}function Ka(t,e){var i=t.Zk;if(i!==e){null!==i&&Bs(i,t),t.Zk=e,null!==e&&As(e,t);var n=t.sE;if(null!==n){var o=!0,r=t.g;null!==r&&(o=r.Ua,r.Ua=!0),n(t,i,e),null!==r&&(r.Ua=o)}!t.Zg||t.JD!==i&&t.KD!==i||t.Yb()}}function Ja(t,e){null===t.rf&&(t.rf=new f(Ba)),t.rf.add(e),t.I()}function Ya(t){0===t.bd.count?t.Zg=!1:(t.Zg=!0,t.Np=t.l(0),t.Op=t.l(t.qa-1),hs(t,!1))}function $a(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Xa(t,e){var i=e.Bs;return null===i&&(i=new Ms,i.port=e,i.Oc=e.U,e.Bs=i),Ts(i,t)}function Qa(t,e){if(null===e)return au;var i=t.Ab;return i.Vc()&&null!==e&&(i=e.Ab),i===eu?tu:i}function Za(t,e){if(null===e)return au;var i=t.Bb;return i.Vc()&&null!==e&&(i=e.Bb),i===eu?tu:i}function ts(t){if(null===t.g||!t.sj)return!1;var e=t.points.n,i=e.length;if(4>i)return!1;t=to(t.g,!0,t.Ka,null);for(var n=1;n<i-2;n++){var o=e[n],r=e[n+1];if(!t.$l(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function es(t,e,i,n,o,r){var a=e.mn,s=e.ln,l=ms(e,i,n),h=i,u=n;for(0===o?h+=a:90===o?u+=s:180===o?h-=a:u-=s;1<l&&ms(e,h,u)===l-1;)i=h,n=u,0===o?h+=a:90===o?u+=s:180===o?h-=a:u-=s,l-=1;r?1<l&&(180===o||0===o?i=Math.floor(i/a)*a+a/2:90!==o&&270!==o||(n=Math.floor(n/s)*s+s/2)):(i=Math.floor(i/a)*a+a/2,n=Math.floor(n/s)*s+s/2),1<l&&(r=o,h=i,u=n,0===o?(r=90,u+=s):90===o?(r=180,h-=a):180===o?(r=270,u-=s):270===o&&(r=0,h+=a),ms(e,h,u)===l-1?es(t,e,h,u,r,!1):(h=i,u=n,0===o?(r=270,u-=s):90===o?(r=0,h+=a):180===o?(r=90,u+=s):270===o&&(r=180,h-=a),ms(e,h,u)===l-1&&es(t,e,h,u,r,!1))),t.hj(i,n)}function is(t,e,i,n){return t=i-t,isNaN(t)||Infinity===t||-Infinity===t?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||Infinity===e||-Infinity===e?NaN:(0>e&&(e=-e),J(t,0)?e:J(e,0)?t:Math.sqrt(t*t+e*e)))}function ns(t,e,i,n){var o=t.qa;if(2>o)return e;if(i){var r=t.l(1);if(i=r.x-n.x,n=r.y-n.y,0===(r=is(e.x,e.y,i,n)))return e;o=2===o?.5*r:r,t=t.computeShortLength(!0),t>o&&(t=o),i=t*(i-e.x)/r,t=t*(n-e.y)/r,e.x+=i,e.y+=t}else{if(r=t.l(o-2),i=r.x-n.x,n=r.y-n.y,0===(r=is(e.x,e.y,i,n)))return e;o=2===o?.5*r:r,t=t.computeShortLength(!1),t>o&&(t=o),i=t*(e.x-i)/r,t=t*(e.y-n)/r,e.x-=i,e.y-=t}return e}function os(t,e,i,n){for(var o=t.qa,r=e;J(e.x,r.x)&&J(e.y,r.y);){if(i>=o)return o-1;r=t.l(i++)}if(!J(e.x,r.x)&&!J(e.y,r.y))return i-1;for(var a=r;J(e.x,r.x)&&J(r.x,a.x)&&(!n||(e.y>=r.y?r.y>=a.y:r.y<=a.y))||J(e.y,r.y)&&J(r.y,a.y)&&(!n||(e.x>=r.x?r.x>=a.x:r.x<=a.x));){if(i>=o)return o-1;a=t.l(i++)}return i-2}function rs(t,e,i,n,o,r,a){if(!a&&ls(t)){a=[];var s=0;t.isVisible()&&(s=as(t,o,r,a));var l=o.x,l=o.y;if(0<s)if(K(o.y,r.y))if(o.x<r.x)for(var h=0;h<s;){var u=Math.max(o.x,Math.min(a[h++]-5,r.x-10));e.lineTo(u+i,r.y+n);for(var l=u+i,c=Math.min(u+10,r.x);h<s;){var f=a[h];if(!(f<c+10))break;h++,c=Math.min(f+5,r.x)}f=(u+c)/2+i,f=r.y-10+n,u=c+i,c=r.y+n,t.Ye===Hd?Xr(e,u,c,!1,!1):ta(e,l,f,u,f,u,c)}else for(h=s-1;0<=h;){for(u=Math.min(o.x,Math.max(a[h--]+5,r.x+10)),e.lineTo(u+i,r.y+n),l=u+i,c=Math.max(u-10,r.x);0<=h&&(f=a[h])>c-10;)h--,c=Math.max(f-5,r.x);f=r.y-10+n,u=c+i,c=r.y+n,t.Ye===Hd?Xr(e,u,c,!1,!1):ta(e,l,f,u,f,u,c)}else if(K(o.x,r.x))if(o.y<r.y)for(h=0;h<s;){for(u=Math.max(o.y,Math.min(a[h++]-5,r.y-10)),e.lineTo(r.x+i,u+n),l=u+n,c=Math.min(u+10,r.y);h<s&&(f=a[h])<c+10;)h++,c=Math.min(f+5,r.y);f=r.x-10+i,u=r.x+i,c+=n,t.Ye===Hd?Xr(e,u,c,!1,!1):ta(e,f,l,f,c,u,c)}else for(h=s-1;0<=h;){for(u=Math.min(o.y,Math.max(a[h--]+5,r.y+10)),e.lineTo(r.x+i,u+n),l=u+n,c=Math.max(u-10,r.y);0<=h&&(f=a[h])>c-10;)h--,c=Math.max(f-5,r.y);f=r.x-10+i,u=r.x+i,c+=n,t.Ye===Hd?Xr(e,u,c,!1,!1):ta(e,f,l,f,c,u,c)}}e.lineTo(r.x+i,r.y+n)}function as(t,e,i,n){var o=t.g;if(null===o||e.L(i))return 0;for(o=o.Dx;o.next();){var r=o.value;if(null!==r&&r.visible)for(var r=r.zb.n,a=r.length,s=0;s<a;s++){var l=r[s];if(l instanceof Ua){if(l===t)return 0<n.length&&n.sort(function(t,e){return t-e}),n.length;if(l.isVisible()&&ls(l)){var h=l.Wn;h.H()&&t.Wn.Tf(h)&&!t.usesSamePort(l)&&null!==(h=l.path)&&h.xj()&&ss(e,i,n,l)}}}}return 0<n.length&&n.sort(function(t,e){return t-e}),n.length}function ss(t,e,i,n){for(var o=K(t.y,e.y),r=n.qa,a=n.l(0),s=_h.K(),l=1;l<r;l++){var h=n.l(l);if(l<r-1){var u=n.l(l+1);a.y===h.y&&h.y===u.y?(h.x>a.x&&u.x>h.x||h.x<a.x&&u.x<h.x)&&(h=u,l++):a.x===h.x&&h.x===u.x&&(h.y>a.y&&u.y>h.y||h.y<a.y&&u.y<h.y)&&(h=u,l++)}t:{var u=s,c=t.x,f=t.y,d=e.x,p=e.y,g=a.x,a=a.y,y=h.x,m=h.y;if(K(c,d)){if(!K(f,p)&&K(a,m)&&Math.min(f,p)<a&&Math.max(f,p)>a&&Math.min(g,y)<c&&Math.max(g,y)>c&&!K(g,y)){u.x=c,u.y=a,u=!0;break t}}else if(K(f,p)&&K(g,y)&&Math.min(c,d)<g&&Math.max(c,d)>g&&Math.min(a,m)<f&&Math.max(a,m)>f&&!K(a,m)){u.x=g,u.y=f,u=!0;break t}u.x=0,u.y=0,u=!1}u&&(o?i.push(s.x):i.push(s.y)),a=h}_h.v(s)}function ls(t){return(t=t.Ye)===Vd||t===Hd}function hs(t,e){if(e||ls(t)){var i=t.g;null===i||i.al.contains(t)||null===t.lw||i.al.add(t,t.lw)}}function us(t,e){var i=t.layer;if(null!==i&&i.visible&&!i.Kc){var n=i.g;if(null!==n)for(var o=!1,n=n.Dx;n.next();){var r=n.value;if(r.visible)if(r===i)for(var o=!0,a=!1,r=r.zb.n,s=r.length,l=0;l<s;l++){var h=r[l];h instanceof Ua&&(h===t?a=!0:a&&cs(t,h,e))}else if(o)for(r=r.zb.n,s=r.length,l=0;l<s;l++)(h=r[l])instanceof Ua&&cs(t,h,e)}}}function cs(t,e,i){if(null!==e&&null!==e.hb&&ls(e)){var n=e.Wn;n.H()&&(t.Wn.Tf(n)||i.Tf(n))&&(t.usesSamePort(e)||e.Ke())}}function fs(t){var e=t.og;if(null!==e){var i=t.Eg;if(null!==i){var n=t.Nh;t=t.hi;for(var o=null,r=null,a=e.oc.n,s=a.length,l=0;l<s;l++){var h=a[l];(h.og===e&&h.Nh===n&&h.Eg===i&&h.hi===t||h.og===i&&h.Nh===t&&h.Eg===e&&h.hi===n)&&(null===r?r=h:(null===o&&(o=[],o.push(r)),o.push(h)))}if(null!==o){for(r=Fa(e,i,n,t),null===r&&(r=new ps,r.hq=e,r.Nx=n,r.pu=i,r.Ox=t,Da(e,r),Da(i,r)),r.links=o,l=0;l<o.length;l++)h=o[l],h.ti=r;r.$p()}}}}function ds(t){var e=t.ti;null!==e&&(t.ti=null,0<=(t=e.links.indexOf(t))&&(_h.Hg(e.links,t),e.$p()))}function ps(){_h.mc(this),this.Jv=!1,this.Ox=this.pu=this.Nx=this.hq=null,this.links=[]}function gs(){_h.mc(this),this.mB=this.group=null,this.Xt=!0,this.abort=!1,this.yg=this.xg=1,this.as=this.$r=-1,this.Ae=this.ze=8,this.md=null,this.zG=!1,this.iG=22,this.uF=111}function ys(t,e,i){return t.xg<=e&&e<=t.$r&&t.yg<=i&&i<=t.as}function ms(t,e,i){return ys(t,e,i)?(e-=t.xg,e/=t.ze,i-=t.yg,i/=t.Ae,t.md[0|e][0|i]):1e6}function vs(t,e,i){ys(t,e,i)&&(e-=t.xg,e/=t.ze,i-=t.yg,i/=t.Ae,t.md[0|e][0|i]=0)}function bs(t){if(null!==t.md)for(var e=0;e<=t.Bp;e++)for(var i=0;i<=t.Cp;i++)1<=t.md[e][i]&&(t.md[e][i]=1e6)}function xs(t,e,i,n,o,r,a,s,l){if(!(e<r||e>a||i<s||i>l)){var h,u;h=0|e,u=0|i;var c=t.md[h][u];if(1<=c&&999999>c)for(o?u+=n:h+=n,c+=1;r<=h&&h<=a&&s<=u&&u<=l&&!(c>=t.md[h][u]);)t.md[h][u]=c,c+=1,o?u+=n:h+=n;if(h=o?u:h,o)if(0<n)for(i+=n;i<h;i+=n)xs(t,e,i,1,!o,r,a,s,l),xs(t,e,i,-1,!o,r,a,s,l);else for(i+=n;i>h;i+=n)xs(t,e,i,1,!o,r,a,s,l),xs(t,e,i,-1,!o,r,a,s,l);else if(0<n)for(e+=n;e<h;e+=n)xs(t,e,i,1,!o,r,a,s,l),xs(t,e,i,-1,!o,r,a,s,l);else for(e+=n;e>h;e+=n)xs(t,e,i,1,!o,r,a,s,l),xs(t,e,i,-1,!o,r,a,s,l)}}function ws(t,e,i,n,o,r,a,s,l){e|=0,i|=0;var h=0,u=1;for(t.md[e][i]=u;0===h&&e>r&&e<a&&i>s&&i<l;)u+=1,t.md[e][i]=u,o?i+=n:e+=n,h=t.md[e][i]}function ks(t,e,i,n,o,r,a,s,l){e|=0,i|=0;var h=0;for(t.md[e][i]=999999;0===h&&e>r&&e<a&&i>s&&i<l;)t.md[e][i]=999999,o?i+=n:e+=n,h=t.md[e][i]}function Ss(t,e,i,n,o,r){if(null!==t.md){t.abort=!1;var a=e.x,s=e.y;if(ys(t,a,s)&&(a-=t.xg,a/=t.ze,s-=t.yg,s/=t.Ae,e=n.x,n=n.y,ys(t,e,n)))if(e-=t.xg,e/=t.ze,n-=t.yg,n/=t.Ae,1>=Math.abs(a-e)&&1>=Math.abs(s-n))t.abort=!0;else{var l=r.x,h=r.y,u=r.x+r.width,c=r.y+r.height,l=l-t.xg,l=l/t.ze,h=h-t.yg,h=h/t.Ae,u=u-t.xg,u=u/t.ze,c=c-t.yg,c=c/t.Ae;r=Math.max(0,Math.min(t.Bp,0|l)),u=Math.min(t.Bp,Math.max(0,0|u)),h=Math.max(0,Math.min(t.Cp,0|h)),c=Math.min(t.Cp,Math.max(0,0|c)),a|=0,s|=0,e|=0,n|=0,l=0===i||90===i?1:-1,i=90===i||270===i,0===t.md[a][s]?(ws(t,a,s,l,i,r,u,h,c),ws(t,a,s,1,!i,r,u,h,c),ws(t,a,s,-1,!i,r,u,h,c)):ws(t,a,s,l,i,a,s,a,s),0===t.md[e][n]?(ks(t,e,n,0===o||90===o?1:-1,90===o||270===o,r,u,h,c),ks(t,e,n,1,!(90===o||270===o),r,u,h,c),ks(t,e,n,-1,!(90===o||270===o),r,u,h,c)):ks(t,e,n,l,i,e,n,e,n),t.abort||(xs(t,a,s,1,!1,r,u,h,c),xs(t,a,s,-1,!1,r,u,h,c),xs(t,a,s,1,!0,r,u,h,c),xs(t,a,s,-1,!0,r,u,h,c))}}}function Ms(){_h.mc(this),this.port=this.Oc=null,this.bg=[],this.gq=!1}function Ps(t,e,i,n){switch(e=e.offsetY){case _h.Zc:return 90;case _h.Rc:return 180;case _h.kd:return 270;case _h.$c:return 0}switch(e){case _h.Zc|_h.kd:return 180<i?270:90;case _h.Rc|_h.$c:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case _h.Rc|_h.kd:return i>t&&i<=180+t?180:270;case _h.kd|_h.$c:return i>180-t&&i<=360-t?270:0;case _h.$c|_h.Zc:return i>t&&i<=180+t?90:0;case _h.Zc|_h.Rc:return i>180-t&&i<=360-t?180:90;case _h.Rc|_h.kd|_h.$c:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case _h.kd|_h.$c|_h.Zc:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case _h.$c|_h.Zc|_h.Rc:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case _h.Zc|_h.Rc|_h.kd:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==(_h.Rc|_h.kd|_h.$c|_h.Zc)&&0>(i-=15)&&(i+=360),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function Ts(t,e){var i=t.bg;if(0===i.length){t:if(!t.gq){i=t.gq,t.gq=!0;var n,o=null,r=t.Oc,r=r instanceof Cs?r:null;if(null===r||r.we)n=t.Oc.IE(t.port.Qd);else{if(!r.W.H()){t.gq=i;break t}o=r,n=o.HE()}var a=t.bg.length=0,s=t.port.Wa(iu,_h.K()),l=t.port.Wa(uu,_h.K()),r=_h.hg(s.x,s.y,0,0);for(r.ri(l),_h.v(s),_h.v(l),s=_h.xb(r.x+r.width/2,r.y+r.height/2),n=n.i;n.next();)if(l=n.value,l.isVisible()){var h=l.Jc===t.port||l.Y.mi(o),u=l.computeSpot(h);if(u.uj()&&null!==(h=h?l.jd:l.Jc)){var c=h.U;if(null!==c){var h=l.computeOtherPoint(c,h),c=s.Rb(h),u=Ps(r,u,c,l.jc),f=0;0===u?(f=_h.$c,180<c&&(c-=360)):f=90===u?_h.Zc:180===u?_h.Rc:_h.kd,u=t.bg[a],void 0===u?(u=new Ls(l,c,f),t.bg[a]=u):(u.link=l,u.angle=c,u.xe=f),u.Lx.set(h),a++}}}for(_h.v(s),t.bg.sort(Ms.prototype.$I),o=t.bg.length,s=-1,a=n=0;a<o;a++)void 0!==(u=t.bg[a])&&(u.xe!==s&&(s=u.xe,n=0),u.Yp=n,n++);for(s=-1,n=0,a=o-1;0<=a;a--)void 0!==(u=t.bg[a])&&(u.xe!==s&&(s=u.xe,n=u.Yp+1),u.tn=n);a=t.bg,h=t.port,o=t.Oc.eJ,s=_h.K(),n=_h.K(),l=_h.K(),u=_h.K(),h.Wa(iu,s),h.Wa(ou,n),h.Wa(uu,l),h.Wa(lu,u);var d=f=c=h=0;if(o===zd)for(var p=0;p<a.length;p++){var g=a[p];if(null!==g){var y=g.link.computeThickness();switch(g.xe){case _h.Zc:f+=y;break;case _h.Rc:d+=y;break;case _h.kd:h+=y;break;default:case _h.$c:c+=y}}}for(var m=0,v=0,b=1,p=0;p<a.length;p++)if(null!==(g=a[p])){var x,w;if(m!==g.xe){switch(m=g.xe){case _h.Zc:x=l,w=u;break;case _h.Rc:x=u,w=s;break;case _h.kd:x=s,w=n;break;default:case _h.$c:x=n,w=l}var k=w.x-x.x;switch(w=w.y-x.y,m){case _h.Zc:f>Math.abs(k)?(b=Math.abs(k)/f,f=Math.abs(k)):b=1;break;case _h.Rc:d>Math.abs(w)?(b=Math.abs(w)/d,d=Math.abs(w)):b=1;break;case _h.kd:h>Math.abs(k)?(b=Math.abs(k)/h,h=Math.abs(k)):b=1;break;default:case _h.$c:c>Math.abs(w)?(b=Math.abs(w)/c,c=Math.abs(w)):b=1}v=0}var S=g.eq;if(o===zd){switch(y=g.link.computeThickness(),y*=b,S.set(x),m){case _h.Zc:S.x=x.x+k/2+f/2-v-y/2;break;case _h.Rc:S.y=x.y+w/2+d/2-v-y/2;break;case _h.kd:S.x=x.x+k/2-h/2+v+y/2;break;default:case _h.$c:S.y=x.y+w/2-c/2+v+y/2}v+=y}else y=.5,o===Od&&(y=(g.Yp+1)/(g.tn+1)),S.x=x.x+k*y,S.y=x.y+w*y}for(_h.v(s),_h.v(n),_h.v(l),_h.v(u),x=t.bg,k=0;k<x.length;k++)null!==(w=x[k])&&(w.ax=t.computeEndSegmentLength(w));t.gq=i,_h.Db(r)}i=t.bg}for(r=0;r<i.length;r++)if(null!==(x=i[r])&&x.link===e)return x;return null}function Ls(t,e,i){this.link=t,this.angle=e,this.xe=i,this.Lx=new b,this.tn=this.Yp=0,this.eq=new b,this.ax=0}function Ns(){this.pk=this.Sj=eu,this.nk=this.Qj=NaN,this.mk=this.Pj=jd,this.ok=this.Rj=NaN,this.kt=this.ur=null,this.lt=this.vr=Infinity}function Cs(t){Ba.call(this,t),this.ya|=4608,this.cs=new f(sa),this.dp=new f(Cs),this.Kb=this.et=this.ql=this.ds=this.bs=null,this.ie=new Es,this.ie.group=this}function As(t,e){if(t.cs.add(e)){e instanceof Cs&&t.dp.add(e);var i=t.RI;if(null!==i){var n=!0,o=t.g;null!==o&&(n=o.Ua,o.Ua=!0),i(t,e),null!==o&&(o.Ua=n)}t.isVisible()&&t.we||e.vd(!1)}e instanceof Ua&&!t.Sw||(i=t.Kb,null===i&&(i=t),i.I())}function Bs(t,e){if(t.cs.remove(e)){e instanceof Cs&&t.dp.remove(e);var i=t.SI;if(null!==i){var n=!0,o=t.g;null!==o&&(n=o.Ua,o.Ua=!0),i(t,e),null!==o&&(o.Ua=n)}t.isVisible()&&t.we||e.vd(!0)}e instanceof Ua&&!t.Sw||(i=t.Kb,null===i&&(i=t),i.I())}function Ds(t,e,i,n){for(var o=t.Nc;o.next();){var r=o.value;if(r.vd(!1),r instanceof Cs){var a=r;a.we&&(a.AB=a.we,Ds(a,e,i,n))}if(r instanceof Ba)r.Uf(e),Ni(i,r,n);else if(r instanceof Ua)for(r=r.Wf;r.next();)r.value.Uf(e)}t.we=!1}function Fs(t,e,i,n){for(var o=t.Nc;o.next();){var r=o.value;if(r.vd(!0),r instanceof Cs){var a=r;a.AB&&(a.AB=!1,Fs(a,e,i,n))}if(r instanceof Ba)r.Uf(e),Li(i,r,n);else if(r instanceof Ua)for(r=r.Wf;r.next();)r.value.Uf(e)}t.we=!0}function js(){Mo.call(this),this.ff=Ou,this.Ps=new S(NaN,NaN,NaN,NaN)}function Es(){0<arguments.length&&_h.hd(Es),_h.mc(this),this.bz=this.Z=null,this.Xj=this.Jr=!0,this.Pr=!1,this.Jq=new b(0,0).freeze(),this.Lr=this.Mr=!0,this.vC="",this.Uo=!1,this.oz=null}function Is(t,e,i,n,o,r,a,s){for(i=i.i;i.next();){var l=i.value;n&&!l.bq||null!==o&&!o(l)||!l.canLayout()||(r&&l instanceof Ba?l.lf||(l instanceof Cs&&null===l.Sb?Is(t,e,l.Nc,!1,o,r,a,s):(Os(l),e.add(l))):a&&l instanceof Ua?e.add(l):!s||!l.de()||l instanceof Ba||(Os(l),e.add(l)))}}function Os(t){var e=t.W;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Ze()}function zs(){if(_h.mc(this),this.ie=null,this.vertexes)for(var t=this.vertexes.i;t.next();){var e=t.value;e.clear(),e.network=null}if(this.edges)for(t=this.edges.i;t.next();)e=t.value,e.clear(),e.network=null;this.vertexes=new f(Hs),this.edges=new f(Vs),this.Ix=new v(Ba,Hs),this.Ex=new v(Ua,Vs)}function Gs(t,e){if(null===e)return!1;var i=t.vertexes.remove(e);return i&&(t.Ix.remove(e.Oc),e.network=null),i}function Rs(t,e){null!==e&&t.edges.remove(e)&&(t.Ex.remove(e.link),e.network=null)}function qs(t){for(var e=_h.lb(),i=t.edges.i;i.next();){var n=i.value;null!==n.fromVertex&&null!==n.toVertex||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Pp(e[n]);_h.wa(e)}function Ws(t,e,i){if(null!==i&&i.network!==e){Gs(t,i),e.Dl(i);for(var n=i.lc;n.next();){var o=n.value;o.network!==e&&(Rs(t,o),e.Ep(o),Ws(t,e,o.fromVertex))}for(n=i.ic;n.next();)i=n.value,i.network!==e&&(Rs(t,i),e.Ep(i),Ws(t,e,i.toVertex))}}function Hs(){_h.mc(this),this.network=null,this.M=new S(0,0,10,10).freeze(),this.T=new b(5,5).freeze(),this.rd=this.Vd=null,this.Oe=new u(Vs),this.He=new u(Vs)}function Vs(){_h.mc(this),this.toVertex=this.fromVertex=this.link=this.data=this.network=null}function Us(){0<arguments.length&&_h.hd(Us),Es.call(this),this.zx=!0,this.qt=this.rt=NaN,this.Kj=new k(NaN,NaN).freeze(),this.ai=new k(10,10).freeze(),this.ge=rp,this.ld=ap,this.$h=up,this.Jh=np}function _s(){0<arguments.length&&_h.hd(_s),Es.call(this),this.Ty=this.Fo=this.Wd=0,this.pr=360,this.Sy=fp,this.bl=0,this.BC=fp,this.hv=this.Gg=this.SD=0,this.Fw=new ol,this.iv=this.Qm=0,this.PG=600,this.Ds=NaN,this.Lq=1,this.dt=0,this.ft=360,this.ld=fp,this.aa=yp,this.$h=Mp,this.Jh=ip,this.ai=6,this.rs=Pp}function Ks(t,e,i,n,o){var r=t.pr,a=t.Wd;t=t.Gg,n=n*Math.PI/180,i=i*Math.PI/180;for(var s=e.length,l=0;l<s;l++){var h=n+(o===yp?l*i/(360<=r?s:s-1):-l*i/s),u=e.da(l),c=a*Math.tan(h)/t,c=Math.sqrt((a*a+t*t*c*c)/(1+c*c));u.ka=c*Math.cos(h),u.ra=c*Math.sin(h),u.actualAngle=180*h/Math.PI}}function Js(t,e,i,n){var o=t.Wd,r=t.Gg,a=t.bl;i=i*Math.PI/180;for(var s=e.length,l=0;l<s;l++){var h=e.da(l),u=e.da(l===s-1?0:l+1),c=r*Math.sin(i);h.ka=o*Math.cos(i),h.ra=c,h.actualAngle=180*i/Math.PI,isNaN(h.diameter)&&sl(h,0),isNaN(u.diameter)&&sl(u,0),h=nl(t,o,r,n===yp?i:-i,(h.diameter+u.diameter)/2+a),i+=n===yp?h:-h}}function Ys(t,e,i,n){var o=t.Wd,r=t.Gg,a=t.hv;i=i*Math.PI/180;for(var s=e.length,l=0;l<s;l++){var h=e.da(l);h.ka=o*Math.cos(i),h.ra=r*Math.sin(i),h.actualAngle=180*i/Math.PI,h=nl(t,o,r,n===yp?i:-i,a),i+=n===yp?h:-h}}function $s(t,e,i,n,o){var r=t.iv,r=t.pr;if(t.Qm=0,t.Fw=new ol,360>i){for(r=n+(o===yp?r:-r);0>r;)r+=360;r%=360,180<r&&(r-=360),r*=Math.PI/180,t.iv=r,Qs(t,e,i,n,o)}else Xs(t,e,i,n,o);t.Fw.commit(e)}function Xs(t,e,i,n,o){var r=t.Wd,a=t.bl,s=t.Fo,l=r*Math.cos(n*Math.PI/180),h=t.Gg*Math.sin(n*Math.PI/180),u=e.ec();if(3===u.length)u[0].ka=r,u[0].ra=0,u[1].ka=u[0].ka-u[0].width/2-u[1].width/2-a,u[1].y=u[0].y,u[2].ka=(u[0].ka+u[1].ka)/2,u[2].y=u[0].y-u[2].height-a;else if(4===u.length)u[0].ka=r,u[0].ra=0,u[2].ka=-u[0].ka,u[2].ra=u[0].ra,u[1].ka=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-a,u[3].ka=0,u[3].y=Math.max(u[0].y+u[0].height+a,u[2].y+u[2].height+a);else{for(var r=_h.K(),c=0;c<u.length&&(u[c].ka=l,u[c].ra=h,!(c>=u.length-1));c++)Zs(t,l,h,u,c,o,r)||tl(t,l,h,u,c,o,r),l=r.x,h=r.y;if(_h.v(r),!(23<++t.Qm)){var l=u[0].ka,h=u[0].ra,r=u[u.length-1].ka,c=u[u.length-1].ra,f=Math.abs(l-r)-((u[0].width+u[u.length-1].width)/2+a),d=Math.abs(h-c)-((u[0].height+u[u.length-1].height)/2+a),a=0;1>Math.abs(d)?Math.abs(l-r)<(u[0].width+u[u.length-1].width)/2&&(a=0):a=0<d?d:1>Math.abs(f)?0:f,f=!1,f=Math.abs(r)>Math.abs(c)?0<r!=h>c:0<c!=l<r,(f=o===yp?f:!f)&&(a=-Math.abs(a),a=Math.min(a,-u[u.length-1].width),a=Math.min(a,-u[u.length-1].height)),t.Fw.compare(a,u),1<Math.abs(a)&&(t.Wd=8>t.Qm?t.Wd-a/(2*Math.PI):5>u.length&&10<a?t.Wd/2:t.Wd-(0<a?1.7:-2.3),t.Gg=t.Wd*s,Xs(t,e,i,n,o))}}}function Qs(t,e,i,n,o){for(var r=t.Wd,a=t.Gg,s=t.Fo,l=r*Math.cos(n*Math.PI/180),h=a*Math.sin(n*Math.PI/180),u=_h.K(),c=e.ec(),f=0;f<c.length&&(c[f].ka=l,c[f].ra=h,!(f>=c.length-1));f++)Zs(t,l,h,c,f,o,u)||tl(t,l,h,c,f,o,u),l=u.x,h=u.y;if(_h.v(u),!(23<++t.Qm)){if(l=Math.atan2(h,l),l=o===yp?t.iv-l:l-t.iv,l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI,r=l*(r+a)/2,a=t.Fw,Math.abs(r)<Math.abs(a.Vp))for(a.Vp=r,a.fo=[],a.zq=[],l=0;l<c.length;l++)a.fo[l]=c[l].cb.x,a.zq[l]=c[l].cb.y;1<Math.abs(r)&&(t.Wd=8>t.Qm?t.Wd-r/(2*Math.PI):t.Wd-(0<r?1.7:-2.3),t.Gg=t.Wd*s,Qs(t,e,i,n,o))}}function Zs(t,e,i,n,o,r,a){var s=t.Wd,l=t.Gg,h=0,u=0;t=(n[o].width+n[o+1].width)/2+t.bl;var c=!1;if(0<=i!=(r===yp)){if((h=e+t)>s){if((h=e-t)<-s)return a.x=h,a.y=u,!1;c=!0}}else if((h=e-t)<-s){if((h=e+t)>s)return a.x=h,a.y=u,!1;c=!0}return u=Math.sqrt(1-Math.min(1,h*h/(s*s)))*l,0>i!==c&&(u=-u),Math.abs(i-u)>(n[o].height+n[o+1].height)/2?(a.x=h,a.y=u,!1):(a.x=h,a.y=u,!0)}function tl(t,e,i,n,o,r,a){var s=t.Wd,l=t.Gg,h=0,u=0;if(t=(n[o].height+n[o+1].height)/2+t.bl,n=!1,0<=e!=(r===yp)){if((u=i-t)<-l){if((u=i+t)>l)return a.x=h,void(a.y=u);n=!0}}else if((u=i+t)>l){if((u=i-t)<-l)return a.x=h,void(a.y=u);n=!0}h=Math.sqrt(1-Math.min(1,u*u/(l*l)))*s,0>e!==n&&(h=-h),a.x=h,a.y=u}function el(t,e,i,n,o){var r=t.PG;if(.001>Math.abs(t.Fo-1))return void 0!==n&&void 0!==o?o*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var a=0,s=0,s=void 0!==n&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),l=0,h=0;h<=r;h++)l=void 0!==n&&void 0!==o?n+h*o/r:h*Math.PI/(2*r),l=Math.sin(l),a+=Math.sqrt(1-t*t*l*l)*s;return void 0!==n&&void 0!==o?(e>i?e:i)*a:4*(e>i?e:i)*a}function il(t,e,i,n,o){return e/(void 0!==n&&void 0!==o?el(t,1,i,n,o):el(t,1,i))}function nl(t,e,i,n,o){if(.001>Math.abs(t.Fo-1))return o/e;var r=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,a=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var s=0;;s++){var l=Math.sin(n+s*t),a=a+(e>i?e:i)*Math.sqrt(1-r*r*l*l)*t;if(a>=o)return s*t}}function ol(){this.Vp=-Infinity,this.zq=this.fo=null}function rl(){zs.call(this)}function al(){Hs.call(this),this.actualAngle=this.diameter=NaN}function sl(t,e){var i=t.network;if(null===i)return NaN;if(null===(i=i.Sb))return NaN;if(i.Pf===gp)if(i.Hx===Tp)t.diameter=Math.max(t.width,t.height);else{var i=Math.abs(Math.sin(e)),n=Math.abs(Math.cos(e));if(0===i)return t.width;if(0===n)return t.height;t.diameter=Math.min(t.height/i,t.width/n)}else t.diameter=i.Hx===Tp?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function ll(){Vs.call(this)}function hl(){0<arguments.length&&_h.hd(hl),Es.call(this),this.Fg=null,this.Rr=0,this.jg=new k(100,100).freeze(),this.Kq=!1,this.Zh=!0,this.Ih=!1,this.cp=100,this.sr=1,this.Oh=1e3,this.Es=Math,this.Bo=.05,this.Ao=50,this.yo=150,this.zo=0,this.hr=10,this.gr=5}function ul(t,e,i){if(cl(t,e)){var n=t.Oh;t.Oh*=1+1/(e+1);var o=fl(t,e),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.IA+=r,ul(t,e+1,i),ml(t,r),dl(t,o),e=t.Fg,null===e?e=new u(wl):e.clear(),e.Hc(o.vertexes),e.sort(function(t,e){return null===t||null===e||t===e?0:e.fg-t.fg}),o=e.i;o.next();)pl(t,o.value);t.Oh=n}}function cl(t,e){if(10<e||3>t.network.vertexes.count)return!1;null===t.Fg?t.Fg=new u(wl):t.Fg.clear(),t.Fg.Hc(t.network.vertexes);var i=t.Fg;i.sort(function(t,e){return null===t||null===e||t===e?0:e.fg-t.fg});for(var n=i.count-1;0<=n&&1>=i.da(n).fg;)n--;return 1<i.count-n}function fl(t,e){for(var i=t.network,n=new xl,o=t.Fg.i;o.next();){var r=o.value;if(!(1<r.fg))break;n.Dl(r);var a=new bl;a.py=r.fg,a.qy=r.width,a.oy=r.height,a.FB=r.T.x,a.GB=r.T.y,null===r.Dh&&(r.Dh=new u(bl)),r.Dh.add(a),r.ZA=r.Dh.count-1}for(var s=i.edges.i;s.next();)if(a=s.value,o=a.fromVertex,r=a.toVertex,o.network===n&&r.network===n)n.Ep(a);else if(o.network===n){var l=o.pn;null===l&&(l=new u(wl),o.pn=l),l.add(r),o.fg--,o.Ik+=r.Ik}else r.network===n&&(l=r.pn,null===l&&(l=new u(wl),r.pn=l),l.add(o),r.fg--,r.Ik+=o.Ik);for(o=n.edges.i;o.next();)r=o.value,r.length*=Math.max(1,_((r.fromVertex.Ik+r.toVertex.Ik)/(4*e+1)));for(o=n.vertexes.i;o.next();)if(r=o.value,null!==(l=r.pn)&&0<l.count&&(a=r.Dh.da(r.Dh.count-1),!(0>=(a=a.py-r.fg)))){for(var h=0,c=0,f=l.count-a;f<l.count;f++){for(var d=l.da(f),p=null,s=d.edges.i;s.next();){var g=s.value;if(g.YH(d)===r){p=g;break}}null!==p&&(c+=p.length,h+=d.width*d.height)}s=r.ka,l=r.ra,f=r.width,d=r.height,p=r.T,g=f*d,1>g&&(g=1),h=_((h+g+c*c*4/(a*a))/g),a=(h-1)*f/2,h=(h-1)*d/2,r.cb=new S(s-p.x-a,l-p.y-h,f+2*a,d+2*h),r.focus=new b(p.x+a,p.y+h)}return t.network=n,i}function dl(t,e){for(var i=t.network.vertexes.i;i.next();){var n=i.value;if(n.network=e,null!==n.Dh){var o=n.Dh.da(n.ZA);n.fg=o.py;var r=o.FB,a=o.GB;n.cb=new S(n.ka-r,n.ra-a,o.qy,o.oy),n.focus=new b(r,a),n.ZA--}}for(i=t.network.edges.i;i.next();)i.value.network=e;t.network=e}function pl(t,e){var i=e.pn;if(null!==i&&0!==i.count){var n=e.ka,o=e.ra,r=e.width,a=e.height;null!==e.Dh&&0<e.Dh.count&&(a=e.Dh.da(0),r=a.qy,a=a.oy);for(var r=_(r*r+a*a)/2,s=!1,l=a=0,h=0,u=e.vertexes.i;u.next();){var c=u.value;1>=c.fg?l++:(s=!0,h++,a+=Math.atan2(e.ra-c.ra,e.ka-c.ka))}if(0!==l)for(0<h&&(a/=h),u=h=0,h=s?2*Math.PI/(l+1):2*Math.PI/l,0==l%2&&(u=h/2),1<i.count&&i.sort(function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height}),s=0==l%2?0:1,i=i.i;i.next();)if(l=i.value,!(1<l.fg||t.isFixed(l))){for(var c=null,f=l.edges.i;f.next();){c=f.value;break}var f=l.width,d=l.height,f=_(f*f+d*d)/2,c=r+c.length+f,f=a+(h*(s/2>>1)+u)*(0==s%2?1:-1);l.ka=n+c*Math.cos(f),l.ra=o+c*Math.sin(f),s++}}}function gl(t,e,i,n,o,r,a){var s=9e19,l=-1,h=0;t:for(;h<e;h++){var u=t[h],c=u.x-i,f=u.y-n,c=c*c+f*f;if(c<s){for(f=h-1;0<=f;f--)if(t[f].y>u.y&&t[f].x-u.x<o+a.width)continue t;for(f=h+1;f<e;f++)if(t[f].x>u.x&&t[f].y-u.y<r+a.height)continue t;l=h,s=c}}return l}function yl(t,e){var i=t.M,n=i.x,o=i.y,r=i.width,i=i.height,a=e.M,s=a.x,l=a.y,h=a.width,a=a.height;return n+r<s?o>l+a?(n=n+r-s,o=o-l-a,_(n*n+o*o)):o+i<l?(n=n+r-s,o=o+i-l,_(n*n+o*o)):s-(n+r):n>s+h?o>l+a?(n=n-s-h,o=o-l-a,_(n*n+o*o)):o+i<l?(n=n-s-h,o=o+i-l,_(n*n+o*o)):n-(s+h):o>l+a?o-(l+a):o+i<l?l-(o+i):.1}function ml(t,e){t.Fg=null;for(var i=t.Rr+e;t.Rr<i&&(t.Rr++,vl(t)););t.Fg=null}function vl(t){null===t.Fg&&(t.Fg=new u(wl),t.Fg.Hc(t.network.vertexes));var e=t.Fg.n;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.ka,r=n,a=i.ra,s=a,i=1;i<e.length;i++){var l=e[i];l.forceX=0,l.forceY=0;var h=l.ka,l=l.ra,n=Math.min(n,h),r=Math.max(r,h),a=Math.min(a,l),s=Math.max(s,l)}(a=r-n>s-a)?e.sort(function(t,e){return null===t||null===e||t===e?0:t.ka-e.ka}):e.sort(function(t,e){return null===t||null===e||t===e?0:t.ra-e.ra});for(var s=t.Oh,c=0,f=0,d=0,i=0;i<e.length;i++){var l=e[i],h=l.M,p=l.T,n=h.x+p.x,h=h.y+p.y,f=l.charge*t.electricalFieldX(n,h),d=l.charge*t.electricalFieldY(n,h),f=f+l.mass*t.gravitationalFieldX(n,h),d=d+l.mass*t.gravitationalFieldY(n,h);for(l.forceX+=f,l.forceY+=d,p=i+1;p<e.length;p++)if((r=e[p])!==l){var g=r.M,f=r.T,d=g.x+f.x,g=g.y+f.y;if(n-d>s||d-n>s){if(a)break}else if(h-g>s||g-h>s){if(!a)break}else{var y=yl(l,r);1>y?(f=t.Qx,null===f&&(t.Qx=f=new o(0)),c=f.random(),y=f.random(),n>d?(f=Math.abs(r.M.right-l.M.x),f=(1+f)*c):n<d?(f=Math.abs(r.M.x-l.M.right),f=-(1+f)*c):(f=Math.max(r.width,l.width),f=(1+f)*c-f/2),h>g?(d=Math.abs(r.M.bottom-l.M.y),d=(1+d)*y):n<d?(d=Math.abs(r.M.y-l.M.bottom),d=-(1+d)*y):(d=Math.max(r.height,l.height),d=(1+d)*y-d/2)):(c=-l.charge*r.charge/(y*y),f=(d-n)/y*c,d=(g-h)/y*c),l.forceX+=f,l.forceY+=d,r.forceX-=f,r.forceY-=d}}}for(i=t.network.edges.i;i.next();)a=i.value,l=a.fromVertex,r=a.toVertex,h=l.M,p=l.T,n=h.x+p.x,h=h.y+p.y,g=r.M,f=r.T,d=g.x+f.x,g=g.y+f.y,y=yl(l,r),1>y?(f=t.Qx,null===f&&(t.Qx=f=new o(0)),c=f.random(),y=f.random(),f=(n>d?1:-1)*(1+(r.width>l.width?r.width:l.width))*c,d=(h>g?1:-1)*(1+(r.height>l.height?r.height:l.height))*y):(c=a.stiffness*(y-a.length),f=(d-n)/y*c,d=(g-h)/y*c),l.forceX+=f,l.forceY+=d,r.forceX-=f,r.forceY-=d;for(i=0,n=Math.max(t.Oh/20,50),r=0;r<e.length;r++)l=e[r],t.isFixed(l)?t.moveFixedVertex(l):(a=l.forceX,s=l.forceY,a<-n?a=-n:a>n&&(a=n),s<-n?s=-n:s>n&&(s=n),l.ka+=a,l.ra+=s,i=Math.max(i,a*a+s*s));return i>t.GE*t.GE}function bl(){this.GB=this.FB=this.oy=this.qy=this.py=0}function xl(){zs.call(this)}function wl(){Hs.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.Ik=this.fg=this.forceY=this.forceX=0,this.Dh=this.pn=null,this.ZA=0}function kl(){Vs.call(this),this.length=this.stiffness=NaN}function Sl(){0<arguments.length&&_h.hd(Sl),Es.call(this),this.Ud=this.Hm=25,this.aa=0,this.xo=Lp,this.Zo=Cp,this.Oo=Dp,this.Fm=4,this.ko=Ip,this.Yi=qp,this.Zh=!0,this.Wr=4,this.Jb=this.Vv=this.qb=-1,this.Lf=this.es=0,this.Nb=this.Jf=this.Kf=this.vg=this.he=null,this.ns=0,this.ms=this.Mm=null,this.zg=0,this.os=null,this.SB=new b,this.hh=[],this.hh.length=100}function Ml(t){var e=t.fromVertex.rd;return t=t.toVertex.rd,null===e&&null===t?8:null===e||null===t?4:1}function Pl(t){null===t.Mm&&(t.Mm=[]);for(var e=0,i=t.network.vertexes.i;i.next();){var n=i.value;t.Mm[e]=n.layer,e++,t.Mm[e]=n.column,e++,t.Mm[e]=n.index,e++}return t.Mm}function Tl(t,e){for(var i=0,n=t.network.vertexes.i;n.next();){var o=n.value;o.layer=e[i],i++,o.column=e[i],i++,o.index=e[i],i++}}function Ll(t,e,i){var n=eh(t,e),o=t.he[e];(null===t.ms||t.ms.length<o*o)&&(t.ms=[]);for(var r=t.ms,a=0;a<o;a++){var s=0,l=n[a],h=l.near,u=0;if(null!==h&&h.layer===l.layer)if((u=h.index)>a)for(var c=a+1;c<u;c++)l=n[c],l.near===h&&l.kn===h.kn||s++;else for(c=a-1;c>u;c--)l=n[c],l.near===h&&l.kn===h.kn||s++;var f,d,h=0,p=f=c=l=0,g=0,y=0;d=0;var m;if(0<=i)for(u=n[a].Oe,h=0;h<u.count;h++)if(f=u.n[h],f.valid&&f.fromVertex.layer!==e)for(l=f.fromVertex.index,c=f.portToPos,f=f.portFromPos,p=h+1;p<u.count;p++)d=u.n[p],d.valid&&d.fromVertex.layer!==e&&(g=d.fromVertex.index,y=d.portToPos,d=d.portFromPos,c<y&&(l>g||l===g&&f>d)&&s++,y<c&&(g>l||g===l&&d>f)&&s++);if(0>=i)for(u=n[a].He,h=0;h<u.count;h++)if(f=u.n[h],f.valid&&f.toVertex.layer!==e)for(l=f.toVertex.index,c=f.portToPos,f=f.portFromPos,p=h+1;p<u.count;p++)d=u.n[p],d.valid&&d.toVertex.layer!==e&&(g=d.toVertex.index,y=d.portToPos,d=d.portFromPos,f<d&&(l>g||l===g&&c>y)&&s++,d<f&&(g>l||g===l&&y>c)&&s++);for(r[a*o+a]=s,u=a+1;u<o;u++){var v=0,b=0;if(0<=i)for(s=n[a].Oe,m=n[u].Oe,h=0;h<s.count;h++)if(f=s.n[h],f.valid&&f.fromVertex.layer!==e)for(l=f.fromVertex.index,f=f.portFromPos,p=0;p<m.count;p++)d=m.n[p],d.valid&&d.fromVertex.layer!==e&&(g=d.fromVertex.index,d=d.portFromPos,(l<g||l===g&&f<d)&&b++,(g<l||g===l&&d<f)&&v++);if(0>=i)for(s=n[a].He,m=n[u].He,h=0;h<s.count;h++)if(f=s.n[h],f.valid&&f.toVertex.layer!==e)for(l=f.toVertex.index,c=f.portToPos,p=0;p<m.count;p++)d=m.n[p],d.valid&&d.toVertex.layer!==e&&(g=d.toVertex.index,y=d.portToPos,(l<g||l===g&&c<y)&&b++,(g<l||g===l&&y<c)&&v++)
;r[a*o+u]=v,r[u*o+a]=b}}return ih(t,e,n),r}function Nl(t){for(var e=0,i=0;i<=t.qb;i++){for(var n=t,o=i,r=eh(n,o),a=n.he[o],s=0,l=0;l<a;l++){var h,u=null,u=r[l].He,c=0,f=0;if(null!==u)for(var d=0;d<u.count;d++)h=u.n[d],h.valid&&h.toVertex.layer!==o&&(c=h.fromVertex.column+h.portFromColOffset,f=h.toVertex.column+h.portToColOffset,s+=(Math.abs(c-f)+1)*Ml(h))}ih(n,o,r),e+=s}return e}function Cl(t,e,i){for(var n=eh(t,e),o=t.he[e],r=[],a=0;a<o;a++){var s=n[a],l=null;0>=i&&(l=s.Oe);var h=null;0<=i&&(h=s.He);var u=0,c=0,f=s.near;if(null!==f&&f.layer===s.layer&&(u+=f.column-1,c++),null!==l)for(f=0;f<l.count;f++){var s=l.n[f],d=s.fromVertex;s.valid&&!s.rev&&d.layer!==e&&(u+=d.column,c++)}if(null!==h)for(l=0;l<h.count;l++)s=h.n[l],f=s.toVertex,s.valid&&!s.rev&&f.layer!==e&&(u+=f.column,c++);r[a]=0===c?-1:u/c}return ih(t,e,n),r}function Al(t,e,i){for(var n=eh(t,e),o=t.he[e],r=[],a=0;a<o;a++){var s=n[a],l=null;0>=i&&(l=s.Oe);var h=null;0<=i&&(h=s.He);var u=0,c=[],f=s.near;if(null!==f&&f.layer===s.layer&&(c[u]=f.column-1,u++),null!==l)for(f=0;f<l.count;f++){var s=l.n[f],d=s.fromVertex;s.valid&&!s.rev&&d.layer!==e&&(c[u]=d.column+s.portFromColOffset,u++)}if(null!==h)for(l=0;l<h.count;l++)s=h.n[l],f=s.toVertex,s.valid&&!s.rev&&f.layer!==e&&(c[u]=f.column+s.portToColOffset,u++);0===u?r[a]=-1:(c.sort(function(t,e){return t-e}),h=u>>1,r[a]=0!=(1&u)?c[h]:c[h-1]+c[h]>>1)}return ih(t,e,n),r}function Bl(t,e,i,n,o,r){if(e.component===n){e.component=i;var a=0,s=0;if(o)for(var l=e.ic;l.next();){var s=l.value,h=s.toVertex,a=e.layer-h.layer,s=t.linkMinLength(s);a===s&&Bl(t,h,i,n,o,r)}if(r)for(l=e.lc;l.next();)s=l.value,h=s.fromVertex,a=h.layer-e.layer,s=t.linkMinLength(s),a===s&&Bl(t,h,i,n,o,r)}}function Dl(t,e,i,n,o,r){if(e.component===n){if(e.component=i,o)for(var a=e.ic;a.next();)Dl(t,a.value.toVertex,i,n,o,r);if(r)for(e=e.lc;e.next();)Dl(t,e.value.fromVertex,i,n,o,r)}}function Fl(t){for(t=t.vertexes.i;t.next();){var e=t.value;if(e.valid)return e}return null}function jl(t){for(t=t.vertexes.i;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.ic;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function El(t){for(t=t.vertexes.i;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.lc;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Il(t,e){e.Qp=t.ns,t.ns++;for(var i=e.ic;i.next();){var n=i.value,o=n.toVertex;-1===o.Qp&&(n.forest=!0,Il(t,o))}e.finish=t.ns,t.ns++}function Ol(t){for(var e=t.network.vertexes.i;e.next();){var i=zl(t,e.value);t.qb=Math.max(i,t.qb)}}function zl(t,e){var i=0;if(-1===e.layer){for(var n=e.ic;n.next();)var o=n.value,r=o.toVertex,o=t.linkMinLength(o),i=Math.max(i,zl(t,r)+o);e.layer=i}else i=e.layer;return i}function Gl(t,e){var i=0;if(-1===e.layer){for(var n=e.lc;n.next();)var o=n.value,r=o.fromVertex,o=t.linkMinLength(o),i=Math.max(i,Gl(t,r)+o);e.layer=i}else i=e.layer;return i}function Rl(t,e){if(!e.valid){e.valid=!0;for(var i=e.ic;i.next();)Rl(t,i.value.toVertex);for(i=t.network.vertexes.i;i.next();)i.value.component=-1;for(var n=e.Oe.n,o=n.length,r=0;r<o;r++){var a=n[r],s=a.fromVertex,l=a.toVertex,a=t.linkMinLength(a);s.layer-l.layer>a&&Bl(t,s,0,-1,!0,!1)}for(Bl(t,e,1,-1,!0,!0);0!==e.component;){for(var s=0,n=Infinity,l=0,h=null,u=t.network.vertexes.i;u.next();){var c=u.value;if(1===c.component){for(var f=0,d=!1,p=c.Oe.n,o=p.length,r=0;r<o;r++){var a=p[r],g=a.fromVertex,f=f+1;1!==g.component&&(s+=1,g=g.layer-c.layer,a=t.linkMinLength(a),n=Math.min(n,g-a))}for(a=c.He.n,o=a.length,r=0;r<o;r++)p=a[r].toVertex,f-=1,1!==p.component?s-=1:d=!0;(null===h||f<l)&&!d&&(h=c,l=f)}}if(0<s){for(i.reset();i.next();)o=i.value,1===o.component&&(o.layer+=n);e.component=0}else h.component=0}for(i=t.network.vertexes.i;i.next();)i.value.component=-1;for(Bl(t,e,1,-1,!0,!1);0!==e.component;){for(r=0,o=Infinity,n=0,a=null,s=t.network.vertexes.i;s.next();)if(l=s.value,1===l.component){for(h=0,u=!1,d=l.Oe.n,c=d.length,f=0;f<c;f++)p=d[f].fromVertex,h+=1,1!==p.component?r+=1:u=!0;for(d=l.He.n,c=d.length,f=0;f<c;f++)p=d[f],g=p.toVertex,h-=1,1!==g.component&&(r-=1,g=l.layer-g.layer,p=t.linkMinLength(p),o=Math.min(o,g-p));(null===a||h>n)&&!u&&(a=l,n=h)}if(0>r){for(i.reset();i.next();)r=i.value,1===r.component&&(r.layer-=o);e.component=0}else a.component=0}}}function ql(t,e,i){return 90===t.aa?i&&!e.rev||!i&&e.rev?270:90:180===t.aa?i&&!e.rev||!i&&e.rev?0:180:270===t.aa?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function Wl(t,e){var i=e.layer;e.index=t.he[i],t.he[i]++;for(var i=e.He.ec(),n=!0;n;)for(var n=!1,o=0;o<i.length-1;o++){var r=i[o],a=i[o+1];r.portFromColOffset>a.portFromColOffset&&(n=!0,i[o]=a,i[o+1]=r)}for(o=0;o<i.length;o++)n=i[o],n.valid&&(n=n.toVertex,-1===n.index&&Wl(t,n))}function Hl(t,e){var i=e.layer;e.index=t.he[i],t.he[i]++;for(var i=e.Oe.ec(),n=!0,o=0;n;)for(n=!1,o=0;o<i.length-1;o++){var r=i[o],a=i[o+1];r.portToColOffset>a.portToColOffset&&(n=!0,i[o]=a,i[o+1]=r)}for(o=0;o<i.length;o++)n=i[o],n.valid&&(n=n.fromVertex,-1===n.index&&Hl(t,n))}function Vl(t,e,i){var n=0,o=eh(t,e),r=t.he[e],a=Al(t,e,i);for(i=Cl(t,e,i),n=0;n<r;n++)-1===i[n]&&(i[n]=o[n].column),-1===a[n]&&(a[n]=o[n].column);for(var s,l=!0;l;)for(l=!1,n=0;n<r-1;n++)(a[n+1]<a[n]||a[n+1]===a[n]&&i[n+1]<i[n])&&(l=!0,s=a[n],a[n]=a[n+1],a[n+1]=s,s=i[n],i[n]=i[n+1],i[n+1]=s,s=o[n],o[n]=o[n+1],o[n+1]=s);for(n=a=0;n<r;n++)s=o[n],s.index=n,a+=t.nodeMinColumnSpace(s,!0),s.column=a,a+=1,a+=t.nodeMinColumnSpace(s,!1);ih(t,e,o)}function Ul(t,e,i){var n=eh(t,e),o=t.he[e];i=Ll(t,e,i);var r,a=0;for(r=[],a=0;a<o;a++)r[a]=-1;var s;for(s=[],a=0;a<o;a++)s[a]=-1;for(var l=!1,h=!0;h;)for(h=!1,a=0;a<o-1;a++){var u=i[n[a].index*o+n[a+1].index],c=i[n[a+1].index*o+n[a].index],f=0,d=0,p=n[a].column,g=n[a+1].column,y=t.nodeMinColumnSpace(n[a],!0),m=t.nodeMinColumnSpace(n[a],!1),v=t.nodeMinColumnSpace(n[a+1],!0),b=t.nodeMinColumnSpace(n[a+1],!1),y=p-y+v,m=g-m+b,v=v=0,x=n[a].lc.i;for(x.reset();x.next();)if(v=x.value,b=v.fromVertex,v.valid&&b.layer===e){for(v=0;n[v]!==b;)v++;v<a&&(f+=2*(a-v),d+=2*(a+1-v)),v===a+1&&(f+=1),v>a+1&&(f+=4*(v-a),d+=4*(v-(a+1)))}for(x=n[a].ic.i,x.reset();x.next();)if(v=x.value,b=v.toVertex,v.valid&&b.layer===e){for(v=0;n[v]!==b;)v++;v===a+1&&(d+=1)}for(x=n[a+1].lc.i,x.reset();x.next();)if(v=x.value,b=v.fromVertex,v.valid&&b.layer===e){for(v=0;n[v]!==b;)v++;v<a&&(f+=2*(a+1-v),d+=2*(a-v)),v===a&&(d+=1),v>a+1&&(f+=4*(v-(a+1)),d+=4*(v-a))}for(x=n[a+1].ic.i,x.reset();x.next();)if(v=x.value,b=v.toVertex,v.valid&&b.layer===e){for(v=0;n[v]!==b;)v++;v===a&&(f+=1)}var v=b=0,x=r[n[a].index],w=s[n[a].index],k=r[n[a+1].index],S=s[n[a+1].index];-1!==x&&(b+=Math.abs(x-p),v+=Math.abs(x-m)),-1!==w&&(b+=Math.abs(w-p),v+=Math.abs(w-m)),-1!==k&&(b+=Math.abs(k-g),v+=Math.abs(k-y)),-1!==S&&(b+=Math.abs(S-g),v+=Math.abs(S-y)),(d<f-.5||d===f&&c<u-.5||d===f&&c===u&&v<b-.5)&&(h=l=!0,n[a].column=m,n[a+1].column=y,u=n[a],n[a]=n[a+1],n[a+1]=u)}for(a=0;a<o;a++)n[a].index=a;return ih(t,e,n),l}function _l(t,e,i){for(var n=!1;Kl(t,e,i);)n=!0;return n}function Kl(t,e,i){var n=0,o=eh(t,e),r=t.he[e],a=Cl(t,e,-1);if(0<i)for(n=0;n<r;n++)a[n]=-1;var s=Cl(t,e,1);if(0>i)for(n=0;n<r;n++)s[n]=-1;for(var l=!1,h=!0;h;)for(h=!1,n=0;n<r;n++){var u=o[n].column,c=t.nodeMinColumnSpace(o[n],!0),f=t.nodeMinColumnSpace(o[n],!1),d=0,d=0>n-1||u-o[n-1].column-1>c+t.nodeMinColumnSpace(o[n-1],!1)?u-1:u,c=0,c=n+1>=r||o[n+1].column-u-1>f+t.nodeMinColumnSpace(o[n+1],!0)?u+1:u,p=f=0,g=0,y=0,m=0,v=0;if(0>=i)for(var b=o[n].lc.i;b.next();){var v=b.value,x=v.fromVertex;v.valid&&x.layer!==e&&(y=Ml(v),m=v.portFromColOffset,v=v.portToColOffset,x=x.column,f+=(Math.abs(u+v-(x+m))+1)*y,p+=(Math.abs(d+v-(x+m))+1)*y,g+=(Math.abs(c+v-(x+m))+1)*y)}if(0<=i)for(b=o[n].ic.i;b.next();)v=b.value,x=v.toVertex,v.valid&&x.layer!==e&&(y=Ml(v),m=v.portFromColOffset,v=v.portToColOffset,x=x.column,f+=(Math.abs(u+m-(x+v))+1)*y,p+=(Math.abs(d+m-(x+v))+1)*y,g+=(Math.abs(c+m-(x+v))+1)*y);v=m=y=0,b=a[o[n].index],x=s[o[n].index],-1!==b&&(y+=Math.abs(b-u),m+=Math.abs(b-d),v+=Math.abs(b-c)),-1!==x&&(y+=Math.abs(x-u),m+=Math.abs(x-d),v+=Math.abs(x-c)),p<f||p===f&&m<y?(h=l=!0,o[n].column=d):(g<f||g===f&&v<y)&&(h=l=!0,o[n].column=c)}return ih(t,e,o),t.normalize(),l}function Jl(t,e,i){var n=0,o=eh(t,e),r=t.he[e],a=Al(t,e,i);for(i=[],n=0;n<r;n++)i[n]=a[n];for(a=!0;a;)for(a=!1,n=0;n<r;n++){var s=o[n].column,l=t.nodeMinColumnSpace(o[n],!0),h=t.nodeMinColumnSpace(o[n],!1),u=0,c=0,f=0,f=c=0;-1===i[n]?0===n&&n===r-1?u=s:0===n?(c=o[n+1].column,u=c-s===h+t.nodeMinColumnSpace(o[n+1],!0)?s-1:s):n===r-1?(f=o[n-1].column,u=s-f===l+t.nodeMinColumnSpace(o[n-1],!1)?s+1:s):(f=o[n-1].column,f=f+t.nodeMinColumnSpace(o[n-1],!1)+l+1,c=o[n+1].column,c=c-t.nodeMinColumnSpace(o[n+1],!0)-h-1,u=(f+c)/2|0):0===n&&n===r-1?u=i[n]:0===n?(c=o[n+1].column,c=c-t.nodeMinColumnSpace(o[n+1],!0)-h-1,u=Math.min(i[n],c)):n===r-1?(f=o[n-1].column,f=f+t.nodeMinColumnSpace(o[n-1],!1)+l+1,u=Math.max(i[n],f)):(f=o[n-1].column,f=f+t.nodeMinColumnSpace(o[n-1],!1)+l+1,c=o[n+1].column,c=c-t.nodeMinColumnSpace(o[n+1],!0)-h-1,f<i[n]&&i[n]<c?u=i[n]:f>=i[n]?u=f:c<=i[n]&&(u=c)),u!==s&&(a=!0,o[n].column=u)}ih(t,e,o),t.normalize()}function Yl(t,e){for(var i=!0,n=t.network.vertexes.i;n.next();){var o=n.value,r=t.nodeMinColumnSpace(o,!0),a=t.nodeMinColumnSpace(o,!1);if(o.column-r<=e&&o.column+a>=e){i=!1;break}}if(o=!1,i)for(n.reset();n.next();)i=n.value,i.column>e&&(i.column-=1,o=!0);return o}function $l(t,e){for(var i=e,i=e+1,n=0,o=[],r=[],n=0;n<=t.qb;n++)o[n]=!1,r[n]=!1;for(var a=t.network.vertexes.i;a.next();){var n=a.value,s=n.column-t.nodeMinColumnSpace(n,!0),l=n.column+t.nodeMinColumnSpace(n,!1);s<=e&&l>=e&&(o[n.layer]=!0),s<=i&&l>=i&&(r[n.layer]=!0)}for(s=!0,i=!1,n=0;n<=t.qb;n++)s=s&&!(o[n]&&r[n]);if(s)for(a.reset();a.next();)o=a.value,o.column>e&&(o.column-=1,i=!0);return i}function Xl(t,e){for(var i=0;i<=t.Jb;i++)for(;Yl(t,i););for(t.normalize(),i=0;i<t.Jb;i++)for(;$l(t,i););t.normalize();var n,i=0,o=0,r=0,a=0;if(0<e)for(i=0;i<=t.Jb;i++)for(n=Pl(t),o=Nl(t),r=o+1;o<r;)r=o,Ql(t,i,1),a=Nl(t),a>o?Tl(t,n):a<o&&(o=a,n=Pl(t));if(0>e)for(i=t.Jb;0<=i;i--)for(n=Pl(t),o=Nl(t),r=o+1;o<r;)r=o,Ql(t,i,-1),a=Nl(t),a>o?Tl(t,n):a<o&&(o=a,n=Pl(t));t.normalize()}function Ql(t,e,i){t.zg=0;for(var n=t.network.vertexes.i;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var o=n.value;o.column-t.nodeMinColumnSpace(o,!0)<=e&&(o.component=t.zg)}if(0>i)for(n.reset();n.next();)o=n.value,o.column+t.nodeMinColumnSpace(o,!1)>=e&&(o.component=t.zg);for(t.zg++,n.reset();n.next();)e=n.value,-1===e.component&&(Dl(t,e,t.zg,-1,!0,!0),t.zg++);var r=0;for(e=[],r=0;r<t.zg*t.zg;r++)e[r]=!1;for(o=[],r=0;r<(t.qb+1)*(t.Jb+1);r++)o[r]=-1;for(n.reset();n.next();)for(var r=n.value,a=r.layer,s=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),l=Math.min(t.Jb,r.column+t.nodeMinColumnSpace(r,!1));s<=l;s++)o[a*(t.Jb+1)+s]=r.component;for(r=0;r<=t.qb;r++){if(0<i)for(s=0;s<t.Jb;s++)-1!==o[r*(t.Jb+1)+s]&&-1!==o[r*(t.Jb+1)+s+1]&&o[r*(t.Jb+1)+s]!==o[r*(t.Jb+1)+s+1]&&(e[o[r*(t.Jb+1)+s]*t.zg+o[r*(t.Jb+1)+s+1]]=!0);if(0>i)for(s=t.Jb;0<s;s--)-1!==o[r*(t.Jb+1)+s]&&-1!==o[r*(t.Jb+1)+s-1]&&o[r*(t.Jb+1)+s]!==o[r*(t.Jb+1)+s-1]&&(e[o[r*(t.Jb+1)+s]*t.zg+o[r*(t.Jb+1)+s-1]]=!0)}for(o=[],r=0;r<t.zg;r++)o[r]=!0;for(a=new u("number"),a.add(0),l=0;0!==a.count;)if(l=a.n[a.count-1],a.Yc(a.count-1),o[l])for(o[l]=!1,r=0;r<t.zg;r++)e[l*t.zg+r]&&a.Md(0,r);if(0<i)for(n.reset();n.next();)t=n.value,o[t.component]&&(t.column-=1);if(0>i)for(n.reset();n.next();)i=n.value,o[i.component]&&(i.column+=1)}function Zl(t,e){return 270===t.aa?e?cu:pu:90===t.aa?e?pu:cu:180===t.aa?e?fu:du:e?du:fu}function th(t,e){var i=t-e;return-1<i&&1>i}function eh(t,e){var i,n=t.he[e];if(n>=t.hh.length){i=[];for(var o=0;o<t.hh.length;o++)i[o]=t.hh[o];t.hh=i}for(void 0===t.hh[n]||null===t.hh[n]?i=[]:(i=t.hh[n],t.hh[n]=null),n=t.os[e],o=0;o<n.length;o++){var r=n[o];i[r.index]=r}return i}function ih(t,e,i){t.hh[t.he[e]]=i}function nh(){this.index=this.pe=this.We=this.ee=this.first=this.layer=0,this.link=null,this.qi=0}function oh(){zs.call(this)}function rh(){Hs.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.Qp=NaN,this.kn=0,this.OA=this.PA=null}function ah(){Vs.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}function sh(){0<arguments.length&&_h.hd(sh),Es.call(this),this.sd=new f(Object),this.ys=Wp,this.If=Hp,this.ot=rg,this.Sv=fg,this.NB=null,this.Ih=!0,this.ld=hg,this.jg=new k(10,10).freeze(),this.ua=new qh,this.va=new qh,this.Cz=[]}function lh(t){var e=new f(qh);for(t=t.i;t.next();){var i=t.value;i.initialized||e.add(i)}return e}function hh(t,e){for(var i=999999,n=null,o=e.i;o.next();){var r=o.value;switch(t.If){case Hp:r.lc.count<i&&(i=r.lc.count,n=r);break;case Vp:r.ic.count<i&&(i=r.ic.count,n=r);break;default:_h.k("Unhandled path value "+t.If.toString())}}return n}function uh(t,e){if(null!==e){switch(t.If){case Hp:if(0<e.ic.count){for(var i=new u(qh),n=e.JH;n.next();){var o=n.value;ch(t,e,o)&&i.add(o)}0<i.count&&(e.children=i.ec())}break;case Vp:if(0<e.lc.count){for(i=new u(qh),n=e.EJ;n.next();)o=n.value,ch(t,e,o)&&i.add(o);0<i.count&&(e.children=i.ec())}break;default:_h.k("Unhandled path value"+t.If.toString())}for(i=e.children,n=i.length,o=0;o<n;o++){var r=i[o];r.initialized=!0,r.level=e.level+1,r.parent=e,t.sd.remove(r)}for(o=0;o<n;o++)r=i[o],uh(t,r)}}function ch(t,e,i){if(i.initialized){var n;if(null===e)n=!1;else{for(n=e.parent;null!==n&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}function fh(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===tg&&t.sortTreeVertexChildren(e);for(var i=0,n=e.on,o=0,r=e.children,a=r.length,s=0;s<a;s++){var l=r[s];fh(t,l),i+=l.descendantCount+1,n=Math.max(n,l.maxChildrenCount),o=Math.max(o,l.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?o+1:0}}function dh(t,e){switch(t.ot){default:case rg:return null!==e.parent?e.parent:t.ua;case lg:return null===e.parent?t.ua:null===e.parent.parent?t.va:e.parent;case sg:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.va:t.ua;case ag:var i=!0;if(0===e.on)i=!1;else for(var n=e.children,o=n.length,r=0;r<o;r++)if(0<n[r].on){i=!1;break}return i&&null!==e.parent?t.va:null!==e.parent?e.parent:t.ua}}function ph(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var i=e.children,n=i.length,o=0;o<n;o++)ph(t,i[o])}}function gh(t,e){if(null!==e){e.alignment!==tg&&t.sortTreeVertexChildren(e);for(var i=e.children,n=i.length,o=0;o<n;o++)gh(t,i[o])}}function yh(t){return t===Zp||t===tg||t===eg||t===ig}function mh(t){return t===Zp||t===tg}function vh(t){var e=t.parent;if(null!==e){var i=e.alignment;if(yh(i)){if(mh(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return 0==i%2}if(i===eg)return!0}}return!1}function bh(t,e){if(0===e.on){var i=!1,n=0,o=$p;null!==e.parent&&(n=e.parent.angle,o=e.parent.alignment,i=yh(o)),o=vh(e),e.pa.m(0,0),e.jb.m(e.width,e.height),null===e.parent||null===e.comments||(180!==n&&270!==n||i)&&!o?e.Oa.m(0,0):180===n&&!i||(90===n||270===n)&&o?e.Oa.m(e.width-2*e.T.x,0):e.Oa.m(0,e.height-2*e.T.y)}else{for(var i=Oh(e),n=90===i||270===i,r=0,o=e.children,a=o.length,s=0;s<a;s++)var l=o[s],r=Math.max(r,n?l.jb.width:l.jb.height);var h=e.alignment,u=h===Xp,c=h===Qp,f=yh(h),d=Math.max(0,e.breadthLimit),p=zh(e),g=e.nodeSpacing,y=Gh(e),m=u||c?0:y/2,v=e.rowSpacing,b=0;(u||c||e.nq||e.oq&&1===e.maxGenerationCount)&&(b=Math.max(0,e.rowIndent));var u=e.width,x=e.height,w=0,k=0,S=0,M=0,P=0,T=0,L=0,N=0,C=0,A=0;if(f&&!mh(h)&&135<i&&o.reverse(),mh(h))if(1<a)for(s=0;s<a;s++){var l=o[s],B=l.jb;0==s%2&&s!==a-1?C=Math.max(C,(n?B.width:B.height)+kh(l)-g):0!=s%2&&(A=Math.max(A,(n?B.width:B.height)+kh(l)-g))}else 1===a&&(C=n?o[0].jb.width:o[0].jb.height);if(f)switch(h){case Zp:case tg:k=135>i?xh(e,o,C,w,k):wh(e,o,C,w,k),C=k.x,w=k.width,k=k.height;break;case eg:for(s=0;s<a;s++)l=o[s],B=l.jb,d=0===L?0:v,n?(l.pa.m(r-B.width,P+d),w=Math.max(w,B.width),k=Math.max(k,P+d+B.height),P+=d+B.height):(l.pa.m(M+d,r-B.height),w=Math.max(w,M+d+B.width),k=Math.max(k,B.height),M+=d+B.width),L++;break;case ig:for(r=0;r<a;r++)l=o[r],B=l.jb,d=0===L?0:v,n?(l.pa.m(g/2+e.T.x,P+d),w=Math.max(w,B.width),k=Math.max(k,P+d+B.height),P+=d+B.height):(l.pa.m(M+d,g/2+e.T.y),w=Math.max(w,M+d+B.width),k=Math.max(k,B.height),M+=d+B.width),L++}else for(s=0;s<a;s++)l=o[s],B=l.jb,n?(0<d&&0<L&&M+g+B.width>d&&(M<r&&Nh(e,h,r-M,0,N,s-1),T++,L=0,N=s,S=k,M=0,P=135<i?-k-v:k+v),A=0===L?m:g,Ah(t,l,0,P),l.pa.m(M+A,P),w=Math.max(w,M+A+B.width),k=Math.max(k,S+(0===T?0:v)+B.height),M+=A+B.width):(0<d&&0<L&&P+g+B.height>d&&(P<r&&Nh(e,h,0,r-P,N,s-1),T++,L=0,N=s,S=w,P=0,M=135<i?-w-v:w+v),A=0===L?m:g,Ah(t,l,M,0),l.pa.m(M,P+A),k=Math.max(k,P+A+B.height),w=Math.max(w,S+(0===T?0:v)+B.width),P+=A+B.height),L++;switch(0<T&&(n?(k+=Math.max(0,p),M<w&&Nh(e,h,w-M,0,N,a-1),0<b&&(c||Ch(e,b,0,0,a-1),w+=b)):(w+=Math.max(0,p),P<k&&Nh(e,h,0,k-P,N,a-1),0<b&&(c||Ch(e,0,b,0,a-1),k+=b))),b=c=0,h){case Yp:n?c+=w/2-e.T.x-y/2:b+=k/2-e.T.y-y/2;break;case $p:0<T?n?c+=w/2-e.T.x-y/2:b+=k/2-e.T.y-y/2:n?(h=o[0].pa.x+o[0].Oa.x,g=o[a-1].pa.x+o[a-1].Oa.x+2*o[a-1].T.x,c+=h+(g-h)/2-e.T.x-y/2):(h=o[0].pa.y+o[0].Oa.y,g=o[a-1].pa.y+o[a-1].Oa.y+2*o[a-1].T.y,b+=h+(g-h)/2-e.T.y-y/2);break;case Xp:n?(c-=y,w+=y):(b-=y,k+=y);break;case Qp:n?(c+=w-e.width+y,w+=y):(b+=k-e.height+y,k+=y);break;case Zp:case tg:n?c=1<a?c+(C+g/2-e.T.x):c+(o[0].T.x-e.T.x+o[0].Oa.x):b=1<a?b+(C+g/2-e.T.y):b+(o[0].T.y-e.T.y+o[0].Oa.y);break;case eg:n?c+=w+g/2-e.T.x:b+=k+g/2-e.T.y;break;case ig:break;default:_h.k("Unhandled alignment value "+h.toString())}for(s=0;s<a;s++)l=o[s],n?l.pa.m(l.pa.x+l.Oa.x-c,l.pa.y+(135<i?(f?-k:-l.jb.height)+l.Oa.y-p:x+p+l.Oa.y)):l.pa.m(l.pa.x+(135<i?(f?-w:-l.jb.width)+l.Oa.x-p:u+p+l.Oa.x),l.pa.y+l.Oa.y-b);n?(w=Ph(e,w,c),0>c&&(c=0),135<i&&(b+=k+p),k+=x+p):(135<i&&(c+=w+p),w+=u+p,k=Th(e,k,b),0>b&&(b=0)),e.Oa.m(c,b),e.jb.m(w,k)}}function xh(t,e,i,n,o){var r=e.length;if(0===r)return new S(i,0,n,o);if(1===r){var a=e[0];return n=a.jb.width,o=a.jb.height,new S(i,0,n,o)}for(var s=t.nodeSpacing,l=t.rowSpacing,h=90===Oh(t),u=0,c=0,f=0,d=0;d<r;d++)if(!(0!=d%2||1<r&&d===r-1)){var a=e[d],p=a.jb,g=0===u?0:l;if(h){var y=kh(a)-s;a.pa.m(i-(p.width+y),f+g),n=Math.max(n,p.width+y),o=Math.max(o,f+g+p.height),f+=g+p.height}else y=kh(a)-s,a.pa.m(c+g,i-(p.height+y)),o=Math.max(o,p.height+y),n=Math.max(n,c+g+p.width),c+=g+p.width;u++}var u=0,m=c,v=f;for(h?(c=i+s,f=0):(c=0,f=i+s),d=0;d<r;d++)0!=d%2&&(a=e[d],p=a.jb,g=0===u?0:l,h?(y=kh(a)-s,a.pa.m(c+y,f+g),n=Math.max(n,c+p.width+y),o=Math.max(o,f+g+p.height),f+=g+p.height):(y=kh(a)-s,a.pa.m(c+g,f+y),n=Math.max(n,c+g+p.width),o=Math.max(o,f+p.height+y),c+=g+p.width),u++);return 1<r&&1==r%2&&(a=e[r-1],p=a.jb,e=Sh(a,h?Math.max(Math.abs(v),Math.abs(f)):Math.max(Math.abs(m),Math.abs(c))),h?(a.pa.m(i+s/2-a.T.x-a.Oa.x,o+e),h=i+s/2-a.T.x-a.Oa.x,n=Math.max(n,h+p.width),0>h&&(n-=h),o=Math.max(o,Math.max(v,f)+e+p.height),0>a.pa.x&&(i=Mh(t,a.pa.x,!1,i,s))):(a.pa.m(n+e,i+s/2-a.T.y-a.Oa.y),n=Math.max(n,Math.max(m,c)+e+p.width),h=i+s/2-a.T.y-a.Oa.y,o=Math.max(o,h+p.height),0>h&&(o-=h),0>a.pa.y&&(i=Mh(t,a.pa.y,!0,i,s)))),new S(i,0,n,o)}function wh(t,e,i,n,o){var r=e.length;if(0===r)return new S(i,0,n,o);if(1===r){var a=e[0];return n=a.jb.width,o=a.jb.height,new S(i,0,n,o)}for(var s=t.nodeSpacing,l=t.rowSpacing,h=270===Oh(t),u=0,c=0,f=0,d=0;d<r;d++)if(!(0!=d%2||1<r&&d===r-1)){var a=e[d],p=a.jb,g=0===u?0:l;if(h){var y=kh(a)-s,f=f-(g+p.height);a.pa.m(i-(p.width+y),f),n=Math.max(n,p.width+y),o=Math.max(o,Math.abs(f))}else y=kh(a)-s,c-=g+p.width,a.pa.m(c,i-(p.height+y)),o=Math.max(o,p.height+y),n=Math.max(n,Math.abs(c));u++}var u=0,m=c,v=f;for(h?(c=i+s,f=0):(c=0,f=i+s),d=0;d<r;d++)0!=d%2&&(a=e[d],p=a.jb,g=0===u?0:l,h?(y=kh(a)-s,f-=g+p.height,a.pa.m(c+y,f),n=Math.max(n,c+p.width+y),o=Math.max(o,Math.abs(f))):(y=kh(a)-s,c-=g+p.width,a.pa.m(c,f+y),o=Math.max(o,f+p.height+y),n=Math.max(n,Math.abs(c))),u++);for(1<r&&1==r%2&&(a=e[r-1],p=a.jb,l=Sh(a,h?Math.max(Math.abs(v),Math.abs(f)):Math.max(Math.abs(m),Math.abs(c))),h?(a.pa.m(i+s/2-a.T.x-a.Oa.x,-o-p.height-l),c=i+s/2-a.T.x-a.Oa.x,n=Math.max(n,c+p.width),0>c&&(n-=c),o=Math.max(o,Math.abs(Math.min(v,f))+l+p.height),0>a.pa.x&&(i=Mh(t,a.pa.x,!1,i,s))):(a.pa.m(-n-p.width-l,i+s/2-a.T.y-a.Oa.y),n=Math.max(n,Math.abs(Math.min(m,c))+l+p.width),c=i+s/2-a.T.y-a.Oa.y,o=Math.max(o,c+p.height),0>c&&(o-=c),0>a.pa.y&&(i=Mh(t,a.pa.y,!0,i,s)))),d=0;d<r;d++)a=e[d],h?a.pa.m(a.pa.x,a.pa.y+o):a.pa.m(a.pa.x+n,a.pa.y);return new S(i,0,n,o)}function kh(t){return null===t.parent?0:t.parent.nodeSpacing}function Sh(t){return null===t.parent?0:t.parent.rowSpacing}function Mh(t,e,i,n,o){t=t.children;for(var r=t.length,a=0;a<r;a++)i?t[a].pa.m(t[a].pa.x,t[a].pa.y-e):t[a].pa.m(t[a].pa.x-e,t[a].pa.y);return e=t[r-1],Math.max(n,i?e.Oa.y+e.T.y-o/2:e.Oa.x+e.T.x-o/2)}function Ph(t,e,i){switch(t.alignment){case $p:case Yp:var n=e;return i+t.width>n&&(n=i+t.width),0>i&&(n-=i),n;case Xp:return t.width>e?t.width:e;case Qp:return 2*t.T.x>e?t.width:e+t.width-2*t.T.x;case Zp:case tg:return n=Math.min(0,i),i=Math.max(e,i+t.width),Math.max(t.width,i-n);case eg:return t.width-t.T.x+t.nodeSpacing/2+e;case ig:return Math.max(t.width,t.T.x+t.nodeSpacing/2+e);default:return e}}function Th(t,e,i){switch(t.alignment){case $p:case Yp:var n=e;return i+t.height>n&&(n=i+t.height),0>i&&(n-=i),n;case Xp:return t.height>e?t.height:e;case Qp:return 2*t.T.y>e?t.height:e+t.height-2*t.T.y;case Zp:case tg:return n=Math.min(0,i),i=Math.max(e,i+t.height),Math.max(t.height,i-n);case eg:return t.height-t.T.y+t.nodeSpacing/2+e;case ig:return Math.max(t.height,t.T.y+t.nodeSpacing/2+e);default:return e}}function Lh(t,e,i){switch(t){case Yp:case $p:e/=2,i/=2;break;case Xp:i=e=0;break;case Qp:break;default:_h.k("Unhandled alignment value "+t.toString())}return new b(e,i)}function Nh(t,e,i,n,o,r){e=Lh(e,i,n),Ch(t,e.x,e.y,o,r)}function Ch(t,e,i,n,o){if(0!==e||0!==i)for(t=t.children;n<=o;n++){var r=t[n].pa;r.x+=e,r.y+=i}}function Ah(t,e,i,n){var o=e.parent;switch(t.If){case Hp:for(t=e.lc;t.next();)e=t.value,e.fromVertex===o&&e.Fs.m(i,n);break;case Vp:for(t=e.ic;t.next();)e=t.value,e.toVertex===o&&e.Fs.m(i,n);break;default:_h.k("Unhandled path value "+t.If.toString())}}function Bh(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];o.x+=e,o.y+=i}}function Dh(t,e,i,n,o,r,a,s){var l=Oh(e),h=90===l||270===l,u=e.nodeSpacing;e=n;var c=o;n=r,o=a;var f=i.fu,d=i.Au;a=i.jb;var p=h?Math.max(o,a.height):Math.max(n,a.width);if(null!==f&&l===Oh(i)||(f=Fh(t,2),d=Fh(t,2),h?(f[0].m(0,0),f[1].m(0,a.height),d[0].m(a.width,0),d[1].m(d[0].x,f[1].y)):(f[0].m(0,0),f[1].m(a.width,0),d[0].m(0,a.height),d[1].m(f[1].x,d[0].y))),h){if(i=n,n=9999999,!(null===c||2>c.length||null===f||2>f.length))for(h=l=0;l<c.length&&h<f.length;){o=c[l];var g=f[h];r=g.x;var y=g.y;r+=i;var m=o;l+1<c.length&&(m=c[l+1]);var v=g,g=v.x,v=v.y;h+1<f.length&&(v=f[h+1],g=v.x,v=v.y,g+=i);var b=n;o.y===y?b=r-o.x:o.y>y&&o.y<v?b=r+(o.y-y)/(v-y)*(g-r)-o.x:y>o.y&&y<m.y&&(b=r-(o.x+(y-o.y)/(m.y-o.y)*(m.x-o.x))),b<n&&(n=b),m.y<=o.y?l++:v<=y?h++:(m.y<=v&&l++,v<=m.y&&h++)}if(i-=n,i+=u,l=f,h=i,null===e||2>e.length||null===l||2>l.length)n=null;else{for(u=Fh(t,e.length+l.length),n=r=o=0;r<l.length&&l[r].y<e[0].y;)y=l[r++],u[n++].m(y.x+h,y.y);for(;o<e.length;)y=e[o++],u[n++].m(y.x,y.y);for(o=e[e.length-1].y;r<l.length&&l[r].y<=o;)r++;for(;r<l.length&&l[r].y>o;)y=l[r++],u[n++].m(y.x+h,y.y);for(l=Fh(t,n),o=0;o<n;o++)l[o].assign(u[o]);jh(t,u),n=l}if(r=d,y=i,null===c||2>c.length||null===r||2>r.length)o=null;else{for(u=Fh(t,c.length+r.length),h=m=l=0;l<c.length&&c[l].y<r[0].y;)o=c[l++],u[h++].m(o.x,o.y);for(;m<r.length;)o=r[m++],u[h++].m(o.x+y,o.y);for(r=r[r.length-1].y;l<c.length&&c[l].y<=r;)l++;for(;l<c.length&&c[l].y>r;)o=c[l++],u[h++].m(o.x,o.y);for(o=Fh(t,h),l=0;l<h;l++)o[l].assign(u[l]);jh(t,u)}r=Math.max(0,i)+a.width,a=p}else{if(i=o,n=9999999,!(null===c||2>c.length||null===f||2>f.length))for(h=l=0;l<c.length&&h<f.length;)o=c[l],g=f[h],r=g.x,y=g.y,y+=i,m=o,l+1<c.length&&(m=c[l+1]),v=g,g=v.x,v=v.y,h+1<f.length&&(v=f[h+1],g=v.x,v=v.y,v+=i),b=n,o.x===r?b=y-o.y:o.x>r&&o.x<g?b=y+(o.x-r)/(g-r)*(v-y)-o.y:r>o.x&&r<m.x&&(b=y-(o.y+(r-o.x)/(m.x-o.x)*(m.y-o.y))),b<n&&(n=b),m.x<=o.x?l++:g<=r?h++:(m.x<=g&&l++,g<=m.x&&h++);if(i-=n,i+=u,l=f,h=i,null===e||2>e.length||null===l||2>l.length)n=null;else{for(u=Fh(t,e.length+l.length),n=r=o=0;r<l.length&&l[r].x<e[0].x;)y=l[r++],u[n++].m(y.x,y.y+h);for(;o<e.length;)y=e[o++],u[n++].m(y.x,y.y);for(o=e[e.length-1].x;r<l.length&&l[r].x<=o;)r++;for(;r<l.length&&l[r].x>o;)y=l[r++],u[n++].m(y.x,y.y+h);for(l=Fh(t,n),o=0;o<n;o++)l[o].assign(u[o]);jh(t,u),n=l}if(r=d,y=i,null===c||2>c.length||null===r||2>r.length)o=null;else{for(u=Fh(t,c.length+r.length),h=m=l=0;l<c.length&&c[l].x<r[0].x;)o=c[l++],u[h++].m(o.x,o.y);for(;m<r.length;)o=r[m++],u[h++].m(o.x,o.y+y);for(r=r[r.length-1].x;l<c.length&&c[l].x<=r;)l++;for(;l<c.length&&c[l].x>r;)o=c[l++],u[h++].m(o.x,o.y);for(o=Fh(t,h),l=0;l<h;l++)o[l].assign(u[l]);jh(t,u)}r=p,a=Math.max(0,i)+a.height}return jh(t,e),jh(t,f),jh(t,c),jh(t,d),s[0]=n,s[1]=o,new S(i,0,r,a)}function Fh(t,e){var i=t.Cz[e];if(void 0!==i&&void 0!==(i=i.pop()))return i;for(var i=[],n=0;n<e;n++)i[n]=new b;return i}function jh(t,e){var i=e.length,n=t.Cz[i];void 0===n&&(n=[],t.Cz[i]=n),n.push(e)}function Eh(t,e,i,n){if(null!==e){e.x=i,e.y=n,e=e.children;for(var o=e.length,r=0;r<o;r++){var a=e[r];Eh(t,a,i+a.pa.x,n+a.pa.y)}}}function Ih(t,e){if(null!==e){t.setPortSpots(e);for(var i=e.children,n=i.length,o=0;o<n;o++)Ih(t,i[o])}}function Oh(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function zh(t){var e=Oh(t),e=90===e||270===e,i=t.layerSpacing;if(0<t.layerSpacingParentOverlap)var n=Math.min(1,t.layerSpacingParentOverlap),i=i-(e?t.height*n:t.width*n);return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i}function Gh(t){var e=Oh(t),e=90===e||270===e,i=t.nodeIndent;if(0<t.nodeIndentPastParent)var n=Math.min(1,t.nodeIndentPastParent),i=i+(e?t.width*n:t.height*n);return i=Math.max(0,i)}function Rh(){zs.call(this)}function qh(){Hs.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.pa=new b(0,0),this.jb=new k(0,0),this.Oa=new b(0,0),this.oq=this.nq=this.tJ=!1,this.Au=this.fu=null,this.sorting=Up,this.comparer=ip,this.angle=0,this.alignment=$p,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=og,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=eu,this.setsChildPortSpot=!0,this.childPortSpot=eu}function Wh(){Vs.call(this),this.Fs=new b(0,0)}function Hh(){Mo.call(this),this.Se=null}var Vh,Uh={};if(!t.document||void 0===t.document.createElement("canvas").getContext)throw t.console&&t.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Function.prototype.bind||(Function.prototype.bind=function(t){function e(){return r.apply(t,o.concat(n.call(arguments)))}function i(){}var n=Array.prototype.slice,o=n.call(arguments,1),r=this;return i.prototype=this.prototype,e.prototype=new i,e}),function(){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var n=(new Date).getTime(),o=Math.max(8,16-(n-e)),r=t.setTimeout(function(){i(n+o)},o);return e=n+o,r}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){t.clearTimeout(e)})}(),Uh.Debug=null;var _h={kd:1,Rc:2,$c:4,Zc:8,Fn:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("534.30")&&0<t.navigator.userAgent.indexOf("Android"),tI:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("MSIE 9.0"),jF:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("MSIE 10.0"),kF:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("Trident/7"),XK:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("Edge/"),Fk:void 0!==t.navigator&&void 0!==t.navigator.platform&&0<=t.navigator.platform.toUpperCase().indexOf("MAC"),lF:void 0!==t.navigator&&void 0!==t.navigator.platform&&null!==t.navigator.platform.match(/(iPhone|iPod|iPad)/i),wE:function(t,e,i){var n=-1;return function(){var o=this,r=arguments;-1!==n&&_h.clearTimeout(n),n=_h.setTimeout(function(){n=-1,i||t.apply(o,r)},e),i&&!n&&t.apply(o,r)}},setTimeout:function(e,i){return t.setTimeout(e,i)},clearTimeout:function(e){t.clearTimeout(e)},createElement:function(e){return t.document.createElement(e)},k:function(t){throw Error(t)},la:function(t,e){var i="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==e&&(i+="  to value: "+e),_h.k(i)},G:function(t,e,i,n){t instanceof e||(i=_h.getTypeName(i),void 0!==n&&(i+="."+n),_h.yd(t,e,i))},j:function(t,e,i,n){typeof t!==e&&(i=_h.getTypeName(i),void 0!==n&&(i+="."+n),_h.yd(t,e,i))},Fd:function(t,e,i){"number"==typeof t&&isFinite(t)||(e=_h.getTypeName(e),void 0!==i&&(e+="."+i),_h.k(e+" must be a real number type, and not NaN or Infinity: "+t))},mb:function(t,i,n,o){t instanceof e&&t.De===i||(n=_h.getTypeName(n),void 0!==o&&(n+="."+o),_h.yd(t,"a constant of class "+_h.hf(i),n))},wK:function(t,e){"string"==typeof t?Sf(t)||_h.k('Color "'+t+'" is not a valid color string for '+e):t instanceof mo||_h.k("Value for "+e+" must be a color string or a Brush, not "+t)},yd:function(t,e,i,n){e=_h.getTypeName(e),i=_h.getTypeName(i),void 0!==n&&(i+="."+n),"string"==typeof t?_h.k(i+" value is not an instance of "+e+': "'+t+'"'):_h.k(i+" value is not an instance of "+e+": "+t)},Ea:function(t,e,i,n){i=_h.getTypeName(i),void 0!==n&&(i+="."+n),_h.k(i+" is not in the range "+e+": "+t)},hd:function(t){_h.k(_h.hf(t)+" constructor cannot take any arguments.")},Na:function(t){_h.k("Collection was modified during iteration: "+t.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},Fj:function(t,e){_h.k("No property to set for this enum value: "+e+" on "+t.toString())},trace:function(e){t.console&&t.console.log(e)},Zw:{},Ft:function(e,i){!0!==_h.Zw[e]&&(_h.Zw[e]=!0,t.console&&t.console.log(e+" is deprecated in "+i+", see the GoJS change log for more information."))},Qa:function(t){return"object"==typeof t&&null!==t},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},uI:function(t){return Array.isArray(t)},Sz:function(t,e,i){_h.isArray(t)||_h.yd(t,"Array or NodeList or HTMLCollection",e,i)},Ya:function(t){return t.length},Il:function(t){return Array.prototype.slice.call(t)},Da:function(t,e){return Array.isArray(t),t[e]},mE:function(t,e,i){Array.isArray(t)?t[e]=i:_h.k("Cannot replace an object in an HTMLCollection or NodeList at "+e)},Fl:function(t,e){if(Array.isArray(t))return t.indexOf(e);for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1},qh:function(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):_h.k("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)},Hg:function(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):_h.k("Cannot remove an object from an HTMLCollection or NodeList at "+e)},sy:[],K:function(){var t=_h.sy.pop();return void 0===t?new b:t},xb:function(t,e){var i=_h.sy.pop();return void 0===i?new b(t,e):(i.x=t,i.y=e,i)},v:function(t){_h.sy.push(t)},JB:[],im:function(){var t=_h.JB.pop();return void 0===t?new k:t},Ak:function(t){_h.JB.push(t)},ty:[],Ef:function(){var t=_h.ty.pop();return void 0===t?new S:t},hg:function(t,e,i,n){var o=_h.ty.pop();return void 0===o?new S(t,e,i,n):(o.x=t,o.y=e,o.width=i,o.height=n,o)},Db:function(t){_h.ty.push(t)},KB:[],Ff:function(){var t=_h.KB.pop();return void 0===t?new B:t},ue:function(t){_h.KB.push(t)},uy:null,s:function(){var t=_h.uy;return null!==t?(_h.uy=null,t):new $r},q:function(t){t.reset(),_h.uy=t},IB:[],lb:function(){var t=_h.IB.pop();return void 0===t?[]:t},wa:function(t){t.length=0,_h.IB.push(t)},io:Object.freeze([]),mm:1,mc:function(t){t.__gohashid=_h.mm++},Xp:function(t){var e=t.__gohashid;return void 0===e&&(e=_h.mm++,t.__gohashid=e),e},Kd:function(t){return t.__gohashid},fa:function(t,e){e.Dy=t,Uh[t]=e},La:function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},ji:function(t){t.SG=!0},defineProperty:function(t,e,i,n,o){_h.j(t,"function","Util.defineProperty:classfunc"),_h.j(e,"object","Util.defineProperty:propobj"),
_h.j(i,"function","Util.defineProperty:getter"),_h.j(n,"function","Util.defineProperty:setter");for(var r in e){if(e=e[r],i={get:i,set:n,enumerable:!0},void 0!==o)for(var a in o)i[a]=o[a];Object.defineProperty(t.prototype,r,i),o=Object.getOwnPropertyDescriptor(t.prototype,r),e&&o&&Object.defineProperty(t.prototype,e,o);break}},WJ:!1,u:function(t,e,i,n){_h.j(t,"function","Util.defineReadOnlyProperty:classfunc"),_h.j(e,"object","Util.defineReadOnlyProperty:propobj"),_h.j(i,"function","Util.defineReadOnlyProperty:getter");for(var o in e){var r=e[o];if(e={get:i,set:function(t){_h.k('The property "'+r+'" is read-only and cannot be set to '+t)},enumerable:!0},void 0!==n)for(var a in n)e[a]=n[a];Object.defineProperty(t.prototype,o,e),n=Object.getOwnPropertyDescriptor(t.prototype,o),r&&n&&Object.defineProperty(t.prototype,r,n);break}},$d:function(t,e){for(var i in e)e[i]=!0;t.prototype.OG=e},getTypeName:function(t){return void 0===t?"":"string"==typeof t?t:"function"==typeof t?_h.hf(t):null===t?"*":""},hf:function(t){if("function"==typeof t){if(t.Dy)return t.Dy;if(t.name)return t.name;var e=t.toString(),i=e.indexOf("("),e=e.substring(9,i).trim();if(""!==e)return t.Dy=e}else if("object"==typeof t&&t.constructor)return _h.hf(t.constructor);return typeof t},p:function(t,i,n){_h.j(t,"function","Util.defineEnumValue:classfunc"),_h.j(i,"string","Util.defineEnumValue:name"),_h.j(n,"number","Util.defineEnumValue:num"),n=new e(t,i,n),Object.freeze(n),t[i]=n;var o=t.Qu;return o instanceof v||(o=new v("string",e),t.Qu=o),o.add(i,n),n},sb:function(t,e){if(!t||!e)return null;var i=void 0;try{"function"==typeof e?i=e(t):"function"==typeof t.getAttribute?null===(i=t.getAttribute(e))&&(i=void 0):i=t[e]}catch(t){}return i},Ma:function(t,e,i){if(t&&e)try{"function"==typeof e?e(t,i):"function"==typeof t.setAttribute?t.setAttribute(e,i):t[e]=i}catch(t){}},Eu:function(t,e){_h.j(t,"object","Setting properties requires Objects as arguments"),_h.j(e,"object","Setting properties requires Objects as arguments");var i,n=t instanceof Zo,o=t instanceof Ii;for(i in e){""===i&&_h.k("Setting properties requires non-empty property names");var r=t,a=i;if(n||o){var s=i.indexOf(".");if(0<s){var l=i.substring(0,s);n?r=t.ud(l):void 0!==(r=t[l])&&null!==r||(r=t.ab[l]),_h.Qa(r)?a=i.substr(s+1):_h.k("Unable to find object named: "+l+" in "+t.toString()+" when trying to set property: "+i)}}if("_"!==a[0]&&!_h.aF(r,a)){if(o&&"ModelChanged"===a){t.dH(e[a]);continue}if(o&&"Changed"===a){t.fn(e[a]);continue}if(o&&_h.aF(t.ab,a))r=t.ab;else{if(o&&Xn(t,a)){t.Nz(a,e[a]);continue}if(t instanceof Dt&&"Changed"===a){t.fn(e[a]);continue}_h.k('Trying to set undefined property "'+a+'" on object: '+r.toString())}}r[a]=e[i],"_"===a[0]&&r instanceof Mo&&r.aH(a)}},aF:function(t,e){if(t.hasOwnProperty(e))return!0;for(var i=Object.getPrototypeOf(t);i&&i!==Function;){if(i.hasOwnProperty(e))return!0;var n=i.OG;if(n&&n[e])return!0;i=Object.getPrototypeOf(i)}return!1},gJ:function(t){for(var e=[],i=0;256>i;i++)e[i]=i;for(var n=0,o=0,i=0;256>i;i++)n=(n+e[i]+119)%256,o=e[i],e[i]=e[n],e[n]=o;for(var n=i=0,r="",a=0;a<t.length;a++)i=(i+1)%256,n=(n+e[i])%256,o=e[i],e[i]=e[n],e[n]=o,r+=String.fromCharCode(t.charCodeAt(a)^e[(e[i]+e[n])%256]);return r},hI:function(t){for(var e={},i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t="0"+t);for(var n=[],o=0,i=0;i<t.length;i+=2)n[o++]=e[t.substr(i,2)];return t=n.join(""),""===t?"0":t},Ig:function(t){return _h.gJ(_h.hI(t))},km:null,adym:"7da71ca0ad381e90",vfo:"2be641fdbb",qH:"@COLOR1",rH:"@COLOR2",xE:!1,Ct:null,Dt:null};_h.km=function(){var i=t.document.createElement("canvas"),n=i.getContext("2d");n[_h.Ig("7ca11abfd022028846")]=_h.Ig("398c3597c01238");for(var o=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22422913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],r=1;5>r;r++)n[_h.Ig("7ca11abfd7330390")](_h.Ig(o[r-1]),10,15*r+0);for(n[_h.Ig("7ca11abfd022028846")]=_h.Ig("39f046ebb36e4b"),r=1;5>r;r++)n[_h.Ig("7ca11abfd7330390")](_h.Ig(o[r-1]),10,15*r+0);return 4===o.length&&"5"===o[0][0]&&"7"===o[3][0]||(_h.p=function(t,i){var n=new e(t,i,2);Object.freeze(n),t[i]=n;var o=t.Qu;return o instanceof v||(o=new v("string",e),t.Qu=o),o.add(i,n),n}),i}(),_h.fa("EnumValue",e),e.prototype.toString=function(){return _h.hf(this.XB)+"."+this.Qb},_h.u(e,{De:"classType"},function(){return this.XB}),_h.u(e,{name:"name"},function(){return this.Qb}),_h.u(e,{value:"value"},function(){return this.WG});var Kh;e.findName=Kh=function(t,e){if(void 0===e||null===e||""===e)return null;_h.j(t,"function","findName:classfunc"),_h.j(e,"string","EnumValue.findName:name");var i=t.Qu;return i instanceof v?i.ja(e):null},i.prototype.toString=function(){return this.VB.join("")},i.prototype.add=function(t){""!==t&&this.VB.push(t)},o.prototype.random=function(){var t=this.seed%this.HB*this.ny-this.seed/this.HB*this.DG;return this.seed=0<t?t:t+this.Pu,this.seed*this.CG},_h.u(r,{i:"iterator"},function(){return this}),r.prototype.reset=r.prototype.reset=function(){},r.prototype.next=r.prototype.next=function(){return!1},r.prototype.hasNext=function(){return!1},r.prototype.first=r.prototype.first=function(){return null},r.prototype.any=function(){return!1},r.prototype.all=function(){return!0},r.prototype.each=function(){return this},r.prototype.map=function(){return this},r.prototype.filter=function(){return this},r.prototype.concat=function(t){return t.i},_h.u(r,{count:"count"},function(){return 0}),r.prototype.Hf=function(){},r.prototype.toString=function(){return"EmptyIterator"};var Jh=new r;_h.$d(a,{key:!0,value:!0}),_h.u(a,{i:"iterator"},function(){return this}),a.prototype.reset=a.prototype.reset=function(){this.key=-1},a.prototype.next=a.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},a.prototype.hasNext=function(){return this.next()},a.prototype.first=a.prototype.first=function(){return this.key=0,this.value},a.prototype.any=function(t){return this.key=-1,t(this.value)},a.prototype.all=function(t){return this.key=-1,t(this.value)},a.prototype.each=function(t){return this.key=-1,t(this.value),this},a.prototype.map=function(t){return new a(t(this.value))},a.prototype.filter=function(t){return t(this.value)?new a(this.value):Jh},a.prototype.concat=function(t){return new s(this,t.i)},_h.u(a,{count:"count"},function(){return 1}),a.prototype.Hf=function(){this.value=null},a.prototype.toString=function(){return"SingletonIterator("+this.value+")"},_h.$d(s,{key:!0,value:!0}),_h.u(s,{i:"iterator"},function(){return this}),s.prototype.reset=s.prototype.reset=function(){this.jl.reset(),this.kl.reset(),this.Ru=!1},s.prototype.next=s.prototype.next=function(){if(!this.Ru){var t=this.jl;if(t.next())return this.key=t.key,this.value=t.value,!0;this.Ru=!0}return!(!this.Ru||(t=this.kl,!t.next()))&&(this.key=t.key,this.value=t.value,!0)},s.prototype.hasNext=function(){return this.next()},s.prototype.first=s.prototype.first=function(){return this.reset(),this.next()?this.value:null},s.prototype.any=function(t){return!(!this.jl.any(t)&&!this.kl.any(t))},s.prototype.all=function(t){return!(!this.jl.all(t)||!this.kl.all(t))},s.prototype.each=function(t){return this.jl.each(t),this.kl.each(t),this},s.prototype.map=function(t){return new s(this.jl.map(t),this.kl.map(t))},s.prototype.filter=function(t){return new s(this.jl.filter(t),this.kl.filter(t))},s.prototype.concat=function(t){return new s(this,t.i)},_h.u(s,{count:"count"},function(){return this.jl.count+this.kl.count}),s.prototype.Hf=function(){this.value=this.key=null},s.prototype.toString=function(){return"ConcatIterator()"},_h.$d(l,{key:!0,value:!0}),_h.u(l,{i:"iterator"},function(){return this}),_h.defineProperty(l,{iq:"predicate"},function(){return this.Wh},function(t){this.Wh=t}),l.prototype.reset=l.prototype.reset=function(){var t=this.vc;t.Ob=null,this.Ta=t.C,this.uc=-1},l.prototype.next=l.prototype.next=function(){var t=this.vc;if(t.C!==this.Ta){if(0>this.key)return!1;_h.Na(t)}var t=t.n,e=t.length,i=++this.uc,n=this.Wh;if(null!==n)for(;i<e;){var o=t[i];if(n(o))return this.key=this.uc=i,this.value=o,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.Hf()}return!1},l.prototype.hasNext=function(){return this.next()},l.prototype.first=l.prototype.first=function(){var t=this.vc;this.Ta=t.C,this.uc=0;var t=t.n,e=t.length,i=this.Wh;if(null!==i){for(var n=0;n<e;){var o=t[n];if(i(o))return this.key=this.uc=n,this.value=o;n++}return null}return 0<e?(o=t[0],this.key=0,this.value=o):null},l.prototype.any=function(t){var e=this.vc;e.Ob=null;var i=e.C;this.uc=-1;for(var n=e.n,o=n.length,r=this.Wh,a=0;a<o;a++){var s=n[a];if(null===r||r(s)){if(t(s))return!0;e.C!==i&&_h.Na(e)}}return!1},l.prototype.all=function(t){var e=this.vc;e.Ob=null;var i=e.C;this.uc=-1;for(var n=e.n,o=n.length,r=this.Wh,a=0;a<o;a++){var s=n[a];if(null===r||r(s)){if(!t(s))return!1;e.C!==i&&_h.Na(e)}}return!0},l.prototype.each=function(t){var e=this.vc;e.Ob=null;var i=e.C;this.uc=-1;for(var n=e.n,o=n.length,r=this.Wh,a=0;a<o;a++){var s=n[a];(null===r||r(s))&&(t(s),e.C!==i&&_h.Na(e))}return this},l.prototype.map=function(t){var e=this.vc;e.Ob=null;var i=e.C;this.uc=-1;for(var n=[],o=e.n,r=o.length,a=this.Wh,s=0;s<r;s++){var l=o[s];(null===a||a(l))&&(n.push(t(l)),e.C!==i&&_h.Na(e))}return t=new u,t.n=n,t.Fc(),t.i},l.prototype.filter=function(t){var e=this.vc;e.Ob=null;var i=e.C;this.uc=-1;for(var n=[],o=e.n,r=o.length,a=this.Wh,s=0;s<r;s++){var l=o[s];(null===a||a(l))&&(t(l)&&n.push(l),e.C!==i&&_h.Na(e))}return t=new u(e.ma),t.n=n,t.Fc(),t.i},l.prototype.concat=function(t){return this.vc.Ob=null,new s(this,t.i)},_h.u(l,{count:"count"},function(){var t=this.Wh;if(null!==t){for(var e=0,i=this.vc.n,n=i.length,o=0;o<n;o++)t(i[o])&&e++;return e}return this.vc.n.length}),l.prototype.Hf=function(){this.key=-1,this.value=null,this.Ta=-1,this.Wh=null,this.vc.Ob=this},l.prototype.toString=function(){return"ListIterator@"+this.uc+"/"+this.vc.count},_h.$d(h,{key:!0,value:!0}),_h.u(h,{i:"iterator"},function(){return this}),h.prototype.reset=h.prototype.reset=function(){var t=this.vc;t.Li=null,this.Ta=t.C,this.uc=t.n.length},h.prototype.next=h.prototype.next=function(){var t=this.vc;if(t.C!==this.Ta){if(0>this.key)return!1;_h.Na(t)}var e=--this.uc;return 0<=e?(this.key=e,this.value=t.n[e],!0):(this.Hf(),!1)},h.prototype.hasNext=function(){return this.next()},h.prototype.first=h.prototype.first=function(){var t=this.vc;this.Ta=t.C;var e=t.n;return this.uc=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},h.prototype.any=function(t){var e=this.vc;e.Li=null;var i=e.C,n=e.n,o=n.length;for(this.uc=o,o-=1;0<=o;o--){if(t(n[o]))return!0;e.C!==i&&_h.Na(e)}return!1},h.prototype.all=function(t){var e=this.vc;e.Li=null;var i=e.C,n=e.n,o=n.length;for(this.uc=o,o-=1;0<=o;o--){if(!t(n[o]))return!1;e.C!==i&&_h.Na(e)}return!0},h.prototype.each=function(t){var e=this.vc;e.Li=null;var i=e.C,n=e.n,o=n.length;for(this.uc=o,o-=1;0<=o;o--)t(n[o]),e.C!==i&&_h.Na(e);return this},h.prototype.map=function(t){var e=this.vc;e.Li=null;var i=e.C,n=[],o=e.n,r=o.length;for(this.uc=r,r-=1;0<=r;r--)n.push(t(o[r])),e.C!==i&&_h.Na(e);return t=new u,t.n=n,t.Fc(),t.i},h.prototype.filter=function(t){var e=this.vc;e.Li=null;var i=e.C,n=[],o=e.n,r=o.length;for(this.uc=r,r-=1;0<=r;r--){var a=o[r];t(a)&&n.push(a),e.C!==i&&_h.Na(e)}return t=new u(e.ma),t.n=n,t.Fc(),t.i},h.prototype.concat=function(t){return this.vc.Li=null,new s(this,t.i)},_h.u(h,{count:"count"},function(){return this.vc.n.length}),h.prototype.Hf=function(){this.key=-1,this.value=null,this.Ta=-1,this.vc.Li=this},h.prototype.toString=function(){return"ListIteratorBackwards("+this.uc+"/"+this.vc.count+")"},_h.fa("List",u),u.prototype.Fc=function(){var t=this.C;t++,999999999<t&&(t=0),this.C=t},u.prototype.freeze=u.prototype.freeze=function(){return this.Q=!0,this},u.prototype.thaw=u.prototype.Ra=function(){return this.Q=!1,this},u.prototype.toString=function(){return"List("+_h.getTypeName(this.ma)+")#"+_h.Kd(this)},u.prototype.add=u.prototype.add=function(t){null!==t&&(this.Q&&_h.la(this,t),this.n.push(t),this.Fc())},u.prototype.push=u.prototype.push=function(t){this.add(t)},u.prototype.addAll=u.prototype.Hc=function(t){if(null===t)return this;this.Q&&_h.la(this);var e=this.n;if(_h.isArray(t))for(var i=_h.Ya(t),n=0;n<i;n++){var o=_h.Da(t,n);e.push(o)}else for(t=t.i;t.next();)o=t.value,e.push(o);return this.Fc(),this},u.prototype.clear=u.prototype.clear=function(){this.Q&&_h.la(this),this.n.length=0,this.Fc()},u.prototype.contains=u.prototype.contains=function(t){return null!==t&&-1!==this.n.indexOf(t)},u.prototype.has=u.prototype.has=function(t){return this.contains(t)},u.prototype.indexOf=u.prototype.indexOf=function(t){return null===t?-1:this.n.indexOf(t)},u.prototype.elt=u.prototype.da=function(t){var e=this.n;return(0>t||t>=e.length)&&_h.Ea(t,"0 <= i < length",u,"elt:i"),e[t]},u.prototype.get=u.prototype.get=function(t){return this.da(t)},u.prototype.setElt=u.prototype.gg=function(t,e){var i=this.n;(0>t||t>=i.length)&&_h.Ea(t,"0 <= i < length",u,"setElt:i"),this.Q&&_h.la(this,t),i[t]=e},u.prototype.set=u.prototype.set=function(t,e){this.gg(t,e)},u.prototype.first=u.prototype.first=function(){var t=this.n;return 0===t.length?null:t[0]},u.prototype.last=u.prototype.ee=function(){var t=this.n,e=t.length;return 0<e?t[e-1]:null},u.prototype.pop=u.prototype.pop=function(){this.Q&&_h.la(this);var t=this.n;return 0<t.length?t.pop():null},u.prototype.any=function(t){for(var e=this.n,i=this.C,n=e.length,o=0;o<n;o++){if(t(e[o]))return!0;this.C!==i&&_h.Na(this)}return!1},u.prototype.all=function(t){for(var e=this.n,i=this.C,n=e.length,o=0;o<n;o++){if(!t(e[o]))return!1;this.C!==i&&_h.Na(this)}return!0},u.prototype.each=function(t){for(var e=this.n,i=this.C,n=e.length,o=0;o<n;o++)t(e[o]),this.C!==i&&_h.Na(this);return this},u.prototype.map=function(t){for(var e=new u,i=[],n=this.n,o=this.C,r=n.length,a=0;a<r;a++)i.push(t(n[a])),this.C!==o&&_h.Na(this);return e.n=i,e.Fc(),e},u.prototype.filter=function(t){for(var e=new u(this.ma),i=[],n=this.n,o=this.C,r=n.length,a=0;a<r;a++){var s=n[a];t(s)&&i.push(s),this.C!==o&&_h.Na(this)}return e.n=i,e.Fc(),e},u.prototype.concat=function(t){return this.copy().Hc(t)},u.prototype.insertAt=u.prototype.Md=function(t,e){0>t&&_h.Ea(t,">= 0",u,"insertAt:i"),this.Q&&_h.la(this,t);var i=this.n;return t>=i.length?i.push(e):i.splice(t,0,e),this.Fc(),!0},u.prototype.remove=u.prototype["delete"]=u.prototype.remove=function(t){if(null===t)return!1;this.Q&&_h.la(this,t);var e=this.n;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.Fc(),!0)},u.prototype.removeAt=u.prototype.Yc=function(t){var e=this.n;(0>t||t>=e.length)&&_h.Ea(t,"0 <= i < length",u,"removeAt:i"),this.Q&&_h.la(this,t),t===e.length-1?e.pop():e.splice(t,1),this.Fc()},u.prototype.removeRange=u.prototype.removeRange=function(t,e){var i=this.n,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this.Q&&_h.la(this);for(var o=t,r=e+1;r<n;)i[o++]=i[r++];return i.length=n-(e-t+1),this.Fc(),this},u.prototype.copy=function(){var t=new u(this.ma),e=this.n;return 0<e.length&&(t.n=Array.prototype.slice.call(e)),t},u.prototype.toArray=u.prototype.ec=function(){for(var t=this.n,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},u.prototype.toSet=u.prototype.rG=function(){for(var t=new f(this.ma),e=this.n,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},u.prototype.sort=u.prototype.sort=function(t){return this.Q&&_h.la(this),this.n.sort(t),this.Fc(),this},u.prototype.sortRange=u.prototype.wq=function(t,e,i){var n=this.n,o=n.length;void 0===e&&(e=0),void 0===i&&(i=o),this.Q&&_h.la(this);var r=i-e;if(1>=r)return this;if((0>e||e>=o-1)&&_h.Ea(e,"0 <= from < length",u,"sortRange:from"),2===r)return i=n[e],o=n[e+1],0<t(i,o)&&(n[e]=o,n[e+1]=i,this.Fc()),this;if(0===e)if(i>=o)n.sort(t);else for(r=n.slice(0,i),r.sort(t),t=0;t<i;t++)n[t]=r[t];else if(i>=o)for(r=n.slice(e),r.sort(t),t=e;t<o;t++)n[t]=r[t-e];else for(r=n.slice(e,i),r.sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.Fc(),this},u.prototype.reverse=u.prototype.reverse=function(){return this.Q&&_h.la(this),this.n.reverse(),this.Fc(),this},_h.u(u,{count:"count"},function(){return this.n.length}),_h.u(u,{size:"size"},function(){return this.n.length}),_h.u(u,{length:"length"},function(){return this.n.length}),_h.u(u,{i:"iterator"},function(){if(0>=this.n.length)return Jh;var t=this.Ob;return null!==t?(t.reset(),t):new l(this)}),_h.u(u,{In:"iteratorBackwards"},function(){if(0>=this.n.length)return Jh;var t=this.Li;return null!==t?(t.reset(),t):new h(this)}),_h.$d(c,{key:!0,value:!0}),_h.u(c,{i:"iterator"},function(){return this}),c.prototype.reset=c.prototype.reset=function(){var t=this.Yh;t.Ob=null,this.Ta=t.C,this.Va=null},c.prototype.next=c.prototype.next=function(){var t=this.Yh;if(t.C!==this.Ta){if(null===this.key)return!1;_h.Na(t)}var e=this.Va,e=null===e?t.Ca:e.Xa;return null!==e?(this.Va=e,this.value=e.value,this.key=e.key,!0):(this.Hf(),!1)},c.prototype.hasNext=function(){return this.next()},c.prototype.first=c.prototype.first=function(){var t=this.Yh;if(this.Ta=t.C,null!==(t=t.Ca)){this.Va=t;var e=t.value;return this.key=t.key,this.value=e}return null},c.prototype.any=function(t){var e=this.Yh;e.Ob=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(t(n.value))return!0;e.C!==i&&_h.Na(e),n=n.Xa}return!1},c.prototype.all=function(t){var e=this.Yh;e.Ob=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(!t(n.value))return!1;e.C!==i&&_h.Na(e),n=n.Xa}return!0},c.prototype.each=function(t){var e=this.Yh;e.Ob=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;)t(n.value),e.C!==i&&_h.Na(e),n=n.Xa;return this},c.prototype.map=function(t){var e=this.Yh;e.Ob=null;for(var i=new u,n=e.C,o=e.Ca;null!==o;)i.add(t(o.value)),e.C!==n&&_h.Na(e),o=o.Xa;return i.i},c.prototype.filter=function(t){var e=this.Yh;e.Ob=null;for(var i=new u(e.ma),n=e.C,o=e.Ca;null!==o;){var r=o.value;t(r)&&i.add(r),e.C!==n&&_h.Na(e),o=o.Xa}return i.i},c.prototype.concat=function(t){return this.Yh.Ob=null,new s(this,t.i)},_h.u(c,{count:"count"},function(){return this.Yh.nd}),c.prototype.Hf=function(){this.value=this.key=null,this.Ta=-1,this.Yh.Ob=this},c.prototype.toString=function(){return null!==this.Va?"SetIterator@"+this.Va.value:"SetIterator"},_h.fa("Set",f),f.prototype.Fc=function(){var t=this.C;t++,999999999<t&&(t=0),this.C=t},f.prototype.freeze=f.prototype.freeze=function(){return this.Q=!0,this},f.prototype.thaw=f.prototype.Ra=function(){return this.Q=!1,this},f.prototype.toString=function(){return"Set("+_h.getTypeName(this.ma)+")#"+_h.Kd(this)},f.prototype.add=f.prototype.add=function(t){if(null===t)return!1;this.Q&&_h.la(this,t);var e=t;return _h.Qa(t)&&(e=_h.Xp(t)),void 0===this.od[e]&&(this.nd++,t=new y(t,t),this.od[e]=t,e=this.Rh,null===e?this.Ca=t:(t.jp=e,e.Xa=t),this.Rh=t,this.Fc(),!0)},f.prototype.addAll=f.prototype.Hc=function(t){if(null===t)return this;if(this.Q&&_h.la(this),_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++)this.add(_h.Da(t,i));else for(t=t.i;t.next();)this.add(t.value);return this},f.prototype.contains=f.prototype.contains=function(t){if(null===t)return!1;var e=t;return(!_h.Qa(t)||void 0!==(e=_h.Kd(t)))&&void 0!==this.od[e]},f.prototype.has=f.prototype.has=function(t){return this.contains(t)},f.prototype.containsAll=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},f.prototype.containsAny=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},f.prototype.first=f.prototype.first=function(){var t=this.Ca;return null===t?null:t.value},f.prototype.any=function(t){for(var e=this.C,i=this.Ca;null!==i;){if(t(i.value))return!0;this.C!==e&&_h.Na(this),i=i.Xa}return!1},f.prototype.all=function(t){for(var e=this.C,i=this.Ca;null!==i;){if(!t(i.value))return!1;this.C!==e&&_h.Na(this),i=i.Xa}return!0},f.prototype.each=function(t){for(var e=this.C,i=this.Ca;null!==i;)t(i.value),this.C!==e&&_h.Na(this),i=i.Xa;return this},f.prototype.map=function(t){for(var e=new f,i=this.C,n=this.Ca;null!==n;)e.add(t(n.value)),this.C!==i&&_h.Na(this),n=n.Xa;return e},f.prototype.filter=function(t){for(var e=new f(this.ma),i=this.C,n=this.Ca;null!==n;){var o=n.value;t(o)&&e.add(o),this.C!==i&&_h.Na(this),n=n.Xa}return e},f.prototype.concat=function(t){return this.copy().Hc(t)},f.prototype.remove=f.prototype["delete"]=f.prototype.remove=function(t){if(null===t)return!1;this.Q&&_h.la(this,t);var e=t;if(_h.Qa(t)&&void 0===(e=_h.Kd(t)))return!1;if(void 0===(t=this.od[e]))return!1;var i=t.Xa,n=t.jp;return null!==i&&(i.jp=n),null!==n&&(n.Xa=i),this.Ca===t&&(this.Ca=i),this.Rh===t&&(this.Rh=n),delete this.od[e],this.nd--,this.Fc(),!0},f.prototype.removeAll=f.prototype.Ux=function(t){if(null===t)return this;if(this.Q&&_h.la(this),_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++)this.remove(_h.Da(t,i));else for(t=t.i;t.next();)this.remove(t.value);return this},f.prototype.retainAll=function(t){if(null===t||0===this.count)return this;this.Q&&_h.la(this);var e=new f(this.ma);e.Hc(t),t=[];for(var i=this.i;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.Ux(t),this},f.prototype.clear=f.prototype.clear=function(){this.Q&&_h.la(this),this.od={},this.nd=0,this.Rh=this.Ca=null,this.Fc()},f.prototype.copy=function(){var t,e=new f(this.ma),i=this.od;for(t in i)e.add(i[t].value);return e},f.prototype.toArray=f.prototype.ec=function(){var t,e=Array(this.nd),i=this.od,n=0;for(t in i)e[n]=i[t].value,n++;return e},f.prototype.toList=function(){var t,e=new u(this.ma),i=this.od;for(t in i)e.add(i[t].value);return e},_h.u(f,{count:"count"},function(){return this.nd}),_h.u(f,{size:"size"},function(){return this.nd}),_h.u(f,{i:"iterator"},function(){if(0>=this.nd)return Jh;var t=this.Ob;return null!==t?(t.reset(),t):new c(this)}),_h.$d(d,{key:!0,value:!0}),_h.u(d,{i:"iterator"},function(){return this}),d.prototype.reset=d.prototype.reset=function(){this.Ta=this.Fa.C,this.Va=null},d.prototype.next=d.prototype.next=function(){var t=this.Fa;if(t.C!==this.Ta){if(null===this.key)return!1;_h.Na(t)}var e=this.Va,e=null===e?t.Ca:e.Xa;return null!==e?(this.Va=e,this.value=this.key=t=e.key,!0):(this.Hf(),!1)},d.prototype.hasNext=function(){return this.next()},d.prototype.first=d.prototype.first=function(){var t=this.Fa;return this.Ta=t.C,t=t.Ca,null!==t?(this.Va=t,this.value=this.key=t=t.key):null},d.prototype.any=function(t){var e=this.Fa,i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(t(n.key))return!0;e.C!==i&&_h.Na(e),n=n.Xa}return!1},d.prototype.all=function(t){var e=this.Fa,i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(!t(n.key))return!1;e.C!==i&&_h.Na(e),n=n.Xa}return!0},d.prototype.each=function(t){var e=this.Fa,i=e.C;this.Va=null;for(var n=e.Ca;null!==n;)t(n.key),e.C!==i&&_h.Na(e),n=n.Xa;return this},d.prototype.map=function(t){var e=this.Fa,i=e.C;this.Va=null;for(var n=new u,o=e.Ca;null!==o;)n.add(t(o.key)),e.C!==i&&_h.Na(e),o=o.Xa;return n.i},d.prototype.filter=function(t){var e=this.Fa,i=e.C;this.Va=null;for(var n=new u(e.Qh),o=e.Ca;null!==o;){var r=o.key;t(r)&&n.add(r),e.C!==i&&_h.Na(e),o=o.Xa}return n.i},d.prototype.concat=function(t){return new s(this,t.i)},_h.u(d,{count:"count"},function(){return this.Fa.nd}),d.prototype.Hf=function(){this.value=this.key=null,this.Ta=-1},d.prototype.toString=function(){return null!==this.Va?"MapKeySetIterator@"+this.Va.value:"MapKeySetIterator"},_h.La(p,f),p.prototype.freeze=function(){return this},p.prototype.Ra=function(){return this},p.prototype.toString=function(){return"MapKeySet("+this.Fa.toString()+")"},p.prototype.add=p.prototype.add=function(){return _h.k("This Set is read-only: "+this.toString()),!1},p.prototype.set=p.prototype.set=function(){return _h.k("This Set is read-only: "+this.toString()),!1},p.prototype.contains=p.prototype.contains=function(t){return this.Fa.contains(t)},p.prototype.has=p.prototype.has=function(t){return this.contains(t)},p.prototype.remove=p.prototype["delete"]=p.prototype.remove=function(){return _h.k("This Set is read-only: "+this.toString()),!1},p.prototype.clear=p.prototype.clear=function(){_h.k("This Set is read-only: "+this.toString())},p.prototype.first=p.prototype.first=function(){var t=this.Fa.Ca;return null!==t?t.key:null},p.prototype.any=function(t){for(var e=this.Fa.Ca;null!==e;){if(t(e.key))return!0;e=e.Xa}return!1},p.prototype.all=function(t){for(var e=this.Fa.Ca;null!==e;){if(!t(e.key))return!1;e=e.Xa}return!0},p.prototype.each=function(t){for(var e=this.Fa.Ca;null!==e;)t(e.key),e=e.Xa;return this},p.prototype.map=function(t){for(var e=new f,i=this.Fa.Ca;null!==i;)e.add(t(i.key)),i=i.Xa;return e},p.prototype.filter=function(t){for(var e=new f(this.Fa.Qh),i=this.Fa.Ca;null!==i;){var n=i.key;t(n)&&e.add(n),i=i.Xa}return e},p.prototype.concat=function(t){return this.rG().Hc(t)},p.prototype.copy=function(){return new p(this.Fa)},p.prototype.toSet=p.prototype.rG=function(){var t,e=new f(this.Fa.Qh),i=this.Fa.od;for(t in i)e.add(i[t].key);return e},p.prototype.toArray=p.prototype.ec=function(){var t,e=this.Fa.od,i=Array(this.Fa.nd),n=0;for(t in e)i[n]=e[t].key,n++;return i},p.prototype.toList=function(){var t,e=new u(this.Fa.Qh),i=this.Fa.od;for(t in i)e.add(i[t].key);return e},_h.u(p,{count:"count"},function(){return this.Fa.nd}),_h.u(p,{size:"size"},function(){return this.Fa.nd}),_h.u(p,{i:"iterator"},function(){return 0>=this.Fa.nd?Jh:new d(this.Fa)}),_h.$d(g,{key:!0,value:!0}),_h.u(g,{i:"iterator"},function(){return this}),g.prototype.reset=g.prototype.reset=function(){var t=this.Fa;t.Mi=null,this.Ta=t.C,this.Va=null},g.prototype.next=g.prototype.next=function(){var t=this.Fa;if(t.C!==this.Ta){if(null===this.key)return!1;_h.Na(t)}var e=this.Va,e=null===e?t.Ca:e.Xa;return null!==e?(this.Va=e,this.value=e.value,this.key=e.key,!0):(this.Hf(),!1)},g.prototype.hasNext=function(){return this.next()},g.prototype.first=g.prototype.first=function(){var t=this.Fa;if(this.Ta=t.C,null!==(t=t.Ca)){this.Va=t;var e=t.value;return this.key=t.key,this.value=e}return null},g.prototype.any=function(t){var e=this.Fa;e.Mi=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(t(n.value))return!0;e.C!==i&&_h.Na(e),n=n.Xa}return!1},g.prototype.all=function(t){var e=this.Fa;e.Mi=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(!t(n.value))return!1;e.C!==i&&_h.Na(e),n=n.Xa}return!0},g.prototype.each=function(t){var e=this.Fa;e.Mi=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;)t(n.value),e.C!==i&&_h.Na(e),n=n.Xa;return this},g.prototype.map=function(t){var e=this.Fa;e.Mi=null;var i=e.C;this.Va=null;for(var n=new u,o=e.Ca;null!==o;)n.add(t(o.value)),e.C!==i&&_h.Na(e),o=o.Xa;return n.i},g.prototype.filter=function(t){var e=this.Fa;e.Mi=null;var i=e.C;this.Va=null;for(var n=new u(e.Qh),o=e.Ca;null!==o;){var r=o.value;t(r)&&n.add(r),e.C!==i&&_h.Na(e),o=o.Xa}return n.i},g.prototype.concat=function(t){return this.Fa.Mi=null,new s(this,t.i)},_h.u(g,{count:"count"},function(){return this.Fa.nd}),g.prototype.Hf=function(){this.value=this.key=null,this.Ta=-1,this.Fa.Mi=this},g.prototype.toString=function(){return null!==this.Va?"MapValueSetIterator@"+this.Va.value:"MapValueSetIterator"},_h.$d(y,{key:!0,value:!0}),y.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};_h.$d(m,{key:!0,value:!0}),_h.u(m,{i:"iterator"},function(){return this}),m.prototype.reset=m.prototype.reset=function(){var t=this.Fa;t.Ob=null,this.Ta=t.C,this.Va=null},m.prototype.next=m.prototype.next=function(){var t=this.Fa;if(t.C!==this.Ta){if(null===this.key)return!1;_h.Na(t)}var e=this.Va,e=null===e?t.Ca:e.Xa;return null!==e?(this.Va=e,this.key=e.key,this.value=e.value,!0):(this.Hf(),!1)},m.prototype.hasNext=function(){return this.next()},m.prototype.first=m.prototype.first=function(){var t=this.Fa;return this.Ta=t.C,t=t.Ca,null!==t?(this.Va=t,this.key=t.key,this.value=t.value,t):null},m.prototype.any=function(t){var e=this.Fa;e.Ob=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(t(n))return!0;e.C!==i&&_h.Na(e),n=n.Xa}return!1},m.prototype.all=function(t){var e=this.Fa;e.Ob=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;){if(!t(n))return!1;e.C!==i&&_h.Na(e),n=n.Xa}return!0},m.prototype.each=function(t){var e=this.Fa;e.Ob=null;var i=e.C;this.Va=null;for(var n=e.Ca;null!==n;)t(n),e.C!==i&&_h.Na(e),n=n.Xa;return this},m.prototype.map=function(t){var e=this.Fa;e.Ob=null;var i=e.C;this.Va=null;for(var n=new u,o=e.Ca;null!==o;)n.add(t(o)),e.C!==i&&_h.Na(e),o=o.Xa;return n.i},m.prototype.filter=function(t){var e=this.Fa;e.Ob=null;var i=e.C;this.Va=null;for(var n=new u,o=e.Ca;null!==o;)t(o)&&n.add(o),e.C!==i&&_h.Na(e),o=o.Xa;return n.i},m.prototype.concat=function(t){return this.Fa.Ob=null,new s(this,t.i)},_h.u(m,{count:"count"},function(){return this.Fa.nd}),m.prototype.Hf=function(){this.value=this.key=null,this.Ta=-1,this.Fa.Ob=this},m.prototype.toString=function(){return null!==this.Va?"MapIterator@"+this.Va:"MapIterator"},_h.fa("Map",v),v.prototype.Fc=function(){var t=this.C;t++,999999999<t&&(t=0),this.C=t},v.prototype.freeze=v.prototype.freeze=function(){return this.Q=!0,this},v.prototype.thaw=v.prototype.Ra=function(){return this.Q=!1,this},v.prototype.toString=function(){return"Map("+_h.getTypeName(this.Qh)+","+_h.getTypeName(this.pt)+")#"+_h.Kd(this)},v.prototype.add=v.prototype.add=function(t,e){this.Q&&_h.la(this,t);var i=t;_h.Qa(t)&&(i=_h.Xp(t));var n=this.od[i];return void 0===n?(this.nd++,n=new y(t,e),this.od[i]=n,i=this.Rh,null===i?this.Ca=n:(n.jp=i,i.Xa=n),this.Rh=n,this.Fc(),!0):(n.value=e,!1)},v.prototype.set=v.prototype.set=function(t,e){return this.add(t,e)},v.prototype.addAll=v.prototype.Hc=function(t){if(null===t)return this;if(_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++){var n=_h.Da(t,i);this.add(n.key,n.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},v.prototype.first=v.prototype.first=function(){return this.Ca},v.prototype.any=function(t){for(var e=this.C,i=this.Ca;null!==i;){if(t(i))return!0;this.C!==e&&_h.Na(this),i=i.Xa}return!1},v.prototype.all=function(t){for(var e=this.C,i=this.Ca;null!==i;){if(!t(i))return!1;this.C!==e&&_h.Na(this),i=i.Xa}return!0},v.prototype.each=function(t){for(var e=this.C,i=this.Ca;null!==i;)t(i),this.C!==e&&_h.Na(this),i=i.Xa;return this},v.prototype.map=function(t){for(var e=new v(this.Qh),i=this.C,n=this.Ca;null!==n;)e.add(n.key,t(n)),this.C!==i&&_h.Na(this),n=n.Xa;return e},v.prototype.filter=function(t){for(var e=new v(this.Qh,this.pt),i=this.C,n=this.Ca;null!==n;)t(n)&&e.add(n.key,n.value),this.C!==i&&_h.Na(this),n=n.Xa;return e},v.prototype.concat=function(t){return this.copy().Hc(t)},v.prototype.contains=v.prototype.contains=function(t){var e=t;return(!_h.Qa(t)||void 0!==(e=_h.Kd(t)))&&void 0!==this.od[e]},v.prototype.has=v.prototype.has=function(t){return this.contains(t)},v.prototype.getValue=v.prototype.ja=function(t){var e=t;return _h.Qa(t)&&void 0===(e=_h.Kd(t))?null:(t=this.od[e],void 0===t?null:t.value)},v.prototype.get=v.prototype.get=function(t){return this.ja(t)},v.prototype.remove=v.prototype["delete"]=v.prototype.remove=function(t){if(null===t)return!1;this.Q&&_h.la(this,t);var e=t;if(_h.Qa(t)&&void 0===(e=_h.Kd(t)))return!1;if(void 0===(t=this.od[e]))return!1;var i=t.Xa,n=t.jp;return null!==i&&(i.jp=n),null!==n&&(n.Xa=i),this.Ca===t&&(this.Ca=i),this.Rh===t&&(this.Rh=n),delete this.od[e],this.nd--,this.Fc(),!0},v.prototype.clear=v.prototype.clear=function(){this.Q&&_h.la(this),this.od={},this.nd=0,this.Rh=this.Ca=null,this.Fc()},v.prototype.copy=function(){var t,e=new v(this.Qh,this.pt),i=this.od;for(t in i){var n=i[t];e.add(n.key,n.value)}return e},v.prototype.toArray=v.prototype.ec=function(){var t,e=this.od,i=Array(this.nd),n=0;for(t in e){var o=e[t];i[n]=new y(o.key,o.value),n++}return i},v.prototype.toKeySet=v.prototype.Gj=function(){return new p(this)},_h.u(v,{count:"count"},function(){return this.nd}),_h.u(v,{size:"size"},function(){return this.nd}),_h.u(v,{i:"iterator"},function(){if(0>=this.count)return Jh;var t=this.Ob;return null!==t?(t.reset(),t):new m(this)}),_h.u(v,{sF:"iteratorKeys"},function(){return 0>=this.count?Jh:new d(this)}),_h.u(v,{tF:"iteratorValues"},function(){if(0>=this.count)return Jh;var t=this.Mi;return null!==t?(t.reset(),t):new g(this)}),_h.fa("Point",b),_h.ji(b),_h.$d(b,{x:!0,y:!0}),b.prototype.assign=function(t){this.x=t.x,this.y=t.y},b.prototype.setTo=b.prototype.m=function(t,e){return this.x=t,this.y=e,this},b.prototype.set=b.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},b.prototype.copy=function(){var t=new b;return t.x=this.x,t.y=this.y,t},b.prototype.Ga=function(){return Object.freeze(this),this},b.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},
b.prototype.freeze=function(){return this},b.prototype.Ra=function(){return Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this},b.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new b(i,o)}return new b},b.stringify=function(t){return t.x.toString()+" "+t.y.toString()},b.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},b.prototype.equals=b.prototype.L=function(t){return t instanceof b&&(this.x===t.x&&this.y===t.y)},b.prototype.equalTo=b.prototype.bx=function(t,e){return this.x===t&&this.y===e},b.prototype.equalsApprox=b.prototype.Ic=function(t){return K(this.x,t.x)&&K(this.y,t.y)},b.prototype.add=b.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},b.prototype.subtract=b.prototype.$n=function(t){return this.x-=t.x,this.y-=t.y,this},b.prototype.offset=b.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},b.prototype.rotate=b.prototype.rotate=function(t){if(0===t)return this;var e=this.x,i=this.y;if(0===e&&0===i)return this;var n=0,o=0;return 360<=t?t-=360:0>t&&(t+=360),90===t?(n=0,o=1):180===t?(n=-1,o=0):270===t?(n=0,o=-1):(t=t*Math.PI/180,n=Math.cos(t),o=Math.sin(t)),this.x=n*e-o*i,this.y=o*e+n*i,this},b.prototype.scale=b.prototype.scale=function(t,e){return this.x*=t,this.y*=e,this},b.prototype.distanceSquaredPoint=b.prototype.uf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},b.prototype.distanceSquared=b.prototype.Rp=function(t,e){var i=t-this.x,n=e-this.y;return i*i+n*n},b.prototype.normalize=b.prototype.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},b.prototype.directionPoint=b.prototype.Rb=function(t){return x(t.x-this.x,t.y-this.y)},b.prototype.direction=b.prototype.direction=function(t,e){return x(t-this.x,e-this.y)},b.prototype.projectOntoLineSegment=function(t,e,i,n){return rt(t,e,i,n,this.x,this.y,this),this},b.prototype.projectOntoLineSegmentPoint=function(t,e){return rt(t.x,t.y,e.x,e.y,this.x,this.y,this),this},b.prototype.snapToGrid=function(t,e,i,n){return pt(this.x,this.y,t,e,i,n,this),this},b.prototype.snapToGridPoint=function(t,e){return pt(this.x,this.y,t.x,t.y,e.width,e.height,this),this},b.prototype.setRectSpot=b.prototype.Xn=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},b.prototype.setSpot=b.prototype.Gu=function(t,e,i,n,o){return this.x=t+o.x*i+o.offsetX,this.y=e+o.y*n+o.offsetY,this},b.prototype.transform=function(t){return t.nb(this),this};var Yh;b.distanceLineSegmentSquared=Yh=function(t,e,i,n,o,r){var a=o-i,s=r-n,l=a*a+s*s;i-=t,n-=e;var h=-i*a-n*s;return 0>=h||h>=l?(a=o-t,s=r-e,Math.min(i*i+n*n,a*a+s*s)):(t=a*n-s*i)*t/l};var $h;b.distanceSquared=$h=function(t,e,i,n){return t=i-t,e=n-e,t*t+e*e};var Xh;b.direction=Xh=function(t,e,i,n){return t=i-t,e=n-e,0===t?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)},b.prototype.isReal=b.prototype.H=function(){return isFinite(this.x)&&isFinite(this.y)},_h.fa("Size",k),_h.ji(k),_h.$d(k,{width:!0,height:!0}),k.prototype.assign=function(t){this.width=t.width,this.height=t.height},k.prototype.setTo=k.prototype.m=function(t,e){return this.width=t,this.height=e,this},k.prototype.set=k.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},k.prototype.copy=function(){var t=new k;return t.width=this.width,t.height=this.height,t},k.prototype.Ga=function(){return Object.freeze(this),this},k.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},k.prototype.freeze=function(){return this},k.prototype.Ra=function(){return Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this},k.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new k(i,o)}return new k},k.stringify=function(t){return t.width.toString()+" "+t.height.toString()},k.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},k.prototype.equals=k.prototype.L=function(t){return t instanceof k&&(this.width===t.width&&this.height===t.height)},k.prototype.equalTo=k.prototype.bx=function(t,e){return this.width===t&&this.height===e},k.prototype.equalsApprox=k.prototype.Ic=function(t){return K(this.width,t.width)&&K(this.height,t.height)},k.prototype.isReal=k.prototype.H=function(){return isFinite(this.width)&&isFinite(this.height)},_h.fa("Rect",S),_h.ji(S),_h.$d(S,{x:!0,y:!0,width:!0,height:!0}),S.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},S.prototype.setTo=S.prototype.m=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},S.prototype.set=S.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},S.prototype.setPoint=S.prototype.Ug=function(t){return this.x=t.x,this.y=t.y,this},S.prototype.setSize=function(t){return this.width=t.width,this.height=t.height,this},S.prototype.copy=function(){var t=new S;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},S.prototype.Ga=function(){return Object.freeze(this),this},S.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},S.prototype.freeze=function(){return this},S.prototype.Ra=function(){return Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this},S.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;(n=t[e++])&&(o=parseFloat(n));for(var r=0;""===t[e];)e++;(n=t[e++])&&(r=parseFloat(n));for(var a=0;""===t[e];)e++;return(n=t[e++])&&(a=parseFloat(n)),new S(i,o,r,a)}return new S},S.stringify=function(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()},S.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},S.prototype.equals=S.prototype.L=function(t){return t instanceof S&&(this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height)},S.prototype.equalTo=S.prototype.bx=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},S.prototype.equalsApprox=S.prototype.Ic=function(t){return K(this.x,t.x)&&K(this.y,t.y)&&K(this.width,t.width)&&K(this.height,t.height)},S.prototype.containsPoint=S.prototype.Ha=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},S.prototype.containsRect=S.prototype.wk=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},S.prototype.contains=S.prototype.contains=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},S.prototype.reset=function(){this.height=this.width=this.y=this.x=0},S.prototype.offset=S.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},S.prototype.inflate=S.prototype.xf=function(t,e){return T(this,e,t,e,t)},S.prototype.addMargin=S.prototype.Iw=function(t){return T(this,t.top,t.right,t.bottom,t.left)},S.prototype.subtractMargin=S.prototype.HJ=function(t){return T(this,-t.top,-t.right,-t.bottom,-t.left)},S.prototype.grow=function(t,e,i,n){return T(this,t,e,i,n)},S.prototype.intersectRect=function(t){return L(this,t.x,t.y,t.width,t.height)},S.prototype.intersect=S.prototype.cF=function(t,e,i,n){return L(this,t,e,i,n)},S.prototype.intersectsRect=S.prototype.Tf=function(t){return this.dF(t.x,t.y,t.width,t.height)},S.prototype.intersects=S.prototype.dF=function(t,e,i,n){var o=this.width,r=this.x;return!(Infinity!==o&&Infinity!==i&&(o+=r,i+=t,isNaN(i)||isNaN(o)||r>i||t>o))&&(t=this.height,i=this.y,!(Infinity!==t&&Infinity!==n&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))},S.prototype.unionPoint=S.prototype.ri=function(t){return C(this,t.x,t.y,0,0)},S.prototype.unionRect=S.prototype.Gh=function(t){return C(this,t.x,t.y,t.width,t.height)},S.prototype.union=S.prototype.wG=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),C(this,t,e,i,n)},S.prototype.setSpot=S.prototype.Gu=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this};var Qh;S.contains=Qh=function(t,e,i,n,o,r,a,s){return void 0===a&&(a=0),void 0===s&&(s=0),t<=o&&o+a<=t+i&&e<=r&&r+s<=e+n},S.intersects=function(t,e,i,n,o,r,a,s){return i+=t,a+=o,!(t>a||o>i)&&(t=n+e,s+=r,!(e>s||r>t))},_h.defineProperty(S,{left:"left"},function(){return this.x},function(t){this.x=t}),_h.defineProperty(S,{top:"top"},function(){return this.y},function(t){this.y=t}),_h.defineProperty(S,{right:"right"},function(){return this.x+this.width},function(t){this.x+=t-(this.x+this.width)}),_h.defineProperty(S,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.y+=t-(this.y+this.height)}),_h.defineProperty(S,{position:"position"},function(){return new b(this.x,this.y)},function(t){this.x=t.x,this.y=t.y}),_h.defineProperty(S,{size:"size"},function(){return new k(this.width,this.height)},function(t){this.width=t.width,this.height=t.height}),_h.defineProperty(S,{Hl:"center"},function(){return new b(this.x+this.width/2,this.y+this.height/2)},function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}),_h.defineProperty(S,{ka:"centerX"},function(){return this.x+this.width/2},function(t){this.x=t-this.width/2}),_h.defineProperty(S,{ra:"centerY"},function(){return this.y+this.height/2},function(t){this.y=t-this.height/2}),S.prototype.isReal=S.prototype.H=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},S.prototype.isEmpty=function(){return 0===this.width&&0===this.height},_h.fa("Margin",A),_h.ji(A),_h.$d(A,{top:!0,right:!0,bottom:!0,left:!0}),A.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},A.prototype.setTo=A.prototype.m=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},A.prototype.set=A.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},A.prototype.copy=function(){var t=new A;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},A.prototype.Ga=function(){return Object.freeze(this),this},A.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},A.prototype.freeze=function(){return this},A.prototype.Ra=function(){return Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this},A.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=NaN;""===t[e];)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new A;for(var o=NaN;""===t[e];)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new A(i);for(var r=NaN;""===t[e];)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new A(i,o);for(var a=NaN;""===t[e];)e++;return(n=t[e++])&&(a=parseFloat(n)),isNaN(a)?new A(i,o):new A(i,o,r,a)}return new A},A.stringify=function(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()},A.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},A.prototype.equals=A.prototype.L=function(t){return t instanceof A&&(this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left)},A.prototype.equalTo=A.prototype.bx=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},A.prototype.equalsApprox=A.prototype.Ic=function(t){return K(this.top,t.top)&&K(this.right,t.right)&&K(this.bottom,t.bottom)&&K(this.left,t.left)},A.prototype.isReal=A.prototype.H=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},_h.ji(B),_h.$d(B,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),B.prototype.set=B.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},B.prototype.copy=function(){var t=new B;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},B.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},B.prototype.equals=B.prototype.L=function(t){return t instanceof B&&(this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy)},B.prototype.isIdentity=B.prototype.bu=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},B.prototype.reset=B.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},B.prototype.multiply=B.prototype.multiply=function(t){var e=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,n=this.m12*t.m21+this.m22*t.m22,o=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=r,this},B.prototype.multiplyInverted=B.prototype.BF=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,o=-t.m21*e,r=t.m11*e,a=e*(t.m21*t.dy-t.m22*t.dx),s=e*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*i+this.m22*n,e=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,r=this.m11*a+this.m21*s+this.dx,a=this.m12*a+this.m22*s+this.dy,this.m11=this.m11*i+this.m21*n,this.m12=t,this.m21=e,this.m22=o,this.dx=r,this.dy=a,this},B.prototype.invert=B.prototype.px=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=r,this},B.prototype.rotate=B.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;this.translate(e,i);var n=0,o=0;90===t?(n=0,o=1):180===t?(n=-1,o=0):270===t?(n=0,o=-1):(o=t*Math.PI/180,n=Math.cos(o),o=Math.sin(o)),t=this.m12*n+this.m22*o;var r=this.m11*-o+this.m21*n,a=this.m12*-o+this.m22*n;return this.m11=this.m11*n+this.m21*o,this.m12=t,this.m21=r,this.m22=a,this.translate(-e,-i),this},B.prototype.translate=B.prototype.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},B.prototype.scale=B.prototype.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},B.prototype.transformPoint=B.prototype.nb=function(t){var e=t.x,i=t.y;return t.x=e*this.m11+i*this.m21+this.dx,t.y=e*this.m12+i*this.m22+this.dy,t},B.prototype.invertedTransformPoint=B.prototype.li=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*e,n=this.m11*e,o=e*(this.m12*this.dx-this.m11*this.dy),r=t.x,a=t.y;return t.x=r*this.m22*e+a*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),t.y=r*i+a*n+o,t},B.prototype.transformRect=B.prototype.vG=function(t){var e=t.x,i=t.y,n=e+t.width,o=i+t.height,r=this.m11,a=this.m12,s=this.m21,l=this.m22,h=this.dx,u=this.dy,c=e*r+i*s+h,f=e*a+i*l+u,d=n*r+i*s+h,i=n*a+i*l+u,p=e*r+o*s+h,e=e*a+o*l+u,r=n*r+o*s+h,n=n*a+o*l+u,o=c,a=f,c=Math.min(c,d),o=Math.max(o,d),a=Math.min(a,i),f=Math.max(f,i),c=Math.min(c,p),o=Math.max(o,p),a=Math.min(a,e),f=Math.max(f,e),c=Math.min(c,r),o=Math.max(o,r),a=Math.min(a,n),f=Math.max(f,n);return t.x=c,t.y=a,t.width=o-c,t.height=f-a,t},_h.fa("Spot",D),_h.ji(D),_h.$d(D,{x:!0,y:!0,offsetX:!0,offsetY:!0}),D.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},D.prototype.setTo=D.prototype.m=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},D.prototype.set=D.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},D.prototype.copy=function(){var t=new D;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},D.prototype.Ga=function(){return Object.freeze(this),this},D.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},D.prototype.freeze=function(){return this},D.prototype.Ra=function(){return Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this};var Zh;D.parse=Zh=function(t){if("string"==typeof t){if("None"===(t=t.trim()))return tu;if("TopLeft"===t)return iu;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return nu;if("TopRight"===t)return ou;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return ru;if("Center"===t)return au;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return su;if("BottomLeft"===t)return lu;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return hu;if("BottomRight"===t)return uu;if("TopSide"===t)return bu;if("LeftSide"===t)return xu;if("RightSide"===t)return wu;if("BottomSide"===t)return ku;if("TopBottomSides"===t)return Su;if("LeftRightSides"===t)return Mu;if("TopLeftSides"===t)return Pu;if("TopRightSides"===t)return Tu;if("BottomLeftSides"===t)return Lu;if("BottomRightSides"===t)return Nu;if("NotTopSide"===t)return Cu;if("NotLeftSide"===t)return Au;if("NotRightSide"===t)return Bu;if("NotBottomSide"===t)return Du;if("AllSides"===t)return Fu;if("Default"===t)return eu;t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];void 0!==n&&0<n.length&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;n=t[e++],void 0!==n&&0<n.length&&(o=parseFloat(n));for(var r=0;""===t[e];)e++;n=t[e++],void 0!==n&&0<n.length&&(r=parseFloat(n));for(var a=0;""===t[e];)e++;return n=t[e++],void 0!==n&&0<n.length&&(a=parseFloat(n)),new D(i,o,r,a)}return new D},D.stringify=function(t){return t.fd()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},D.prototype.toString=function(){return this.fd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(tu)?"None":this.L(iu)?"TopLeft":this.L(nu)?"Top":this.L(ou)?"TopRight":this.L(ru)?"Left":this.L(au)?"Center":this.L(su)?"Right":this.L(lu)?"BottomLeft":this.L(hu)?"Bottom":this.L(uu)?"BottomRight":this.L(bu)?"TopSide":this.L(xu)?"LeftSide":this.L(wu)?"RightSide":this.L(ku)?"BottomSide":this.L(Su)?"TopBottomSides":this.L(Mu)?"LeftRightSides":this.L(Pu)?"TopLeftSides":this.L(Tu)?"TopRightSides":this.L(Lu)?"BottomLeftSides":this.L(Nu)?"BottomRightSides":this.L(Cu)?"NotTopSide":this.L(Au)?"NotLeftSide":this.L(Bu)?"NotRightSide":this.L(Du)?"NotBottomSide":this.L(Fu)?"AllSides":this.L(eu)?"Default":"None"},D.prototype.equals=D.prototype.L=function(t){return t instanceof D&&((this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY)},D.prototype.opposite=D.prototype.FF=function(){return new D(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},D.prototype.includesSide=D.prototype.rj=function(t){if(!this.uj())return!1;if(!t.uj())if(t.L(yu))t=xu;else if(t.L(mu))t=wu;else if(t.L(gu))t=bu;else{if(!t.L(vu))return!1;t=ku}return t=t.offsetY,(this.offsetY&t)===t},D.prototype.isSpot=D.prototype.fd=function(){return!isNaN(this.x)&&!isNaN(this.y)},D.prototype.isNoSpot=D.prototype.Od=function(){return isNaN(this.x)||isNaN(this.y)},D.prototype.isSide=D.prototype.uj=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},D.prototype.isNone=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},D.prototype.isDefault=D.prototype.Vc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var tu;D.None=tu=F(new D(0,0,0,0),0).Ga();var eu;D.Default=eu=F(new D(0,0,-1,0),-1).Ga();var iu;D.TopLeft=iu=new D(0,0,0,0).Ga();var nu;D.TopCenter=nu=new D(.5,0,0,0).Ga();var ou;D.TopRight=ou=new D(1,0,0,0).Ga();var ru;D.LeftCenter=ru=new D(0,.5,0,0).Ga();var au;D.Center=au=new D(.5,.5,0,0).Ga();var su;D.RightCenter=su=new D(1,.5,0,0).Ga();var lu;D.BottomLeft=lu=new D(0,1,0,0).Ga();var hu;D.BottomCenter=hu=new D(.5,1,0,0).Ga();var uu;D.BottomRight=uu=new D(1,1,0,0).Ga();var cu;D.MiddleTop=cu=nu;var fu;D.MiddleLeft=fu=ru;var du;D.MiddleRight=du=su;var pu;D.MiddleBottom=pu=hu;var gu;D.Top=gu=nu;var yu;D.Left=yu=ru;var mu;D.Right=mu=su;var vu;D.Bottom=vu=hu;var bu;D.TopSide=bu=F(new D(0,0,1,_h.kd),1).Ga();var xu;D.LeftSide=xu=F(new D(0,0,1,_h.Rc),1).Ga();var wu;D.RightSide=wu=F(new D(0,0,1,_h.$c),1).Ga();var ku;D.BottomSide=ku=F(new D(0,0,1,_h.Zc),1).Ga();var Su;D.TopBottomSides=Su=F(new D(0,0,1,_h.kd|_h.Zc),1).Ga();var Mu;D.LeftRightSides=Mu=F(new D(0,0,1,_h.Rc|_h.$c),1).Ga();var Pu;D.TopLeftSides=Pu=F(new D(0,0,1,_h.kd|_h.Rc),1).Ga();var Tu;D.TopRightSides=Tu=F(new D(0,0,1,_h.kd|_h.$c),1).Ga();var Lu;D.BottomLeftSides=Lu=F(new D(0,0,1,_h.Zc|_h.Rc),1).Ga();var Nu;D.BottomRightSides=Nu=F(new D(0,0,1,_h.Zc|_h.$c),1).Ga();var Cu;D.NotTopSide=Cu=F(new D(0,0,1,_h.Rc|_h.$c|_h.Zc),1).Ga();var Au;D.NotLeftSide=Au=F(new D(0,0,1,_h.kd|_h.$c|_h.Zc),1).Ga();var Bu;D.NotRightSide=Bu=F(new D(0,0,1,_h.kd|_h.Rc|_h.Zc),1).Ga();var Du;D.NotBottomSide=Du=F(new D(0,0,1,_h.kd|_h.Rc|_h.$c),1).Ga();var Fu;D.AllSides=Fu=F(new D(0,0,1,_h.kd|_h.Rc|_h.$c|_h.Zc),1).Ga(),j.prototype.copy=function(){var t=new j;return t.Tb[0]=this.Tb[0],t.Tb[1]=this.Tb[1],t.Tb[2]=this.Tb[2],t.Tb[3]=this.Tb[3],t.Tb[4]=this.Tb[4],t.Tb[5]=this.Tb[5],t},j.prototype.translate=function(t,e){this.Tb[4]+=this.Tb[0]*t+this.Tb[2]*e,this.Tb[5]+=this.Tb[1]*t+this.Tb[3]*e},j.prototype.scale=function(t,e){this.Tb[0]*=t,this.Tb[1]*=t,this.Tb[2]*=e,this.Tb[3]*=e},E.prototype.addColorStop=function(t,e){this.pE.push({offset:t,color:e})},Vh=I.prototype,Vh.arc=function(t,e,i,n,o,r){W(this,t,e,i,n,o,r)},Vh.beginPath=function(){this.path=[]},Vh.bezierCurveTo=function(t,e,i,n,o,r){this.path.push(["C",t,e,i,n,o,r])},Vh.clearRect=function(){},Vh.clip=function(){q(this,"clipPath",this.path,new j)},Vh.closePath=function(){this.path.push(["z"])},Vh.createLinearGradient=function(t,e,i,n){var o=new E("linear");return o.x1=t,o.y1=e,o.x2=i,o.y2=n,o},Vh.createPattern=function(){return null},Vh.createRadialGradient=function(t,e,i,n,o,r){var a=new E("radial");return a.x1=t,a.y1=e,a.r1=i,a.x2=n,a.y2=o,a.r2=r,a},Vh.drawImage=function(t,e,i,n,o,r,a,s,l){var h="";t instanceof HTMLCanvasElement&&(h=t.toDataURL()),t instanceof HTMLImageElement&&(h=t.src),void 0===n&&(r=e,a=i,s=n=t.naturalWidth,l=o=t.naturalHeight),n=n||0,o=o||0,r=r||0,a=a||0,s=s||0,l=l||0,h={x:0,y:0,width:t.naturalWidth,height:t.naturalHeight,href:h,preserveAspectRatio:"xMidYMid slice"},J(n,s)&&J(o,l)||(h.preserveAspectRatio="none");var u="";s/=n,l/=o,0===r&&0===a||(u+=" translate("+r+", "+a+")"),1===s&&1===l||(u+=" scale("+s+", "+l+")"),0===e&&0===i||(u+=" translate("+-e+", "+-i+")"),0===e&&0===i&&n===t.naturalWidth&&o===t.naturalHeight||(t="CLIP"+_h.mm++,r=O(this,"clipPath",{id:t}),r.appendChild(O(this,"rect",{x:e,y:i,width:n,height:o})),this.gm.appendChild(r),h["clip-path"]="url(#"+t+")"),z(this,"image",h,this.uh,u),this.addElement("image",h)},Vh.fill=function(){q(this,"fill",this.path,this.uh)},Vh.Jg=function(){this.Jp?this.clip():this.fill()},Vh.fillRect=function(t,e,i,n){R(this,"fill",[t,e,i,n],this.uh)},Vh.fillText=function(t,e,i){t=[t,e,i],e=this.textAlign,"left"===e?e="start":"right"===e?e="end":"center"===e&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},z(this,"fill",e,this.uh),this.addElement("text",e,t[0])},Vh.lineTo=function(t,e){this.path.push(["L",t,e])},Vh.moveTo=function(t,e){this.path.push(["M",t,e])},Vh.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},Vh.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},Vh.restore=function(){this.uh=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.Jn=t.Jn,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},Vh.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Jn:this.Jn,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.uh.copy())},Vh.setTransform=function(t,e,i,n,o,r){1===t&&0===e&&0===i&&1===n&&0===o&&0===r||H(this,t,e,i,n,o,r)},Vh.scale=function(t,e){this.uh.scale(t,e)},Vh.translate=function(t,e){this.uh.translate(t,e)},Vh.transform=function(){},Vh.stroke=function(){q(this,"stroke",this.path,this.uh)},Vh.Ej=function(){this.Jp||this.stroke()},Vh.strokeRect=function(t,e,i,n){R(this,"stroke",[t,e,i,n],this.uh)},Vh.addElement=function(t,e,i){return t=O(this,t,e,i),0<this.wf.length?this.wf[this.wf.length-1].appendChild(t):this.gm.appendChild(t),this.Ax=t},Vh.$a=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t,e,i,n,o,r="SHADOW"+_h.mm++,a=this.addElement("filter",{id:r,x:"-100%",y:"-100%",width:"300%",height:"300%"},null);t=O(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",JL:this.shadowBlur/2}),e=O(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor}),i=O(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"}),n=O(this,"feOffset",{"in":"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),o=O(this,"feMerge",{}),o.appendChild(O(this,"feMergeNode",{"in":"offsetBlur"})),o.appendChild(O(this,"feMergeNode",{"in":"SourceGraphic"})),a.appendChild(t),a.appendChild(e),a.appendChild(i),a.appendChild(n),a.appendChild(o),0<this.wf.length&&this.wf[this.wf.length-1].setAttributeNS(null,"filter","url(#"+r+")")}},Vh.lB=function(t,e,i){this.Xs=t,this.Ys=e,this.Bg=i},Vh.Yn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},Vh.Zn=function(){this.shadowOffsetX=this.Xs,this.shadowOffsetY=this.Ys,this.shadowBlur=this.Bg},Vh.fA=function(){return!1},Vh.cA=function(){},Vh.Ee=function(){},Vh.by=function(){},I.prototype.rotate=function(){},Vh=V.prototype,Vh.toDataURL=function(t,e){return this.Hd.toDataURL(t,e)},Vh.getBoundingClientRect=function(){return this.Hd.getBoundingClientRect()},Vh.focus=function(){return this.Hd.focus()},Vh.addEventListener=function(t,e,i){this.Hd.addEventListener(t,e,i)},Vh.removeEventListener=function(t,e,i){this.Hd.removeEventListener(t,e,i)},_h.defineProperty(V,{width:"width"},function(){return this.Hd.width},function(t){this.Hd.width=t}),_h.defineProperty(V,{height:"height"},function(){return this.Hd.height},function(t){this.Hd.height=t}),_h.u(V,{style:"style"},function(){return this.Hd.style}),U.prototype.by=function(t){this.ta.uA=t,this.ta.pL=t},_h.defineProperty(U,{fillStyle:"fillStyle"},function(){return this.ta.fillStyle},function(t){this.Ay!==t&&(this.Ay=this.ta.fillStyle=t)}),_h.defineProperty(U,{font:"font"},function(){return this.ta.font},function(t){this.By!==t&&(this.By=this.ta.font=t)}),_h.defineProperty(U,{globalAlpha:"globalAlpha"},function(){return this.ta.globalAlpha},function(t){this.ta.globalAlpha=t}),_h.defineProperty(U,{lineCap:"lineCap"},function(){return this.ta.lineCap},function(t){this.ta.lineCap=t}),_h.defineProperty(U,{Jn:"lineDashOffset"},function(){return this.ta.Jn},function(t){this.ta.Jn=t}),_h.defineProperty(U,{lineJoin:"lineJoin"},function(){return this.ta.lineJoin},function(t){this.ta.lineJoin=t}),_h.defineProperty(U,{lineWidth:"lineWidth"},function(){return this.ta.lineWidth},function(t){this.ta.lineWidth=t}),_h.defineProperty(U,{miterLimit:"miterLimit"},function(){return this.ta.miterLimit},function(t){this.ta.miterLimit=t}),_h.defineProperty(U,{shadowBlur:"shadowBlur"},function(){return this.ta.shadowBlur},function(t){this.ta.shadowBlur=t}),_h.defineProperty(U,{shadowColor:"shadowColor"},function(){return this.ta.shadowColor},function(t){this.ta.shadowColor=t}),_h.defineProperty(U,{shadowOffsetX:"shadowOffsetX"},function(){return this.ta.shadowOffsetX},function(t){this.ta.shadowOffsetX=t}),_h.defineProperty(U,{shadowOffsetY:"shadowOffsetY"},function(){return this.ta.shadowOffsetY},function(t){this.ta.shadowOffsetY=t}),_h.defineProperty(U,{strokeStyle:"strokeStyle"},function(){return this.ta.strokeStyle},function(t){this.Cy!==t&&(this.Cy=this.ta.strokeStyle=t)}),_h.defineProperty(U,{textAlign:"textAlign"},function(){return this.ta.textAlign},function(t){this.ta.textAlign=t}),_h.defineProperty(U,{uA:"imageSmoothingEnabled"},function(){return this.ta.uA},function(t){this.ta.uA=t}),Vh=U.prototype,Vh.arc=function(t,e,i,n,o,r){this.ta.arc(t,e,i,n,o,r)},Vh.beginPath=function(){this.ta.beginPath()},Vh.bezierCurveTo=function(t,e,i,n,o,r){this.ta.bezierCurveTo(t,e,i,n,o,r)},Vh.clearRect=function(t,e,i,n){this.ta.clearRect(t,e,i,n)},Vh.clip=function(){this.ta.clip()},Vh.closePath=function(){this.ta.closePath()},Vh.createLinearGradient=function(t,e,i,n){return this.ta.createLinearGradient(t,e,i,n)},Vh.createPattern=function(t,e){return this.ta.createPattern(t,e)},Vh.createRadialGradient=function(t,e,i,n,o,r){return this.ta.createRadialGradient(t,e,i,n,o,r)},Vh.drawImage=function(t,e,i,n,o,r,a,s,l){void 0===n?this.ta.drawImage(t,e,i):this.ta.drawImage(t,e,i,n,o,r,a,s,l)},Vh.fill=function(){this.ta.fill()},Vh.fillRect=function(t,e,i,n){this.ta.fillRect(t,e,i,n)},Vh.fillText=function(t,e,i){this.ta.fillText(t,e,i)},Vh.getImageData=function(t,e,i,n){return this.ta.getImageData(t,e,i,n)},Vh.lineTo=function(t,e){this.ta.lineTo(t,e)},Vh.measureText=function(t){return this.ta.measureText(t)},Vh.moveTo=function(t,e){this.ta.moveTo(t,e)},Vh.quadraticCurveTo=function(t,e,i,n){this.ta.quadraticCurveTo(t,e,i,n)},Vh.rect=function(t,e,i,n){this.ta.rect(t,e,i,n)},Vh.restore=function(){this.ta.restore()},U.prototype.rotate=function(t){this.ta.rotate(t)},Vh=U.prototype,Vh.save=function(){this.ta.save()},Vh.setTransform=function(t,e,i,n,o,r){this.ta.setTransform(t,e,i,n,o,r)},Vh.scale=function(t,e){this.ta.scale(t,e)},Vh.stroke=function(){this.ta.stroke()},Vh.transform=function(t,e,i,n,o,r){1===t&&0===e&&0===i&&1===n&&0===o&&0===r||this.ta.transform(t,e,i,n,o,r)},Vh.translate=function(t,e){this.ta.translate(t,e)},Vh.Jg=function(t){if(t instanceof mo&&t.type===bf){var e=t.so;t=t.Fy,t>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.Sq?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.Sq?this.clip():this.fill()},Vh.Ej=function(){this.Sq||this.stroke()},_h.defineProperty(U,{Jp:"clipInsteadOfFill"},function(){return this.Sq},function(t){this.Sq=t}),Vh=U.prototype,Vh.lB=function(t,e,i){this.Xs=t,this.Ys=e,this.Bg=i},Vh.Yn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},Vh.Zn=function(){this.shadowOffsetX=this.Xs,this.shadowOffsetY=this.Ys,this.shadowBlur=this.Bg},Vh.fA=function(t,e){var i=this.ta;if(void 0!==i.setLineDash)i.setLineDash(t),i.lineDashOffset=e;else if(void 0!==i.webkitLineDash)i.webkitLineDash=t,i.webkitLineDashOffset=e;else{if(void 0===i.mozDash)return!1;i.mozDash=t,i.mozDashOffset=e}return!0},Vh.cA=function(){var t=this.ta;void 0!==t.setLineDash?(t.setLineDash(_h.io),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=_h.io,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0)},Vh.Ee=function(t){t&&(this.By=""),this.Ay=this.Cy=""};var ju=(Math.sqrt(2)-1)/3*4,Eu=new b(0,0).Ga(),Iu=new S(0,0,0,0).Ga(),Ou=new A(0,0,0,0).Ga(),zu=new A(2,2,2,2).Ga(),Gu=new b(6,6).Ga(),Ru=new b(-Infinity,-Infinity).Ga(),qu=new b(Infinity,Infinity).Ga(),Wu=new k(0,0).Ga(),Hu=new k(1,1).Ga(),Vu=new k(6,6).Ga(),Uu=new k(8,8).Ga(),_u=new k(10,10).Ga(),Ku=new k(Infinity,Infinity).Ga(),Ju=new b(NaN,NaN).Ga(),Yu=new k(NaN,NaN).Ga(),$u=new S(NaN,NaN,NaN,NaN).Ga(),Xu=new D(.156,.156).Ga(),Qu=new D(.844,.844).Ga(),Zu=new n,tc=new n,ec=null;_h.fa("Geometry",mt),_h.ji(mt),mt.prototype.copy=function(){var t=new mt;t.ma=this.ma,t.xc=this.xc,t.Gc=this.Gc,t.yb=this.yb,t.Gb=this.Gb;for(var e=this.Oj.n,i=e.length,n=t.Oj,o=0;o<i;o++){var r=e[o].copy();n.add(r)}return t.wv=this.wv,t.gv.assign(this.gv),t.bb=this.bb,t.lo=this.lo,t.Hq=this.Hq,t.Iq=this.Iq,t.di=this.di.S(),t.ei=this.ei.S(),t.Ro=this.Ro,t.Po=this.Po,t.Ci=this.Ci,t};var ic;mt.Line=ic=_h.p(mt,"Line",0);var nc;mt.Rectangle=nc=_h.p(mt,"Rectangle",1);var oc;mt.Ellipse=oc=_h.p(mt,"Ellipse",2);var rc;mt.Path=rc=_h.p(mt,"Path",3),mt.prototype.Ga=function(){
return this.freeze(),Object.freeze(this),this},mt.prototype.freeze=function(){this.Q=!0;var t=this.dc;t.freeze();for(var t=t.n,e=t.length,i=0;i<e;i++)t[i].freeze();return this},mt.prototype.Ra=function(){Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this.Q=!1;var t=this.dc;t.Ra();for(var t=t.n,e=t.length,i=0;i<e;i++)t[i].Ra();return this},mt.prototype.equalsApprox=mt.prototype.Ic=function(t){if(!(t instanceof mt))return!1;if(this.type!==t.type)return this.type===ic&&t.type===rc?vt(this,t):t.type===ic&&this.type===rc&&vt(t,this);if(this.type===rc){var e=this.dc.n;t=t.dc.n;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Ic(t[n]))return!1;return!0}return K(this.ia,t.ia)&&K(this.ga,t.ga)&&K(this.D,t.D)&&K(this.F,t.F)};var ac;mt.stringify=ac=function(t){return t.toString()},mt.prototype.gc=function(t){t.De===mt?this.type=t:_h.Fj(this,t)},mt.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case ic:return 0>t?"M"+this.ia.toString()+" "+this.ga.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.ia.toFixed(t)+" "+this.ga.toFixed(t)+"L"+this.D.toFixed(t)+" "+this.F.toFixed(t);case nc:var e=new S(this.ia,this.ga,0,0);return e.wG(this.D,this.F,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case oc:if(e=new S(this.ia,this.ga,0,0),e.wG(this.D,this.F,0,0),0>t){var i=e.left.toString()+" "+(e.y+e.height/2).toString(),n=e.right.toString()+" "+(e.y+e.height/2).toString();return"M"+i+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+n+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+i}return i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t),n=e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t),"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case rc:for(var e="",i=this.dc.n,n=i.length,o=0;o<n;o++){var r=i[o];0<o&&(e+=" x "),r.au&&(e+="F "),e+=r.toString(t)}return e;default:return this.type.toString()}},mt.fillPath=function(t){"string"!=typeof t&&_h.yd(t,"string",mt,"fillPath:str"),t=t.split(/[Xx]/);for(var e=t.length,i="",n=0;n<e;n++)var o=t[n],i=null!==o.match(/[Ff]/)?0===n?i+o:i+"X"+(" "===o[0]?"":" ")+o:i+(0===n?"":"X ")+"F"+(" "===o[0]?"":" ")+o;return i};var sc;mt.parse=sc=function(t,e){function i(){return h>=g-1||null!==l[h+1].match(/[A-Za-z]/)}function n(){return h++,l[h]}function o(){var t=new b(parseFloat(n()),parseFloat(n()));return u===u.toLowerCase()&&(t.x=p.x+t.x,t.y=p.y+t.y),t}function r(){return p=o()}function a(){return d=o()}function s(){return"c"!==c.toLowerCase()&&"s"!==c.toLowerCase()?p:new b(2*p.x-d.x,2*p.y-d.y)}void 0===e&&(e=!1),"string"!=typeof t&&_h.yd(t,"string",mt,"parse:str"),t=t.replace(/,/gm," "),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),t=t.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");for(var l=t.split(" "),h=-1,u="",c="",f=new b(0,0),d=new b(0,0),p=new b(0,0),g=l.length,y=_h.s(),m=!1,v=!1,x=!0,w=null;!(h>=g-1);)if(c=u,""!==(u=n()))switch(u.toUpperCase()){case"X":x=!0,v=m=!1;break;case"M":for(w=r(),null===y.Vb||!0===x?(Xr(y,w.x,w.y,m,!1,!v),x=!1):y.moveTo(w.x,w.y),f=p;!i();)w=r(),y.lineTo(w.x,w.y);break;case"L":for(;!i();)w=r(),y.lineTo(w.x,w.y);break;case"H":for(;!i();)p=w=new b((u===u.toLowerCase()?p.x:0)+parseFloat(n()),p.y),y.lineTo(p.x,p.y);break;case"V":for(;!i();)p=w=new b(p.x,(u===u.toLowerCase()?p.y:0)+parseFloat(n())),y.lineTo(p.x,p.y);break;case"C":for(;!i();){var k=o(),S=a(),w=r();ta(y,k.x,k.y,S.x,S.y,w.x,w.y)}break;case"S":for(;!i();)k=s(),S=a(),w=r(),ta(y,k.x,k.y,S.x,S.y,w.x,w.y);break;case"Q":for(;!i();)S=a(),w=r(),ea(y,S.x,S.y,w.x,w.y);break;case"T":for(;!i();)d=S=s(),w=r(),ea(y,S.x,S.y,w.x,w.y);break;case"B":for(;!i();){var w=parseFloat(n()),k=parseFloat(n()),S=parseFloat(n()),M=parseFloat(n()),P=parseFloat(n()),T=P,L=!1;i()||(T=parseFloat(n()),i()||(L=0!==parseFloat(n()))),u===u.toLowerCase()&&(S+=p.x,M+=p.y),y.arcTo(w,k,S,M,P,T,L)}break;case"A":for(;!i();)k=Math.abs(parseFloat(n())),S=Math.abs(parseFloat(n())),M=parseFloat(n()),P=!!parseFloat(n()),T=!!parseFloat(n()),w=r(),ia(y,k,S,M,P,T,w.x,w.y);break;case"Z":w=y.o.dc.n[y.o.dc.length-1],Qr(y),p=f;break;case"F":for(w="",k=1;l[h+k];)if(null!==l[h+k].match(/[Uu]/))k++;else{if(null!==l[h+k].match(/[A-Za-z]/)){w=l[h+k];break}k++}w.match(/[Mm]/)?m=!0:Zr(y);break;case"U":for(w="",k=1;l[h+k];)if(null!==l[h+k].match(/[Ff]/))k++;else{if(null!==l[h+k].match(/[A-Za-z]/)){w=l[h+k];break}k++}w.match(/[Mm]/)?v=!0:y.$a(!1)}if(f=y.o,_h.q(y),e)for(y=f.dc.i;y.next();)w=y.value,w.au=!0;return f},mt.prototype.vx=function(){if(this.bb||this.wv!==this.dc.C)return!0;for(var t=this.dc.n,e=t.length,i=0;i<e;i++)if(t[i].vx())return!0;return!1},mt.prototype.ly=function(){this.bb=!1,this.Hq=this.lo=null,this.Iq=NaN,this.wv=this.dc.C;for(var t=this.dc.n,e=t.length,i=0;i<e;i++)t[i].ly()},mt.prototype.sh=function(){var t=this.gv;t.Ra(),isNaN(this.Ro)||isNaN(this.Po)?t.m(0,0,0,0):t.m(0,0,this.Ro,this.Po),xt(this,t,!1),C(t,0,0,0,0),t.freeze()},mt.prototype.computeBoundsWithoutOrigin=mt.prototype.uH=function(){var t=new S;return xt(this,t,!0),t},mt.prototype.normalize=mt.prototype.normalize=function(){this.Q&&_h.la(this);var t=this.uH();return this.offset(-t.x,-t.y),new b(-t.x,-t.y)},mt.prototype.offset=mt.prototype.offset=function(t,e){return this.Q&&_h.la(this),this.transform(1,0,0,1,t,e),this},mt.prototype.scale=mt.prototype.scale=function(t,e){return this.Q&&_h.la(this),this.transform(t,0,0,e,0,0),this},mt.prototype.rotate=mt.prototype.rotate=function(t,e,i){this.Q&&_h.la(this),void 0===e&&(e=0),void 0===i&&(i=0);var n=_h.Ff();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),_h.ue(n),this},mt.prototype.transform=mt.prototype.transform=function(t,e,i,n,o,r){var a=0,s=0;switch(this.type){case ic:case nc:case oc:a=this.xc,s=this.Gc,this.xc=a*t+s*i+o,this.Gc=a*e+s*n+r,a=this.yb,s=this.Gb,this.yb=a*t+s*i+o,this.Gb=a*e+s*n+r;break;case rc:for(var l=this.dc.n,h=l.length,u=0;u<h;u++){var c=l[u],a=c.ia,s=c.ga;c.ia=a*t+s*i+o,c.ga=a*e+s*n+r;for(var c=c.vb.n,f=c.length,d=0;d<f;d++){var p=c[d];switch(p.type){case hc:case lc:a=p.D,s=p.F,p.D=a*t+s*i+o,p.F=a*e+s*n+r;break;case uc:a=p.sc,s=p.Pc,p.sc=a*t+s*i+o,p.Pc=a*e+s*n+r,a=p.Ah,s=p.Bh,p.Ah=a*t+s*i+o,p.Bh=a*e+s*n+r,a=p.D,s=p.F,p.D=a*t+s*i+o,p.F=a*e+s*n+r;break;case cc:a=p.sc,s=p.Pc,p.sc=a*t+s*i+o,p.Pc=a*e+s*n+r,a=p.D,s=p.F,p.D=a*t+s*i+o,p.F=a*e+s*n+r;break;case fc:a=p.ka,s=p.ra,p.ka=a*t+s*i+o,p.ra=a*e+s*n+r,0!==e&&(a=180*Math.atan2(e,t)/Math.PI,0>a&&(a+=360),p.ye+=a),0>t&&(p.ye=180-p.ye,p.of=-p.of),0>n&&(p.ye=-p.ye,p.of=-p.of),p.radiusX*=Math.sqrt(t*t+i*i),void 0!==p.radiusY&&(p.radiusY*=Math.sqrt(e*e+n*n));break;case dc:a=p.D,s=p.F,p.D=a*t+s*i+o,p.F=a*e+s*n+r,0!==e&&(a=180*Math.atan2(e,t)/Math.PI,0>a&&(a+=360),p.Hj+=a),0>t&&(p.Hj=180-p.Hj,p.Wl=!p.Wl),0>n&&(p.Hj=-p.Hj,p.Wl=!p.Wl),p.radiusX*=Math.sqrt(t*t+i*i),p.radiusY*=Math.sqrt(e*e+n*n);break;default:_h.k("Unknown Segment type: "+p.type)}}}}return this.bb=!0,this},mt.prototype.Ha=function(t,e,i,n){var o=t.x,r=t.y,a=this.cb.x-20;t=t.y;for(var s=0,l=0,h=0,u=0,c=0,f=0,d=this.dc.n,p=d.length,g=0;g<p;g++){var y=d[g];if(y.au){if(i&&y.Ha(o,r,e))return!0;for(var m=y.vb,l=y.ia,h=y.ga,v=l,b=h,x=m.n,w=0;w<=m.length;w++){var k,S;switch(w!==m.length?(k=x[w],S=k.type,c=k.D,f=k.F):(S=hc,c=v,f=b),S){case lc:if(u=wt(o,r,a,t,l,h,v,b),isNaN(u))return!0;s+=u,v=c,b=f;break;case hc:if(u=wt(o,r,a,t,l,h,c,f),isNaN(u))return!0;s+=u;break;case uc:u=ot(l,h,k.sc,k.Pc,k.Ah,k.Bh,c,f,a,t,o,r,.5),s+=u;break;case cc:u=ot(l,h,(l+2*k.sc)/3,(h+2*k.Pc)/3,(2*k.sc+c)/3,(2*k.Pc+f)/3,c,f,a,t,o,r,.5),s+=u;break;case fc:case dc:S=k.type===fc?Lt(k,y):Nt(k,y,l,h);var M=S.length;if(0===M){if(u=wt(o,r,a,t,l,h,k.ka,k.ra),isNaN(u))return!0;s+=u;break}for(var P=null,T=0;T<M;T++){if(P=S[T],0===T){if(u=wt(o,r,a,t,l,h,P[0],P[1]),isNaN(u))return!0;s+=u}u=ot(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],a,t,o,r,.5),s+=u}null!==P&&(c=P[6],f=P[7]);break;default:_h.k("Unknown Segment type: "+k.type)}l=c,h=f}if(0!==s)return!0;s=0}else if(y.Ha(o,r,n?e:e+2))return!0}return 0!==s},mt.prototype.getPointAlongPath=mt.prototype.$H=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new b),this.type===ic)return e.m(this.ia+t*(this.D-this.ia),this.ga+t*(this.F-this.ga)),e;for(var i=this.iA,n=this.kx,o=i.length,r=this.jA*t,a=0,s=0;s<o;s++)for(var l=n[s],h=l.length,u=0;u<h;u++){var c=l[u];if(a+c>=r)return n=(r-a)/c,i=i[s],s=i[2*u],o=i[2*u+1],e.m(s+(i[2*u+2]-s)*n,o+(i[2*u+3]-o)*n),e;a+=c}return e.m(NaN,NaN),e},mt.prototype.getFractionForPoint=mt.prototype.WH=function(t){if(this.type===ic){var e=this.ia,i=this.ga,n=this.D,o=this.F;if(e!==n||i!==o){var r=t.x;t=t.y;var a=0,s=0;return e===n?(i<o?(a=i,s=o):(a=o,s=i),t<=a?a===i?0:1:t>=s?s===i?0:1:Math.abs(t-i)/(s-a)):i===o?(e<n?(a=e,s=n):(a=n,s=e),r<=a?a===e?0:1:r>=s?s===e?0:1:Math.abs(r-e)/(s-a)):((r-e)*(r-e)+(t-i)*(t-i))/((n-e)*(n-e)+(o-i)*(o-i))}}else{if(this.type!==nc){for(var o=this.iA,a=this.kx,s=this.jA,l=_h.K(),i=Infinity,e=n=0,r=o.length,h=v=0,u=0;u<r;u++)for(var c=o[u],f=a[u],d=c.length,p=0;p<d;p+=2){var g=c[p],y=c[p+1];if(0!==p){rt(v,h,g,y,t.x,t.y,l);var m=(l.x-t.x)*(l.x-t.x)+(l.y-t.y)*(l.y-t.y);m<i&&(i=m,n=e,n+=Math.sqrt((l.x-v)*(l.x-v)+(l.y-h)*(l.y-h))),e+=f[(p-2)/2]}v=g,h=y}return _h.v(l),t=n/s,0>t?0:1<t?1:t}if(e=this.ia,i=this.ga,n=this.D,o=this.F,e!==n||i!==o){var a=n-e,s=o-i,l=2*a+2*s,r=t.x;t=t.y,r=Math.min(Math.max(r,e),n),t=Math.min(Math.max(t,i),o);var e=Math.abs(r-e),n=Math.abs(r-n),i=Math.abs(t-i),o=Math.abs(t-o),v=Math.min(e,n,i,o);if(v===i)return r/l;if(v===n)return(a+t)/l;if(v===o)return(2*a+s-r)/l;if(v===e)return(2*a+2*s-t)/l}}return 0},_h.u(mt,{iA:null},function(){return St(this),this.lo}),_h.u(mt,{kx:null},function(){return St(this),this.Hq}),_h.u(mt,{jA:null},function(){var t=this.Iq;if(isNaN(t)){if(this.type===ic)var t=Math.abs(this.D-this.ia),e=Math.abs(this.F-this.ga),t=Math.sqrt(t*t+e*e);else if(this.type===nc)t=Math.abs(this.D-this.ia),e=Math.abs(this.F-this.ga),t=2*t+2*e;else for(var e=this.kx,i=e.length,n=t=0;n<i;n++)for(var o=e[n],r=o.length,a=0;a<r;a++)t+=o[a];this.Iq=t}return t}),_h.defineProperty(mt,{type:"type"},function(){return this.ma},function(t){this.ma!==t&&(this.Q&&_h.la(this,t),this.ma=t,this.bb=!0)}),_h.defineProperty(mt,{ia:"startX"},function(){return this.xc},function(t){this.xc!==t&&(this.Q&&_h.la(this,t),this.xc=t,this.bb=!0)}),_h.defineProperty(mt,{ga:"startY"},function(){return this.Gc},function(t){this.Gc!==t&&(this.Q&&_h.la(this,t),this.Gc=t,this.bb=!0)}),_h.defineProperty(mt,{D:"endX"},function(){return this.yb},function(t){this.yb!==t&&(this.Q&&_h.la(this,t),this.yb=t,this.bb=!0)}),_h.defineProperty(mt,{F:"endY"},function(){return this.Gb},function(t){this.Gb!==t&&(this.Q&&_h.la(this,t),this.Gb=t,this.bb=!0)}),_h.defineProperty(mt,{dc:"figures"},function(){return this.Oj},function(t){this.Oj!==t&&(this.Q&&_h.la(this,t),this.Oj=t,this.bb=!0)}),mt.prototype.add=mt.prototype.add=function(t){return this.Oj.add(t),this},mt.prototype.setSpots=function(t,e,i,n,o,r,a,s){return this.Q&&_h.la(this),this.di=new D(t,e,o,r).freeze(),this.ei=new D(i,n,a,s).freeze(),this},_h.defineProperty(mt,{A:"spot1"},function(){return this.di},function(t){this.Q&&_h.la(this,t),this.di=t.S()}),_h.defineProperty(mt,{B:"spot2"},function(){return this.ei},function(t){this.Q&&_h.la(this,t),this.ei=t.S()}),_h.defineProperty(mt,{Zd:"defaultStretch"},function(){return this.Ci},function(t){this.Q&&_h.la(this,t),this.Ci=t}),_h.u(mt,{cb:"bounds"},function(){return this.vx()&&(this.ly(),this.sh()),this.gv}),_h.fa("PathFigure",Pt),_h.ji(Pt),Pt.prototype.copy=function(){var t=new Pt;t.Bm=this.Bm,t.So=this.So,t.xc=this.xc,t.Gc=this.Gc;for(var e=this.np.n,i=e.length,n=t.np,o=0;o<i;o++){var r=e[o].copy();n.add(r)}return t.tw=this.tw,t.bb=this.bb,t},Pt.prototype.equalsApprox=Pt.prototype.Ic=function(t){if(!(t instanceof Pt&&K(this.ia,t.ia)&&K(this.ga,t.ga)))return!1;var e=this.vb.n;t=t.vb.n;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Ic(t[n]))return!1;return!0},Vh=Pt.prototype,Vh.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.ia.toString()+" "+this.ga.toString():"M"+this.ia.toFixed(t)+" "+this.ga.toFixed(t),i=this.vb.n,n=i.length,o=0;o<n;o++)e+=" "+i[o].toString(t);return e},Vh.freeze=function(){this.Q=!0;var t=this.vb;t.freeze();for(var e=t.n,t=t.length,i=0;i<t;i++)e[i].freeze();return this},Vh.Ra=function(){this.Q=!1;var t=this.vb;t.Ra();for(var t=t.n,e=t.length,i=0;i<e;i++)t[i].Ra();return this},Vh.vx=function(){if(this.bb)return!0;var t=this.vb;if(this.tw!==t.C)return!0;for(var t=t.n,e=t.length,i=0;i<e;i++)if(t[i].bb)return!0;return!1},Vh.ly=function(){this.bb=!1;var t=this.vb;this.tw=t.C;for(var t=t.n,e=t.length,i=0;i<e;i++){var n=t[i];n.bb=!1,n.kg=null}},_h.defineProperty(Pt,{au:"isFilled"},function(){return this.Bm},function(t){this.Q&&_h.la(this,t),this.Bm=t}),_h.defineProperty(Pt,{Zl:"isShadowed"},function(){return this.So},function(t){this.Q&&_h.la(this,t),this.So=t}),_h.defineProperty(Pt,{ia:"startX"},function(){return this.xc},function(t){this.Q&&_h.la(this,t),this.xc=t,this.bb=!0}),_h.defineProperty(Pt,{ga:"startY"},function(){return this.Gc},function(t){this.Q&&_h.la(this,t),this.Gc=t,this.bb=!0}),_h.defineProperty(Pt,{vb:"segments"},function(){return this.np},function(t){this.Q&&_h.la(this,t),this.np=t,this.bb=!0}),Pt.prototype.add=Pt.prototype.add=function(t){return this.np.add(t),this},Pt.prototype.Ha=function(t,e,i){for(var n=this.ia,o=this.ga,r=n,a=o,s=this.vb.n,l=s.length,h=0;h<l;h++){var u=s[h];switch(u.type){case lc:r=u.D,a=u.F,n=u.D,o=u.F;break;case hc:if(Y(n,o,u.D,u.F,i,t,e))return!0;n=u.D,o=u.F;break;case uc:if($(n,o,u.sc,u.Pc,u.Ah,u.Bh,u.D,u.F,.5,t,e,i))return!0;n=u.D,o=u.F;break;case cc:if(tt(n,o,u.sc,u.Pc,u.D,u.F,.5,t,e,i))return!0;n=u.D,o=u.F;break;case fc:case dc:var c=u.type===fc?Lt(u,this):Nt(u,this,n,o),f=c.length;if(0===f){if(Y(n,o,u.ka,u.ra,i,t,e))return!0;n=u.ka,o=u.ra;break}for(var d=null,p=0;p<f;p++)if(d=c[p],0===p&&Y(n,o,d[0],d[1],i,t,e)||$(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,t,e,i))return!0;null!==d&&(n=d[6],o=d[7]);break;default:_h.k("Unknown Segment type: "+u.type)}if(u.sx&&(n!==r||o!==a)&&Y(n,o,r,a,i,t,e))return!0}return!1},_h.fa("PathSegment",Tt),_h.ji(Tt),Tt.prototype.copy=function(){var t=new Tt;return t.ma=this.ma,t.yb=this.yb,t.Gb=this.Gb,t.Bd=this.Bd,t.Ve=this.Ve,t.mh=this.mh,t.Ag=this.Ag,t.Xo=this.Xo,t.qo=this.qo,t.Ph=this.Ph,t.bb=this.bb,t},Tt.prototype.equalsApprox=Tt.prototype.Ic=function(t){if(!(t instanceof Tt)||this.type!==t.type||this.sx!==t.sx)return!1;switch(this.type){case lc:case hc:return K(this.D,t.D)&&K(this.F,t.F);case uc:return K(this.D,t.D)&&K(this.F,t.F)&&K(this.sc,t.sc)&&K(this.Pc,t.Pc)&&K(this.Ah,t.Ah)&&K(this.Bh,t.Bh);case cc:return K(this.D,t.D)&&K(this.F,t.F)&&K(this.sc,t.sc)&&K(this.Pc,t.Pc);case fc:return K(this.ye,t.ye)&&K(this.of,t.of)&&K(this.ka,t.ka)&&K(this.ra,t.ra)&&K(this.radiusX,t.radiusX)&&K(this.radiusY,t.radiusY);case dc:return this.Wl===t.Wl&&this.wx===t.wx&&K(this.Hj,t.Hj)&&K(this.D,t.D)&&K(this.F,t.F)&&K(this.radiusX,t.radiusX)&&K(this.radiusY,t.radiusY);default:return!1}},Tt.prototype.gc=function(t){t.De===Tt?this.type=t:_h.Fj(this,t)},Tt.prototype.toString=function(t){void 0===t&&(t=-1);var e="";switch(this.type){case lc:e=0>t?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(t)+" "+this.F.toFixed(t);break;case hc:e=0>t?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(t)+" "+this.F.toFixed(t);break;case uc:e=0>t?"C"+this.sc.toString()+" "+this.Pc.toString()+" "+this.Ah.toString()+" "+this.Bh.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.sc.toFixed(t)+" "+this.Pc.toFixed(t)+" "+this.Ah.toFixed(t)+" "+this.Bh.toFixed(t)+" "+this.D.toFixed(t)+" "+this.F.toFixed(t);break;case cc:e=0>t?"Q"+this.sc.toString()+" "+this.Pc.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.sc.toFixed(t)+" "+this.Pc.toFixed(t)+" "+this.D.toFixed(t)+" "+this.F.toFixed(t);break;case fc:e=0>t?"B"+this.ye.toString()+" "+this.of.toString()+" "+this.ka.toString()+" "+this.ra.toString()+" "+this.radiusX:"B"+this.ye.toFixed(t)+" "+this.of.toFixed(t)+" "+this.ka.toFixed(t)+" "+this.ra.toFixed(t)+" "+this.radiusX;break;case dc:e=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Hj.toString()+" "+(this.wx?1:0)+" "+(this.Wl?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.Hj.toFixed(t)+" "+(this.wx?1:0)+" "+(this.Wl?1:0)+" "+this.D.toFixed(t)+" "+this.F.toFixed(t);break;default:e=this.type.toString()}return e+(this.Ph?"z":"")};var lc;Tt.Move=lc=_h.p(Tt,"Move",0);var hc;Tt.Line=hc=_h.p(Tt,"Line",1);var uc;Tt.Bezier=uc=_h.p(Tt,"Bezier",2);var cc;Tt.QuadraticBezier=cc=_h.p(Tt,"QuadraticBezier",3);var fc;Tt.Arc=fc=_h.p(Tt,"Arc",4);var dc;Tt.SvgArc=dc=_h.p(Tt,"SvgArc",4),Tt.prototype.freeze=function(){return this.Q=!0,this},Tt.prototype.Ra=function(){return this.Q=!1,this},Tt.prototype.close=Tt.prototype.close=function(){return this.Ph=!0,this},_h.defineProperty(Tt,{sx:"isClosed"},function(){return this.Ph},function(t){this.Ph!==t&&(this.Ph=t,this.bb=!0)}),_h.defineProperty(Tt,{type:"type"},function(){return this.ma},function(t){this.Q&&_h.la(this,t),this.ma=t,this.bb=!0}),_h.defineProperty(Tt,{D:"endX"},function(){return this.yb},function(t){this.Q&&_h.la(this,t),this.yb=t,this.bb=!0}),_h.defineProperty(Tt,{F:"endY"},function(){return this.Gb},function(t){this.Q&&_h.la(this,t),this.Gb=t,this.bb=!0}),_h.defineProperty(Tt,{sc:"point1X"},function(){return this.Bd},function(t){this.Q&&_h.la(this,t),this.Bd=t,this.bb=!0}),_h.defineProperty(Tt,{Pc:"point1Y"},function(){return this.Ve},function(t){this.Q&&_h.la(this,t),this.Ve=t,this.bb=!0}),_h.defineProperty(Tt,{Ah:"point2X"},function(){return this.mh},function(t){this.Q&&_h.la(this,t),this.mh=t,this.bb=!0}),_h.defineProperty(Tt,{Bh:"point2Y"},function(){return this.Ag},function(t){this.Q&&_h.la(this,t),this.Ag=t,this.bb=!0}),_h.defineProperty(Tt,{ka:"centerX"},function(){return this.Bd},function(t){this.Q&&_h.la(this,t),this.Bd=t,this.bb=!0}),_h.defineProperty(Tt,{ra:"centerY"},function(){return this.Ve},function(t){this.Q&&_h.la(this,t),this.Ve=t,this.bb=!0}),_h.defineProperty(Tt,{radiusX:"radiusX"},function(){return this.mh},function(t){0>t&&_h.Ea(t,">= zero",Tt,"radiusX"),this.Q&&_h.la(this,t),this.mh=t,this.bb=!0}),_h.defineProperty(Tt,{radiusY:"radiusY"},function(){return this.Ag},function(t){0>t&&_h.Ea(t,">= zero",Tt,"radiusY"),this.Q&&_h.la(this,t),this.Ag=t,this.bb=!0}),_h.defineProperty(Tt,{ye:"startAngle"},function(){return this.yb},function(t){this.yb!==t&&(this.Q&&_h.la(this,t),t%=360,0>t&&(t+=360),this.yb=t,this.bb=!0)}),_h.defineProperty(Tt,{of:"sweepAngle"},function(){return this.Gb},function(t){this.Q&&_h.la(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Gb=t,this.bb=!0}),_h.defineProperty(Tt,{Wl:"isClockwiseArc"},function(){return this.qo},function(t){this.Q&&_h.la(this,t),this.qo=t,this.bb=!0}),_h.defineProperty(Tt,{wx:"isLargeArc"},function(){return this.Xo},function(t){this.Q&&_h.la(this,t),this.Xo=t,this.bb=!0}),_h.defineProperty(Tt,{Hj:"xAxisRotation"},function(){return this.Bd},function(t){t%=360,0>t&&(t+=360),this.Q&&_h.la(this,t),this.Bd=t,this.bb=!0}),_h.fa("InputEvent",Ct),Ct.prototype.copy=function(){var t=new Ct;return t.Z=this.Z,t.Jz.assign(this.bf),t.Oy.assign(this.ca),t.aw=this.aw,t.dv=this.dv,t.ev=this.ev,t.Qv=this.Qv,t.sv=this.sv,t.Dw=this.Dw,t.fv=this.fv,t.pv=this.pv,t.Mv=this.Mv,t.Bv=this.Bv,t.Jj=this.Jj,t.tr=this.tr,t.Bw=this.Bw,t.Aw=this.Aw,t.Dg=this.Dg,t},Ct.prototype.toString=function(){var t="^";return 0!==this.wd&&(t+="M:"+this.wd),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.Fe&&(t+="C:"+this.Fe),0!==this.Nl&&(t+="D:"+this.Nl),this.Ac&&(t+="h"),this.bubbles&&(t+="b"),null!==this.ca&&(t+="@"+this.ca.toString()),t},_h.defineProperty(Ct,{g:"diagram"},function(){return this.Z},function(t){this.Z=t}),_h.defineProperty(Ct,{bf:"viewPoint"},function(){return this.Jz},function(t){_h.G(t,b,Ct,"viewPoint"),this.Jz.assign(t)}),_h.defineProperty(Ct,{ca:"documentPoint"},function(){return this.Oy},function(t){_h.G(t,b,Ct,"documentPoint"),this.Oy.assign(t)}),Ct.prototype.getMultiTouchViewPoint=Ct.prototype.mx=function(t,e){var i=this.g;return null===i?e:(en(i,this.event,t,e),e)},Ct.prototype.getMultiTouchDocumentPoint=function(t,e){var i=this.g;return null===i?e:(en(i,this.event,t,e),e.assign(i.vB(e)),e)},_h.defineProperty(Ct,{wd:"modifiers"},function(){return this.aw},function(t){this.aw=t}),_h.defineProperty(Ct,{button:"button"},function(){return this.dv},function(t){if(this.dv=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}),_h.defineProperty(Ct,{buttons:"buttons"},function(){return this.ev},function(t){this.ev=t}),_h.defineProperty(Ct,{key:"key"},function(){return this.Qv},function(t){this.Qv=t}),_h.defineProperty(Ct,{Ol:"down"},function(){return this.sv},function(t){this.sv=t}),_h.defineProperty(Ct,{up:"up"},function(){return this.Dw},function(t){this.Dw=t}),_h.defineProperty(Ct,{Fe:"clickCount"},function(){return this.fv},function(t){this.fv=t}),_h.defineProperty(Ct,{Nl:"delta"},function(){return this.pv},function(t){this.pv=t}),_h.defineProperty(Ct,{cu:"isMultiTouch"},function(){return this.Mv},function(t){this.Mv=t}),_h.defineProperty(Ct,{Ac:"handled"},function(){return this.Bv},function(t){this.Bv=t}),_h.defineProperty(Ct,{bubbles:"bubbles"},function(){return this.Jj},function(t){this.Jj=t}),_h.defineProperty(Ct,{event:"event"},function(){return this.tr},function(t){this.tr=t}),_h.u(Ct,{vj:"isTouchEvent"},function(){var e=t.TouchEvent;return!!(e&&this.event instanceof e)||(e=t.PointerEvent)&&this.event instanceof e&&"touch"===this.event.pointerType}),_h.u(Ct,{Fk:"isMac"},function(){return _h.Fk}),_h.defineProperty(Ct,{timestamp:"timestamp"},function(){return this.Bw},function(t){this.Bw=t}),_h.defineProperty(Ct,{Vg:"targetDiagram"},function(){return this.Aw},function(t){this.Aw=t}),_h.defineProperty(Ct,{Pe:"targetObject"},function(){return this.Dg},function(t){this.Dg=t}),_h.defineProperty(Ct,{control:"control"},function(){return 0!=(1&this.wd)},function(t){this.wd=t?1|this.wd:-2&this.wd}),_h.defineProperty(Ct,{shift:"shift"},function(){return 0!=(4&this.wd)},function(t){this.wd=t?4|this.wd:-5&this.wd}),_h.defineProperty(Ct,{alt:"alt"},function(){return 0!=(2&this.wd)},function(t){this.wd=t?2|this.wd:-3&this.wd}),_h.defineProperty(Ct,{lu:"meta"},function(){return 0!=(8&this.wd)},function(t){this.wd=t?8|this.wd:-9&this.wd}),_h.defineProperty(Ct,{left:"left"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?0===this.button:0!=(1&this.buttons)},function(t){this.buttons=t?1|this.buttons:-2&this.buttons}),_h.defineProperty(Ct,{right:"right"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?2===this.button:0!=(2&this.buttons)},function(t){this.buttons=t?2|this.buttons:-3&this.buttons}),_h.defineProperty(Ct,{mL:"middle"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?1===this.button:0!=(4&this.buttons)},function(t){this.buttons=t?4|this.buttons:-5&this.buttons}),_h.fa("DiagramEvent",At),At.prototype.copy=function(){var t=new At;return t.Z=this.Z,t.Qb=this.Qb,t.yw=this.yw,t.hw=this.hw,t.Pq=this.Pq,t},At.prototype.toString=function(){var t="*"+this.name;return null!==this.nB&&(t+=":"+this.nB.toString()),null!==this.SA&&(t+="("+this.SA.toString()+")"),t},_h.defineProperty(At,{g:"diagram"},function(){return this.Z},function(t){this.Z=t}),_h.defineProperty(At,{name:"name"},function(){return this.Qb},function(t){this.Qb=t}),_h.defineProperty(At,{nB:"subject"},function(){return this.yw},function(t){this.yw=t}),_h.defineProperty(At,{SA:"parameter"},function(){return this.hw},function(t){this.hw=t}),_h.defineProperty(At,{cancel:"cancel"},function(){return this.Pq},function(t){this.Pq!==t&&_h.Ft("DiagramEvent.cancel","2.0"),this.Pq=t}),_h.fa("ChangedEvent",Bt);var pc;Bt.Transaction=pc=_h.p(Bt,"Transaction",-1);var gc;Bt.Property=gc=_h.p(Bt,"Property",0);var yc;Bt.Insert=yc=_h.p(Bt,"Insert",1);var mc;Bt.Remove=mc=_h.p(Bt,"Remove",2),Bt.prototype.clear=Bt.prototype.clear=function(){this.ps=this.qs=this.us=this.vs=this.ts=this.Z=this.ke=null},Bt.prototype.copy=function(){var t=new Bt;t.Qq=this.Qq,t.$v=this.$v,t.Tm=this.Tm,t.ke=this.ke,t.Z=this.Z,t.ts=this.ts;var e=this.vs;return t.vs=_h.Qa(e)&&"function"==typeof e.S?e.S():e,e=this.us,t.us=_h.Qa(e)&&"function"==typeof e.S?e.S():e,e=this.qs,t.qs=_h.Qa(e)&&"function"==typeof e.S?e.S():e,e=this.ps,t.ps=_h.Qa(e)&&"function"==typeof e.S?e.S():e,t},Bt.prototype.gc=function(t){t.De===Bt?this.yc=t:_h.Fj(this,t)},Bt.prototype.toString=function(){var t="",t=this.yc===pc?t+"* ":this.yc===gc?t+(null!==this.ba?"!m":"!d"):t+(null!==this.ba?"!m":"!d")+this.yc;return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.nf&&this.nf!==this.propertyName&&(t+=" "+this.nf),t+=": ",this.yc===pc?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=wc(this.object)),null!==this.oldValue&&(t+="  old: "+wc(this.oldValue)),null!==this.Bj&&(t+=" "+this.Bj),null!==this.newValue&&(t+="  new: "+wc(this.newValue)),null!==this.Aj&&(t+=" "+this.Aj)),t},Bt.prototype.getValue=Bt.prototype.ja=function(t){return t?this.oldValue:this.newValue},Bt.prototype.getParam=function(t){return t?this.Bj:this.Aj},Bt.prototype.canUndo=Bt.prototype.canUndo=function(){return null!==this.ba||null!==this.g},Bt.prototype.undo=Bt.prototype.undo=function(){this.canUndo()&&(null!==this.ba?this.ba.nn(this,!0):null!==this.g&&this.g.nn(this,!0))},Bt.prototype.canRedo=Bt.prototype.canRedo=function(){return null!==this.ba||null!==this.g},Bt.prototype.redo=Bt.prototype.redo=function(){this.canRedo()&&(null!==this.ba?this.ba.nn(this,!1):null!==this.g&&this.g.nn(this,!1))},_h.defineProperty(Bt,{ba:"model"},function(){return this.ke},function(t){this.ke=t}),_h.defineProperty(Bt,{g:"diagram"},function(){return this.Z},function(t){this.Z=t}),_h.defineProperty(Bt,{yc:"change"},function(){return this.Qq},function(t){this.Qq=t}),_h.defineProperty(Bt,{nf:"modelChange"},function(){return this.$v},function(t){this.$v=t}),_h.defineProperty(Bt,{propertyName:"propertyName"},function(){return this.Tm},function(t){this.Tm=t}),_h.u(Bt,{rF:"isTransactionFinished"},function(){return this.Qq===pc&&("CommittedTransaction"===this.Tm||"FinishedUndo"===this.Tm||"FinishedRedo"===this.Tm)}),_h.defineProperty(Bt,{object:"object"},function(){return this.ts},function(t){this.ts=t}),_h.defineProperty(Bt,{oldValue:"oldValue"},function(){return this.vs},function(t){this.vs=t}),_h.defineProperty(Bt,{Bj:"oldParam"},function(){return this.us},function(t){this.us=t}),_h.defineProperty(Bt,{newValue:"newValue"},function(){return this.qs},function(t){this.qs=t}),_h.defineProperty(Bt,{Aj:"newParam"},function(){return this.ps},function(t){this.ps=t}),_h.fa("Model",Dt),Dt.prototype.cloneProtected=function(t){t.Qb=this.Qb,t.er=this.er,t.Ji=this.Ji,t.fk=this.fk,t.ap=this.ap,t.vo=this.vo,t.Xq=this.Xq,t.Wq=this.Wq,t.Gq=this.Gq,t.Om=this.Om},Dt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Dt.prototype.clear=Dt.prototype.clear=function(){this.Ce=[],this.Ec.clear(),this.Di.clear(),this.oa.clear()},Vh=Dt.prototype,Vh.toString=function(t){if(void 0===t&&(t=0),1<t)return this.qB();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:",t=this.dg;for(var i=_h.Ya(t),n=0;n<i;n++)var o=_h.Da(t,n),e=e+" "+this.ub(o)+":"+wc(o)}return e},Vh.eo=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.Ll&&(t+=',\n  "dataFormat": '+this.quote(this.Ll)),this.eb&&(t+=',\n  "isReadOnly": '+this.eb),"key"!==this.am&&"string"==typeof this.am&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.am)),this.Zz&&(t+=',\n  "copiesArrays": true'),this.Yz&&(t+=',\n  "copiesArrayObjects": true'),"category"!==this.Tn&&"string"==typeof this.Tn&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.Tn)),t},Vh.vu=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.Ll=t.dataFormat),t.isReadOnly&&(this.eb=t.isReadOnly),t.nodeKeyProperty&&(this.am=t.nodeKeyProperty),t.copiesArrays&&(this.Zz=t.copiesArrays),t.copiesArrayObjects&&(this.Yz=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Tn=t.nodeCategoryProperty)},Vh.DB=function(){var t,e=this.Gk,i=!1;for(t in e)if(!zt(t,e[t])){i=!0;break}return e="",i&&(e=Ft(this)),e+',\n  "nodeDataArray": '+Ot(this,this.dg,!0)},Vh.VA=function(t){jt(this,t),t=t.nodeDataArray,_h.isArray(t)&&(this.yu(t),this.dg=t)},Vh.EB=function(t){It(this,t,"nodeKeyProperty"),this instanceof ee&&It(this,t,"nodeParentKeyProperty");for(var e=new f,i=new f,n=(new f).Hc(this.Ec.sF),o=new v,r=t.dg,a=0;a<r.length;a++){var s=r[a],l=t.ub(s);if(void 0!==l){n.remove(l);var h=this.te(l);null===h?(e.add(l),i.add(s)):Et(this,h,s,o)||i.add(s)}else this.HA(s),l=this.ub(s),e.add(l),i.add(s)}return r="",Et(this,this.Gk,t.Gk,o)||(r+=Ft(this)),0<e.count&&(r+=this.wy+Ot(this,e.ec(),!0)),0<i.count&&(r+=this.MB+Ot(this,i.ec(),!0)),0<n.count&&(r+=this.yy+Ot(this,n.ec(),!0)),r},Dt.prototype.computeJsonDifference=Dt.prototype.computeJSONDifference=function(t,e){return _h.G(t,Dt,Dt,"computeJsonDifference:newmodel"),void 0===e&&(e=this.constructor===Dt?"go.Model":this.constructor===Xt?"go.GraphLinksModel":this.constructor===ee?"go.TreeModel":_h.hf(this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.eo()+this.EB(t)+"}"},Vh=Dt.prototype,Vh.wy=',\n  "insertedNodeKeys": ',Vh.MB=',\n  "modifiedNodeData": ',Vh.yy=',\n  "removedNodeKeys": ',Vh.CB=function(t,e){var i=this,n=!1,o=new f,r=new f,a=new f;t.Qf.each(function(t){t.ba===i&&("nodeDataArray"===t.nf?t.yc===yc?o.add(t.newValue):t.yc===mc&&a.add(t.oldValue):i.Ge(t.object)?r.add(t.object):i.Gk===t.object&&t.yc===gc&&(n=!0))});var s=new f;o.each(function(t){s.add(i.ub(t)),e||r.add(t)});var l=new f;a.each(function(t){l.add(i.ub(t)),e&&r.add(t)});var h="";return n&&(h+=Ft(this)),0<s.count&&(h+=(e?this.yy:this.wy)+Ot(this,s.ec(),!0)),0<r.count&&(h+=this.MB+Ot(this,r.ec(),!0)),0<l.count&&(h+=(e?this.wy:this.yy)+Ot(this,l.ec(),!0)),h},Vh.UA=function(t){jt(this,t);var e=t.insertedNodeKeys;if(_h.isArray(e))for(var i=_h.Ya(e),n=0;n<i;n++){var o=_h.Da(e,n),r=this.te(o);null===r&&(r=this.copyNodeData({}),this.ey(r,o),this.Cl(r))}if(o=t.modifiedNodeData,_h.isArray(o))for(i=_h.Ya(o),n=0;n<i;n++)if(e=_h.Da(o,n),r=this.ub(e),null!==(r=this.te(r)))for(var a in e)"__gohashid"!==a&&a!==this.am&&this.setDataProperty(r,a,e[a]);if(t=t.removedNodeKeys,_h.isArray(t))for(i=_h.Ya(t),n=0;n<i;n++)o=_h.Da(t,n),null!==(r=this.te(o))&&this.Wx(r)},Dt.prototype.toIncrementalJson=Dt.prototype.toIncrementalJSON=function(t,e){_h.G(t,Bt,Dt,"toIncrementalJson:e"),t.yc!==pc&&_h.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.rF&&i instanceof oe?(void 0===e&&(e=this.constructor===Dt?"go.Model":this.constructor===Xt?"go.GraphLinksModel":this.constructor===ee?"go.TreeModel":_h.hf(this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.eo()+this.CB(i,"FinishedUndo"===t.propertyName)+"}"):'{ "incremental": 0 }'},Dt.prototype.toJson=Dt.prototype.toJSON=Dt.prototype.qB=function(t){return void 0===t&&(t=this.constructor===Dt?"go.Model":this.constructor===Xt?"go.GraphLinksModel":this.constructor===ee?"go.TreeModel":_h.hf(this)),'{ "class": '+this.quote(t)+this.eo()+this.DB()+"}"},Dt.prototype.applyIncrementalJson=Dt.prototype.applyIncrementalJSON=function(e){var i=null;if("string"==typeof e)if(t.JSON&&t.JSON.parse)try{i=t.JSON.parse(e)}catch(t){}else _h.trace("WARNING: no JSON.parse available");else"object"==typeof e?i=e:_h.k("Unable to modify a Model from: "+e);var n=i.incremental;"number"!=typeof n&&_h.k("Unable to apply non-incremental changes to Model: "+e),0!==n&&(this.Ub("applyIncrementalJson"),this.UA(i),this.Gd("applyIncrementalJson"))},Dt.fromJson=Dt.fromJSON=function(e,i){void 0===i&&(i=null),null!==i&&_h.G(i,Dt,Dt,"fromJson:model");var n=null;if("string"==typeof e)if(t.JSON&&t.JSON.parse)try{
n=t.JSON.parse(e)}catch(t){}else _h.trace("WARNING: no JSON.parse available");else"object"==typeof e?n=e:_h.k("Unable to construct a Model from: "+e);if(null===i){var o;o=null;var r=n["class"];if("string"==typeof r)try{var a=null;0===r.indexOf("go.")?(r=r.substr(3),a=Uh[r]):void 0===(a=Uh[r])&&(a=t[r]),"function"==typeof a&&(o=new a)}catch(t){}null===o||o instanceof Dt?i=o:_h.k("Unable to construct a Model of declared class: "+n["class"])}return null===i&&(i=new Xt),i.vu(n),i.VA(n),i},Dt.prototype.replaceJsonObjects=Dt.prototype.yu=function(t){if(_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++){var n=_h.Da(t,i);_h.Qa(n)&&_h.mE(t,i,this.yu(n))}else if(_h.Qa(t)){for(i in t)n=t[i],_h.Qa(n)&&(n=this.yu(n),t[i]=n);if("object"==typeof t){if(n=t,"NaN"===(i=t["class"]))n=NaN;else if("Date"===i)n=new Date(t.value);else if("go.Point"===i)n=new b(qt(t.x),qt(t.y));else if("go.Size"===i)n=new k(qt(t.width),qt(t.height));else if("go.Rect"===i)n=new S(qt(t.x),qt(t.y),qt(t.width),qt(t.height));else if("go.Margin"===i)n=new A(qt(t.top),qt(t.right),qt(t.bottom),qt(t.left));else if("go.Spot"===i)n="string"==typeof t["enum"]?Zh(t["enum"]):new D(qt(t.x),qt(t.y),qt(t.offsetX),qt(t.offsetY));else if("go.Brush"===i){if(n=new mo,n.type=Kh(mo,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof D&&(n.start=t.start),t.end instanceof D&&(n.end=t.end),"number"==typeof t.startRadius&&(n.Ju=qt(t.startRadius)),"number"==typeof t.endRadius&&(n.Ht=qt(t.endRadius)),t=t.colorStops,_h.Qa(t))for(e in t)n.addColorStop(parseFloat(e),t[e])}else"go.Geometry"===i?(e=null,e="string"==typeof t.path?sc(t.path):new mt,e.type=Kh(mt,t.type),"number"==typeof t.startX&&(e.ia=qt(t.startX)),"number"==typeof t.startY&&(e.ga=qt(t.startY)),"number"==typeof t.endX&&(e.D=qt(t.endX)),"number"==typeof t.endY&&(e.F=qt(t.endY)),t.spot1 instanceof D&&(e.A=t.spot1),t.spot2 instanceof D&&(e.B=t.spot2),n=e):"go.EnumValue"===i&&(e=t.classType,0===e.indexOf("go.")&&(e=e.substr(3)),n=Kh(Uh[e],t.name));t=n}}return t},Dt.prototype.quote=function(t){for(var e="",i=t.length,n=0;n<i;n++){var o=t[n];if('"'===o||"\\"===o)e+="\\"+o;else if("\b"===o)e+="\\b";else if("\f"===o)e+="\\f";else if("\n"===o)e+="\\n";else if("\r"===o)e+="\\r";else if("\t"===o)e+="\\t";else var r=t.charCodeAt(n),e=16>r?e+"\\u000"+t.charCodeAt(n).toString(16):32>r?e+"\\u00"+t.charCodeAt(n).toString(16):8232===r?e+"\\u2028":8233===r?e+"\\u2029":e+o}return'"'+e+'"'},Dt.prototype.writeJsonValue=Dt.prototype.Ou=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?Infinity===t?"9e9999":-Infinity===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Ou(t.valueOf()):_h.isArray(t)?Ot(this,t):_h.Qa(t)?Rt(this,t):"function"==typeof t?"null":t.toString()},_h.defineProperty(Dt,{name:"name"},function(){return this.Qb},function(t){var e=this.Qb;e!==t&&(_h.j(t,"string",Dt,"name"),this.Qb=t,this.h("name",e,t))}),_h.defineProperty(Dt,{Ll:"dataFormat"},function(){return this.er},function(t){var e=this.er;e!==t&&(_h.j(t,"string",Dt,"dataFormat"),this.er=t,this.h("dataFormat",e,t))}),_h.defineProperty(Dt,{eb:"isReadOnly"},function(){return this.Ji},function(t){var e=this.Ji;e!==t&&(_h.j(t,"boolean",Dt,"isReadOnly"),this.Ji=t,this.h("isReadOnly",e,t))}),_h.defineProperty(Dt,{Gk:"modelData"},function(){return this.lz},function(t){var e=this.lz;e!==t&&(_h.j(t,"object",Dt,"modelData"),this.lz=t,this.h("modelData",e,t),this.Hb(t))}),Dt.prototype.addChangedListener=Dt.prototype.fn=function(t){_h.j(t,"function",Dt,"addChangedListener:listener"),null===this.bk&&(this.bk=new u("function")),this.bk.add(t)},Dt.prototype.removeChangedListener=Dt.prototype.wu=function(t){_h.j(t,"function",Dt,"removeChangedListener:listener"),null!==this.bk&&(this.bk.remove(t),0===this.bk.count&&(this.bk=null))},Dt.prototype.Qw=function(t){if(this.wb||this.oa.$E(t),null!==this.bk){var e=this.bk,i=e.length;if(1===i)(e=e.da(0))(t);else if(0!==i)for(var n=e.ec(),o=0;o<i;o++)(e=n[o])(t)}},Dt.prototype.raiseChangedEvent=Dt.prototype.Xc=function(t,e,i,n,o,r,a){Wt(this,"",t,e,i,n,o,r,a)},Dt.prototype.raiseChanged=Dt.prototype.h=function(t,e,i,n,o){Wt(this,"",gc,t,this,e,i,n,o)},Dt.prototype.raiseDataChanged=Dt.prototype.TA=function(t,e,i,n,o,r){Wt(this,"",gc,e,t,i,n,o,r)},_h.defineProperty(Dt,{oa:"undoManager"},function(){return this.Iz},function(t){var e=this.Iz;e!==t&&(_h.G(t,re,Dt,"undoManager"),null!==e&&e.kJ(this),this.Iz=t,null!==t&&t.cH(this))}),_h.defineProperty(Dt,{wb:"skipsUndoManager"},function(){return this.cj},function(t){_h.j(t,"boolean",Dt,"skipsUndoManager"),this.cj=t}),Dt.prototype.nn=function(t,e){if(null!==t&&t.ba===this)if(t.yc===gc){var i=t.object,n=t.propertyName,o=t.ja(e);_h.Ma(i,n,o)}else t.yc===yc?(i=t.Aj,"nodeDataArray"===t.nf?(n=t.newValue,_h.Qa(n)&&"number"==typeof i&&(o=this.ub(n),e?(_h.Da(this.Ce,i)===n&&_h.Hg(this.Ce,i),void 0!==o&&this.Ec.remove(o)):(_h.Da(this.Ce,i)!==n&&_h.qh(this.Ce,i,n),void 0!==o&&this.Ec.add(o,n)))):""===t.nf?(n=t.object,!_h.isArray(n)&&t.propertyName&&(n=_h.sb(t.object,t.propertyName)),_h.isArray(n)&&"number"==typeof i&&(o=t.newValue,e?_h.Hg(n,i):_h.qh(n,i,o))):_h.k("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.yc===mc?(i=t.Bj,"nodeDataArray"===t.nf?(n=t.oldValue,_h.Qa(n)&&"number"==typeof i&&(o=this.ub(n),e?(_h.Da(this.Ce,i)!==n&&_h.qh(this.Ce,i,n),void 0!==o&&this.Ec.add(o,n)):(_h.Da(this.Ce,i)===n&&_h.Hg(this.Ce,i),void 0!==o&&this.Ec.remove(o)))):""===t.nf?(n=t.object,!_h.isArray(n)&&t.propertyName&&(n=_h.sb(t.object,t.propertyName)),_h.isArray(n)&&"number"==typeof i&&(o=t.oldValue,e?_h.qh(n,i,o):_h.Hg(n,i))):_h.k("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.yc!==pc&&_h.k("unknown ChangedEvent: "+t.toString())},Dt.prototype.startTransaction=Dt.prototype.Ub=function(t){return this.oa.Ub(t)},Dt.prototype.commitTransaction=Dt.prototype.Gd=function(t){return this.oa.Gd(t)},Dt.prototype.rollbackTransaction=Dt.prototype.mq=function(){return this.oa.mq()},Dt.prototype.updateTargetBindings=Dt.prototype.Hb=function(t,e){void 0===e&&(e=""),Wt(this,"SourceChanged",pc,e,t,null,null)},_h.defineProperty(Dt,{am:"nodeKeyProperty"},function(){return this.fk},function(t){var e=this.fk;e!==t&&(Ht(t,Dt,"nodeKeyProperty"),""===t&&_h.k("Model.nodeKeyProperty may not be the empty string"),0<this.Ec.count&&_h.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.fk=t,this.h("nodeKeyProperty",e,t))}),Dt.prototype.getKeyForNodeData=Dt.prototype.ub=function(t){if(null!==t){var e=this.fk;if(""!==e&&void 0!==(e=_h.sb(t,e))){if(Vt(e))return e;_h.k("Key value for node data "+t+" is not a number or a string: "+e)}}},Dt.prototype.setKeyForNodeData=Dt.prototype.ey=function(t,e){if(void 0!==e&&null!==e&&Vt(e)||_h.yd(e,"number or string",Dt,"setKeyForNodeData:key"),null!==t){var i=this.fk;if(""!==i)if(this.Ge(t)){var n=_h.sb(t,i);n!==e&&null===this.te(e)&&(_h.Ma(t,i,e),this.Ec.remove(n),this.Ec.add(e,t),Wt(this,"nodeKey",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i),this.xu(n,e))}else _h.Ma(t,i,e)}},_h.defineProperty(Dt,{fL:"makeUniqueKeyFunction"},function(){return this.ap},function(t){var e=this.ap;e!==t&&(null!==t&&_h.j(t,"function",Dt,"makeUniqueKeyFunction"),this.ap=t,this.h("makeUniqueKeyFunction",e,t))}),Dt.prototype.containsNodeData=Dt.prototype.Ge=function(t){var e=this.ub(t);return void 0!==e&&this.Ec.ja(e)===t},Dt.prototype.findNodeDataForKey=Dt.prototype.te=function(t){return null===t&&_h.k("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Vt(t)?this.Ec.ja(t):null},_h.defineProperty(Dt,{dg:"nodeDataArray"},function(){return this.Ce},function(t){var e=this.Ce;if(e!==t){_h.Sz(t,Dt,"nodeDataArray"),this.Ec.clear(),this.xB();for(var i=_h.Ya(t),n=0;n<i;n++){var o=_h.Da(t,n);if(!_h.Qa(o))return void _h.k("Model.nodeDataArray must only contain Objects, not: "+o);_h.Xp(o)}this.Ce=t;for(var r=new u(Object),n=0;n<i;n++){var o=_h.Da(t,n),a=this.ub(o);void 0===a?r.add(o):null!==this.Ec.ja(a)?r.add(o):this.Ec.add(a,o)}for(n=r.i;n.next();)o=n.value,this.HA(o),void 0!==(r=this.ub(o))&&this.Ec.add(r,o);for(Wt(this,"nodeDataArray",gc,"nodeDataArray",this,e,t),n=0;n<i;n++)o=_h.Da(t,n),this.lq(o),this.kq(o);this.oE(),_h.uI(t)||(this.eb=!0)}}),Dt.prototype.makeNodeDataKeyUnique=Dt.prototype.HA=function(t){if(null!==t){var e=this.fk;if(""!==e){var i=this.ub(t);if(void 0===i||this.Ec.contains(i)){var n=this.ap;if(null!==n&&void 0!==(i=n(this,t))&&null!==i&&!this.Ec.contains(i))return void _h.Ma(t,e,i);if("string"==typeof i){for(n=2;this.Ec.contains(i+n);)n++;_h.Ma(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(n=-this.Ec.count-1;this.Ec.contains(n);)n--;_h.Ma(t,e,n)}else _h.k("Model.getKeyForNodeData returned something other than a string or a number: "+i)}}}},Dt.prototype.addNodeData=Dt.prototype.Cl=function(t){null!==t&&(_h.Xp(t),this.Ge(t)||Ut(this,t,!0))},Dt.prototype.addNodeDataCollection=function(t){if(_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++)this.Cl(_h.Da(t,i));else for(t=t.i;t.next();)this.Cl(t.value)},Dt.prototype.removeNodeData=Dt.prototype.Wx=function(t){null!==t&&_t(this,t,!0)},Dt.prototype.removeNodeDataCollection=function(t){if(_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++)this.Wx(_h.Da(t,i));else for(t=t.i;t.next();)this.Wx(t.value)},Vh=Dt.prototype,Vh.xu=function(t,e){var i=Yt(this,t);i instanceof f&&this.Di.add(e,i)},Vh.xB=function(){},Vh.lq=function(){},Vh.kq=function(){},Vh.Mu=function(){},Dt.prototype.clearUnresolvedReferences=Dt.prototype.oE=function(t){void 0===t?this.Di.clear():this.Di.remove(t)},_h.defineProperty(Dt,{AK:"copyNodeDataFunction"},function(){return this.vo},function(t){var e=this.vo;e!==t&&(null!==t&&_h.j(t,"function",Dt,"copyNodeDataFunction"),this.vo=t,this.h("copyNodeDataFunction",e,t))}),_h.defineProperty(Dt,{Zz:"copiesArrays"},function(){return this.Xq},function(t){var e=this.Xq;e!==t&&(null!==t&&_h.j(t,"boolean",Dt,"copiesArrays"),this.Xq=t,this.h("copiesArrays",e,t))}),_h.defineProperty(Dt,{Yz:"copiesArrayObjects"},function(){return this.Wq},function(t){var e=this.Wq;e!==t&&(null!==t&&_h.j(t,"boolean",Dt,"copiesArrayObjects"),this.Wq=t,this.h("copiesArrayObjects",e,t))}),Dt.prototype.copyNodeData=function(t){if(null===t)return null;var e=null,e=this.vo,e=null!==e?e(t,this):$t(this,t,!0);return _h.Qa(e)&&_h.mc(e),e},_h.defineProperty(Dt,{eH:"afterCopyFunction"},function(){return this.Gq},function(t){var e=this.Gq;e!==t&&(null!==t&&_h.j(t,"function",Dt,"afterCopyFunction"),this.Gq=t,this.h("afterCopyFunction",e,t))});var vc=!1;Dt.prototype.setDataProperty=function(t,e,i){if(this.Ge(t)){if(e===this.am)this.ey(t,i);else if(e===this.Tn)return void this.ay(t,i)}else!vc&&t instanceof Mo&&(vc=!0,_h.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),_h.trace("  Is that really your intent?"));var n=_h.sb(t,e);n!==i&&(_h.Ma(t,e,i),this.TA(t,e,n,i))},Dt.prototype.addArrayItem=function(t,e){this.vA(t,-1,e)},Dt.prototype.insertArrayItem=Dt.prototype.vA=function(t,e,i){t===this.Ce&&_h.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>e&&(e=_h.Ya(t)),_h.qh(t,e,i),Wt(this,"",yc,"",t,null,i,null,e)},Dt.prototype.removeArrayItem=Dt.prototype.NF=function(t,e){void 0===e&&(e=-1),t===this.Ce&&_h.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=_h.Ya(t)-1);var i=_h.Da(t,e);_h.Hg(t,e),Wt(this,"",mc,"",t,i,null,e,null)},_h.defineProperty(Dt,{Tn:"nodeCategoryProperty"},function(){return this.Om},function(t){var e=this.Om;e!==t&&(Ht(t,Dt,"nodeCategoryProperty"),this.Om=t,this.h("nodeCategoryProperty",e,t))}),Dt.prototype.getCategoryForNodeData=Dt.prototype.nA=function(t){if(null===t)return"";var e=this.Om;return""===e?"":void 0===(e=_h.sb(t,e))?"":"string"==typeof e?e:(_h.k("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},Dt.prototype.setCategoryForNodeData=Dt.prototype.ay=function(t,e){if(_h.j(e,"string",Dt,"setCategoryForNodeData:cat"),null!==t){var i=this.Om;if(""!==i)if(this.Ge(t)){var n=_h.sb(t,i);void 0===n&&(n=""),n!==e&&(_h.Ma(t,i,e),Wt(this,"nodeCategory",gc,i,t,n,e))}else _h.Ma(t,i,e)}},_h.La(Xt,Dt),_h.fa("GraphLinksModel",Xt),Xt.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.nl=this.nl,t.bp=this.bp,t.uo=this.uo,t.Sh=this.Sh,t.Th=this.Th,t.Jm=this.Jm,t.Km=this.Km,t.Im=this.Im,t.wg=this.wg,t.fp=this.fp,t.jh=this.jh,t.Yq=this.Yq},Xt.prototype.clear=Xt.prototype.clear=function(){Dt.prototype.clear.call(this),this.df=[],this.ad.clear(),this.Pi.clear()},Vh=Xt.prototype,Vh.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.qB();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:",t=this.dg;for(var i=_h.Ya(t),n=0,n=0;n<i;n++)var o=_h.Da(t,n),e=e+" "+this.ub(o)+":"+wc(o);for(e+="\n link data:",t=this.Ng,i=_h.Ya(t),n=0;n<i;n++)o=_h.Da(t,n),e+=" "+this.Tl(o)+"-->"+this.Ul(o)}return e},Vh.eo=function(){var t=Dt.prototype.eo.call(this),e="";return"category"!==this.gu&&"string"==typeof this.gu&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.gu)),""!==this.yj&&"string"==typeof this.yj&&(e+=',\n  "linkKeyProperty": '+this.quote(this.yj)),"from"!==this.Kn&&"string"==typeof this.Kn&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.Kn)),"to"!==this.Ln&&"string"==typeof this.Ln&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.Ln)),""!==this.hu&&"string"==typeof this.hu&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.hu)),""!==this.ju&&"string"==typeof this.ju&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.ju)),""!==this.iu&&"string"==typeof this.iu&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.iu)),"isGroup"!==this.ru&&"string"==typeof this.ru&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.ru)),"group"!==this.qu&&"string"==typeof this.qu&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.qu)),t+e},Vh.vu=function(t){Dt.prototype.vu.call(this,t),t.linkKeyProperty&&(this.yj=t.linkKeyProperty),t.linkFromKeyProperty&&(this.Kn=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.Ln=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.hu=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.ju=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.gu=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.iu=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.ru=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.qu=t.nodeGroupKeyProperty)},Vh.DB=function(){return Dt.prototype.DB.call(this)+',\n  "linkDataArray": '+Ot(this,this.Ng,!0)},Vh.VA=function(t){Dt.prototype.VA.call(this,t),t=t.linkDataArray,_h.isArray(t)&&(this.yu(t),this.Ng=t)},Vh.EB=function(t){if(!(t instanceof Xt))return _h.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.yj&&_h.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=Dt.prototype.EB.call(this,t);It(this,t,"linkKeyProperty"),It(this,t,"linkFromKeyProperty"),It(this,t,"linkToKeyProperty"),It(this,t,"linkLabelKeysProperty"),It(this,t,"nodeIsGroupProperty"),It(this,t,"nodeGroupKeyProperty");for(var i=new f,n=new f,o=(new f).Hc(this.ad.sF),r=new v,a=t.Ng,s=0;s<a.length;s++){var l=a[s],h=t.Sf(l);if(void 0!==h){o.remove(h);var u=this.Tp(h);null===u?(i.add(h),n.add(l)):Et(this,u,l,r)||n.add(l)}else this.GA(l),h=this.Sf(l),i.add(h),n.add(l)}return t=e,0<i.count&&(t+=this.vy+Ot(this,i.ec(),!0)),0<n.count&&(t+=this.LB+Ot(this,n.ec(),!0)),0<o.count&&(t+=this.xy+Ot(this,o.ec(),!0)),t},Vh.vy=',\n  "insertedLinkKeys": ',Vh.LB=',\n  "modifiedLinkData": ',Vh.xy=',\n  "removedLinkKeys": ',Vh.CB=function(t,e){""===this.yj&&_h.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=Dt.prototype.CB.call(this,t,e),n=this,o=new f,r=new f,a=new f;t.Qf.each(function(t){t.ba===n&&("linkDataArray"===t.nf?t.yc===yc?o.add(t.newValue):t.yc===mc&&a.add(t.oldValue):n.th(t.object)&&r.add(t.object))});var s=new f;o.each(function(t){s.add(n.Sf(t)),e||r.add(t)});var l=new f;return a.each(function(t){l.add(n.Sf(t)),e&&r.add(t)}),0<s.count&&(i+=(e?this.xy:this.vy)+Ot(this,s.ec(),!0)),0<r.count&&(i+=this.LB+Ot(this,r.ec(),!0)),0<l.count&&(i+=(e?this.vy:this.xy)+Ot(this,l.ec(),!0)),i},Vh.UA=function(t){Dt.prototype.UA.call(this,t);var e=t.insertedLinkKeys;if(_h.isArray(e))for(var i=_h.Ya(e),n=0;n<i;n++){var o=_h.Da(e,n),r=this.Tp(o);null===r&&(r=this.Tw({}),this.fG(r,o),this.ut(r))}if(o=t.modifiedLinkData,_h.isArray(o))for(i=_h.Ya(o),n=0;n<i;n++)if(e=_h.Da(o,n),r=this.Sf(e),null!==(r=this.Tp(r)))for(var a in e)"__gohashid"!==a&&a!==this.yj&&this.setDataProperty(r,a,e[a]);if(t=t.removedLinkKeys,_h.isArray(t))for(i=_h.Ya(t),n=0;n<i;n++)o=_h.Da(t,n),null!==(r=this.Tp(o))&&this.Vx(r)},Vh.nn=function(t,e){if(t.yc===yc){var i=t.Aj;if("linkDataArray"===t.nf){var n=t.newValue;if(_h.Qa(n)&&"number"==typeof i){var o=this.Sf(n);e?(this.Pi.remove(n),_h.Da(this.df,i)===n&&_h.Hg(this.df,i),void 0!==o&&this.ad.remove(o)):(this.Pi.add(n),_h.Da(this.df,i)!==n&&_h.qh(this.df,i,n),void 0!==o&&this.ad.add(o,n))}return}if("linkLabelKeys"===t.nf)return n=this.Bk(t.object),void(_h.isArray(n)&&"number"==typeof i&&(e?0<=(i=_h.Fl(n,t.newValue))&&_h.Hg(n,i):0>_h.Fl(n,t.newValue)&&_h.qh(n,i,t.newValue)))}else if(t.yc===mc){if(i=t.Bj,"linkDataArray"===t.nf)return n=t.oldValue,void(_h.Qa(n)&&"number"==typeof i&&(o=this.Sf(n),e?(this.Pi.add(n),_h.Da(this.df,i)!==n&&_h.qh(this.df,i,n),void 0!==o&&this.ad.add(o,n)):(this.Pi.remove(n),_h.Da(this.df,i)===n&&_h.Hg(this.df,i),void 0!==o&&this.ad.remove(o))));if("linkLabelKeys"===t.nf)return n=this.Bk(t.object),void(_h.isArray(n)&&"number"==typeof i&&(e?0>_h.Fl(n,t.newValue)&&_h.qh(n,i,t.newValue):0<=(i=_h.Fl(n,t.newValue))&&_h.Hg(n,i)))}Dt.prototype.nn.call(this,t,e)},_h.defineProperty(Xt,{Qz:"archetypeNodeData"},function(){return this.pm},function(t){var e=this.pm;e!==t&&(null!==t&&_h.G(t,Object,Xt,"archetypeNodeData"),this.pm=t,this.h("archetypeNodeData",e,t))}),Xt.prototype.Mn=function(t){if(void 0!==t){var e=this.pm;if(null!==e){var i=this.te(t);null===i&&(i=this.copyNodeData(e),_h.Ma(i,this.fk,t),this.Cl(i))}return t}},_h.defineProperty(Xt,{Kn:"linkFromKeyProperty"},function(){return this.Sh},function(t){var e=this.Sh;e!==t&&(Ht(t,Xt,"linkFromKeyProperty"),this.Sh=t,this.h("linkFromKeyProperty",e,t))}),Xt.prototype.getFromKeyForLinkData=Xt.prototype.Tl=function(t){if(null!==t){var e=this.Sh;if(""!==e&&void 0!==(e=_h.sb(t,e))){if(Vt(e))return e;_h.k("FromKey value for link data "+t+" is not a number or a string: "+e)}}},Xt.prototype.setFromKeyForLinkData=Xt.prototype.dB=function(t,e){if(null===e&&(e=void 0),void 0===e||Vt(e)||_h.yd(e,"number or string",Xt,"setFromKeyForLinkData:key"),null!==t){var i=this.Sh;if(""!==i)if(e=this.Mn(e),this.th(t)){var n=_h.sb(t,i);n!==e&&(Jt(this,n,t),_h.Ma(t,i,e),null===this.te(e)&&Kt(this,e,t),Wt(this,"linkFromKey",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.defineProperty(Xt,{Ln:"linkToKeyProperty"},function(){return this.Th},function(t){var e=this.Th;e!==t&&(Ht(t,Xt,"linkToKeyProperty"),this.Th=t,this.h("linkToKeyProperty",e,t))}),Xt.prototype.getToKeyForLinkData=Xt.prototype.Ul=function(t){if(null!==t){var e=this.Th;if(""!==e&&void 0!==(e=_h.sb(t,e))){if(Vt(e))return e;_h.k("ToKey value for link data "+t+" is not a number or a string: "+e)}}},Xt.prototype.setToKeyForLinkData=Xt.prototype.jB=function(t,e){if(null===e&&(e=void 0),void 0===e||Vt(e)||_h.yd(e,"number or string",Xt,"setToKeyForLinkData:key"),null!==t){var i=this.Th;if(""!==i)if(e=this.Mn(e),this.th(t)){var n=_h.sb(t,i);n!==e&&(Jt(this,n,t),_h.Ma(t,i,e),null===this.te(e)&&Kt(this,e,t),Wt(this,"linkToKey",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.defineProperty(Xt,{hu:"linkFromPortIdProperty"},function(){return this.Jm},function(t){var e=this.Jm;e!==t&&(Ht(t,Xt,"linkFromPortIdProperty"),t!==this.Kn&&t!==this.Ln||_h.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Jm=t,this.h("linkFromPortIdProperty",e,t))}),Xt.prototype.getFromPortIdForLinkData=Xt.prototype.XH=function(t){if(null===t)return"";var e=this.Jm;return""===e?"":(t=_h.sb(t,e),void 0===t?"":t)},Xt.prototype.setFromPortIdForLinkData=Xt.prototype.eB=function(t,e){if(_h.j(e,"string",Xt,"setFromPortIdForLinkData:portname"),null!==t){var i=this.Jm;if(""!==i)if(this.th(t)){var n=_h.sb(t,i);void 0===n&&(n=""),n!==e&&(_h.Ma(t,i,e),Wt(this,"linkFromPortId",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.defineProperty(Xt,{ju:"linkToPortIdProperty"},function(){return this.Km},function(t){var e=this.Km;e!==t&&(Ht(t,Xt,"linkToPortIdProperty"),t!==this.Kn&&t!==this.Ln||_h.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Km=t,this.h("linkToPortIdProperty",e,t))}),Xt.prototype.getToPortIdForLinkData=Xt.prototype.aI=function(t){if(null===t)return"";var e=this.Km;return""===e?"":(t=_h.sb(t,e),void 0===t?"":t)},Xt.prototype.setToPortIdForLinkData=Xt.prototype.kB=function(t,e){if(_h.j(e,"string",Xt,"setToPortIdForLinkData:portname"),null!==t){var i=this.Km;if(""!==i)if(this.th(t)){var n=_h.sb(t,i);void 0===n&&(n=""),n!==e&&(_h.Ma(t,i,e),Wt(this,"linkToPortId",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.defineProperty(Xt,{iu:"linkLabelKeysProperty"},function(){return this.wg},function(t){var e=this.wg;e!==t&&(Ht(t,Xt,"linkLabelKeysProperty"),this.wg=t,this.h("linkLabelKeysProperty",e,t))}),Xt.prototype.getLabelKeysForLinkData=Xt.prototype.Bk=function(t){if(null===t)return _h.io;var e=this.wg;return""===e?_h.io:(t=_h.sb(t,e),void 0===t?_h.io:t)},Xt.prototype.setLabelKeysForLinkData=Xt.prototype.gG=function(t,e){if(_h.Sz(e,Xt,"setLabelKeysForLinkData:arr"),null!==t){var i=this.wg;if(""!==i)if(this.th(t)){var n=_h.sb(t,i);if(void 0===n&&(n=_h.io),n!==e){for(var o=_h.Ya(n),r=0;r<o;r++){var a=_h.Da(n,r);Jt(this,a,t)}for(_h.Ma(t,i,e),o=_h.Ya(e),r=0;r<o;r++)a=_h.Da(e,r),null===this.te(a)&&Kt(this,a,t);Wt(this,"linkLabelKeys",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i)}}else _h.Ma(t,i,e)}},Xt.prototype.addLabelKeyForLinkData=Xt.prototype.fE=function(t,e){if(null!==e&&void 0!==e&&(Vt(e)||_h.yd(e,"number or string",Xt,"addLabelKeyForLinkData:key"),null!==t)){var i=this.wg;if(""!==i){var n=_h.sb(t,i);if(void 0===n)i=[],i.push(e),this.gG(t,i);else if(_h.isArray(n)){var o=_h.Fl(n,e);0<=o||(o=_h.Ya(n),_h.qh(n,Infinity,e),this.th(t)&&(null===this.te(e)&&Kt(this,e,t),Wt(this,"linkLabelKeys",yc,i,t,null,e,null,o)))}else _h.k(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},Xt.prototype.removeLabelKeyForLinkData=Xt.prototype.jJ=function(t,e){if(null!==e&&void 0!==e&&(Vt(e)||_h.yd(e,"number or string",Xt,"removeLabelKeyForLinkData:key"),null!==t)){var i=this.wg;if(""!==i){var n=_h.sb(t,i);if(_h.isArray(n)){var o=_h.Fl(n,e);0>o||(_h.Hg(n,o),this.th(t)&&(Jt(this,e,t),Wt(this,"linkLabelKeys",mc,i,t,e,null,o,null)))}else void 0!==n&&_h.k(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},_h.defineProperty(Xt,{Ng:"linkDataArray"},function(){return this.df},function(t){var e=this.df;if(e!==t){_h.Sz(t,Xt,"linkDataArray"),this.ad.clear();for(var i=_h.Ya(t),n=0;n<i;n++){var o=_h.Da(t,n);if(!_h.Qa(o))return void _h.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);_h.Xp(o)}if(this.df=t,""!==this.yj){for(var r=new u(Object),n=0;n<i;n++){var o=_h.Da(t,n),a=this.Sf(o);void 0===a?r.add(o):null!==this.ad.ja(a)?r.add(o):this.ad.add(a,o)}for(n=r.i;n.next();)o=n.value,this.GA(o),void 0!==(r=this.Sf(o))&&this.ad.add(r,o)}for(r=new f(Object),n=0;n<i;n++)o=_h.Da(t,n),r.add(o);for(this.Pi=r,Wt(this,"linkDataArray",gc,"linkDataArray",this,e,t),n=0;n<i;n++)o=_h.Da(t,n),te(this,o)}}),_h.defineProperty(Xt,{yj:"linkKeyProperty"},function(){return this.nl},function(t){var e=this.nl;if(e!==t){Ht(t,Xt,"linkKeyProperty"),this.nl=t,this.ad.clear();for(var i=_h.Ya(this.Ng),n=0;n<i;n++){var o=_h.Da(this.Ng,n),r=this.Sf(o);void 0!==r&&this.ad.add(r,o)}this.h("linkKeyProperty",e,t)}}),Xt.prototype.getKeyForLinkData=Xt.prototype.Sf=function(t){if(null!==t){var e=this.nl;if(""!==e&&void 0!==(e=_h.sb(t,e))){if(Vt(e))return e;_h.k("Key value for link data "+t+" is not a number or a string: "+e)}}},Xt.prototype.setKeyForLinkData=Xt.prototype.fG=function(t,e){if(void 0!==e&&null!==e&&Vt(e)||_h.yd(e,"number or string",Xt,"setKeyForLinkData:key"),null!==t){var i=this.nl;if(""!==i)if(this.th(t)){var n=_h.sb(t,i);n!==e&&null===this.Tp(e)&&(_h.Ma(t,i,e),this.ad.remove(n),this.ad.add(e,t),Wt(this,"linkKey",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.defineProperty(Xt,{gL:"makeUniqueLinkKeyFunction"},function(){return this.bp},function(t){var e=this.bp;e!==t&&(null!==t&&_h.j(t,"function",Xt,"makeUniqueLinkKeyFunction"),this.bp=t,this.h("makeUniqueLinkKeyFunction",e,t))}),Xt.prototype.findLinkDataForKey=Xt.prototype.Tp=function(t){return null===t&&_h.k("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Vt(t)?this.ad.ja(t):null},Xt.prototype.makeLinkDataKeyUnique=Xt.prototype.GA=function(t){if(null!==t){var e=this.nl;if(""!==e){var i=this.Sf(t);if(void 0===i||this.ad.contains(i)){var n=this.bp;if(null!==n&&void 0!==(i=n(this,t))&&null!==i&&!this.ad.contains(i))return void _h.Ma(t,e,i);if("string"==typeof i){for(n=2;this.ad.contains(i+n);)n++;_h.Ma(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(n=-this.ad.count-1;this.ad.contains(n);)n--;_h.Ma(t,e,n)}else _h.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+i)}}}},Xt.prototype.containsLinkData=Xt.prototype.th=function(t){return null!==t&&this.Pi.contains(t)},Xt.prototype.addLinkData=Xt.prototype.ut=function(t){null!==t&&(_h.Xp(t),this.th(t)||Qt(this,t,!0))},Xt.prototype.addLinkDataCollection=function(t){if(_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++)this.ut(_h.Da(t,i));else for(t=t.i;t.next();)this.ut(t.value)},Xt.prototype.removeLinkData=Xt.prototype.Vx=function(t){null!==t&&Zt(this,t,!0)},Xt.prototype.removeLinkDataCollection=function(t){if(_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++)this.Vx(_h.Da(t,i));else for(t=t.i;t.next();)this.Vx(t.value)},_h.defineProperty(Xt,{zK:"copyLinkDataFunction"},function(){return this.uo},function(t){var e=this.uo;e!==t&&(null!==t&&_h.j(t,"function",Xt,"copyLinkDataFunction"),this.uo=t,this.h("copyLinkDataFunction",e,t))}),Xt.prototype.copyLinkData=Xt.prototype.Tw=function(t){if(null===t)return null;var e=null,e=this.uo,e=null!==e?e(t,this):$t(this,t,!0);return _h.Qa(e)&&(_h.mc(e),""!==this.Sh&&_h.Ma(e,this.Sh,void 0),""!==this.Th&&_h.Ma(e,this.Th,void 0),""!==this.wg&&_h.Ma(e,this.wg,[])),e},_h.defineProperty(Xt,{ru:"nodeIsGroupProperty"},function(){return this.fp},function(t){var e=this.fp;e!==t&&(Ht(t,Xt,"nodeIsGroupProperty"),this.fp=t,this.h("nodeIsGroupProperty",e,t))}),Xt.prototype.isGroupForNodeData=Xt.prototype.zA=function(t){if(null===t)return!1;var e=this.fp;return""!==e&&!!_h.sb(t,e)},_h.defineProperty(Xt,{qu:"nodeGroupKeyProperty"},function(){return this.jh},function(t){var e=this.jh;e!==t&&(Ht(t,Xt,"nodeGroupKeyProperty"),this.jh=t,this.h("nodeGroupKeyProperty",e,t))}),_h.defineProperty(Xt,{rn:"copiesGroupKeyOfNodeData"},function(){return this.Yq},function(t){this.Yq!==t&&(_h.j(t,"boolean",Xt,"copiesGroupKeyOfNodeData"),this.Yq=t)}),Xt.prototype.getGroupKeyForNodeData=Xt.prototype.An=function(t){if(null!==t){var e=this.jh;if(""!==e&&void 0!==(e=_h.sb(t,e))){if(Vt(e))return e;_h.k("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},Xt.prototype.setGroupKeyForNodeData=Xt.prototype.fB=function(t,e){if(null===e&&(e=void 0),void 0===e||Vt(e)||_h.yd(e,"number or string",Xt,"setGroupKeyForNodeData:key"),null!==t){var i=this.jh;if(""!==i)if(this.Ge(t)){var n=_h.sb(t,i);n!==e&&(Jt(this,n,t),_h.Ma(t,i,e),null===this.te(e)&&Kt(this,e,t),Wt(this,"nodeGroupKey",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},Xt.prototype.copyNodeData=function(t){return null===t?null:(t=Dt.prototype.copyNodeData.call(this,t),this.rn||""===this.jh||void 0===_h.sb(t,this.jh)||_h.Ma(t,this.jh,void 0),t)},Xt.prototype.setDataProperty=function(t,e,i){if(this.Ge(t))if(e===this.am)this.ey(t,i);else{if(e===this.Tn)return void this.ay(t,i);if(e===this.qu)return void this.fB(t,i);e===this.ru&&_h.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+e)}else if(this.th(t)){if(e===this.Kn)return void this.dB(t,i);if(e===this.Ln)return void this.jB(t,i);if(e===this.hu)return void this.eB(t,i);if(e===this.ju)return void this.kB(t,i);if(e===this.yj)return void this.fG(t,i);if(e===this.gu)return void this.eG(t,i);if(e===this.iu)return void this.gG(t,i)}else!vc&&t instanceof Mo&&(vc=!0,_h.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),_h.trace("  Is that really your intent?"));var n=_h.sb(t,e);n!==i&&(_h.Ma(t,e,i),this.TA(t,e,n,i))},Vh=Xt.prototype,Vh.xu=function(t,e){Dt.prototype.xu.call(this,t,e);for(var i=this.Ec.i;i.next();)this.YA(i.value,t,e);for(i=this.Pi.i;i.next();){var n=i.value,o=t,r=e;if(this.Tl(n)===o){var a=this.Sh;_h.Ma(n,a,r),Wt(this,"linkFromKey",gc,a,n,o,r),"string"==typeof a&&this.Hb(n,a)}if(this.Ul(n)===o&&(a=this.Th,_h.Ma(n,a,r),Wt(this,"linkToKey",gc,a,n,o,r),"string"==typeof a&&this.Hb(n,a)),a=this.Bk(n),_h.isArray(a))for(var s=_h.Ya(a),l=this.wg,h=0;h<s;h++)_h.Da(a,h)===o&&(_h.mE(a,h,r),Wt(this,"linkLabelKeys",yc,l,n,o,r,h,h))}},Vh.YA=function(t,e,i){if(this.An(t)===e){var n=this.jh;_h.Ma(t,n,i),Wt(this,"nodeGroupKey",gc,n,t,e,i),"string"==typeof n&&this.Hb(t,n)}},Vh.xB=function(){Dt.prototype.xB.call(this);for(var t=this.Ng,e=_h.Ya(t),i=0;i<e;i++){te(this,_h.Da(t,i))}},Vh.lq=function(t){Dt.prototype.lq.call(this,t),t=this.ub(t);var e=Yt(this,t);if(null!==e){for(var i=new u(Object),e=e.i;e.next();){var n=e.value;if(this.Ge(n)){if(this.An(n)===t){var o=this.jh;Wt(this,"nodeGroupKey",gc,o,n,t,t),"string"==typeof o&&this.Hb(n,o),i.add(n)}}else if(this.Tl(n)===t&&(o=this.Sh,Wt(this,"linkFromKey",gc,o,n,t,t),"string"==typeof o&&this.Hb(n,o),i.add(n)),this.Ul(n)===t&&(o=this.Th,Wt(this,"linkToKey",gc,o,n,t,t),"string"==typeof o&&this.Hb(n,o),i.add(n)),o=this.Bk(n),_h.isArray(o))for(var r=_h.Ya(o),a=this.wg,s=0;s<r;s++)_h.Da(o,s)===t&&(Wt(this,"linkLabelKeys",yc,a,n,t,t,s,s),i.add(n))}for(i=i.i;i.next();)Jt(this,t,i.value)}},Vh.kq=function(t){Dt.prototype.kq.call(this,t);var e=this.An(t);null===this.te(e)&&Kt(this,e,t)},Vh.Mu=function(t){Dt.prototype.Mu.call(this,t),Jt(this,this.An(t),t)},_h.defineProperty(Xt,{gu:"linkCategoryProperty"},function(){return this.Im},function(t){var e=this.Im;e!==t&&(Ht(t,Xt,"linkCategoryProperty"),this.Im=t,this.h("linkCategoryProperty",e,t))}),Xt.prototype.getCategoryForLinkData=Xt.prototype.lx=function(t){if(null===t)return"";var e=this.Im;return""===e?"":void 0===(e=_h.sb(t,e))?"":"string"==typeof e?e:(_h.k("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Xt.prototype.setCategoryForLinkData=Xt.prototype.eG=function(t,e){if(_h.j(e,"string",Xt,"setCategoryForLinkData:cat"),null!==t){var i=this.Im;if(""!==i)if(this.th(t)){var n=_h.sb(t,i);void 0===n&&(n=""),n!==e&&(_h.Ma(t,i,e),Wt(this,"linkCategory",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.La(ee,Dt),_h.fa("TreeModel",ee),ee.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.kh=this.kh,t.Zq=this.Zq,t.Rm=this.Rm},ee.prototype.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.qB();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:",t=this.dg;for(var i=_h.Ya(t),n=0;n<i;n++)var o=_h.Da(t,n),e=e+" "+this.ub(o)+":"+wc(o)}return e},ee.prototype.eo=function(){var t=Dt.prototype.eo.call(this),e="";return"parent"!==this.su&&"string"==typeof this.su&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.su)),t+e},ee.prototype.vu=function(t){Dt.prototype.vu.call(this,t),t.nodeParentKeyProperty&&(this.su=t.nodeParentKeyProperty)},ee.prototype.Mn=function(t){return t},_h.defineProperty(ee,{su:"nodeParentKeyProperty"},function(){return this.kh},function(t){var e=this.kh;e!==t&&(Ht(t,ee,"nodeParentKeyProperty"),this.kh=t,this.h("nodeParentKeyProperty",e,t))}),_h.defineProperty(ee,{sn:"copiesParentKeyOfNodeData"},function(){return this.Zq},function(t){this.Zq!==t&&(_h.j(t,"boolean",ee,"copiesParentKeyOfNodeData"),this.Zq=t)}),ee.prototype.getParentKeyForNodeData=ee.prototype.Cn=function(t){if(null!==t){var e=this.kh;if(""!==e&&void 0!==(e=_h.sb(t,e))){if(Vt(e))return e;_h.k("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},ee.prototype.setParentKeyForNodeData=ee.prototype.oi=function(t,e){
if(null===e&&(e=void 0),void 0===e||Vt(e)||_h.yd(e,"number or string",ee,"setParentKeyForNodeData:key"),null!==t){var i=this.kh;if(""!==i)if(e=this.Mn(e),this.Ge(t)){var n=_h.sb(t,i);n!==e&&(Jt(this,n,t),_h.Ma(t,i,e),null===this.te(e)&&Kt(this,e,t),Wt(this,"nodeParentKey",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},_h.defineProperty(ee,{yL:"parentLinkCategoryProperty"},function(){return this.Rm},function(t){var e=this.Rm;e!==t&&(Ht(t,ee,"parentLinkCategoryProperty"),this.Rm=t,this.h("parentLinkCategoryProperty",e,t))}),ee.prototype.getParentLinkCategoryForNodeData=ee.prototype.ZH=function(t){if(null===t)return"";var e=this.Rm;return""===e?"":void 0===(e=_h.sb(t,e))?"":"string"==typeof e?e:(_h.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},ee.prototype.setParentLinkCategoryForNodeData=ee.prototype.zJ=function(t,e){if(_h.j(e,"string",ee,"setParentLinkCategoryForNodeData:cat"),null!==t){var i=this.Rm;if(""!==i)if(this.Ge(t)){var n=_h.sb(t,i);void 0===n&&(n=""),n!==e&&(_h.Ma(t,i,e),Wt(this,"parentLinkCategory",gc,i,t,n,e),"string"==typeof i&&this.Hb(t,i))}else _h.Ma(t,i,e)}},ee.prototype.copyNodeData=function(t){return null===t?null:(t=Dt.prototype.copyNodeData.call(this,t),this.sn||""===this.kh||void 0===_h.sb(t,this.kh)||_h.Ma(t,this.kh,void 0),t)},ee.prototype.setDataProperty=function(t,e,i){if(this.Ge(t))if(e===this.am)this.ey(t,i);else{if(e===this.Tn)return void this.ay(t,i);if(e===this.su)return void this.oi(t,i)}else!vc&&t instanceof Mo&&(vc=!0,_h.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),_h.trace("  Is that really your intent?"));var n=_h.sb(t,e);n!==i&&(_h.Ma(t,e,i),this.TA(t,e,n,i))},Vh=ee.prototype,Vh.xu=function(t,e){Dt.prototype.xu.call(this,t,e);for(var i=this.Ec.i;i.next();)this.YA(i.value,t,e)},Vh.YA=function(t,e,i){if(this.Cn(t)===e){var n=this.kh;_h.Ma(t,n,i),Wt(this,"nodeParentKey",gc,n,t,e,i),"string"==typeof n&&this.Hb(t,n)}},Vh.lq=function(t){Dt.prototype.lq.call(this,t),t=this.ub(t);var e=Yt(this,t);if(null!==e){for(var i=new u(Object),e=e.i;e.next();){var n=e.value;if(this.Ge(n)&&this.Cn(n)===t){var o=this.kh;Wt(this,"nodeParentKey",gc,o,n,t,t),"string"==typeof o&&this.Hb(n,o),i.add(n)}}for(i=i.i;i.next();)Jt(this,t,i.value)}},Vh.kq=function(t){Dt.prototype.kq.call(this,t);var e=this.Cn(t),e=this.Mn(e);null===this.te(e)&&Kt(this,e,t)},Vh.Mu=function(t){Dt.prototype.Mu.call(this,t),Jt(this,this.Cn(t),t)},_h.fa("Binding",ie),ie.prototype.copy=function(){var t=new ie;return t.zp=this.zp,t.ht=this.ht,t.yp=this.yp,t.vw=this.vw,t.Nr=this.Nr,t.pp=this.pp,t.Vq=this.Vq,t.gs=this.gs,t.Oq=this.Oq,t};var bc;ie.OneWay=bc=_h.p(ie,"OneWay",1);var xc;ie.TwoWay=xc=_h.p(ie,"TwoWay",2),ie.parseEnum=function(t,e){return _h.j(t,"function",ie,"parseEnum:ctor"),_h.mb(e,t,ie,"parseEnum:defval"),function(i){return i=Kh(t,i),null===i?e:i}},ie.prototype.gc=function(t){t.De===ie?this.mode=t:_h.Fj(this,t)};var wc;ie.toString=wc=function(t){var e=t;return _h.Qa(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()},ie.prototype.toString=function(){return"Binding("+this.iy+":"+this.jG+(-1!==this.hm?" "+this.hm:"")+" "+this.mode.name+")"},ie.prototype.freeze=function(){return this.Q=!0,this},ie.prototype.Ra=function(){return this.Q=!1,this},_h.defineProperty(ie,{hm:null},function(){return this.GD},function(t){this.Q&&_h.la(this),_h.j(t,"number",ie,"targetId"),this.GD=t}),_h.defineProperty(ie,{iy:"targetProperty"},function(){return this.zp},function(t){this.Q&&_h.la(this),_h.j(t,"string",ie,"targetProperty"),this.zp=t}),_h.defineProperty(ie,{xq:"sourceName"},function(){return this.vw},function(t){this.Q&&_h.la(this),null!==t&&_h.j(t,"string",ie,"sourceName"),this.vw=t,null!==t&&(this.Nr=!1)}),_h.defineProperty(ie,{yx:"isToModel"},function(){return this.Nr},function(t){this.Q&&_h.la(this),_h.j(t,"boolean",ie,"isToModel"),this.Nr=t}),_h.defineProperty(ie,{jG:"sourceProperty"},function(){return this.pp},function(t){this.Q&&_h.la(this),_h.j(t,"string",ie,"sourceProperty"),this.pp=t}),_h.defineProperty(ie,{xH:"converter"},function(){return this.Vq},function(t){this.Q&&_h.la(this),null!==t&&_h.j(t,"function",ie,"converter"),this.Vq=t}),_h.defineProperty(ie,{kH:"backConverter"},function(){return this.Oq},function(t){this.Q&&_h.la(this),null!==t&&_h.j(t,"function",ie,"backConverter"),this.Oq=t}),_h.defineProperty(ie,{mode:"mode"},function(){return this.gs},function(t){this.Q&&_h.la(this),_h.mb(t,ie,ie,"mode"),this.gs=t}),ie.prototype.makeTwoWay=ie.prototype.KI=function(t){return void 0===t&&(t=null),null!==t&&_h.j(t,"function",ie,"makeTwoWay"),this.mode=xc,this.kH=t,this},ie.prototype.ofObject=ie.prototype.Jx=function(t){return void 0===t&&(t=""),this.xq=t,this.yx=!1,this},ie.prototype.ofModel=function(){return this.xq=null,this.yx=!0,this},ie.prototype.updateTarget=ie.prototype.yG=function(t,e,i){var n=this.pp;if(void 0===i||""===n||n===i){i=this.zp;var o=this.Vq;if(null===o&&""===i)_h.trace("Binding error: target property is the empty string: "+this.toString());else{var r=e;if(""!==n&&(r=_h.sb(e,n)),void 0!==r)if(null===o)""!==i&&_h.Ma(t,i,r);else try{if(""!==i){var a=o(r,t);_h.Ma(t,i,a)}else o(r,t)}catch(t){}}}},ie.prototype.updateSource=ie.prototype.jy=function(t,e,i,n){if(this.gs===xc){var o=this.zp;if(void 0===i||o===i){i=this.pp;var r=this.Oq,a=t;if(""!==o&&(a=_h.sb(t,o)),void 0!==a&&!this.Xy.contains(t))try{this.Xy.add(t);var s=null!==n?n.g:null,l=null!==s?s.ba:null;if(null===r){if(""!==i)null!==l?l.setDataProperty(e,i,a):_h.Ma(e,i,a);else if(null!==l&&null!==n&&0<=n.eu&&null!==n.O&&Array.isArray(n.O.dq)){var h=n.eu,u=n.O.dq;l.NF(u,h),l.vA(u,h,a)}}else try{if(""!==i){var c=r(a,e,l);null!==l?l.setDataProperty(e,i,c):_h.Ma(e,i,c)}else void 0!==(c=r(a,e,l))&&null!==l&&null!==n&&0<=n.eu&&null!==n.O&&Array.isArray(n.O.dq)&&(h=n.eu,u=n.O.dq,l.NF(u,h),l.vA(u,h,c))}catch(t){}}finally{this.Xy.remove(t)}}}},_h.fa("Transaction",oe),oe.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.Qf.count.toString()+(this.Zt?"":", incomplete");if(void 0!==t&&0<t){t=this.Qf.count;for(var i=0;i<t;i++){var n=this.Qf.da(i);null!==n&&(e+="\n  "+n.toString())}}return e},oe.prototype.clear=oe.prototype.clear=function(){var t=this.Qf;t.Ra();for(var e=t.count-1;0<=e;e--){var i=t.da(e);null!==i&&i.clear()}t.clear(),t.freeze()},oe.prototype.canUndo=oe.prototype.canUndo=function(){return this.Zt},oe.prototype.undo=oe.prototype.undo=function(){if(this.canUndo())for(var t=this.Qf.count-1;0<=t;t--){var e=this.Qf.da(t);null!==e&&e.undo()}},oe.prototype.canRedo=oe.prototype.canRedo=function(){return this.Zt},oe.prototype.redo=oe.prototype.redo=function(){if(this.canRedo())for(var t=this.Qf.count,e=0;e<t;e++){var i=this.Qf.da(e);null!==i&&i.redo()}},_h.u(oe,{Qf:"changes"},function(){return this.EG}),_h.defineProperty(oe,{name:"name"},function(){return this.Qb},function(t){this.Qb=t}),_h.defineProperty(oe,{Zt:"isComplete"},function(){return this.LC},function(t){this.LC=t}),_h.fa("UndoManager",re),re.prototype.toString=function(t){for(var e="UndoManager "+this.qj+"<"+this.history.count+"<="+this.xF,e=e+"[",i=this.CF.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.CF.da(n);if(e+="]",void 0!==t&&0<t)for(i=this.history.count,n=0;n<i;n++)e+="\n "+this.history.da(n).toString(t-1);return e},re.prototype.clear=re.prototype.clear=function(){var t=this.history;t.Ra();for(var e=t.count-1;0<=e;e--){var i=t.da(e);null!==i&&i.clear()}t.clear(),this.dh=-1,t.freeze(),this.Ki=!1,this.ov=null,this.zl=0,this.ih.Ra(),this.ih.clear(),this.ih.freeze(),this.ep.clear()},re.prototype.addModel=re.prototype.cH=function(t){this.mz.add(t)},re.prototype.removeModel=re.prototype.kJ=function(t){this.mz.remove(t)},re.prototype.startTransaction=re.prototype.Ub=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.gb)return!1;!0===this.Yy&&(this.Yy=!1,this.zl++,this.cd("StartingFirstTransaction",t,this.lj),0<this.zl&&this.zl--),this.isEnabled&&(this.ih.Ra(),this.ih.add(t),this.ih.freeze(),null===this.lj?this.ep.add(0):this.ep.add(this.lj.Qf.count)),this.zl++;var e=1===this.Fh;return e&&this.cd("StartedTransaction",t,this.lj),e},re.prototype.commitTransaction=re.prototype.Gd=function(t){return void 0===t&&(t=""),ae(this,!0,t)},re.prototype.rollbackTransaction=re.prototype.mq=function(){return ae(this,!1,"")},re.prototype.canUndo=re.prototype.canUndo=function(){if(!this.isEnabled||0<this.Fh||this.gb)return!1;var t=this.tG;return!(null===t||!t.canUndo())},re.prototype.undo=re.prototype.undo=function(){if(this.canUndo()){var t=this.tG;try{this.cd("StartingUndo","Undo",t),this.Ki=!0,this.dh--,t.undo()}catch(t){_h.trace("undo error: "+t.toString())}finally{this.Ki=!1,this.cd("FinishedUndo","Undo",t)}}},re.prototype.canRedo=re.prototype.canRedo=function(){if(!this.isEnabled||0<this.Fh||this.gb)return!1;var t=this.sG;return!(null===t||!t.canRedo())},re.prototype.redo=re.prototype.redo=function(){if(this.canRedo()){var t=this.sG;try{this.cd("StartingRedo","Redo",t),this.Ki=!0,this.dh++,t.redo()}catch(t){_h.trace("redo error: "+t.toString())}finally{this.Ki=!1,this.cd("FinishedRedo","Redo",t)}}},re.prototype.cd=function(t,e,i){void 0===i&&(i=null);var n=new Bt;for(n.yc=pc,n.propertyName=t,n.object=i,n.oldValue=e,t=this.VI;t.next();)e=t.value,n.ba=e,e.Qw(n)},re.prototype.handleChanged=re.prototype.$E=function(t){if(this.isEnabled&&!this.gb&&!this.skipsEvent(t)){var e=this.lj;null===e&&(this.ov=e=new oe);var i=t.copy(),e=e.Qf;e.Ra(),e.add(i),e.freeze(),this.Tz&&0>=this.Fh&&!this.Yy&&(null!==(t=t.g)&&!1===t.Hn||_h.trace("Change not within a transaction: "+i.toString()))}},re.prototype.skipsEvent=function(t){if(null===t||0>t.yc.value)return!0;if((t=t.object)instanceof Mo){if(null!==(t=t.layer)&&t.Kc)return!0}else if(t instanceof Di&&t.Kc)return!0;return!1},_h.u(re,{VI:"models"},function(){return this.mz.i}),_h.defineProperty(re,{isEnabled:"isEnabled"},function(){return this.cf},function(t){this.cf=t}),_h.u(re,{tG:"transactionToUndo"},function(){return 0<=this.qj&&this.qj<=this.history.count-1?this.history.da(this.qj):null}),_h.u(re,{sG:"transactionToRedo"},function(){return this.qj<this.history.count-1?this.history.da(this.qj+1):null}),_h.u(re,{gb:"isUndoingRedoing"},function(){return this.Ki}),_h.u(re,{history:"history"},function(){return this.IG}),_h.defineProperty(re,{xF:"maxHistoryLength"},function(){return this.$C},function(t){this.$C=t}),_h.u(re,{qj:"historyIndex"},function(){return this.dh}),_h.u(re,{lj:"currentTransaction"},function(){return this.ov}),_h.u(re,{Fh:"transactionLevel"},function(){return this.zl}),_h.u(re,{mF:"isInTransaction"},function(){return 0<this.zl}),_h.defineProperty(re,{Tz:"checksTransactionLevel"},function(){return this.WB},function(t){this.WB=t}),_h.u(re,{CF:"nestedTransactionNames"},function(){return this.ih}),_h.fa("CommandHandler",se);var kc=null,Sc="";se.prototype.toString=function(){return"CommandHandler"},_h.u(se,{g:"diagram"},function(){return this.Z}),se.prototype.Qc=function(t){this.Z=t},se.prototype.doKeyDown=function(){var t=this.g;if(null!==t){var e=t.R,i=_h.Fk?e.lu:e.control,n=e.shift,o=e.alt,r=e.key;!i||"C"!==r&&"Insert"!==r?i&&"X"===r||n&&"Del"===r?this.canCutSelection()&&this.cutSelection():i&&"V"===r||n&&"Insert"===r?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===r||o&&n&&"Backspace"===r?this.canRedo()&&this.redo():i&&"Z"===r||o&&"Backspace"===r?this.canUndo()&&this.undo():"Del"===r||"Backspace"===r?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===r?this.canSelectAll()&&this.selectAll():"Esc"===r?this.canStopCommand()&&this.stopCommand():"Up"===r?t.ne&&(i?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===r?t.ne&&(i?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===r?t.me&&(i?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===r?t.me&&(i?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===r?n&&t.me?t.scroll("page","left"):t.ne&&t.scroll("page","up"):"PageDown"===r?n&&t.me?t.scroll("page","right"):t.ne&&t.scroll("page","down"):"Home"===r?i&&t.ne?t.scroll("document","up"):!i&&t.me&&t.scroll("document","left"):"End"===r?i&&t.ne?t.scroll("document","down"):!i&&t.me&&t.scroll("document","right"):" "===r?this.canScrollToPart()&&this.scrollToPart():"Subtract"===r?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===r?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===r?this.canResetZoom()&&this.resetZoom():n&&"Z"===r?this.canZoomToFit()&&this.zoomToFit():i&&!n&&"G"===r?this.canGroupSelection()&&this.groupSelection():i&&n&&"G"===r?this.canUngroupSelection()&&this.ungroupSelection():e.event&&113===e.event.which?this.canEditTextBlock()&&this.editTextBlock():e.event&&93===e.event.which?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()}},se.prototype.doKeyUp=function(){var t=this.g;null!==t&&(t.R.bubbles=!0)},se.prototype.stopCommand=function(){var t=this.g;if(null!==t){var e=t.Za;e instanceof pi&&t.tf&&t.Rw(),null!==e&&e.doCancel()}},se.prototype.canStopCommand=function(){return!0},se.prototype.selectAll=function(){var t=this.g;if(null!==t){t.na();try{t.cc="wait",t.Aa("ChangingSelection");for(var e=t.Jk;e.next();)e.value.fb=!0;for(var i=t.eg;i.next();)i.value.fb=!0;for(var n=t.links;n.next();)n.value.fb=!0}finally{t.Aa("ChangedSelection"),t.cc=""}}},se.prototype.canSelectAll=function(){var t=this.g;return null!==t&&t.tf},se.prototype.deleteSelection=function(){var t=this.g;if(null!==t&&!t.Aa("SelectionDeleting",t.selection))try{t.cc="wait",t.Ub("Delete"),t.Aa("ChangingSelection");for(var e=new f(sa),i=t.selection.i;i.next();)le(e,i.value,!0,this.IH?Infinity:0,this.CE,function(t){return t.canDelete()});t.XA(e,!0),t.Aa("SelectionDeleted",e)}finally{t.Aa("ChangedSelection"),t.Gd("Delete"),t.cc=""}},se.prototype.canDeleteSelection=function(){var t=this.g;return!(null===t||t.eb||t.yf||!t.gn||0===t.selection.count)},se.prototype.Mp=function(t,e,i){var n=new v(sa,sa);for(t=t.i;t.next();)he(this,t.value,e,n,i);if(null!==e){i=e.ba,t=!1,null!==e.ab.re&&(t=e.ab.re.nj);for(var o=new f(Ua),r=new v(Ua,Ua),a=n.i;a.next();){var s=a.value;if(s instanceof Ua){var l=s;t||null!==l.Y&&null!==l.$||o.add(l)}else if(i instanceof ee&&s instanceof Ba&&null!==s.data){var l=i,h=s,s=a.key,u=s.Rl();null!==u&&(u=n.ja(u),null!==u?(l.oi(h.data,l.ub(u.data)),l=e.Rf(h.data),null!==(s=s.xn())&&null!==l&&r.add(s,l)):l.oi(h.data,void 0))}}if(0<o.count&&e.XA(o,!1),0<r.count)for(i=r.i;i.next();)n.add(i.key,i.value)}if(null!==e&&null!==this.g&&(e=e.ba,null!==(i=e.eH))){var c=new v;n.each(function(t){null!==t.key.data&&c.add(t.key.data,t.value.data)}),i(c,e,this.g.ba)}for(e=n.i;e.next();)e.value.Hb();return n},se.prototype.copySelection=function(){var t=this.g;if(null!==t){for(var e=new f(sa),t=t.selection.i;t.next();)le(e,t.value,!0,this.BH?Infinity:0,this.zH,function(t){return t.canCopy()});this.copyToClipboard(e)}},se.prototype.canCopySelection=function(){var t=this.g;return!(null===t||!t.tk||!t.Oz||0===t.selection.count)},se.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},se.prototype.canCutSelection=function(){var t=this.g;return!(null===t||t.eb||t.yf||!t.tk||!t.gn||!t.Oz||0===t.selection.count)},se.prototype.copyToClipboard=function(t){var e=this.g;if(null!==e){var i=null;if(null===t)kc=null,Sc="";else{var i=e.ba,n=!1,o=null;try{if(i instanceof ee){var r=i;r.sn;r.sn=this.vE}i instanceof Xt&&(r=i,n=r.rn,r.rn=this.uE),o=e.Mp(t,null,!0)}finally{i instanceof ee&&(i.sn=!1),i instanceof Xt&&(i.rn=n),i=new u(sa),i.Hc(o),kc=i,Sc=e.ba.Ll}}e.Aa("ClipboardChanged",i)}},se.prototype.pasteFromClipboard=function(){var t=new f(sa),e=kc;if(null===e)return t;var i=this.g;if(null===i||Sc!==i.ba.Ll)return t;var n=i.ba,o=!1,r=!1,a=null;try{if(n instanceof ee){var s=n,o=s.sn;s.sn=this.vE}n instanceof Xt&&(s=n,r=s.rn,s.rn=this.uE),a=i.Mp(e,i,!1)}finally{for(n instanceof ee&&(n.sn=o),n instanceof Xt&&(n.rn=r),e=a.i;e.next();)i=e.value,n=e.key,i.location.H()||(n.location.H()?i.location=n.location:!i.position.H()&&n.position.H()&&(i.position=n.position)),t.add(i)}return t},se.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.cc="wait",e.Ub("Paste"),e.Aa("ChangingSelection");var i=this.pasteFromClipboard();0<i.count&&kn(e);for(var n=i.i;n.next();)n.value.fb=!0;if(e.Aa("ChangedSelection"),null!==t){var o=e.computePartsBounds(e.selection);if(o.H()){var r=e.ab.re;null===r&&(r=new de,r.Qc(e));var a=r.computeEffectiveCollection(e.selection);r.moveParts(a,new b(t.x-o.ka,t.y-o.ra),!1)}}e.Aa("ClipboardPasted",i)}finally{e.Gd("Paste"),e.cc=""}},se.prototype.canPasteSelection=function(){var t=this.g;return!(null===t||t.eb||t.yf||!t.Fp||!t.Oz||null===kc||Sc!==t.ba.Ll)},se.prototype.undo=function(){var t=this.g;null!==t&&t.oa.undo()},se.prototype.canUndo=function(){var t=this.g;return null!==t&&!t.eb&&!t.yf&&(t.iE&&t.oa.canUndo())},se.prototype.redo=function(){var t=this.g;null!==t&&t.oa.redo()},se.prototype.canRedo=function(){var t=this.g;return null!==t&&!t.eb&&!t.yf&&(t.iE&&t.oa.canRedo())},se.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.my),_h.Fd(t,se,"decreaseZoom:factor");var e=this.g;null!==e&&e.Gl===Qc&&((t*=e.scale)<e.yh||t>e.xh||(e.scale=t))},se.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.my),_h.Fd(t,se,"canDecreaseZoom:factor");var e=this.g;return null!==e&&e.Gl===Qc&&(!((t*=e.scale)<e.yh||t>e.xh)&&e.Pw)},se.prototype.increaseZoom=function(t){void 0===t&&(t=this.my),_h.Fd(t,se,"increaseZoom:factor");var e=this.g;null!==e&&e.Gl===Qc&&((t*=e.scale)<e.yh||t>e.xh||(e.scale=t))},se.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.my),_h.Fd(t,se,"canIncreaseZoom:factor");var e=this.g;return null!==e&&e.Gl===Qc&&(!((t*=e.scale)<e.yh||t>e.xh)&&e.Pw)},se.prototype.resetZoom=function(t){void 0===t&&(t=this.Xw),_h.Fd(t,se,"resetZoom:newscale");var e=this.g;null===e||t<e.yh||t>e.xh||(e.scale=t)},se.prototype.canResetZoom=function(t){void 0===t&&(t=this.Xw),_h.Fd(t,se,"canResetZoom:newscale");var e=this.g;return!(null===e||t<e.yh||t>e.xh)&&e.Pw},se.prototype.zoomToFit=function(){var t=this.g;if(null!==t){var e=t.scale,i=t.position;e===this.Mz&&!isNaN(this.iz)&&t.qe.L(this.Lz)?(t.scale=this.iz,t.position=this.WC,this.Mz=NaN,this.Lz=Iu):(this.iz=e,this.WC=i.copy(),t.zoomToFit(),this.Mz=t.scale,this.Lz=t.qe.copy())}},se.prototype.canZoomToFit=function(){var t=this.g;return null!==t&&t.Pw},se.prototype.scrollToPart=function(t){void 0===t&&(t=null),null!==t&&_h.G(t,sa,se,"part");var e=this.g;if(null!==e){if(null===t){try{null!==this.bj&&(this.bj.next()?t=this.bj.value:this.bj=null)}catch(t){this.bj=null}null===t&&(0<e.Vl.count?this.bj=e.Vl.i:0<e.selection.count&&(this.bj=e.selection.i),null!==this.bj&&this.bj.next()&&(t=this.bj.value))}if(null!==t){var i=e.Pa;i.Un("Scroll To Part");var n=e.position.copy();e.lH(t.W),n.Ic(e.position)&&i.pi()}}},se.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof sa)&&(null!==(t=this.g)&&(0!==t.selection.count||0!==t.Vl.count)&&(t.me&&t.ne))},se.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Ub("Collapse Tree"),e.Pa.Un("Collapse Tree");var i=new u(Ba);if(null!==t&&t.gd)t.collapseTree(),i.add(t);else for(var n=e.selection.i;n.next();){var o=n.value;o instanceof Ba&&(t=o,t.gd&&(t.collapseTree(),i.add(t)))}e.Aa("TreeCollapsed",i)}finally{e.Gd("Collapse Tree")}},se.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.eb)return!1;if(null!==t){if(!(t instanceof Ba&&t.gd))return!1;if(0<t.jx().count)return!0}else for(t=e.selection.i;t.next();)if((e=t.value)instanceof Ba&&e.gd&&0<e.jx().count)return!0;return!1},se.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Ub("Expand Tree"),e.Pa.Un("Expand Tree");var i=new u(Ba);if(null===t||t.gd)for(var n=e.selection.i;n.next();){var o=n.value;o instanceof Ba&&(t=o,t.gd||(t.expandTree(),i.add(t)))}else t.expandTree(),i.add(t);e.Aa("TreeExpanded",i)}finally{e.Gd("Expand Tree")}},se.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.eb)return!1;if(null!==t){if(!(t instanceof Ba)||t.gd)return!1;if(0<t.jx().count)return!0}else for(t=e.selection.i;t.next();)if((e=t.value)instanceof Ba&&!e.gd&&0<e.jx().count)return!0;return!1},se.prototype.groupSelection=function(){var t=this.g;if(null!==t){var e=t.ba;if(e instanceof Xt){var i=this.jE;if(null!==i){var n=null;try{t.cc="wait",t.Ub("Group"),t.Aa("ChangingSelection");for(var o=new u(sa),r=t.selection.i;r.next();){var a=r.value;a.de()&&a.canGroup()&&o.add(a)}for(var s=new u(sa),l=o.i;l.next();){for(var h=l.value,r=!1,c=o.i;c.next();)if(h.mi(c.value)){r=!0;break}r||s.add(h)}if(0<s.count){var f=s.first().Ka;if(null!==f)for(;null!==f;){for(var o=!1,d=s.i;d.next();)if(!d.value.mi(f)){o=!0;break}if(!o)break;f=f.Ka}if(i instanceof Cs)vr(i),null!==(n=i.copy())&&t.add(n);else if(e.zA(i)){var p=e.copyNodeData(i);_h.Qa(p)&&(e.Cl(p),n=t.ix(p))}if(null!==n){null!==f&&this.isValidMember(f,n)&&(n.Ka=f);for(var g=s.i;g.next();){var y=g.value;this.isValidMember(n,y)&&(y.Ka=n)}t.select(n)}}t.Aa("ChangedSelection"),t.Aa("SelectionGrouped",n)}finally{t.Gd("Group"),t.cc=""}}}}},se.prototype.canGroupSelection=function(){var t=this.g;if(null===t||t.eb||t.yf||!t.Fp||!t.Kw||!(t.ba instanceof Xt)||null===this.jE)return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.de()&&e.canGroup())return!0}return!1},se.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof Ua)return!1;if(null!==t){if(t===e||t.mi(e))return!1;var i=t.JA;if(null!==i&&!i(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(i=this.JA)||i(t,e)},se.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e){var i=e.ba;if(i instanceof Xt)try{e.cc="wait",e.Ub("Ungroup"),e.Aa("ChangingSelection");var n=new u(Cs);if(null!==t)n.add(t);else for(var o=e.selection.i;o.next();){var r=o.value;r instanceof Cs&&(t=r,t.canUngroup()&&n.add(t))}if(0<n.count){e.Rw();for(var a=n.i;a.next();){var s=a.value;s.expandSubGraph();var l=s.Ka,h=null!==l&&null!==l.data?i.ub(l.data):void 0,c=new u(sa);c.Hc(s.Nc);for(var f=c.i;f.next();){var d=f.value;if(d.fb=!0,!(d instanceof Ua)){var p=d.data;null!==p?i.fB(p,h):d.Ka=l}}e.remove(s)}}e.Aa("ChangedSelection"),e.Aa("SelectionUngrouped",n,c)}finally{e.Gd("Ungroup"),e.cc=""}}},se.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.eb||e.yf||!e.gn||!e.Ow||!(e.ba instanceof Xt))return!1;if(null!==t){if(!(t instanceof Cs))return!1;if(t.canUngroup())return!0}else for(t=e.selection.i;t.next();)if((e=t.value)instanceof Cs&&e.canUngroup())return!0;return!1},se.prototype.addTopLevelParts=function(t,e){for(var i=!0,n=ue(t).i;n.next();){var o=n.value;null!==o.Ka&&(!e||this.isValidMember(null,o)?o.Ka=null:i=!1)}return i},se.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Ub("Collapse SubGraph"),e.Pa.Un("Collapse SubGraph");var i=new u(Cs);if(null!==t&&t.we)t.collapseSubGraph(),i.add(t);else for(var n=e.selection.i;n.next();){var o=n.value;o instanceof Cs&&(t=o,t.we&&(t.collapseSubGraph(),i.add(t)))}e.Aa("SubGraphCollapsed",i)}finally{e.Gd("Collapse SubGraph")}},se.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.eb)return!1;if(null!==t)return!!(t instanceof Cs&&t.we);for(t=e.selection.i;t.next();)if((e=t.value)instanceof Cs&&e.we)return!0;return!1},se.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Ub("Expand SubGraph"),e.Pa.Un("Expand SubGraph");var i=new u(Cs);if(null===t||t.we)for(var n=e.selection.i;n.next();){var o=n.value;o instanceof Cs&&(t=o,t.we||(t.expandSubGraph(),i.add(t)))}else t.expandSubGraph(),i.add(t);e.Aa("SubGraphExpanded",i)}finally{e.Gd("Expand SubGraph")}},se.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.eb)return!1;if(null!==t)return t instanceof Cs&&!t.we;for(t=e.selection.i;t.next();)if((e=t.value)instanceof Cs&&!e.we)return!0;return!1},se.prototype.editTextBlock=function(t){void 0===t&&(t=null),null!==t&&_h.G(t,Er,se,"editTextBlock");var e=this.g;if(null!==e){var i=e.ab.oB;if(null!==i){if(null===t){t=null;for(var n=e.selection.i;n.next();){var o=n.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.Jt(function(t){return t instanceof Er&&t.eA})}null!==t&&(e.Za=null,i.Xg=t,e.Za=i)}}},se.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.eb||e.yf||!e.Nw||null===e.ab.oB)return!1;if(null!==t){if(!(t instanceof Er))return!1;if(null!==(t=t.U)&&t.canEdit())return!0}else for(e=e.selection.i;e.next();)if(t=e.value,t.canEdit()&&null!==(t=t.Jt(function(t){return t instanceof Er&&t.eA})))return!0;return!1},se.prototype.showContextMenu=function(t){var e=this.g;if(null!==e){var i=e.ab.Xz;if(null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=i.findObjectWithContextMenu(t)))){var n=new Ct,o=null;t instanceof Mo?o=t.Wa(au):e.vI||(o=e.pb,o=new b(o.x+o.width/2,o.y+o.height/2)),null!==o&&(n.g=e,n.bf=e.uG(o),n.ca=o,n.left=!1,n.right=!0,n.up=!0,e.R=n),e.Za=i,ri(i,!1,t)}}},se.prototype.canShowContextMenu=function(t){var e=this.g;if(null===e)return!1;var i=e.ab.Xz;return null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==i.findObjectWithContextMenu(t))},_h.defineProperty(se,{yH:"copiesClipboardData"},function(){return this.ZB},function(t){_h.j(t,"boolean",se,"copiesClipboardData"),this.ZB=t}),_h.defineProperty(se,{zH:"copiesConnectedLinks"},function(){return this.$B},function(t){_h.j(t,"boolean",se,"copiesConnectedLinks"),this.$B=t}),_h.defineProperty(se,{CE:"deletesConnectedLinks"},function(){return this.tC},function(t){_h.j(t,"boolean",se,"deletesConnectedLinks"),this.tC=t}),_h.defineProperty(se,{BH:"copiesTree"},function(){return this.dC},function(t){_h.j(t,"boolean",se,"copiesTree"),this.dC=t}),_h.defineProperty(se,{IH:"deletesTree"},function(){return this.uC},function(t){_h.j(t,"boolean",se,"deletesTree"),this.uC=t}),_h.defineProperty(se,{vE:"copiesParentKey"},function(){return this.cC},function(t){_h.j(t,"boolean",se,"copiesParentKey"),this.cC=t}),_h.defineProperty(se,{uE:"copiesGroupKey"},function(){return this.bC},function(t){_h.j(t,"boolean",se,"copiesGroupKey"),this.bC=t}),_h.defineProperty(se,{jE:"archetypeGroupData"},function(){return this.PB},function(t){null!==t&&_h.G(t,Object,se,"archetypeGroupData");var e=this.g;null!==e&&(e=e.ba)instanceof Xt&&(t instanceof Cs||e.zA(t)||_h.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t)),this.PB=t}),_h.defineProperty(se,{JA:"memberValidation"},function(){return this.ql},function(t){null!==t&&_h.j(t,"function",se,"memberValidation"),this.ql=t}),_h.defineProperty(se,{Xw:"defaultScale"},function(){return this.qC},function(t){_h.Fd(t,se,"defaultScale"),0<t||_h.k("defaultScale must be larger than zero, not: "+t),this.qC=t}),_h.defineProperty(se,{my:"zoomFactor"},function(){return this.$D},function(t){_h.Fd(t,se,"zoomFactor"),1<t||_h.k("zoomFactor must be larger than 1.0, not: "+t),this.$D=t}),_h.fa("Tool",ce),ce.prototype.Qc=function(t){this.Z=t},ce.prototype.toString=function(){return""!==this.name?this.name+" Tool":_h.hf(Object.getPrototypeOf(this))},ce.prototype.updateAdornments=function(){},ce.prototype.canStart=function(){return this.isEnabled},ce.prototype.doStart=function(){},ce.prototype.doActivate=function(){this.sa=!0},ce.prototype.doDeactivate=function(){this.sa=!1},ce.prototype.doStop=function(){},ce.prototype.doCancel=function(){this.stopTool()},ce.prototype.stopTool=function(){var t=this.g;null!==t&&t.Za===this&&(t.Za=null,t.cc="")},ce.prototype.doMouseDown=function(){!this.sa&&this.canStart()&&this.doActivate()},ce.prototype.doMouseMove=function(){},ce.prototype.doMouseUp=function(){this.stopTool()},ce.prototype.doMouseWheel=function(){},ce.prototype.canStartMultiTouch=function(){return!0},ce.prototype.standardPinchZoomStart=function(){var t=this.g;if(null!==t){var e=t.R,i=e.mx(0,_h.xb(NaN,NaN)),n=e.mx(1,_h.xb(NaN,NaN));if(i.H()&&n.H()&&(this.doCancel(),t.Tt("hasGestureZoom"))){t.jD=t.scale;var o=n.x-i.x,r=n.y-i.y;t.BD=Math.sqrt(o*o+r*r),e.bubbles=!1}_h.v(i),_h.v(n)}},ce.prototype.standardPinchZoomMove=function(){var t=this.g;if(null!==t){var e=t.R,i=e.mx(0,_h.xb(NaN,NaN)),n=e.mx(1,_h.xb(NaN,NaN));if(i.H()&&n.H()&&(this.doCancel(),t.Tt("hasGestureZoom"))){var o=n.x-i.x,r=n.y-i.y,r=Math.sqrt(o*o+r*r)/t.BD,o=new b((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),r=t.jD*r,a=t.ob;if(r!==t.scale&&a.canResetZoom(r)){var s=t.lm;t.lm=o,a.resetZoom(r),t.lm=s}e.bubbles=!1}_h.v(i),_h.v(n)}},ce.prototype.doKeyDown=function(){var t=this.g;null!==t&&"Esc"===t.R.key&&this.doCancel()},ce.prototype.doKeyUp=function(){},ce.prototype.startTransaction=ce.prototype.Ub=function(t){void 0===t&&(t=this.name),this.Gf=null;var e=this.g;return null!==e&&e.Ub(t)},ce.prototype.stopTransaction=ce.prototype.Lk=function(){var t=this.g;return null!==t&&(null===this.Gf?t.mq():t.Gd(this.Gf))},ce.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.tf){var e=t.R,i=t.Mt(e.ca,!1);if(null!==i){if(_h.Fk?e.lu:e.control){for(t.Aa("ChangingSelection"),e=i;null!==e&&!e.canSelect();)e=e.Ka;null!==e&&(e.fb=!e.fb),t.Aa("ChangedSelection")}else if(e.shift){if(!i.fb){for(t.Aa("ChangingSelection"),e=i;null!==e&&!e.canSelect();)e=e.Ka;null!==e&&(e.fb=!0),t.Aa("ChangedSelection")}}else if(!i.fb){for(e=i;null!==e&&!e.canSelect();)e=e.Ka;null!==e&&t.select(e)}}else!e.left||(_h.Fk?e.lu:e.control)||e.shift||t.Rw()}},ce.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.Kc});var i=this.g;if(null===i)return!1;var n=i.R,o=i.Je(n.ca,t,e);return n.Pe=o,fe(o,n,i),n.Ac},ce.prototype.standardMouseOver=function(){var t=this.g;if(null!==t){var e=t.R;if(null!==e.g&&!0!==t.Pa.pc){var i=t.wb;t.wb=!0;var n=t.Je(e.ca,null,null);e.Pe=n;var o=!1;if(n!==t.wo){var r=t.wo,a=r;for(t.wo=n,this.doCurrentObjectChanged(r,n),e.Ac=!1;null!==r;){var s=r.nu;if(null!==s){if(n===r)break;if(null!==n&&n.Xl(r))break;if(s(e,r,n),o=!0,e.Ac)break}r=r.O}for(r=a,e.Ac=!1;null!==n;){if(null!==(s=n.mu)){if(r===n)break;if(null!==r&&r.Xl(n))break;if(s(e,n,r),o=!0,e.Ac)break}n=n.O}n=t.wo}if(null!==n){for(r=n,a="";null!==r&&""===(a=r.cursor);)r=r.O;for(t.cc=a,e.Ac=!1,r=n;null!==r&&(null===(n=r.NA)||(n(e,r),o=!0,!e.Ac));)r=r.O}else t.cc="",null!==(n=t.NA)&&(n(e),o=!0);o&&t.Le(),t.wb=i}}},ce.prototype.doCurrentObjectChanged=function(){},ce.prototype.standardMouseWheel=function(){var t=this.g;if(null!==t){var e=t.R,i=e.Nl;if(0!==i&&t.qe.H()){var n=t.ob,o=t.ab.ou;if((o===Kc&&!e.shift||o===_c&&e.control)&&(0<i?n.canIncreaseZoom():n.canDecreaseZoom()))o=t.lm,t.lm=e.bf,0<i?n.increaseZoom():n.decreaseZoom(),t.lm=o,e.bubbles=!1;else if(o===Kc&&e.shift||o===_c&&!e.control){var n=t.position.copy(),o=0<i?i:-i,r=e.event.deltaX,a=e.event.deltaY;void 0===r||void 0===a||0===r&&0===a||e.shift?!e.shift&&t.ne?(r=t.Cu,o=o/40*r,0<i?t.scroll("pixel","up",o):t.scroll("pixel","down",o)):e.shift&&t.me&&(r=t.Bu,o=o/40*r,0<i?t.scroll("pixel","left",o):t.scroll("pixel","right",o)):(0!==r&&t.me&&(0<r?t.scroll("pixel","left",-r):t.scroll("pixel","right",r)),0!==a&&t.ne&&(0<a?t.scroll("pixel","up",-a):t.scroll("pixel","down",a))),t.position.L(n)||(e.bubbles=!1)}}}},ce.prototype.standardWaitAfter=function(t,e){_h.j(t,"number",ce,"standardWaitAfter:delay"),this.cancelWaitAfter();var i=this,n=e.copy();this.Gw=_h.setTimeout(function(){i.doWaitAfter(n)},t)},ce.prototype.cancelWaitAfter=function(){-1!==this.Gw&&_h.clearTimeout(this.Gw),this.Gw=-1},ce.prototype.doWaitAfter=function(){},ce.prototype.findToolHandleAt=function(t,e){var i=this.g;return null===i?null:(i=i.Je(t,function(t){for(;null!==t&&!(t.O instanceof Aa);)t=t.O;return t}),null===i?null:i.U.td===e?i:null)},ce.prototype.isBeyondDragSize=function(t,e){var i=this.g;if(null===i)return!1;void 0===t&&(t=i.zc.bf),void 0===e&&(e=i.R.bf);var n=i.ab.MH,o=n.width,n=n.height;return i.zc.vj&&(o+=6,n+=6),Math.abs(e.x-t.x)>o||Math.abs(e.y-t.y)>n},_h.u(ce,{g:"diagram"},function(){return this.Z}),_h.defineProperty(ce,{name:"name"},function(){return this.Qb},function(t){_h.j(t,"string",ce,"name"),this.Qb=t}),_h.defineProperty(ce,{isEnabled:"isEnabled"},function(){return this.cf},function(t){_h.j(t,"boolean",ce,"isEnabled"),this.cf=t}),_h.defineProperty(ce,{sa:"isActive"},function(){return this.JC},function(t){_h.j(t,"boolean",ce,"isActive"),this.JC=t}),_h.defineProperty(ce,{
Gf:"transactionResult"},function(){return this.UD},function(t){null!==t&&_h.j(t,"string",ce,"transactionResult"),this.UD=t}),_h.La(de,ce),_h.fa("DraggingTool",de),_h.defineProperty(de,{hF:"isCopyEnabled"},function(){return this.NC},function(t){_h.j(t,"boolean",de,"isCopyEnabled"),this.NC=t}),_h.defineProperty(de,{AH:"copiesEffectiveCollection"},function(){return this.aC},function(t){_h.j(t,"boolean",de,"copiesEffectiveCollection"),this.aC=t}),_h.defineProperty(de,{NH:"dragsTree"},function(){return this.zC},function(t){_h.j(t,"boolean",de,"dragsTree"),this.zC=t}),_h.defineProperty(de,{ux:"isGridSnapEnabled"},function(){return this.Ir},function(t){_h.j(t,"boolean",de,"isGridSnapEnabled"),this.Ir=t}),_h.defineProperty(de,{qI:"isComplexRoutingRealtime"},function(){return this.MC},function(t){_h.j(t,"boolean",de,"isComplexRoutingRealtime"),this.MC=t}),_h.defineProperty(de,{sI:"isGridSnapRealtime"},function(){return this.RC},function(t){_h.j(t,"boolean",de,"isGridSnapRealtime"),this.RC=t}),_h.defineProperty(de,{ZE:"gridSnapCellSize"},function(){return this.Zy},function(t){_h.G(t,k,de,"gridSnapCellSize"),this.Zy.L(t)||(this.Zy=t=t.S())}),_h.defineProperty(de,{bI:"gridSnapCellSpot"},function(){return this.$y},function(t){_h.G(t,D,de,"gridSnapCellSpot"),this.$y.L(t)||(this.$y=t=t.S())}),_h.defineProperty(de,{cI:"gridSnapOrigin"},function(){return this.az},function(t){_h.G(t,b,de,"gridSnapOrigin"),this.az.L(t)||(this.az=t=t.S())}),_h.defineProperty(de,{nj:"dragsLink"},function(){return this.yC},function(t){_h.j(t,"boolean",de,"dragsLink"),this.yC=t}),_h.defineProperty(de,{un:"currentPart"},function(){return this.iC},function(t){null!==t&&_h.G(t,sa,de,"currentPart"),this.iC=t}),_h.defineProperty(de,{bc:"copiedParts"},function(){return this.YB},function(t){this.YB=t}),_h.defineProperty(de,{Xb:"draggedParts"},function(){return this.xC},function(t){this.xC=t}),_h.u(de,{PK:"draggingParts"},function(){return null!==this.bc?this.bc.Gj():null!==this.Xb?this.Xb.Gj():this.HG}),_h.defineProperty(de,{ed:"draggedLink"},function(){return this.Py},function(t){null!==t&&_h.G(t,Ua,de,"draggedLink"),this.Py!==t&&(this.Py=t,null!==t&&(this.pz=t.Jc,this.qz=t.jd))}),_h.defineProperty(de,{tx:"isDragOutStarted"},function(){return this.PC},function(t){this.PC=t}),_h.defineProperty(de,{Kk:"startPoint"},function(){return this.ww},function(t){_h.G(t,b,de,"startPoint"),this.ww.L(t)||(this.ww=t=t.S())}),_h.defineProperty(de,{yE:"delay"},function(){return this.Co},function(t){_h.j(t,"number",de,"delay"),this.Co=t}),de.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.eb&&!t.yt||!t.El&&!t.tk&&!t.yt||!t.tf)return!1;var e=t.R;return!(!e.left||t.Za!==this&&(!this.isBeyondDragSize()||e.vj&&e.timestamp-t.zc.timestamp<this.Co))&&null!==this.findDraggablePart()},de.prototype.findDraggablePart=function(){var t=this.g;if(null===t)return null;if(null===(t=t.Mt(t.zc.ca,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.Ka;return null!==t&&(t.canMove()||t.canCopy())?t:null},de.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.tf){var e=t.Mt(t.zc.ca,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.Ka;this.un=e,this.un.fb||(t.Aa("ChangingSelection"),e=t.R,(_h.Fk?e.lu:e.control)||e.shift||kn(t),this.un.fb=!0,t.Aa("ChangedSelection"))}}},de.prototype.doActivate=function(){var t=this.g;if(null!==t){null===this.un&&this.standardMouseSelect();var e=this.un;null!==e&&(e.canMove()||e.canCopy())&&(this.sa=!0,this.sp.set(t.position),pe(this,t.selection),this.Nj.length=0,this.Xb=this.computeEffectiveCollection(t.selection),t.Iu=!0,be(this,this.Xb),this.Ub("Drag"),this.Kk=t.zc.ca,t.$e=!0,t.yt&&(this.tx=!0,this.or=!1,Pc=this,Tc=this.g,this.doSimulatedDragOut()))}},de.prototype.computeEffectiveCollection=function(t){var e=null!==this.g&&this.g.Za===this,i=new v(sa);if(null===t)return i;for(var n=t.i;n.next();)ye(this,i,n.value,e);if(null!==this.ed&&this.nj)return i;for(n=t.i;n.next();)(t=n.value)instanceof Ua&&(e=t.Y,null===e||i.contains(e)?null===(e=t.$)||i.contains(e)||i.remove(t):i.remove(t));return i},de.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;if(null!==t&&no(t),me(this),xe(this,this.Xb),this.Xb=this.un=null,this.or=this.tx=!1,0<Mc.count){for(var e=Mc.length,i=0;i<e;i++){var n=Mc.da(i);Me(n),Se(n),me(n),null!==n.g&&no(n.g)}Mc.clear()}Me(this),this.sp.m(NaN,NaN),Pc=Tc=null,Se(this),t.$e=!1,t.cc="",t.Iu=!1,this.Lk()},de.prototype.doCancel=function(){Se(this),Le(this);var t=this.g;null!==t&&this.sp.H()&&(t.position=this.sp),this.stopTool()},de.prototype.doKeyDown=function(){var t=this.g;null!==t&&null!==(t=t.R)&&this.sa&&("Esc"===t.key?this.doCancel():this.doMouseMove())},de.prototype.doKeyUp=function(){var t=this.g;null!==t&&null!==t.R&&this.sa&&this.doMouseMove()},de.prototype.moveParts=function(t,e,i){if(null!==t&&(_h.G(t,v,de,"moveParts:parts"),0!==t.count)){var n=_h.K(),o=_h.K();o.assign(e),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),(e=this.zw)||be(this,t);for(var r=new u(Oe),a=new u(y),s=t.i;s.next();){var l=s.key;if(l.de()){var h=Te(this,l,t);if(null!==h)r.add(new Oe(l,s.value,h));else if(!i||l.canMove()){h=s.value.point,n.assign(h);var c=_h.K(),f=this.computeMove(l,n.add(o),t,c);l.location=f,s.value.hG=c.$n(h),_h.v(c)}}else s.key instanceof Ua&&a.add(s.Va)}for(i=r.i;i.next();)r=i.value,h=r.info.point,n.assign(h),r.Oc.location=n.add(r.dI.hG);for(i=_h.K(),h=_h.K(),a=a.i;a.next();)s=a.value,(r=s.key)instanceof Ua&&(r.fm?(l=r.Y,c=r.$,null!==this.ed&&this.nj?(s=s.value.point,t.add(r,ge(o)),l=o.x-s.x,s=o.y-s.y,r.Hk(l,s)):(null!==l&&(i.assign(l.location),null!==(f=t.ja(l))&&i.$n(f.point)),null!==c&&(h.assign(c.location),null!==(f=t.ja(c))&&h.$n(f.point)),null!==l&&null!==c?i.Ic(h)?(s=s.value.point,l=n,l.assign(i),l.$n(s),t.add(r,ge(i)),r.Hk(l.x,l.y)):(r.fm=!1,r.Yb()):(s=s.value.point,c=null!==l?i:null!==c?h:o,t.add(r,ge(c)),l=c.x-s.x,s=c.y-s.y,r.Hk(l,s)))):null!==r.Y&&null!==r.$||(s=s.value.point,t.add(r,ge(o)),l=o.x-s.x,s=o.y-s.y,r.Hk(l,s)));_h.v(n),_h.v(o),_h.v(i),_h.v(h),e||(sn(this.g),xe(this,t))}},de.prototype.computeMove=function(t,e,i,n){if(void 0===n&&(n=new b),n.assign(e),null===t)return n;void 0===i&&(i=null);var o=e;if(this.ux&&(this.sI||null===i||null!==this.g&&this.g.R.up)&&(o=_h.K(),i=o,i.assign(e),null!==t)){var r=this.g;if(null!==r){var a=r.Dn,s=this.ZE,r=s.width,s=s.height,l=this.cI,h=l.x,l=l.y,u=this.bI;if(null!==a){var c=a.ox;isNaN(r)&&(r=c.width),isNaN(s)&&(s=c.height),a=a.YE,isNaN(h)&&(h=a.x),isNaN(l)&&(l=a.y)}a=_h.xb(0,0),a.Gu(0,0,r,s,u),pt(e.x,e.y,h+a.x,l+a.y,r,s,i),_h.v(a)}}return i=null!==t.DE?t.DE(t,e,o):o,s=t.UI,r=s.x,isNaN(r)&&(r=t.location.x),s=s.y,isNaN(s)&&(s=t.location.y),a=t.NI,h=a.x,isNaN(h)&&(h=t.location.x),a=a.y,isNaN(a)&&(a=t.location.y),n.m(Math.max(r,Math.min(i.x,h)),Math.max(s,Math.min(i.y,a))),o!==e&&_h.v(o),n},de.prototype.doDragOver=function(){},de.prototype.doDropOnto=function(){},de.prototype.doMouseMove=function(){if(this.sa){var t=this.g;if(null!==t&&null!==this.un&&null!==this.Xb){var e=!1,i=!1;this.mayCopy()?(e=!0,t.cc="copy",ke(this,!1),be(this,this.bc),Pe(this,this.bc,!1),xe(this,this.bc)):this.mayMove()?(i=!0,t.cc="default",Se(this),Pe(this,this.Xb,!0)):this.mayDragOut()?(t.cc="no-drop",ke(this,!1),Pe(this,this.bc,!1)):Se(this),Ce(this,t.R.ca,i,e)}}},de.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null!==t){var e=!1,i=this.mayCopy();if(i&&null!==this.bc?(Se(this),ke(this,!0),be(this,this.bc),Pe(this,this.bc,!1),xe(this,this.bc),null!==this.bc&&t.cG(this.bc.Gj())):(e=!0,Se(this),this.mayMove()&&(Pe(this,this.Xb,!0),Ce(this,t.R.ca,!0,!1))),this.or=!0,je(this,t.R.ca),this.sa){if(this.bc=null,e&&null!==this.Xb)for(e=this.Xb.i;e.next();){var n=e.key;n instanceof Ba&&(null===(n=n.Ka)||null===n.placeholder||this.Xb.contains(n)||n.placeholder.I())}t.rc(),xe(this,this.Xb),this.Gf=i?"Copy":"Move",t.Aa(i?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},de.prototype.mayCopy=function(){if(!this.hF)return!1;var t=this.g;if(null===t||t.eb||t.yf||!t.Fp||!t.tk||(_h.Fk?!t.R.alt:!t.R.control))return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.de()&&e.canCopy())return!0}return!(null===this.ed||!this.nj||!this.ed.canCopy())},de.prototype.mayDragOut=function(){if(!this.hF)return!1;var t=this.g;if(null===t||!t.yt||!t.tk||t.El)return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.de()&&e.canCopy())return!0}return!(null===this.ed||!this.nj||!this.ed.canCopy())},de.prototype.mayMove=function(){var t=this.g;if(null===t||t.eb||!t.El)return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.de()&&e.canMove())return!0}return!(null===this.ed||!this.nj||!this.ed.canMove())};var Mc=new u(de),Pc=null,Tc=null;de.prototype.getDraggingSource=function(){return Pc},de.prototype.mayDragIn=function(){var t=this.g;if(null===t||!t.hE||t.eb||t.yf||!t.Fp)return!1;var e=Pc;return null!==e&&null!==e.g&&e.g.ba.Ll===t.ba.Ll},de.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.Pa.pi(),rn(t),t=Pc,null!==t&&null!==t.g&&(t.g.cc="copy")}},de.prototype.doSimulatedDragLeave=function(){var t=Pc;null!==t&&t.doSimulatedDragOut(),this.doCancel()},de.prototype.doSimulatedDragOver=function(){var t=this.g;if(null!==t){var e=Pc;null!==e&&null!==e.Xb&&this.mayDragIn()&&(t.cc="copy",Ee(this,e.Xb.Gj(),!1),Pe(this,this.bc,!1),Ce(this,t.R.ca,!1,!0))}},de.prototype.doSimulatedDrop=function(){var t=this.g;if(null!==t){var e=Pc;if(null!==e){var i=e.g;e.or=!0,Se(this),this.mayDragIn()&&(this.Ub("Drop"),Ee(this,e.Xb.Gj(),!0),Pe(this,this.bc,!1),null!==this.bc&&t.cG(this.bc.Gj()),je(this,t.R.ca),t.rc(),e=t.selection,null!==this.bc?this.Gf="ExternalCopy":e=new f(sa),this.bc=null,t.doFocus(),t.Aa("ExternalObjectsDropped",e,i),this.Lk())}}},de.prototype.doSimulatedDragOut=function(){var t=this.g;null!==t&&(this.mayCopy()||this.mayMove()?t.cc="":t.cc="no-drop")},_h.fa("DraggingInfo",Ie),_h.La(ze,ce),_h.fa("LinkingBaseTool",ze),ze.prototype.doStop=function(){var t=this.g;null!==t&&no(t),this.Sg=this.Rg=this.Qg=this.Pg=this.kc=null,this.ky.clear(),this.Df=null},_h.defineProperty(ze,{KF:"portGravity"},function(){return this.tD},function(t){_h.j(t,"number",ze,"portGravity"),0<=t&&(this.tD=t)}),_h.defineProperty(ze,{cq:"isUnconnectedLinkValid"},function(){return this.UC},function(t){_h.j(t,"boolean",ze,"isUnconnectedLinkValid"),this.UC=t}),_h.defineProperty(ze,{Wg:"temporaryLink"},function(){return this.ND},function(t){_h.G(t,Ua,ze,"temporaryLink"),this.ND=t}),_h.defineProperty(ze,{Rd:"temporaryFromNode"},function(){return this.LD},function(t){_h.G(t,Ba,ze,"temporaryFromNode"),this.LD=t}),_h.defineProperty(ze,{ao:"temporaryFromPort"},function(){return this.MD},function(t){_h.G(t,Mo,ze,"temporaryFromPort"),this.MD=t}),_h.defineProperty(ze,{Sd:"temporaryToNode"},function(){return this.OD},function(t){_h.G(t,Ba,ze,"temporaryToNode"),this.OD=t}),_h.defineProperty(ze,{bo:"temporaryToPort"},function(){return this.PD},function(t){_h.G(t,Mo,ze,"temporaryToPort"),this.PD=t}),_h.defineProperty(ze,{kc:"originalLink"},function(){return this.nD},function(t){null!==t&&_h.G(t,Ua,ze,"originalLink"),this.nD=t}),_h.defineProperty(ze,{Pg:"originalFromNode"},function(){return this.lD},function(t){null!==t&&_h.G(t,Ba,ze,"originalFromNode"),this.lD=t}),_h.defineProperty(ze,{Qg:"originalFromPort"},function(){return this.mD},function(t){null!==t&&_h.G(t,Mo,ze,"originalFromPort"),this.mD=t}),_h.defineProperty(ze,{Rg:"originalToNode"},function(){return this.qD},function(t){null!==t&&_h.G(t,Ba,ze,"originalToNode"),this.qD=t}),_h.defineProperty(ze,{Sg:"originalToPort"},function(){return this.rD},function(t){null!==t&&_h.G(t,Mo,ze,"originalToPort"),this.rD=t}),_h.defineProperty(ze,{Nd:"isForwards"},function(){return this.QC},function(t){_h.j(t,"boolean",ze,"isForwards"),this.QC=t}),_h.u(ze,{ky:"validPortsCache"},function(){return this.VG}),_h.defineProperty(ze,{Df:"targetPort"},function(){return this.HD},function(t){null!==t&&_h.G(t,Mo,ze,"targetPort"),this.HD=t}),ze.prototype.copyPortProperties=function(t,e,i,n,o){if(null!==t&&null!==e&&null!==i&&null!==n){n.Ba=e.W.size,o?(n.Bb=e.Bb,n.jm=e.jm):(n.Ab=e.Ab,n.Sl=e.Sl),i.Af=au;var r=_h.K();i.location=e.Wa(au,r),_h.v(r),n.angle=e.zn(),null!==this.Px&&this.Px(t,e,i,n,o)}},ze.prototype.setNoTargetPortProperties=function(t,e,i){null!==e&&(e.Ba=Hu,e.Ab=tu,e.Bb=tu),null!==t&&null!==this.g&&(t.location=this.g.R.ca),null!==this.Px&&this.Px(null,null,t,e,i)},ze.prototype.doMouseDown=function(){this.sa&&this.doMouseMove()},ze.prototype.doMouseMove=function(){if(this.sa){var t=this.g;if(null!==t){if(this.Df=this.findTargetPort(this.Nd),null!==this.Df&&this.Df.U instanceof Ba){var e=this.Df.U;this.Nd?this.copyPortProperties(e,this.Df,this.Sd,this.bo,!0):this.copyPortProperties(e,this.Df,this.Rd,this.ao,!1)}else this.Nd?this.setNoTargetPortProperties(this.Sd,this.bo,!0):this.setNoTargetPortProperties(this.Rd,this.ao,!1);(t.me||t.ne)&&t.dA(t.R.bf)}}},ze.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var i=t.U;if(!(i instanceof Ba))return null;for(;null!==t;){var n=e?t.pG:t.PE;if(!0===n&&(null!==t.Qd||t instanceof Ba)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)break;t=t.O}return null},ze.prototype.findTargetPort=function(t){var e=this.g,i=e.R.ca,n=this.KF;0>=n&&(n=.1);for(var o=this,r=e.wn(i,n,function(e){return o.findValidLinkablePort(e,t)},null,!0),n=Infinity,e=null,r=r.i;r.next();){var a=r.value,s=a.U;if(s instanceof Ba){var l=a.Wa(au,_h.K()),h=i.x-l.x,u=i.y-l.y;_h.v(l),l=h*h+u*u,l<n&&(h=this.ky.ja(a),null!==h?h&&(e=a,n=l):t&&this.isValidLink(this.Pg,this.Qg,s,a)||!t&&this.isValidLink(s,a,this.Rg,this.Sg)?(this.ky.add(a,!0),e=a,n=l):this.ky.add(a,!1))}}return null!==e&&(i=e.U)instanceof Ba&&(null===i.layer||i.layer.zt)?e:null},ze.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.cq;if(null!==this.g&&this.g.Za===this&&(null!==t.layer&&!t.layer.zt||!0!==e.PE))return!1;var i=e.lA;if(Infinity>i){if(null!==this.kc&&t===this.Pg&&e===this.Qg)return!0;var n=e.Qd;if(null===n&&(n=""),t.hx(n).count>=i)return!1}return!0},ze.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.cq;if(null!==this.g&&this.g.Za===this&&(null!==t.layer&&!t.layer.zt||!0!==e.pG))return!1;var i=e.NJ;if(Infinity>i){if(null!==this.kc&&t===this.Rg&&e===this.Sg)return!0;var n=e.Qd;if(null===n&&(n=""),t.Kg(n).count>=i)return!1}return!0},ze.prototype.isInSameNode=function(t,e){if(null===t||null===e)return!1;if(t===e)return!0;var i=t.U,n=e.U;return null!==i&&i===n},ze.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var i=t.U;if(!(i instanceof Ba))return!1;var n=t.Qd;null===n&&(n="");var o=e.U;if(!(o instanceof Ba))return!1;var r=e.Qd;for(null===r&&(r=""),o=o.Kg(r);o.next();)if(r=o.value,r.Y===i&&r.Lg===n)return!0;return!1},ze.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(null===e||null===n||(e.UH&&n.MJ||!this.isInSameNode(e,n))&&(e.TH&&n.LJ||!this.isLinked(e,n)))||null!==this.kc&&(null!==t&&this.isLabelDependentOnLink(t,this.kc)||null!==i&&this.isLabelDependentOnLink(i,this.kc))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.kc))return!1;if(null!==t){var o=t.Fx;if(null!==o&&!o(t,e,i,n,this.kc))return!1}return!(null!==i&&null!==(o=i.Fx)&&!o(t,e,i,n,this.kc))&&(null===(o=this.Fx)||o(t,e,i,n,this.kc))},ze.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var i=t.Mc;if(null===i)return!1;if(i===e)return!0;var n=new f(Ba);return n.add(t),Ge(this,i,e,n)},ze.prototype.isValidCycle=function(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.cq;var n=null!==this.g?this.g.TJ:ef;if(n!==ef){if(n===af){if(null!==i&&!i.Lc)return!0;for(n=e.fe;n.next();){var o=n.value;if(o!==i&&o.Lc&&o.$===e)return!1}return!Re(this,t,e,i,!0)}if(n===sf){if(null!==i&&!i.Lc)return!0;for(n=t.fe;n.next();)if((o=n.value)!==i&&o.Lc&&o.Y===t)return!1;return!Re(this,t,e,i,!0)}if(n===nf)return t===e?t=!0:(n=new f(Ba),n.add(e),t=qe(this,n,t,e,i)),!t;if(n===of)return!Re(this,t,e,i,!1);if(n===rf)return t===e?t=!0:(n=new f(Ba),n.add(e),t=We(this,n,t,e,i)),!t}return!0},_h.defineProperty(ze,{Fx:"linkValidation"},function(){return this.ol},function(t){null!==t&&_h.j(t,"function",ze,"linkValidation"),this.ol=t}),_h.defineProperty(ze,{Px:"portTargeted"},function(){return this.uD},function(t){null!==t&&_h.j(t,"function",ze,"portTargeted"),this.uD=t}),_h.La(He,ze),_h.fa("LinkingTool",He);var Lc;He.Either=Lc=_h.p(He,"Either",0);var Nc;He.ForwardsOnly=Nc=_h.p(He,"ForwardsOnly",0);var Cc;He.BackwardsOnly=Cc=_h.p(He,"BackwardsOnly",0),_h.defineProperty(He,{gH:"archetypeLinkData"},function(){return this.RB},function(t){null!==t&&_h.G(t,Object,He,"archetypeLinkData"),t instanceof Mo&&_h.G(t,Ua,He,"archetypeLinkData"),this.RB=t}),_h.defineProperty(He,{kE:"archetypeLabelNodeData"},function(){return this.QB},function(t){null!==t&&_h.G(t,Object,He,"archetypeLabelNodeData"),t instanceof Mo&&_h.G(t,Ba,He,"archetypeLabelNodeData"),this.QB=t}),_h.defineProperty(He,{direction:"direction"},function(){return this.aa},function(t){_h.mb(t,He,He,"direction"),this.aa=t}),_h.defineProperty(He,{kG:"startObject"},function(){return this.CD},function(t){null!==t&&_h.G(t,Mo,He,"startObject"),this.CD=t}),He.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.eb||t.yf||!t.zt)return!1;var e=t.ba;return!(!(e instanceof Xt||e instanceof ee)||!t.R.left||t.Za!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},He.prototype.findLinkablePort=function(){var t=this.g;if(null===t)return null;var e=this.kG;if(null===e&&(e=t.Je(t.zc.ca,null,null)),null===e||!(e.U instanceof Ba))return null;if((t=this.direction)===Lc||t===Nc){var i=this.findValidLinkablePort(e,!1);if(null!==i)return this.Nd=!0,i}return t!==Lc&&t!==Cc||null===(i=this.findValidLinkablePort(e,!0))?null:(this.Nd=!1,i)},He.prototype.doActivate=function(){var t=this.g;if(null!==t){var e=this.findLinkablePort();null!==e&&(this.Ub(this.name),t.$e=!0,t.cc="pointer",this.Nd?(null===this.Sd||this.Sd.location.H()||(this.Sd.location=t.R.ca),this.Qg=e,e=this.Qg.U,e instanceof Ba&&(this.Pg=e),this.copyPortProperties(this.Pg,this.Qg,this.Rd,this.ao,!1)):(null===this.Rd||this.Rd.location.H()||(this.Rd.location=t.R.ca),this.Sg=e,e=this.Sg.U,e instanceof Ba&&(this.Rg=e),this.copyPortProperties(this.Rg,this.Sg,this.Sd,this.bo,!0)),t.add(this.Rd),t.add(this.Sd),null!==this.Wg&&(null!==this.Rd&&(this.Wg.Y=this.Rd),null!==this.Sd&&(this.Wg.$=this.Sd),this.Wg.Yb(),t.add(this.Wg)),this.sa=!0)}},He.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;null!==t&&(t.remove(this.Wg),t.remove(this.Rd),t.remove(this.Sd),t.$e=!1,t.cc="",this.Lk())},He.prototype.doStop=function(){ze.prototype.doStop.call(this),this.kG=null},He.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null===t)return;var e=this.Gf=null,i=null,n=null,o=null,r=this.Df=this.findTargetPort(this.Nd);if(null!==r){var a=r.U;a instanceof Ba&&(this.Nd?(null!==this.Pg&&(e=this.Pg,i=this.Qg),n=a,o=r):(e=a,i=r,null!==this.Rg&&(n=this.Rg,o=this.Sg)))}else this.Nd?null!==this.Pg&&this.cq&&(e=this.Pg,i=this.Qg):null!==this.Rg&&this.cq&&(n=this.Rg,o=this.Sg);null!==e||null!==n?(a=this.insertLink(e,i,n,o),null!==a?(null===r&&(this.Nd?a.Op=t.R.ca:a.Np=t.R.ca),t.tf&&t.select(a),this.Gf=this.name,t.Aa("LinkDrawn",a)):(t.ba.oE(),this.doNoLink(e,i,n,o))):this.Nd?this.doNoLink(this.Pg,this.Qg,null,null):this.doNoLink(null,null,this.Rg,this.Sg)}this.stopTool()},He.prototype.insertLink=function(t,e,i,n){var o=this.g;if(null===o)return null;var r=o.ba;if(r instanceof ee){var a=t;if(e=i,o.Pd||(a=i,e=t),null!==a&&null!==e)return r.oi(e.data,r.ub(a.data)),e.xn()}else if(r instanceof Xt)if(a="",null!==t&&(null===e&&(e=t),null===(a=e.Qd)&&(a="")),e="",null!==i&&(null===n&&(n=i),null===(e=n.Qd)&&(e="")),(n=this.gH)instanceof Ua){if(vr(n),null!==(r=n.copy()))return r.Y=t,r.Lg=a,r.$=i,r.Eh=e,o.add(r),t=this.kE,t instanceof Ba&&(vr(t),null!==(t=t.copy())&&(t.Mc=r,o.add(t))),r}else if(null!==n&&(n=r.Tw(n),_h.Qa(n)))return null!==t&&r.dB(n,r.ub(t.data)),r.eB(n,a),null!==i&&r.jB(n,r.ub(i.data)),r.kB(n,e),r.ut(n),t=this.kE,null===t||t instanceof Ba||(t=r.copyNodeData(t),_h.Qa(t)&&(r.Cl(t),void 0!==(t=r.ub(t))&&r.fE(n,t))),r=o.Rf(n);return null},He.prototype.doNoLink=function(){},_h.La(Ve,ze),_h.fa("RelinkingTool",Ve),Ve.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Ua){var e="RelinkFrom",i=null;if(t.fb&&null!==this.g&&!this.g.eb){var n=t.Du;null!==n&&t.canRelinkFrom()&&t.W.H()&&t.isVisible()&&n.W.H()&&n.xj()&&null===(i=t.Sp(e))&&(i=this.makeAdornment(n,!1),t.Bl(e,i))}null===i&&t.Cj(e),e="RelinkTo",i=null,t.fb&&null!==this.g&&!this.g.eb&&null!==(n=t.Du)&&t.canRelinkTo()&&t.W.H()&&t.isVisible()&&n.W.H()&&n.xj()&&null===(i=t.Sp(e))&&(i=this.makeAdornment(n,!0),t.Bl(e,i)),null===i&&t.Cj(e)}},Ve.prototype.makeAdornment=function(t,e){var i=new Aa;i.type=ed;var n=e?this.KJ:this.SH;return null!==n&&i.add(n.copy()),i.rb=t,i},_h.defineProperty(Ve,{SH:"fromHandleArchetype"},function(){return this.DC},function(t){null!==t&&_h.G(t,Mo,Ve,"fromHandleArchetype"),this.DC=t}),_h.defineProperty(Ve,{KJ:"toHandleArchetype"},function(){return this.QD},function(t){null!==t&&_h.G(t,Mo,Ve,"toHandleArchetype"),this.QD=t}),_h.u(Ve,{handle:"handle"},function(){return this.fc}),Ve.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.eb||t.yf||!t.hn)return!1;var e=t.ba;return!(!(e instanceof Xt||e instanceof ee)||!t.R.left)&&(e=this.findToolHandleAt(t.zc.ca,"RelinkFrom"),null===e&&(e=this.findToolHandleAt(t.zc.ca,"RelinkTo")),null!==e)},Ve.prototype.doActivate=function(){var t=this.g;if(null!==t){if(null===this.kc){var e=this.findToolHandleAt(t.zc.ca,"RelinkFrom");if(null===e&&(e=this.findToolHandleAt(t.zc.ca,"RelinkTo")),null===e)return;var i=e.U;if(!(i instanceof Aa&&i.Of instanceof Ua))return;this.fc=e,this.Nd=null===i||"RelinkTo"===i.td,this.kc=i.Of}this.Ub(this.name),t.$e=!0,t.cc="pointer",this.Qg=this.kc.Jc,this.Pg=this.kc.Y,this.Sg=this.kc.jd,this.Rg=this.kc.$,this.oD.set(this.kc.W),null!==this.kc&&0<this.kc.qa&&(null===this.kc.Y&&(null!==this.ao&&(this.ao.Ba=Wu),null!==this.Rd&&(this.Rd.location=this.kc.l(0))),null===this.kc.$&&(null!==this.bo&&(this.bo.Ba=Wu),null!==this.Sd&&(this.Sd.location=this.kc.l(this.kc.qa-1)))),this.copyPortProperties(this.Pg,this.Qg,this.Rd,this.ao,!1),this.copyPortProperties(this.Rg,this.Sg,this.Sd,this.bo,!0),t.add(this.Rd),t.add(this.Sd),null!==this.Wg&&(null!==this.Rd&&(this.Wg.Y=this.Rd),null!==this.Sd&&(this.Wg.$=this.Sd),this.copyLinkProperties(this.kc,this.Wg),this.Wg.Yb(),t.add(this.Wg)),this.sa=!0}},Ve.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.wt=t.wt,e.$z=t.$z;var i=t.Ye;i!==Vd&&i!==Hd||(i=qd),e.Ye=i,e.Ww=t.Ww,e.Yx=t.Yx,e.vq=t.vq,e.Ab=t.Ab,e.Sl=t.Sl,e.Rt=t.Rt,e.St=t.St,e.Bb=t.Bb,e.jm=t.jm,e.Ku=t.Ku,e.Lu=t.Lu}},Ve.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;null!==t&&(t.remove(this.Wg),t.remove(this.Rd),t.remove(this.Sd),t.$e=!1,t.cc="",this.Lk())},Ve.prototype.doStop=function(){ze.prototype.doStop.call(this),this.fc=null},Ve.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null===t)return;this.Gf=null;var e=this.Pg,i=this.Qg,n=this.Rg,o=this.Sg,r=this.kc;if(this.Df=this.findTargetPort(this.Nd),null!==this.Df){var a=this.Df.U;a instanceof Ba&&(this.Nd?(n=a,o=this.Df):(e=a,i=this.Df))}else this.cq?this.Nd?o=n=null:i=e=null:r=null;null!==r?(this.reconnectLink(r,this.Nd?n:e,this.Nd?o:i,this.Nd),null===this.Df&&(this.Nd?r.Op=t.R.ca:r.Np=t.R.ca,r.Yb()),t.tf&&(r.fb=!0),this.Gf=this.name,t.Aa("LinkRelinked",r,this.Nd?this.Sg:this.Qg)):this.doNoRelink(this.kc,this.Nd),us(this.kc,this.oD)}this.stopTool()},Ve.prototype.reconnectLink=function(t,e,i,n){return null!==this.g&&(i=null!==i&&null!==i.Qd?i.Qd:"",n?(t.$=e,t.Eh=i):(t.Y=e,t.Lg=i),!0)},Ve.prototype.doNoRelink=function(){},_h.La(_e,ce),_h.fa("LinkReshapingTool",_e);var Ac;_e.None=Ac=_h.p(_e,"None",0);var Bc;_e.Horizontal=Bc=_h.p(_e,"Horizontal",1);var Dc;_e.Vertical=Dc=_h.p(_e,"Vertical",2);var Fc;_e.All=Fc=_h.p(_e,"All",3),_e.prototype.getReshapingBehavior=_e.prototype.TE=function(t){return t&&t.uz?t.uz:Ac},_e.prototype.setReshapingBehavior=_e.prototype.Fu=function(t,e){_h.G(t,Mo,_e,"setReshapingBehavior:obj"),_h.mb(e,_e,_e,"setReshapingBehavior:behavior"),t.uz=e},_e.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Ua){if(t.fb&&null!==this.g&&!this.g.eb){var e=t.path;if(null!==e&&t.canReshape()&&t.W.H()&&t.isVisible()&&e.W.H()&&e.xj()){var i=t.Sp(this.name);if(null!==i&&i.iD===t.qa&&i.ZD===t.zu||null!==(i=this.makeAdornment(e))&&(i.iD=t.qa,i.ZD=t.zu,t.Bl(this.name,i)),null!==i)return void(i.location=t.position)}}t.Cj(this.name)}},_e.prototype.makeAdornment=function(t){var e=t.U,i=e.qa,n=e.jc,o=null;if(null!==e.points&&1<i){o=new Aa,o.type=ed;var i=e.Nt,r=e.Bx,a=n?1:0;if(e.zu&&e.Ye!==Wd)for(var s=i+a;s<r-a;s++){var l=this.makeResegmentHandle(t,s);null!==l&&(l.Me=s,l.aB=.5,l.lA=999,o.add(l))}for(s=i+1;s<r;s++)if(null!==(l=this.makeHandle(t,s))){if(l.Me=s,s!==i)if(s===i+1&&n){var a=e.l(i),h=e.l(i+1);K(a.x,h.x)&&K(a.y,h.y)&&(h=e.l(i-1)),K(a.x,h.x)?(this.Fu(l,Dc),l.cursor="n-resize"):K(a.y,h.y)&&(this.Fu(l,Bc),l.cursor="w-resize")}else s===r-1&&n?(a=e.l(r-1),h=e.l(r),K(a.x,h.x)&&K(a.y,h.y)&&(a=e.l(r+1)),K(a.x,h.x)?(this.Fu(l,Dc),l.cursor="n-resize"):K(a.y,h.y)&&(this.Fu(l,Bc),l.cursor="w-resize")):s!==r&&(this.Fu(l,Fc),l.cursor="move");o.add(l)}o.rb=t}return o},_e.prototype.makeHandle=function(){var t=this.Ut;return null===t?null:t.copy()},_h.defineProperty(_e,{Ut:"handleArchetype"},function(){return this.dl},function(t){null!==t&&_h.G(t,Mo,_e,"handleArchetype"),this.dl=t}),_e.prototype.makeResegmentHandle=function(){var t=this.TI;return null===t?null:t.copy()},_h.defineProperty(_e,{TI:"midHandleArchetype"},function(){return this.aD},function(t){null!==t&&_h.G(t,Mo,_e,"midHandleArchetype"),this.aD=t}),_h.u(_e,{handle:"handle"},function(){return this.fc}),_h.u(_e,{xt:"adornedLink"},function(){return this.zy}),_e.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.eb||!t.Lw||!t.R.left)&&null!==this.findToolHandleAt(t.zc.ca,this.name)},_e.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.fc=this.findToolHandleAt(t.zc.ca,this.name),null!==this.fc)){var e=this.fc.U.Of;if(e instanceof Ua){if(this.zy=e,t.$e=!0,this.Ub(this.name),e.zu&&999===this.fc.lA){var i=e.points.copy(),n=this.fc.Wa(au);if(i.Md(this.fc.Me+1,n),e.jc&&i.Md(this.fc.Me+1,n),e.points=i,e.ce(),this.fc=this.findToolHandleAt(t.zc.ca,this.name),null===this.fc)return void this.doDeactivate()}this.hp=e.l(this.fc.Me),this.ew=e.points.copy(),this.sa=!0}}},_e.prototype.doDeactivate=function(){this.Lk(),this.zy=this.fc=null;var t=this.g;null!==t&&(t.$e=!1),this.sa=!1},_e.prototype.doCancel=function(){var t=this.xt;null!==t&&(t.points=this.ew),this.stopTool()},_e.prototype.doMouseMove=function(){var t=this.g;this.sa&&null!==t&&(t=this.computeReshape(t.R.ca),this.reshape(t))},_e.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){var e=this.computeReshape(t.R.ca);if(this.reshape(e),null!==(e=this.xt)&&e.zu){var i=this.handle.Me,n=e.l(i-1),o=e.l(i),r=e.l(i+1);if(e.jc){if(i>e.Nt+1&&i<e.Bx-1){var a=e.l(i-2);if(Math.abs(n.x-o.x)<this.Ch&&Math.abs(n.y-o.y)<this.Ch&&(Ke(this,a,n,o,r,!0)||Ke(this,a,n,o,r,!1))){var s=e.points.copy();Ke(this,a,n,o,r,!0)?(s.gg(i-2,new b(a.x,(r.y+a.y)/2)),s.gg(i+1,new b(r.x,(r.y+a.y)/2))):(s.gg(i-2,new b((r.x+a.x)/2,a.y)),s.gg(i+1,new b((r.x+a.x)/2,r.y))),s.Yc(i),s.Yc(i-1),e.points=s,e.ce()}else a=e.l(i+2),Math.abs(o.x-r.x)<this.Ch&&Math.abs(o.y-r.y)<this.Ch&&(Ke(this,n,o,r,a,!0)||Ke(this,n,o,r,a,!1))&&(s=e.points.copy(),Ke(this,n,o,r,a,!0)?(s.gg(i-1,new b(n.x,(n.y+a.y)/2)),s.gg(i+2,new b(a.x,(n.y+a.y)/2))):(s.gg(i-1,new b((n.x+a.x)/2,n.y)),s.gg(i+2,new b((n.x+a.x)/2,a.y))),s.Yc(i+1),s.Yc(i),e.points=s,e.ce())}}else a=_h.K(),rt(n.x,n.y,r.x,r.y,o.x,o.y,a)&&a.uf(o)<this.Ch*this.Ch&&(s=e.points.copy(),s.Yc(i),e.points=s,e.ce()),_h.v(a)}t.rc(),this.Gf=this.name,t.Aa("LinkReshaped",this.xt,this.ew)}this.stopTool()},_h.defineProperty(_e,{Ch:"resegmentingDistance"},function(){return this.vD},function(t){_h.j(t,"number",_e,"resegmentingDistance"),this.vD=t}),_e.prototype.reshape=function(t){var e=this.xt;e.em();var i=this.handle.Me,n=this.TE(this.handle);if(e.jc)if(i===e.Nt+1)i=e.Nt+1,n===Dc?(e.ea(i,e.l(i-1).x,t.y),e.ea(i+1,e.l(i+2).x,t.y)):n===Bc&&(e.ea(i,t.x,e.l(i-1).y),e.ea(i+1,t.x,e.l(i+2).y));else if(i===e.Bx-1)i=e.Bx-1,n===Dc?(e.ea(i-1,e.l(i-2).x,t.y),e.ea(i,e.l(i+1).x,t.y)):n===Bc&&(e.ea(i-1,t.x,e.l(i-2).y),e.ea(i,t.x,e.l(i+1).y));else{var n=i,o=e.l(n),r=e.l(n-1),a=e.l(n+1);K(r.x,o.x)&&K(o.y,a.y)?(K(r.x,e.l(n-2).x)&&!K(r.y,e.l(n-2).y)?(e.w(n,t.x,r.y),i++,n++):e.ea(n-1,t.x,r.y),K(a.y,e.l(n+2).y)&&!K(a.x,e.l(n+2).x)?e.w(n+1,a.x,t.y):e.ea(n+1,a.x,t.y)):K(r.y,o.y)&&K(o.x,a.x)?(K(r.y,e.l(n-2).y)&&!K(r.x,e.l(n-2).x)?(e.w(n,r.x,t.y),i++,n++):e.ea(n-1,r.x,t.y),K(a.x,e.l(n+2).x)&&!K(a.y,e.l(n+2).y)?e.w(n+1,t.x,a.y):e.ea(n+1,t.x,a.y)):K(r.x,o.x)&&K(o.x,a.x)?(K(r.x,e.l(n-2).x)&&!K(r.y,e.l(n-2).y)?(e.w(n,t.x,r.y),i++,n++):e.ea(n-1,t.x,r.y),K(a.x,e.l(n+2).x)&&!K(a.y,e.l(n+2).y)?e.w(n+1,t.x,a.y):e.ea(n+1,t.x,a.y)):K(r.y,o.y)&&K(o.y,a.y)&&(K(r.y,e.l(n-2).y)&&!K(r.x,e.l(n-2).x)?(e.w(n,r.x,t.y),i++,n++):e.ea(n-1,r.x,t.y),K(a.y,e.l(n+2).y)&&!K(a.x,e.l(n+2).x)?e.w(n+1,a.x,t.y):e.ea(n+1,a.x,t.y)),e.ea(i,t.x,t.y)}else e.ea(i,t.x,t.y),1===i&&e.computeSpot(!0).Od()&&(o=e.Y,r=e.Jc,null===o||o.isVisible()||(o=o.findVisibleNode())!==e.Y&&(r=o.Pl("")),n=r.Wa(au,_h.K()),o=e.getLinkPointFromPoint(o,r,n,t,!0,_h.K()),e.ea(0,o.x,o.y),_h.v(n),_h.v(o)),i===e.qa-2&&e.computeSpot(!1).Od()&&(i=e.$,o=e.jd,null===i||i.isVisible()||(i=i.findVisibleNode())!==e.$&&(o=i.Pl("")),n=o.Wa(au,_h.K()),o=e.getLinkPointFromPoint(i,o,n,t,!1,_h.K()),e.ea(e.qa-1,o.x,o.y),_h.v(n),_h.v(o));e.jj()},_e.prototype.computeReshape=function(t){var e=this.xt,i=this.handle.Me;switch(this.TE(this.handle)){case Fc:return t;case Dc:return e=e.l(i),new b(e.x,t.y);case Bc:return e=e.l(i),new b(t.x,e.y);default:case Ac:return e.l(i)}},_h.u(_e,{uL:"originalPoint"},function(){return this.hp}),_h.u(_e,{vL:"originalPoints"},function(){return this.ew}),_h.La(Je,ce),_h.fa("ResizingTool",Je),Je.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Ua)){if(t.fb&&null!==this.g&&!this.g.eb){var e=t.VF;if(null!==e&&t.canResize()&&t.W.H()&&t.isVisible()&&e.W.H()&&e.xj()){var i=t.Sp(this.name);if(null!==i&&i.rb===e||(i=this.makeAdornment(e)),null!==i){var n=e.zn();i.angle=n;var o=e.Wa(i.Af,_h.K()),r=e.oj();if(i.location=o,_h.v(o),null!==(o=i.placeholder)){var e=e.Ia,a=_h.im();a.m(e.width*r,e.height*r),o.Ba=a,_h.Ak(a)}return this.updateResizeHandles(i,n),void t.Bl(this.name,i)}}}t.Cj(this.name)}},Je.prototype.makeAdornment=function(t){var e=null,e=t.U.UF;if(null===e){e=new Aa,e.type=$f,e.Af=au;var i=new js;i.Vf=!0,e.add(i),e.add(this.makeHandle(t,iu)),e.add(this.makeHandle(t,ou)),e.add(this.makeHandle(t,uu)),e.add(this.makeHandle(t,lu)),e.add(this.makeHandle(t,cu)),e.add(this.makeHandle(t,du)),e.add(this.makeHandle(t,pu)),e.add(this.makeHandle(t,fu))}else if(vr(e),null===(e=e.copy()))return null;return e.rb=t,e},Je.prototype.makeHandle=function(t,e){var i=this.Ut;return null===i?null:(i=i.copy(),i.alignment=e,i)},Je.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Vc()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;i.Od()&&(i=au);var n=e;if(0>=i.x)n=0>=i.y?n+225:1<=i.y?n+135:n+180;else if(1<=i.x)0>=i.y?n+=315:1<=i.y&&(n+=45);else if(0>=i.y)n+=270;else{if(!(1<=i.y))break t;n+=90}0>n?n+=360:360<=n&&(n-=360),t.cursor=22.5>n?"e-resize":67.5>n?"se-resize":112.5>n?"s-resize":157.5>n?"sw-resize":202.5>n?"w-resize":247.5>n?"nw-resize":292.5>n?"n-resize":337.5>n?"ne-resize":"e-resize"}else if(t instanceof Zo)for(i=t.elements;i.next();)this.updateResizeHandles(i.value,e)},_h.defineProperty(Je,{Ut:"handleArchetype"},function(){return this.dl},function(t){null!==t&&_h.G(t,Mo,Je,"handleArchetype"),this.dl=t}),_h.u(Je,{handle:"handle"},function(){return this.fc}),_h.defineProperty(Je,{rb:"adornedObject"},function(){return this.Dc},function(t){null!==t&&_h.G(t,Mo,Je,"adornedObject"),this.Dc=t}),Je.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.eb||!t.At||!t.R.left)&&null!==this.findToolHandleAt(t.zc.ca,this.name)},Je.prototype.doActivate=function(){var t=this.g;null!==t&&(this.fc=this.findToolHandleAt(t.zc.ca,this.name),null!==this.fc&&(this.Dc=this.fc.U.rb,this.hp.set(this.rb.Wa(this.handle.alignment.FF())),this.pD.set(this.Dc.U.location),this.kD.set(this.Dc.Ba),this.Uy=this.computeCellSize(),this.Wy=this.computeMinSize(),this.Vy=this.computeMaxSize(),t.$e=!0,this.hD=t.Pa.isEnabled,t.Pa.isEnabled=!1,this.Ub(this.name),this.sa=!0))},
Je.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Lk(),this.Dc=this.fc=null,this.sa=t.$e=!1,t.Pa.isEnabled=this.hD)},Je.prototype.doCancel=function(){null!==this.rb&&(this.rb.Ba=this.GF,this.rb.U.location=this.cJ),this.stopTool()},Je.prototype.doMouseMove=function(){var t=this.g;if(this.sa&&null!==t){var e=this.Wy,i=this.Vy,n=this.Uy,o=this.rb.RE(t.R.ca,_h.K()),r=this.computeReshape(),e=this.computeResize(o,this.handle.alignment,e,i,n,r);this.resize(e),t.Zf(),_h.v(o)}},Je.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){var e=this.Wy,i=this.Vy,n=this.Uy,o=this.rb.RE(t.R.ca,_h.K()),r=this.computeReshape(),e=this.computeResize(o,this.handle.alignment,e,i,n,r);this.resize(e),_h.v(o),t.rc(),this.Gf=this.name,t.Aa("PartResized",this.rb,this.GF)}this.stopTool()},Je.prototype.resize=function(t){if(null!==this.g){var e=this.rb,i=e.U;e.Ba=t.size,i.Ze(),t=this.rb.Wa(this.handle.alignment.FF()),i instanceof Cs?(t=i.position.copy().$n(t).add(this.hp),i.move(t)):i.location=i.location.copy().$n(t).add(this.hp)}},Je.prototype.computeResize=function(t,e,i,n,o,r){e.Od()&&(e=au);var a=this.rb.Ia,s=a.x,l=a.y,h=a.x+a.width,u=a.y+a.height,c=1;if(!r){var c=a.width,f=a.height;0>=c&&(c=1),0>=f&&(f=1),c=f/c}return f=_h.K(),pt(t.x,t.y,s,l,o.width,o.height,f),t=a.copy(),0>=e.x?0>=e.y?(t.x=Math.max(f.x,h-n.width),t.x=Math.min(t.x,h-i.width),t.width=Math.max(h-t.x,i.width),t.y=Math.max(f.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),r||(e=t.height/t.width,c<e?(t.height=c*t.width,t.y=u-t.height):(t.width=t.height/c,t.x=h-t.width))):1<=e.y?(t.x=Math.max(f.x,h-n.width),t.x=Math.min(t.x,h-i.width),t.width=Math.max(h-t.x,i.width),t.height=Math.max(Math.min(f.y-l,n.height),i.height),r||(e=t.height/t.width,c<e?t.height=c*t.width:(t.width=t.height/c,t.x=h-t.width))):(t.x=Math.max(f.x,h-n.width),t.x=Math.min(t.x,h-i.width),t.width=h-t.x,r||(t.height=c*t.width,t.y=l+.5*(u-l-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(f.x-s,n.width),i.width),t.y=Math.max(f.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),r||(e=t.height/t.width,c<e?(t.height=c*t.width,t.y=u-t.height):t.width=t.height/c)):1<=e.y?(t.width=Math.max(Math.min(f.x-s,n.width),i.width),t.height=Math.max(Math.min(f.y-l,n.height),i.height),r||(e=t.height/t.width,c<e?t.height=c*t.width:t.width=t.height/c)):(t.width=Math.max(Math.min(f.x-s,n.width),i.width),r||(t.height=c*t.width,t.y=l+.5*(u-l-t.height))):0>=e.y?(t.y=Math.max(f.y,u-n.height),t.y=Math.min(t.y,u-i.height),t.height=u-t.y,r||(t.width=t.height/c,t.x=s+.5*(h-s-t.width))):1<=e.y&&(t.height=Math.max(Math.min(f.y-l,n.height),i.height),r||(t.width=t.height/c,t.x=s+.5*(h-s-t.width))),_h.v(f),t},Je.prototype.computeReshape=function(){var t=jf;return this.rb instanceof Tr&&(t=Ar(this.rb)),!(t===Gf||t===Rf||null!==this.g&&this.g.R.shift)},Je.prototype.computeMinSize=function(){var t=this.rb.zh.copy(),e=this.zh;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Je.prototype.computeMaxSize=function(){var t=this.rb.Bf.copy(),e=this.Bf;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Je.prototype.computeCellSize=function(){var t=new k(NaN,NaN),e=this.rb.U;if(null!==e){var i=e.nJ;!isNaN(i.width)&&0<i.width&&(t.width=i.width),!isNaN(i.height)&&0<i.height&&(t.height=i.height)}return i=this.Hp,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height),e=this.g,(isNaN(t.width)||isNaN(t.height))&&e&&(i=e.ab.re,null!==i&&i.ux&&(i=i.ZE,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height)),null!==(e=e.Dn)&&e.visible&&this.ux&&(i=e.ox,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height))),(isNaN(t.width)||0===t.width||Infinity===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||Infinity===t.height)&&(t.height=1),t},_h.defineProperty(Je,{zh:"minSize"},function(){return this.Vh},function(t){if(_h.G(t,k,Je,"minSize"),!this.Vh.L(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Vh.m(e,t)}}),_h.defineProperty(Je,{Bf:"maxSize"},function(){return this.Uh},function(t){if(_h.G(t,k,Je,"maxSize"),!this.Uh.L(t)){var e=t.width;isNaN(e)&&(e=Infinity),t=t.height,isNaN(t)&&(t=Infinity),this.Uh.m(e,t)}}),_h.defineProperty(Je,{Hp:"cellSize"},function(){return this.Kj},function(t){_h.G(t,k,Je,"cellSize"),this.Kj.L(t)||this.Kj.assign(t)}),_h.defineProperty(Je,{ux:"isGridSnapEnabled"},function(){return this.Ir},function(t){_h.j(t,"boolean",Je,"isGridSnapEnabled"),this.Ir=t}),_h.u(Je,{GF:"originalDesiredSize"},function(){return this.kD}),_h.u(Je,{cJ:"originalLocation"},function(){return this.pD}),_h.La(Ye,ce),_h.fa("RotatingTool",Ye),Ye.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Ua)){if(t.fb&&null!==this.g&&!this.g.eb){var e=t.YF;if(null!==e&&t.canRotate()&&t.W.H()&&t.isVisible()&&e.W.H()&&e.xj()){var i=t.Sp(this.name);if(null!==i&&i.rb===e||(i=this.makeAdornment(e)),null!==i){i.angle=e.zn();var n=null,o=null;e===t||e===t.Yf?(n=t.Yf,o=t.Af):(n=e,o=au);for(var r=n.Ia,o=_h.xb(r.width*o.x+o.offsetX,r.height*o.y+o.offsetY);null!==n&&n!==e;)n.transform.nb(o),n=n.O;var n=o.y,r=Math.max(o.x-e.Ia.width,0),a=_h.K();return i.location=e.Wa(new D(1,0,50+r,n),a),_h.v(a),_h.v(o),void t.Bl(this.name,i)}}}t.Cj(this.name)}},Ye.prototype.makeAdornment=function(t){var e=null,e=t.U.qJ;if(null===e){e=new Aa,e.type=Jf,e.Af=au;var i=this.Ut;null!==i&&e.add(i.copy())}else if(vr(e),null===(e=e.copy()))return null;return e.rb=t,e},_h.defineProperty(Ye,{Ut:"handleArchetype"},function(){return this.dl},function(t){null!==t&&_h.G(t,Mo,Ye,"handleArchetype"),this.dl=t}),_h.u(Ye,{handle:"handle"},function(){return this.fc}),_h.defineProperty(Ye,{rb:"adornedObject"},function(){return this.Dc},function(t){null!==t&&_h.G(t,Mo,Ye,"adornedObject"),this.Dc=t}),Ye.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.eb||!t.Mw||!t.R.left)&&null!==this.findToolHandleAt(t.zc.ca,this.name)},Ye.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.fc=this.findToolHandleAt(t.zc.ca,this.name),null!==this.fc)){this.Dc=this.fc.U.rb;var e=this.Dc.U,i=e.Yf;this.wD=this.Dc===e||this.Dc===i?i.Wa(e.Af):this.Dc.Wa(au),this.dw=this.Dc.angle,t.$e=!0,t.bA=!0,this.Ub(this.name),this.sa=!0}},Ye.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Lk(),this.Dc=this.fc=null,this.sa=t.$e=!1)},Ye.prototype.doCancel=function(){var t=this.g;null!==t&&(t.bA=!1),this.rotate(this.dw),this.stopTool()},Ye.prototype.doMouseMove=function(){var t=this.g;this.sa&&null!==t&&(t=this.computeRotate(t.R.ca),this.rotate(t))},Ye.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){t.bA=!1;var e=this.computeRotate(t.R.ca);this.rotate(e),t.rc(),this.Gf=this.name,t.Aa("PartRotated",this.Dc,this.dw)}this.stopTool()},Ye.prototype.rotate=function(t){null!==this.Dc&&(this.Dc.angle=t)},Ye.prototype.computeRotate=function(t){t=this.wD.Rb(t);var e=this.Dc.O;null!==e&&(t-=e.zn(),360<=t?t-=360:0>t&&(t+=360));var e=Math.min(Math.abs(this.DJ),180),i=Math.min(Math.abs(this.CJ),e/2);return(null===this.g||!this.g.R.shift)&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},_h.defineProperty(Ye,{DJ:"snapAngleMultiple"},function(){return this.AD},function(t){_h.j(t,"number",Ye,"snapAngleMultiple"),this.AD=t}),_h.defineProperty(Ye,{CJ:"snapAngleEpsilon"},function(){return this.zD},function(t){_h.j(t,"number",Ye,"snapAngleEpsilon"),this.zD=t}),_h.u(Ye,{tL:"originalAngle"},function(){return this.dw}),_h.La($e,ce),_h.fa("ClickSelectingTool",$e),$e.prototype.canStart=function(){return!(!this.isEnabled||null===this.g||this.isBeyondDragSize())},$e.prototype.doMouseUp=function(){this.sa&&(this.standardMouseSelect(),!this.standardMouseClick()&&null!==this.g&&this.g.R.vj&&this.g.ab.doToolTip()),this.stopTool()},_h.La(Xe,ce),_h.fa("ActionTool",Xe),Xe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t)return!1;var e=t.R,i=t.Je(e.ca,function(t){for(;null!==t.O&&!t.qx;)t=t.O;return t});return null!==i&&(!!i.qx&&(this.jo=i,t.wo=t.Je(e.ca,null,null),!0))},Xe.prototype.doMouseDown=function(){if(this.sa){var t=this.g.R,e=this.jo;null!==e&&(t.Pe=e,null!==e.bE&&e.bE(t,e))}else this.canStart()&&this.doActivate()},Xe.prototype.doMouseMove=function(){if(this.sa){var t=this.g.R,e=this.jo;null!==e&&(t.Pe=e,null!==e.cE&&e.cE(t,e))}},Xe.prototype.doMouseUp=function(){if(this.sa){var t=this.g,e=t.R,i=this.jo;if(null===i)return;e.Pe=i,null!==i.dE&&i.dE(e,i),this.isBeyondDragSize()||fe(i,e,t)}this.stopTool()},Xe.prototype.doCancel=function(){var t=this.g;if(null!==t){var t=t.R,e=this.jo;if(null===e)return;t.Pe=e,null!==e.aE&&e.aE(t,e)}this.stopTool()},Xe.prototype.doStop=function(){this.jo=null},_h.La(Qe,ce),_h.fa("ClickCreatingTool",Qe),Qe.prototype.canStart=function(){if(!this.isEnabled||null===this.Qz)return!1;var t=this.g;if(null===t||t.eb||t.yf||!t.Fp||!t.R.left||this.isBeyondDragSize())return!1;if(this.rI){if(1===t.R.Fe&&(this.CC=t.R.bf.copy()),2!==t.R.Fe||this.isBeyondDragSize(this.CC))return!1}else if(1!==t.R.Fe)return!1;return t.Za===this||null===t.Mt(t.R.ca,!0)},Qe.prototype.doMouseUp=function(){var t=this.g;this.sa&&null!==t&&this.insertPart(t.R.ca),this.stopTool()},Qe.prototype.insertPart=function(t){var e=this.g;if(null===e)return null;var i=this.Qz;if(null===i)return null;this.Ub(this.name);var n=null;return i instanceof sa?i.de()&&(vr(i),null!==(n=i.copy())&&e.add(n)):null!==i&&(i=e.ba.copyNodeData(i),_h.Qa(i)&&(e.ba.Cl(i),n=e.vh(i))),null!==n&&(n.location=t,e.tf&&e.select(n)),e.rc(),this.Gf=this.name,e.Aa("PartCreated",n),this.Lk(),n},_h.defineProperty(Qe,{Qz:"archetypeNodeData"},function(){return this.pm},function(t){null!==t&&_h.G(t,Object,Qe,"archetypeNodeData"),this.pm=t}),_h.defineProperty(Qe,{rI:"isDoubleClick"},function(){return this.OC},function(t){_h.j(t,"boolean",Qe,"isDoubleClick"),this.OC=t}),_h.fa("HTMLInfo",Ze),_h.defineProperty(Ze,{FA:"mainElement"},function(){return this.ZC},function(t){null!==t&&_h.G(t,HTMLElement,Ze,"mainElement"),this.ZC=t}),_h.defineProperty(Ze,{show:"show"},function(){return this.Az},function(t){this.Az!==t&&(null!==t&&_h.j(t,"function",Ze,"show"),this.Az=t)}),_h.defineProperty(Ze,{En:"hide"},function(){return this.cz},function(t){this.cz!==t&&(null!==t&&_h.j(t,"function",Ze,"hide"),this.cz=t)}),_h.defineProperty(Ze,{zB:"valueFunction"},function(){return this.WD},function(t){this.WD=t}),_h.La(ei,ce),_h.fa("ContextMenuTool",ei),ei.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||this.isBeyondDragSize()||!t.R.right)&&!!(null!==this.vm&&t.R.vj||null!==this.findObjectWithContextMenu())},ei.prototype.doStart=function(){var t=this.g;null!==t&&this.eD.set(t.zc.ca)},ei.prototype.doStop=function(){this.hideContextMenu(),this.Vw=null},ei.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.g;if(null===e)return null;var i=e.R,n=null;if(t instanceof Ii||(n=t instanceof Mo?t:e.Je(i.ca,null,function(t){return!t.layer.Kc})),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.O}if(null!==this.vm&&e.R.vj)return n.U}else if(null!==e.contextMenu)return e;return null},ei.prototype.doActivate=function(){},ei.prototype.doMouseDown=function(){ce.prototype.doMouseDown.call(this),null!==this.g&&this.g.ab.af.contains(this)&&oi(this)},ei.prototype.doMouseUp=function(){oi(this)},ei.prototype.doMouseMove=function(){this.sa&&null!==this.g&&this.g.ab.doMouseMove()},ei.prototype.showContextMenu=function(t,e){null!==e&&_h.G(e,Mo,ei,"showContextMenu:obj");var i=this.g;if(null!==i){if(t!==this.Jl&&this.hideContextMenu(),t instanceof Aa){if(t.Xf="Tool",t.cm=!1,t.scale=1/i.scale,t.td=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale),i.add(t),null!==e){var i=null,n=e.Ql();null!==n&&(i=n.data),t.rb=e,t.data=i}else t.data=i.ba;t.Ze(),this.positionContextMenu(t,e)}else t instanceof Ze&&t.show(e,i,this);this.Jl=t}},ei.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.g;if(null!==e){var i=e.R.ca.copy(),n=t.za,o=e.pb;e.R.vj&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5),i.x<o.x&&(i.x=o.x),i.y+n.height>o.bottom&&(i.y-=n.height+5),i.y<o.y&&(i.y=o.y),t.position=i}}},ei.prototype.hideContextMenu=function(){var t=this.g;if(null!==t){var e=this.Jl;null!==e&&(e instanceof Aa?(t.remove(e),null!==this.Gy&&this.Gy.Cj(e.td),e.data=null,e.rb=null):e instanceof Ze&&(null!==e.En?e.En(t,this):null!==e.FA&&(e.FA.style.display="none")),this.Jl=null,this.standardMouseOver())}},ei.prototype.showDefaultContextMenu=function(){var t=this.g;if(null!==t){null===this.Iy&&(this.Iy=ai(this)),_h.Dt.innerHTML="",_h.Ct.addEventListener("click",this.Hz,!1);var e=this,i=_h.createElement("ul");i.className="goCXul",_h.Dt.appendChild(i),i.innerHTML="";for(var n=this.Iy.i;n.next();){var o=n.value,r=o.visible;if("function"==typeof o.qE&&("function"!=typeof r||r(t))){r=_h.createElement("li"),r.className="goCXli";var a=_h.createElement("a");a.className="goCXa",a.href="#",a.FG=o.qE,a.addEventListener("click",function(i){return this.FG(t),e.stopTool(),i.preventDefault(),!1},!1),a.textContent=o.text,r.appendChild(a),i.appendChild(r)}}_h.Dt.style.display="block",_h.Ct.style.display="block"}},ei.prototype.hideDefaultContextMenu=function(){null!==this.Jl&&this.Jl===this.vm&&(_h.Dt.style.display="none",_h.Ct.style.display="none",_h.Ct.removeEventListener("click",this.Hz,!1),this.Jl=null)},_h.defineProperty(ei,{Jl:"currentContextMenu"},function(){return this.eC},function(t){this.eC=t,this.Gy=t instanceof Aa?t.Of:null}),_h.defineProperty(ei,{OK:"defaultTouchContextMenu"},function(){return this.vm},function(t){this.vm=t}),_h.defineProperty(ei,{Vw:"currentObject"},function(){return this.hC},function(t){null!==t&&_h.G(t,Mo,ei,"currentObject"),this.hC=t}),_h.u(ei,{oL:"mouseDownPoint"},function(){return this.eD}),_h.La(si,ce),_h.fa("DragSelectingTool",si),si.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.tf)return!1;var e=t.R;return!(!e.left||t.Za!==this&&(!this.isBeyondDragSize()||e.timestamp-t.zc.timestamp<this.yE||null!==t.Mt(e.ca,!0)))},si.prototype.doActivate=function(){var t=this.g;null!==t&&(this.sa=!0,t.$e=!0,t.wb=!0,t.add(this.rh),this.doMouseMove())},si.prototype.doDeactivate=function(){var t=this.g;null!==t&&(no(t),t.remove(this.rh),t.wb=!1,this.sa=t.$e=!1)},si.prototype.doMouseMove=function(){var t=this.g;if(null!==t&&this.sa&&null!==this.rh){var e=this.computeBoxBounds(),i=this.rh.ud("SHAPE");null===i&&(i=this.rh.Jd()),i.Ba=e.size,this.rh.position=e.position,(t.me||t.ne)&&t.dA(t.R.bf)}},si.prototype.doMouseUp=function(){if(this.sa){var t=this.g;t.remove(this.rh);try{t.cc="wait",this.selectInRect(this.computeBoxBounds())}finally{t.cc=""}}this.stopTool()},si.prototype.computeBoxBounds=function(){var t=this.g;return null===t?new S(0,0,0,0):new S(t.zc.ca,t.R.ca)},si.prototype.selectInRect=function(t){var e=this.g;if(null!==e){var i=e.R;if(e.Aa("ChangingSelection"),t=e.zk(t,null,function(t){return t instanceof sa&&t.canSelect()},this.xI),_h.Fk?i.lu:i.control)if(i.shift)for(t=t.i;t.next();)i=t.value,i.fb&&(i.fb=!1);else for(t=t.i;t.next();)i=t.value,i.fb=!i.fb;else{if(!i.shift){for(var i=new u(sa),n=e.selection.i;n.next();){var o=n.value;t.contains(o)||i.add(o)}for(i=i.i;i.next();)i.value.fb=!1}for(t=t.i;t.next();)i=t.value,i.fb||(i.fb=!0)}e.Aa("ChangedSelection")}},_h.defineProperty(si,{yE:"delay"},function(){return this.Co},function(t){_h.j(t,"number",si,"delay"),this.Co=t}),_h.defineProperty(si,{xI:"isPartialInclusion"},function(){return this.TC},function(t){_h.j(t,"boolean",si,"isPartialInclusion"),this.TC=t}),_h.defineProperty(si,{rh:"box"},function(){return this.rm},function(t){null!==t&&_h.G(t,sa,si,"box"),this.rm=t}),_h.La(li,ce),_h.fa("PanningTool",li),li.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||!t.me&&!t.ne||!t.R.left||t.Za!==this&&!this.isBeyondDragSize())},li.prototype.doActivate=function(){var e=this.g;null!==e&&(this.Jj?(e.R.bubbles=!0,t.document.addEventListener("scroll",this.ED,!1)):(e.cc="move",e.$e=!0,this.rz=e.position.copy()),this.sa=!0)},li.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.cc="",this.sa=t.$e=!1)},li.prototype.doCancel=function(){var t=this.g;null!==t&&(t.position=this.rz,t.$e=!1),this.stopTool()},li.prototype.doMouseMove=function(){this.move()},li.prototype.doMouseUp=function(){this.move(),this.stopTool()},li.prototype.move=function(){var t=this.g;if(this.sa&&t)if(this.Jj)t.R.bubbles=!0;else{var e=t.position,i=t.zc.ca,n=t.R.ca,o=e.x+i.x-n.x,i=e.y+i.y-n.y;t.me||(o=e.x),t.ne||(i=e.y),t.position=new b(o,i)}},_h.defineProperty(li,{bubbles:"bubbles"},function(){return this.Jj},function(t){_h.j(t,"boolean",li,"bubbles"),this.Jj=t}),_h.u(li,{wL:"originalPosition"},function(){return this.rz}),_h.fa("TextEditingTool",hi),_h.La(hi,ce);var jc;hi.LostFocus=jc=_h.p(hi,"LostFocus",0);var Ec;hi.MouseDown=Ec=_h.p(hi,"MouseDown",1);var Ic;hi.Tab=Ic=_h.p(hi,"Tab",2);var Oc;hi.Enter=Oc=_h.p(hi,"Enter",3),hi.SingleClick=_h.p(hi,"SingleClick",0);var zc;hi.SingleClickSelected=zc=_h.p(hi,"SingleClickSelected",1);var Gc;hi.DoubleClick=Gc=_h.p(hi,"DoubleClick",2);var Rc;hi.StateNone=Rc=_h.p(hi,"StateNone",0);var qc;hi.StateActive=qc=_h.p(hi,"StateActive",1);var Wc;hi.StateEditing=Wc=_h.p(hi,"StateEditing",2);var Hc;hi.StateValidating=Hc=_h.p(hi,"StateValidating",3);var Vc;hi.StateInvalid=Vc=_h.p(hi,"StateInvalid",4);var Uc;hi.StateValidated=Uc=_h.p(hi,"StateValidated",5),_h.defineProperty(hi,{Xg:"textBlock"},function(){return this.Fz},function(t){null!==t&&_h.G(t,Er,hi,"textBlock"),this.Fz=t}),_h.defineProperty(hi,{kj:"currentTextEditor"},function(){return this.jC},function(t){this.jC=t}),_h.defineProperty(hi,{GH:"defaultTextEditor"},function(){return this.rC},function(t){this.rC=t}),_h.defineProperty(hi,{lG:"starting"},function(){return this.DD},function(t){_h.mb(t,hi,hi,"starting"),this.DD=t}),hi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.eb||!t.R.left||this.isBeyondDragSize())return!1;var e=t.Je(t.R.ca,null,function(t){return t instanceof Er});return!(null===e||!e.eA||!e.U.canEdit())&&!(null===(e=e.U)||this.lG===zc&&!e.fb||this.lG===Gc&&2>t.R.Fe)},hi.prototype.doStart=function(){this.sa||null===this.Xg||this.doActivate()},hi.prototype.doActivate=function(){if(!this.sa){var t=this.g;if(null!==t){var e=this.Xg;if(null===e&&(e=t.Je(t.R.ca,function(t){return t instanceof Er?t:null})),null!==e&&(this.Xg=e,null!==e.U)){this.sa=!0,this.Ta=qc;var i=this.GH;null!==e.oG&&(i=e.oG),this.lk=this.Xg.copy();var n=new S(this.Xg.Wa(iu),this.Xg.Wa(uu));t.vJ(n),i instanceof Ze?i.show(e,t,this):(i.style.position="absolute",i.style.zIndex="100",i.textEditingTool=this,"function"==typeof i.onActivate&&i.onActivate(),"function"==typeof i.focus&&i.focus(),"function"==typeof i.select&&this.$x&&(i.select(),i.setSelectionRange(0,9999)),t.mj.appendChild(i)),this.kj=i}}}},hi.prototype.doCancel=function(){null!==this.sl&&this.kj instanceof HTMLElement&&(this.kj.style.border=this.sl,this.sl=null),this.stopTool()},hi.prototype.doMouseUp=function(){!this.sa&&this.canStart()&&this.doActivate()},hi.prototype.doMouseDown=function(){this.sa&&this.acceptText(Ec)},hi.prototype.acceptText=function(t){switch(t){case Ec:this.Ta===Uc?this.kj instanceof HTMLElement&&this.kj.focus():this.Ta!==qc&&this.Ta!==Vc&&this.Ta!==Wc||(this.Ta=Hc,ci(this));break;case jc:case Oc:case Ic:if(Oc===t&&!0===this.Fz.xx)break;this.Ta!==qc&&this.Ta!==Vc&&this.Ta!==Wc||(this.Ta=Hc,ci(this))}},hi.prototype.doDeactivate=function(){var t=this.g;if(null!==t){if(this.Ta=Rc,this.Xg=null,null!==this.kj){var e=this.kj;e instanceof Ze?e.En(t,this):("function"==typeof e.onDeactivate&&e.onDeactivate(),null!==e&&t.mj.removeChild(e))}this.sa=!1}},hi.prototype.doFocus=function(){fi(this)},hi.prototype.doBlur=function(){di(this)},hi.prototype.isValidText=function(t,e,i){_h.G(t,Er,hi,"isValidText:textblock");var n=this.pB;return!(null!==n&&!n(t,e,i))&&!(null!==(n=t.pB)&&!n(t,e,i))},_h.defineProperty(hi,{pB:"textValidation"},function(){return this.xl},function(t){null!==t&&_h.j(t,"function",hi,"textValidation"),this.xl=t}),_h.defineProperty(hi,{AF:"minimumEditorScale"},function(){return this.bD},function(t){null!==t&&_h.j(t,"number",hi,"minimumEditorScale"),this.bD=t}),_h.defineProperty(hi,{$x:"selectsTextOnActivate"},function(){return this.xD},function(t){null!==t&&_h.j(t,"boolean",hi,"selectsTextOnActivate"),this.xD=t}),_h.defineProperty(hi,{state:"state"},function(){return this.Ta},function(t){this.Ta!==t&&(_h.mb(t,hi,hi,"starting"),this.Ta=t)}),hi.prototype.measureTemporaryTextBlock=hi.prototype.QI=function(t){var e=this.lk;return e.text=t,Ao(e,this.Xg.Yo,Infinity),e},_h.La(pi,ce),_h.fa("ToolManager",pi);var _c;pi.WheelScroll=_c=_h.p(pi,"WheelScroll",0);var Kc;pi.WheelZoom=Kc=_h.p(pi,"WheelZoom",1),pi.WheelNone=_h.p(pi,"WheelNone",2);var Jc;pi.GestureZoom=Jc=_h.p(pi,"GestureZoom",3);var Yc;pi.GestureCancel=Yc=_h.p(pi,"GestureCancel",4);var $c;pi.GestureNone=$c=_h.p(pi,"GestureNone",5),_h.defineProperty(pi,{ou:"mouseWheelBehavior"},function(){return this.fD},function(t){_h.mb(t,pi,pi,"mouseWheelBehavior"),this.fD=t}),_h.defineProperty(pi,{Wp:"gestureBehavior"},function(){return this.EC},function(t){_h.mb(t,pi,pi,"gestureBehavior"),this.EC=t}),pi.prototype.initializeStandardTools=function(){this.XG=new Xe,this.MF=new Ve,this.HI=new _e,this.XF=new Je,this.sJ=new Ye,this.wF=new He,this.re=new de,this.LH=new si,this.dJ=new li,this.Xz=new ei,this.oB=new hi,this.nH=new Qe,this.oH=new $e},pi.prototype.updateAdornments=function(t){var e=this.Kl;if(e instanceof Aa&&this.nv===t){var i=e.rb;(null!==t?i.U===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}},pi.prototype.doMouseDown=function(){var t=this.g;if(null!==t){var e=t.R;if(e.vj&&this.Wp===Yc&&(e.bubbles=!1),e.cu){if(this.cancelWaitAfter(),this.Wp===$c)return void(e.bubbles=!0);if(this.Wp===Yc)return;if(t.Za.canStartMultiTouch())return void t.Za.standardPinchZoomStart()}var i=t.oa;i.Tz&&0!==i.Fh&&_h.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var i=this.af.length,n=0;n<i;n++){var o=this.af.da(n);if(null===o.g&&o.Qc(this.g),o.canStart())return t.doFocus(),t.Za=o,void(t.Za===o&&(o.sa||o.doActivate(),o.doMouseDown()))}1===t.R.button&&(this.ou===_c?this.ou=Kc:this.ou===Kc&&(this.ou=_c)),this.doActivate(),this.standardWaitAfter(this.bF,e)}},pi.prototype.doMouseMove=function(){var t=this.g;if(null!==t){var e=t.R;if(e.cu){if(this.Wp===$c)return void(e.bubbles=!0);if(this.Wp===Yc)return;if(t.Za.canStartMultiTouch())return void t.Za.standardPinchZoomMove()}if(this.sa)for(var i=this.$f.length,n=0;n<i;n++){var o=this.$f.da(n);if(null===o.g&&o.Qc(this.g),o.canStart())return t.doFocus(),t.Za=o,void(t.Za===o&&(o.sa||o.doActivate(),o.doMouseMove()))}gi(this,t),null===e.event||"mousemove"!==e.event.type&&e.event.cancelable||(e.bubbles=!0)}},pi.prototype.doCurrentObjectChanged=function(t,e){var i=this.Kl;null===i||null!==e&&i instanceof Aa&&(e===i||e.Xl(i))||this.hideToolTip()},pi.prototype.doWaitAfter=function(t){var e=this.g;null!==e&&e.Fb&&(this.doMouseHover(),this.sa||this.doToolTip(),t.vj&&!e.R.Ac&&(t=t.copy(),t.button=2,t.buttons=2,e.R=t,e.gt=!0,e.doMouseUp()))},pi.prototype.doMouseHover=function(){var t=this.g;if(null!==t){var e=t.R;null===e.Pe&&(e.Pe=t.Je(e.ca,null,null));var i=e.Pe;if(null!==i)for(e.Ac=!1;null!==i&&(null===(t=this.sa?i.LA:i.MA)||(t(e,i),!e.Ac));)i=i.O;else null!==(i=this.sa?t.LA:t.MA)&&i(e)}},pi.prototype.doToolTip=function(){var t=this.g;if(null!==t){var e=t.R;if(null===e.Pe&&(e.Pe=t.Je(e.ca,null,null)),null!==(e=e.Pe)){if(!((t=this.Kl)instanceof Aa)||e!==t&&!e.Xl(t)){for(;null!==e;){if(null!==(t=e.rB))return void this.showToolTip(t,e);e=e.O}this.hideToolTip()}}else t=t.rB,null!==t?this.showToolTip(t,null):this.hideToolTip()}},pi.prototype.showToolTip=function(t,e){null!==e&&_h.G(e,Mo,pi,"showToolTip:obj");var i=this.g;if(null!==i){if(t!==this.Kl&&this.hideToolTip(),t instanceof Aa){if(t.Xf="Tool",t.cm=!1,t.scale=1/i.scale,t.td="ToolTip",null!==t.placeholder&&(t.placeholder.scale=i.scale),i.add(t),null!==e){var i=null,n=e.Ql();null!==n&&(i=n.data),t.rb=e,t.data=i}else t.data=i.ba;t.Ze(),this.positionToolTip(t,e)}else t instanceof Ze&&t!==this.Kl&&t.show(e,i,this);if(this.Kl=t,-1!==this.en&&(_h.clearTimeout(this.en),this.en=-1),0<(i=this.OJ)&&Infinity!==i){var o=this;this.en=_h.setTimeout(function(){o.hideToolTip()},i)}}},pi.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.g;if(null!==e){var i=e.R.ca.copy(),n=t.za,o=e.pb;e.R.vj&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5),i.x<o.x&&(i.x=o.x),i.y=i.y+20+n.height>o.bottom?i.y-(n.height+5):i.y+20,i.y<o.y&&(i.y=o.y),t.position=i}}},pi.prototype.hideToolTip=function(){-1!==this.en&&(_h.clearTimeout(this.en),this.en=-1);var t=this.g;if(null!==t){var e=this.Kl;null!==e&&(e instanceof Aa?(t.remove(e),null!==this.nv&&this.nv.Cj(e.td),e.data=null,e.rb=null):e instanceof Ze&&null!==e.En&&e.En(t,this),this.Kl=null)}},_h.defineProperty(pi,{Kl:"currentToolTip"},function(){return this.kC},function(t){this.kC=t,this.nv=null!==t&&t instanceof Aa?t.Of:null}),pi.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.g;if(null!==t){if(this.sa)for(var e=this.ag.length,i=0;i<e;i++){var n=this.ag.da(i);if(null===n.g&&n.Qc(this.g),n.canStart())return t.doFocus(),t.Za=n,void(t.Za===n&&(n.sa||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()}},pi.prototype.doMouseWheel=function(){this.standardMouseWheel()},pi.prototype.doKeyDown=function(){var t=this.g;null!==t&&t.ob.doKeyDown()},pi.prototype.doKeyUp=function(){var t=this.g;null!==t&&t.ob.doKeyUp()},pi.prototype.doCancel=function(){null!==Pc&&Pc.doCancel(),ce.prototype.doCancel.call(this)},pi.prototype.findTool=function(t){_h.j(t,"string",pi,"findTool:name");for(var e=this.af.length,i=0;i<e;i++){var n=this.af.da(i);if(n.name===t)return n}for(e=this.$f.length,i=0;i<e;i++)if(n=this.$f.da(i),n.name===t)return n;for(e=this.ag.length,i=0;i<e;i++)if(n=this.ag.da(i),n.name===t)return n;return null},pi.prototype.replaceTool=function(t,e){_h.j(t,"string",pi,"replaceTool:name"),null!==e&&(_h.G(e,ce,pi,"replaceTool:newtool"),e.g&&e.g!==this.g&&_h.k("Cannot share tools between Diagrams: "+e.toString()),e.Qc(this.g));for(var i=this.af.length,n=0;n<i;n++){var o=this.af.da(n);if(o.name===t)return null!==e?this.af.gg(n,e):this.af.Yc(n),o}for(i=this.$f.length,n=0;n<i;n++)if(o=this.$f.da(n),o.name===t)return null!==e?this.$f.gg(n,e):this.$f.Yc(n),o;for(i=this.ag.length,n=0;n<i;n++)if(o=this.ag.da(n),o.name===t)return null!==e?this.ag.gg(n,e):this.ag.Yc(n),o;return null},_h.u(pi,{af:"mouseDownTools"},function(){return this.KG}),_h.u(pi,{$f:"mouseMoveTools"},function(){return this.LG}),_h.u(pi,{ag:"mouseUpTools"},function(){return this.MG}),_h.defineProperty(pi,{jI:"hoverDelay"},function(){return this.HC},function(t){_h.j(t,"number",pi,"hoverDelay"),this.HC=t}),_h.defineProperty(pi,{bF:"holdDelay"},function(){return this.GC},function(t){_h.j(t,"number",pi,"holdDelay"),this.GC=t}),_h.defineProperty(pi,{MH:"dragSize"},function(){return this.wC},function(t){_h.G(t,k,pi,"dragSize"),this.wC=t.S()}),_h.defineProperty(pi,{OJ:"toolTipDuration"},function(){return this.RD},function(t){_h.j(t,"number",pi,"toolTipDuration"),this.RD=t}),_h.defineProperty(pi,{XG:"actionTool"},function(){return this.findTool("Action")},function(t){yi(this,"Action",t,this.af)}),_h.defineProperty(pi,{MF:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){yi(this,"Relinking",t,this.af)}),_h.defineProperty(pi,{HI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){yi(this,"LinkReshaping",t,this.af)}),_h.defineProperty(pi,{XF:"resizingTool"},function(){return this.findTool("Resizing")},function(t){yi(this,"Resizing",t,this.af)}),_h.defineProperty(pi,{sJ:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){yi(this,"Rotating",t,this.af)}),_h.defineProperty(pi,{wF:"linkingTool"},function(){return this.findTool("Linking")},function(t){yi(this,"Linking",t,this.$f)}),_h.defineProperty(pi,{re:"draggingTool"},function(){return this.findTool("Dragging")},function(t){yi(this,"Dragging",t,this.$f)}),_h.defineProperty(pi,{LH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){yi(this,"DragSelecting",t,this.$f)}),_h.defineProperty(pi,{dJ:"panningTool"},function(){return this.findTool("Panning")},function(t){yi(this,"Panning",t,this.$f)}),_h.defineProperty(pi,{Xz:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){yi(this,"ContextMenu",t,this.ag)}),_h.defineProperty(pi,{oB:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){yi(this,"TextEditing",t,this.ag)}),_h.defineProperty(pi,{nH:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){yi(this,"ClickCreating",t,this.ag)}),_h.defineProperty(pi,{oH:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){yi(this,"ClickSelecting",t,this.ag)}),_h.fa("AnimationManager",mi),mi.prototype.Qc=function(t){this.Z=t},_h.u(mi,{sK:"animationReasons"},function(){return this.$u}),mi.prototype.canStart=function(){return!0},mi.prototype.prepareAutomaticAnimation=mi.prototype.Un=function(t){this.cf&&(this.Xj||this.Z.Hn)&&(this.$u.add(t),this.canStart(t)&&(this.Wj&&this.pi(),this.pc=!0))},mi.prototype.stopAnimation=mi.prototype.pi=function(){!0===this.pc&&(this.pc=!1,this.no&&this.Z.Le()),this.Wj&&this.cf&&Ti(this)},_h.defineProperty(mi,{isEnabled:"isEnabled"},function(){return this.cf},function(t){_h.j(t,"boolean",mi,"isEnabled"),this.cf=t}),_h.defineProperty(mi,{duration:"duration"},function(){return this.Ry},function(t){_h.j(t,"number",mi,"duration"),1>t&&_h.Ea(t,">= 1",mi,"duration"),this.Ry=t}),_h.u(mi,{kf:"isAnimating"},function(){return this.Wj}),_h.u(mi,{yI:"isTicking"},function(){return this.To}),_h.defineProperty(mi,{nF:"isInitial"},function(){return this.Xj},function(t){_h.j(t,"boolean",mi,"isInitial"),this.Xj=t});var Xc={opacity:function(t,e,i,n,o,r){t.opacity=n(o,e,i-e,r)},position:function(t,e,i,n,o,r){o!==r?t.gy(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r)):t.position=new b(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r))},"position:node":function(t,e,i,n,o,r){var a=t.W,s=i.W;i=s.x+s.width/2-a.width/2,a=s.y+s.height/2-a.height/2,o!==r?t.gy(n(o,e.x,i-e.x,r),n(o,e.y,a-e.y,r)):t.position=new b(n(o,e.x,i-e.x,r),n(o,e.y,a-e.y,r))},"position:placeholder":function(t,e,i,n,o,r){o!==r?t.gy(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r)):t.position=new b(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r))},scale:function(t,e,i,n,o,r){t.scale=n(o,e,i-e,r)},visible:function(t,e,i,n,o,r){t.visible=o!==r?e:i}};_h.fa("Layer",Di),Di.prototype.Qc=function(t){this.Z=t},Di.prototype.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,o=0,r=0,a=0,s=this.zb.i;s.next();){var l=s.value;l instanceof Cs?o++:l instanceof Ba?n++:l instanceof Ua?r++:l instanceof Aa?a++:i++}if(s="",0<i&&(s+=i+" Parts "),0<n&&(s+=n+" Nodes "),0<o&&(s+=o+" Groups "),0<r&&(s+=r+" Links "),0<a&&(s+=a+" Adornments "),1<t)for(t=this.zb.i;t.next();)i=t.value,s+="\n    "+i.toString(),n=i.data,null!==n&&_h.Kd(n)&&(s+=" #"+_h.Kd(n)),i instanceof Ba?s+=" "+wc(n):i instanceof Ua&&(s+=" "+wc(i.Y)+" "+wc(i.$));return e+" "+this.zb.count+": "+s},Di.prototype.findObjectAt=Di.prototype.Je=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.tl)return null;var n=!1;null!==this.g&&this.g.pb.Ha(t)&&(n=!0);for(var o=_h.K(),r=this.zb.n,a=r.length;a--;){var s=r[a];if((!0!==n||!1!==Ma(s))&&s.isVisible()&&(o.assign(t),w(o,s.ph),null!==(s=s.Je(o,e,i))&&(null!==e&&(s=e(s)),null!==s&&(null===i||i(s)))))return _h.v(o),s}return _h.v(o),null},Di.prototype.findObjectsAt=Di.prototype.Lt=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),n instanceof u||n instanceof f||(n=new f(Mo)),!1===this.tl)return n;var o=!1;null!==this.g&&this.g.pb.Ha(t)&&(o=!0);for(var r=_h.K(),a=this.zb.n,s=a.length;s--;){var l=a[s];if((!0!==o||!1!==Ma(l))&&l.isVisible()){r.assign(t),w(r,l.ph);var h=l;l.Lt(r,e,i,n)&&(null!==e&&(h=e(h)),null===h||null!==i&&!i(h)||(n instanceof f&&n.add(h),n instanceof u&&n.add(h)))}}return _h.v(r),n},Di.prototype.findObjectsIn=Di.prototype.zk=function(t,e,i,n,o){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof u||o instanceof f||(o=new f(Mo)),!1===this.tl)return o;var r=!1
;null!==this.g&&this.g.pb.wk(t)&&(r=!0);for(var a=this.zb.n,s=a.length;s--;){var l=a[s];if((!0!==r||!1!==Ma(l))&&l.isVisible()){var h=l;l.zk(t,e,i,n,o)&&(null!==e&&(h=e(h)),null===h||null!==i&&!i(h)||(o instanceof f&&o.add(h),o instanceof u&&o.add(h)))}}return o},Di.prototype.hA=function(t,e,i,n,o,r,a){if(!1===this.tl)return o;for(var s=this.zb.n,l=s.length;l--;){var h=s[l];if((!0!==a||!1!==Ma(h))&&r(h)&&h.isVisible()){var c=h;h.zk(t,e,i,n,o)&&(null!==e&&(c=e(c)),null===c||null!==i&&!i(c)||(o instanceof f&&o.add(c),o instanceof u&&o.add(c)))}}return o},Di.prototype.findObjectsNear=Di.prototype.wn=function(t,e,i,n,o,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof u||o instanceof f)&&(r=o),o=!0),r instanceof u||r instanceof f||(r=new f(Mo)),!1===this.tl)return r;var a=!1;null!==this.g&&this.g.pb.Ha(t)&&(a=!0);for(var s=_h.K(),l=_h.K(),h=this.zb.n,c=h.length;c--;){var d=h[c];if((!0!==a||!1!==Ma(d))&&d.isVisible()){s.assign(t),w(s,d.ph),l.m(t.x+e,t.y),w(l,d.ph);var p=d;d.wn(s,l,i,n,o,r)&&(null!==i&&(p=i(p)),null===p||null!==n&&!n(p)||(r instanceof f&&r.add(p),r instanceof u&&r.add(p)))}}return _h.v(s),_h.v(l),r},Vh=Di.prototype,Vh.Cf=function(t,e){if(this.visible){var i;i=void 0===e?t.pb:e;for(var n=this.zb.n,o=n.length,r=0;r<o;r++){var a=n[r];if(a.YC=r,!(a instanceof Ua&&!1===a.Zg)){if(a instanceof Aa){var s=a;if(null!==s.Of)continue}if(N(a.W,i))for(a.Cf(!0),ha(a),a=a.Jw;a.next();)s=a.value,Ao(s,Infinity,Infinity),s.hc(),s.Cf(!0);else a.Cf(!1),null!==a.Jw&&0<a.Jw.count&&ha(a)}}}},Vh.se=function(t,e,i){if(this.visible&&0!==this.wc&&(void 0===i&&(i=!0),i||!this.Kc)){i=this.zb.n;var n=i.length;if(0!==n){1!==this.wc&&(t.globalAlpha=this.wc);var o=this.fw;o.length=0;for(var r=e.scale,a=0;a<n;a++){var s=i[a];if(Ma(s)){if(s instanceof Ua){var l=s;if(l.jc&&o.push(l),!1===l.Zg)continue}l=s.W,1<l.width*r||1<l.height*r?s.se(t,e):ba(s,t)}}t.globalAlpha=1}}},Vh.h=function(t,e,i,n,o){var r=this.g;null!==r&&r.Xc(gc,t,this,e,i,n,o)},Vh.Zp=function(t,e,i){var n=this.zb;if(e.Rv=this,t>=n.count)t=n.count;else if(n.da(t)===e)return-1;return n.Md(t,e),e.Vt(i),n=this.g,null!==n&&(i?n.na():n.Zp(e)),ji(this,t,e),t},Vh.jf=function(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.jf(t,e,i);var n=this.zb;if(0>t||t>=n.length){if(0>(t=n.indexOf(e)))return-1}else if(n.da(t)!==e&&0>(t=n.indexOf(e)))return-1;return e.Wt(i),n.Yc(t),n=this.g,null!==n&&(i?n.na():n.jf(e)),e.Rv=null,t},Vh.clear=function(){for(var t=this.zb.ec(),e=t.length,i=0;i<e;i++)t[i].Cf(!1),this.jf(-1,t[i],!1)},_h.u(Di,{Jk:"parts"},function(){return this.zb.i}),_h.u(Di,{zL:"partsBackwards"},function(){return this.zb.In}),_h.u(Di,{g:"diagram"},function(){return this.Z}),_h.defineProperty(Di,{name:"name"},function(){return this.Qb},function(t){_h.j(t,"string",Di,"name");var e=this.Qb;if(e!==t){var i=this.g;if(null!==i)for(""===e&&_h.k("Cannot rename default Layer to: "+t),i=i.Dx;i.next();)i.value.name===t&&_h.k("Layer.name is already present in this diagram: "+t);for(this.Qb=t,this.h("name",e,t),t=this.zb.i;t.next();)t.value.Xf=this.Qb}}),_h.defineProperty(Di,{opacity:"opacity"},function(){return this.wc},function(t){var e=this.wc;e!==t&&(_h.j(t,"number",Di,"opacity"),(0>t||1<t)&&_h.Ea(t,"0 <= value <= 1",Di,"opacity"),this.wc=t,this.h("opacity",e,t),null!==(t=this.g)&&t.na())}),_h.defineProperty(Di,{Kc:"isTemporary"},function(){return this.gz},function(t){var e=this.gz;e!==t&&(_h.j(t,"boolean",Di,"isTemporary"),this.gz=t,this.h("isTemporary",e,t))}),_h.defineProperty(Di,{visible:"visible"},function(){return this.Kz},function(t){var e=this.Kz;if(e!==t){for(_h.j(t,"boolean",Di,"visible"),this.Kz=t,this.h("visible",e,t),e=this.zb.i;e.next();)e.value.vd(t);t=this.g,null!==t&&t.na()}}),_h.defineProperty(Di,{Tg:"pickable"},function(){return this.tl},function(t){var e=this.tl;e!==t&&(_h.j(t,"boolean",Di,"pickable"),this.tl=t,this.h("pickable",e,t))}),_h.defineProperty(Di,{gF:"isBoundsIncluded"},function(){return this.dz},function(t){this.dz!==t&&(this.dz=t,null!==this.g&&this.g.rc())}),_h.defineProperty(Di,{tk:"allowCopy"},function(){return this.Mk},function(t){var e=this.Mk;e!==t&&(_h.j(t,"boolean",Di,"allowCopy"),this.Mk=t,this.h("allowCopy",e,t))}),_h.defineProperty(Di,{gn:"allowDelete"},function(){return this.Nk},function(t){var e=this.Nk;e!==t&&(_h.j(t,"boolean",Di,"allowDelete"),this.Nk=t,this.h("allowDelete",e,t))}),_h.defineProperty(Di,{Nw:"allowTextEdit"},function(){return this.Wk},function(t){var e=this.Wk;e!==t&&(_h.j(t,"boolean",Di,"allowTextEdit"),this.Wk=t,this.h("allowTextEdit",e,t))}),_h.defineProperty(Di,{Kw:"allowGroup"},function(){return this.Ok},function(t){var e=this.Ok;e!==t&&(_h.j(t,"boolean",Di,"allowGroup"),this.Ok=t,this.h("allowGroup",e,t))}),_h.defineProperty(Di,{Ow:"allowUngroup"},function(){return this.Xk},function(t){var e=this.Xk;e!==t&&(_h.j(t,"boolean",Di,"allowUngroup"),this.Xk=t,this.h("allowUngroup",e,t))}),_h.defineProperty(Di,{zt:"allowLink"},function(){return this.Pk},function(t){var e=this.Pk;e!==t&&(_h.j(t,"boolean",Di,"allowLink"),this.Pk=t,this.h("allowLink",e,t))}),_h.defineProperty(Di,{hn:"allowRelink"},function(){return this.Rk},function(t){var e=this.Rk;e!==t&&(_h.j(t,"boolean",Di,"allowRelink"),this.Rk=t,this.h("allowRelink",e,t))}),_h.defineProperty(Di,{El:"allowMove"},function(){return this.Qk},function(t){var e=this.Qk;e!==t&&(_h.j(t,"boolean",Di,"allowMove"),this.Qk=t,this.h("allowMove",e,t))}),_h.defineProperty(Di,{Lw:"allowReshape"},function(){return this.Sk},function(t){var e=this.Sk;e!==t&&(_h.j(t,"boolean",Di,"allowReshape"),this.Sk=t,this.h("allowReshape",e,t))}),_h.defineProperty(Di,{At:"allowResize"},function(){return this.Tk},function(t){var e=this.Tk;e!==t&&(_h.j(t,"boolean",Di,"allowResize"),this.Tk=t,this.h("allowResize",e,t))}),_h.defineProperty(Di,{Mw:"allowRotate"},function(){return this.Uk},function(t){var e=this.Uk;e!==t&&(_h.j(t,"boolean",Di,"allowRotate"),this.Uk=t,this.h("allowRotate",e,t))}),_h.defineProperty(Di,{tf:"allowSelect"},function(){return this.Vk},function(t){var e=this.Vk;e!==t&&(_h.j(t,"boolean",Di,"allowSelect"),this.Vk=t,this.h("allowSelect",e,t))}),_h.fa("Diagram",Ii),Ii.prototype.clear=Ii.prototype.clear=function(){var t=null;null!==this.pd&&(t=this.pd.U),this.ba.clear();for(var e=this.ac.length,i=0;i<e;i++)this.ac.n[i].clear();this.sg.clear(),this.al.clear(),this.gp.clear(),this.yl.clear(),this.$o.clear(),this.zb.clear(),this.Ai.clear(),this.Lj.clear(),this.Em.clear(),this.uw.Ra(),this.uw.clear(),this.uw.freeze(),this.Ev.Ra(),this.Ev.clear(),this.Ev.freeze(),kc=this.wo=null,Sc="",this.rv=new S(NaN,NaN,NaN,NaN).freeze(),null!==t&&(this.add(t),this.zb.remove(t)),this.na()},Ii.prototype.reset=Ii.prototype.reset=function(){this.Sc=!0,this.clear(),this.ac=new u(Di),this.TF(),this.SF(),this.ib=new b(NaN,NaN).freeze(),this.tb=1,this.Gv=new b(NaN,NaN).freeze(),this.Hv=NaN,this.Zv=1e-4,this.Xv=100,this.Hw=new b(NaN,NaN).freeze(),this.yv=new S(NaN,NaN,NaN,NaN).freeze(),this.pw=new A(0,0,0,0).freeze(),this.qw=lf,this.mw=this.kw=null,this.qm=Qc,this.to=eu,this.gl=Qc,this.No=eu,this.Iv=this.Fv=iu,this.Mq=250,this.cv=new A(16,16,16,16).freeze(),this.Ov=!0,this.Cw=uf,this.Ew=ef,this.ir="auto",this.zi=this.dj=this.Si=this.bw=this.Ti=this.Ui=this.Vi=this.yi=this.Ei=this.wi=null,this.Ji=!1,this.Nk=this.Mk=this.Su=this.cf=!0,this.Uu=this.Tu=!1,this.Yu=this.Vu=this.Dv=this.Cv=this.Zu=this.Xu=this.Vk=this.Uk=this.Tk=this.Sk=this.Qk=this.Rk=this.Pk=this.Wu=this.Xk=this.Ok=this.Wk=!0,this.sw=this.ow=16,this.ff=new A(5).freeze(),this.Yv=999999999,this.ie=null,this.Pv=!1,Oi(this),this.pd=null,this.ab=new pi,this.ab.initializeStandardTools(),this.Za=this.Et=this.ab,this.ob=new se,this.cj=!0,qi(this),this.Sb=new Es,this.cj=!1,this.ba=new Xt,this.eh=!1,this.Io=!0,this.Sc=this.Nf=!1,this.na(),this.gh=this.vi=null,$n(this),this.jv=""},Ii.prototype.gc=function(t){t.De===Ii?this.Gl=t:_h.Fj(this,t)},Ii.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.mj&&this.mj.id&&(e=this.mj.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.ac.i;i.next();)e+="\n  "+i.value.toString(t-1);return e},Ii.fromDiv=function(e){var i=e;return"string"==typeof e&&(i=t.document.getElementById(e)),i instanceof HTMLDivElement&&i.Z instanceof Ii?i.Z:null},_h.defineProperty(Ii,{mj:"div"},function(){return this.Mb},function(e){if(null!==e&&_h.G(e,HTMLDivElement,Ii,"div"),this.Mb!==e){Pd=[];var i=this.Mb;null!==i?(i.Z=void 0,i.innerHTML="",null!==this.Fb&&(this.Fb.removeEventListener("touchstart",this.uB,!1),this.Fb.removeEventListener("touchmove",this.tB,!1),this.Fb.removeEventListener("touchend",this.sB,!1),this.Fb.Hd.Z=null),i=this.ab,null!==i&&(i.af.each(function(t){t.cancelWaitAfter()}),i.$f.each(function(t){t.cancelWaitAfter()}),i.ag.each(function(t){t.cancelWaitAfter()})),i.cancelWaitAfter(),this.Za.doCancel(),this.qf=this.Fb=null,t.removeEventListener("resize",this.BB,!1),t.removeEventListener("mousemove",this.Pn,!0),t.removeEventListener("mousedown",this.On,!0),t.removeEventListener("mouseup",this.Rn,!0),t.removeEventListener("mousewheel",this.Og,!0),t.removeEventListener("DOMMouseScroll",this.Og,!0),t.removeEventListener("mouseout",this.Qn,!0)):this.eh=!1,this.Mb=null,null!==e&&((i=e.Z)&&(i.mj=null),lo(this,e),this.Rx())}}),Ii.prototype.computePixelRatio=function(){return null!==this.kk?this.kk:this.gD},Ii.prototype.doMouseMove=function(){this.Za.doMouseMove()},Ii.prototype.doMouseDown=function(){this.Za.doMouseDown()},Ii.prototype.doMouseUp=function(){this.Za.doMouseUp()},Ii.prototype.doMouseWheel=function(){this.Za.doMouseWheel()},Ii.prototype.doKeyDown=function(){this.Za.doKeyDown()},Ii.prototype.doKeyUp=function(){this.Za.doKeyUp()},Ii.prototype.doFocus=function(){this.focus()},Ii.prototype.focus=Ii.prototype.focus=function(){this.Fb&&this.Fb.focus()},Ii.prototype.diagramScroll=Ii.prototype.KH=function(t){if(this.xz&&null!==this.Fb){this.nw=!0;var e,i=this.qe,n=this.pb,o=i.width,r=n.width,a=i.height,s=n.height,l=i.right,h=n.right,u=i.bottom,c=n.bottom,f=i.x,d=n.x,i=i.y,n=n.y,p=this.scale;if(e=t.scrollLeft,this.Kr)switch(this.vz){case"negative":e=e+t.scrollWidth-t.clientWidth;break;case"reverse":e=t.scrollWidth-e-t.clientWidth}var g=e;r<o||s<a?(e=_h.xb(this.position.x,this.position.y),this.me&&this.yz!==g&&(e.x=g/p+f,this.yz=g),this.ne&&this.zz!==t.scrollTop&&(e.y=t.scrollTop/p+i,this.zz=t.scrollTop),this.position=e,_h.v(e),this.Am=this.nw=!1):(e=_h.K(),t.QG&&this.me&&(f<d&&(this.position=e.m(g+f,this.position.y)),l>h&&(this.position=e.m(-(this.rw.scrollWidth-this.Ib)+g-this.Ib/p+l,this.position.y))),t.RG&&this.ne&&(i<n&&(this.position=e.m(this.position.x,t.scrollTop+i)),u>c&&(this.position=e.m(this.position.x,-(this.rw.scrollHeight-this.Lb)+t.scrollTop-this.Lb/p+u))),_h.v(e),pn(this),this.Am=this.nw=!1,i=this.qe,n=this.pb,l=i.right,h=n.right,u=i.bottom,c=n.bottom,f=i.x,d=n.x,i=i.y,n=n.y,r>=o&&f>=d&&l<=h&&(this.Qs.style.width="1px"),s>=a&&i>=n&&u<=c&&(this.Qs.style.height="1px"))}},Ii.prototype.computeBounds=Ii.prototype.sh=function(){return 0<this.sg.count&&sn(this),Ui(this)},Ii.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);for(var i=null,n=t.i;n.next();){var o=n.value;!e&&o instanceof Ua||(o.Ze(),null===i?i=o.W.copy():i.Gh(o.W))}return null===i?new S(NaN,NaN,0,0):i},Ii.prototype.zoomToFit=Ii.prototype.zoomToFit=function(){this.scale=Ki(this,Zc)},Ii.prototype.zoomToRect=function(t,e){void 0===e&&(e=Zc);var i=t.width,n=t.height;if(!(0===i||0===n||isNaN(i)&&isNaN(n))){var o=1;if(e===Zc||e===tf)if(isNaN(i))o=this.pb.height*this.scale/n;else if(isNaN(n))o=this.pb.width*this.scale/i;else var o=this.Ib,r=this.Lb,o=e===tf?r/n>o/i?(r-(this.Uj?this.Dd:0))/n:(o-(this.el?this.Dd:0))/i:Math.min(r/n,o/i);this.scale=o,this.position=new b(t.x,t.y)}},_h.defineProperty(Ii,{yA:null},function(){return this.Sc},function(t){this.Sc=t}),Ii.prototype.alignDocument=function(t,e){this.Vj&&Un(this,this.sh());var i=this.qe,n=this.pb;this.position=new b(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},Ii.prototype.findPartAt=Ii.prototype.Mt=function(t,e){var i=e?Yi(this,t,function(t){return t.U},function(t){return t.canSelect()}):Yi(this,t,function(t){return t.U});return i instanceof sa?i:null},Ii.prototype.findObjectAt=Ii.prototype.Je=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),sn(this);for(var n=this.ac.In;n.next();){var o=n.value;if(o.visible&&null!==(o=o.Je(t,e,i)))return o}return null},Ii.prototype.findObjectsAt=Ii.prototype.Lt=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),n instanceof u||n instanceof f||(n=new f(Mo)),sn(this);for(var o=this.ac.In;o.next();){var r=o.value;r.visible&&r.Lt(t,e,i,n)}return n},Ii.prototype.findObjectsIn=Ii.prototype.zk=function(t,e,i,n,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof u||o instanceof f||(o=new f(Mo)),sn(this);for(var r=this.ac.In;r.next();){var a=r.value;a.visible&&a.zk(t,e,i,n,o)}return o},Ii.prototype.hA=function(t,e,i,n,o,r){var a=new f(Mo);sn(this);for(var s=this.ac.In;s.next();){var l=s.value;l.visible&&l.hA(t,e,i,n,a,o,r)}return a},Ii.prototype.findObjectsNear=Ii.prototype.wn=function(t,e,i,n,o,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof u||o instanceof f)&&(r=o),o=!0),r instanceof u||r instanceof f||(r=new f(Mo)),sn(this);for(var a=this.ac.In;a.next();){var s=a.value;s.visible&&s.wn(t,e,i,n,o,r)}return r},Ii.prototype.acceptEvent=function(t){var e=this.Uc;return this.Uc=this.Pb,this.Pb=e,$i(this,this,t,e,t instanceof MouseEvent),e},Ii.prototype.AI=function(t){if(!this.Z.isEnabled)return!1;var e=this.Z.Pb;switch($i(this.Z,this.Z,t,e,!1),e.key=String.fromCharCode(t.which),e.Ol=!0,t.which){case 8:e.key="Backspace";break;case 33:e.key="PageUp";break;case 34:e.key="PageDown";break;case 35:e.key="End";break;case 36:e.key="Home";break;case 37:e.key="Left";break;case 38:e.key="Up";break;case 39:e.key="Right";break;case 40:e.key="Down";break;case 45:e.key="Insert";break;case 46:e.key="Del";break;case 48:e.key="0";break;case 187:case 61:case 107:e.key="Add";break;case 189:case 173:case 109:e.key="Subtract";break;case 27:e.key="Esc"}return this.Z.doKeyDown(),187!==t.which&&189!==t.which&&48!==t.which&&107!==t.which&&109!==t.which&&61!==t.which&&173!==t.which||!0!==t.ctrlKey?Zi(e,t):(t.cancelBubble=!0,t.preventDefault(),t.stopPropagation(),!1)},Ii.prototype.BI=function(t){if(!this.Z.isEnabled)return!1;var e=this.Z.Pb;switch($i(this.Z,this.Z,t,e,!1),e.key=String.fromCharCode(t.which),e.up=!0,t.which){case 8:e.key="Backspace";break;case 33:e.key="PageUp";break;case 34:e.key="PageDown";break;case 35:e.key="End";break;case 36:e.key="Home";break;case 37:e.key="Left";break;case 38:e.key="Up";break;case 39:e.key="Right";break;case 40:e.key="Down";break;case 45:e.key="Insert";break;case 46:e.key="Del";break;case 93:t.preventDefault()}return this.Z.doKeyUp(),Zi(e,t)},Ii.prototype.yr=function(t){var e=this.Fb;if(null===e)return new b(0,0);var i=this.Ib,n=this.Lb,e=e.getBoundingClientRect(),i=t.clientX-i/e.width*e.left;return t=t.clientY-n/e.height*e.top,null!==this.dd?(t=new b(i,t),w(t,this.dd),t):new b(i,t)},Ii.prototype.invalidateDocumentBounds=Ii.prototype.rc=function(){this.Vj||(this.Vj=!0,this.Le(!0))},Ii.prototype.redraw=Ii.prototype.Rx=function(){this.Sc||this.Xd||(this.na(),dn(this),pn(this),this.rc(),this.Zf())},Ii.prototype.isUpdateRequested=function(){return this.Nf},Ii.prototype.delayInitialization=function(t){void 0===t&&(t=null);var e=this.Pa,i=e.isEnabled;e.pi(),e.isEnabled=!1,rn(this),this.eh=!1,e.isEnabled=i,null!==t&&_h.setTimeout(t,1)},Ii.prototype.requestUpdate=Ii.prototype.Le=function(t){if(void 0===t&&(t=!1),!0!==this.Nf&&!(this.Sc||!1===t&&this.Xd)){this.Nf=!0;var e=this;requestAnimationFrame(function(){e.Nf&&e.Zf()})}},Ii.prototype.maybeUpdate=Ii.prototype.Zf=function(){this.Io&&!this.Nf||(this.Io&&(this.Io=!1),rn(this))},_h.u(Ii,{Hn:null},function(){return this.eh}),Ii.prototype.yB=function(t,e){for(t.reset();t.next();){var i=t.value;!i.de()||i instanceof Cs||(i.Yl()?(Ao(i,Infinity,Infinity),i.hc()):e.add(i))}for(t.reset();t.next();)(i=t.value)instanceof Cs&&i.isVisible()&&ln(this,i);for(t.reset();t.next();)(i=t.value)instanceof Ua&&i.isVisible()&&(i.Yl()?(Ao(i,Infinity,Infinity),i.hc()):e.add(i));for(t.reset();t.next();)(i=t.value)instanceof Aa&&i.isVisible()&&(i.Yl()?(Ao(i,Infinity,Infinity),i.hc()):e.add(i))},Ii.prototype.Cf=function(t,e,i,n){var o=this.Pa;if(this.hl||o.kf)for(o=0;o<e;o++)t[o].Cf(i,n)},Ii.prototype.se=function(t,e){void 0===e&&(e=null),null===this.Mb&&_h.k("No div specified");var i=this.Fb;null===i&&_h.k("No canvas specified");var n=this.Pa;if(!n.pc&&(gn(this),"0"!==this.Mb.style.opacity)){var o=t!==this.qf,r=this.ac.n,a=r.length,s=this;if(this.Cf(r,a,s),o)t.Ee(!0),pn(this);else if(!this.Be&&null===e&&!n.Wj)return;var a=this.ib,l=this.tb,h=Math.round(a.x*l)/l,u=Math.round(a.y*l)/l,n=this.dd;for(n.reset(),1!==l&&n.scale(l),0===a.x&&0===a.y||n.translate(-h,-u),l=this.Ad,_h.Fn?(i.width=i.width,t.Ee(!0),t.scale(l,l)):(t.setTransform(1,0,0,1,0,0),t.scale(l,l),t.clearRect(0,0,this.Ib,this.Lb)),t.setTransform(1,0,0,1,0,0),t.scale(l,l),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),i=null!==e?function(i){var n=e;if(i.visible&&0!==i.wc){var o=i.zb.n,r=o.length;if(0!==r){1!==i.wc&&(t.globalAlpha=i.wc),i=i.fw,i.length=0;for(var a=s.scale,l=0;l<r;l++){var h=o[l];if(Ma(h)&&!n.contains(h)){if(h instanceof Ua){var u=h;if(u.jc&&i.push(u),!1===u.Zg)continue}u=h.W,1<u.width*a||1<u.height*a?h.se(t,s):ba(h,t)}}t.globalAlpha=1}}}:function(e){e.se(t,s)},cn(this,t),a=r.length,h=0;h<a;h++)t.setTransform(1,0,0,1,0,0),t.scale(l,l),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),i(r[h]);this.fl?this.fl.km(this)&&this.tv():this.yr=function(){return new b(0,0)},o?(this.qf.Ee(!0),pn(this)):this.Be=this.hl=!1}},Ii.prototype.getRenderingHint=Ii.prototype.pj=function(t){return this.hk[t]},Ii.prototype.setRenderingHint=Ii.prototype.AJ=function(t,e){this.hk[t]=e,this.Rx()},Ii.prototype.resetRenderingHints=Ii.prototype.TF=function(){this.hk=new n,this.hk.drawShadows=!0,this.hk.textGreeking=!0,this.hk.viewportOptimizations=!_h.lF,this.hk.temporaryPixelRatio=!0,this.hk.pictureRatioOptimization=!0},Ii.prototype.getInputOption=Ii.prototype.Tt=function(t){return this.Qo[t]},Ii.prototype.setInputOption=function(t,e){this.Qo[t]=e},Ii.prototype.resetInputOptions=Ii.prototype.SF=function(){this.Qo=new n,this.Qo.extraTouchArea=10,this.Qo.extraTouchThreshold=10,this.Qo.hasGestureZoom=!0},Ii.prototype.setProperties=function(t){_h.Eu(this,t)},Ii.prototype.na=function(t){if(void 0===t&&(t=null),null===t)this.Be=!0,this.Le();else{var e=this.pb;null!==t&&t.H()&&e.Tf(t)&&(this.Be=!0,this.Le())}for(e=this.gw.i;e.next();)e.value.na(t)},Ii.prototype.eF=function(t,e){if(!0!==this.Be){this.Be=!0;var i=!0===this.pj("temporaryPixelRatio");if(!0===this.pj("viewportOptimizations")&&this.$A!==hf&&this.$F.bx(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,o=_h.Ef(),r=Math.max(t.x,e.x),a=Math.max(t.y,e.y),s=Math.min(t.x+t.width,e.x+e.width),l=Math.min(t.y+t.height,e.y+e.height);if(o.x=r,o.y=a,o.width=Math.max(0,s-r)*n,o.height=Math.max(0,l-a)*n,0<o.width&&0<o.height){if(!this.Xd&&(this.Nf=!1,null!==this.Mb)){this.Xd=!0,fn(this),this.qe.H()||Un(this,this.sh());var h=this.Fb;if(null!==h){var u=this.Ad,a=this.Ib*u,s=this.Lb*u,r=this.scale*u,n=Math.round(Math.round(e.x*r)-Math.round(t.x*r)),r=Math.round(Math.round(e.y*r)-Math.round(t.y*r)),l=this.Qy,c=this.AC;l.width!==a&&(l.width=a),l.height!==s&&(l.height=s),c.clearRect(0,0,a,s);var l=190*this.Ad,f=70*this.Ad,d=Math.max(n,0),p=Math.max(r,0),g=Math.floor(a-d),y=Math.floor(s-p);c.by(!1),c.drawImage(h.Hd,d,p,g,y,0,0,g,y),this.fl.km(this)&&c.clearRect(0,0,l,f);var h=_h.lb(),c=_h.lb(),y=Math.abs(n),g=Math.abs(r),m=0===d?0:a-y,d=_h.xb(m,0),y=_h.xb(y+m,s);c.push(new S(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y)));var v=this.dd;v.reset(),v.scale(u,u),1!==this.tb&&v.scale(this.tb),u=this.ib,(0!==u.x||0!==u.y)&&isFinite(u.x)&&isFinite(u.y)&&v.translate(-u.x,-u.y),w(d,v),w(y,v),h.push(new S(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),m=0===p?0:s-g,d.m(0,m),y.m(a,g+m),c.push(new S(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),w(d,v),w(y,v),h.push(new S(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),this.fl.km(this)&&(a=0<n?0:-n,s=0<r?0:-r,d.m(a,s),y.m(l+a,f+s),c.push(new S(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),w(d,v),w(y,v),h.push(new S(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y)))),_h.v(d),_h.v(y),on(this,!1),hn(this,h,c,n,r),_h.wa(h),_h.wa(c),this.Xd=!1}}}else this.Zf();_h.Db(o),i&&(this.kk=1,this.Zf(),this.kk=null,this.Sx())}else i?(this.kk=1,this.Zf(),this.kk=null,this.Sx()):this.Zf()}},Ii.prototype.add=Ii.prototype.add=function(t){_h.G(t,sa,Ii,"add:part");var e=t.g;if(e!==this){null!==e&&_h.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),this.Eq&&(t.ml="Tool");var i=t.Xf,e=this.Kt(i);null===e&&(e=this.Kt("")),null===e&&_h.k('Cannot add a Part when unable find a Layer named "'+i+'" and there is no default Layer'),t.layer!==e&&(i=e.Zp(99999999,t,t.g===this),0<=i&&this.Xc(yc,"parts",e,null,t,null,i),e.Kc||this.rc(),t.J(Cd),null!==(i=t.Cx)&&i(t,null,e))}},Ii.prototype.Zp=function(t){if(t instanceof Ba){if(this.gp.add(t),t instanceof Cs){var e=t.Ka;null===e?this.yl.add(t):e.dp.add(t),e=t.Sb,null!==e&&(e.g=this)}}else t instanceof Ua?this.$o.add(t):t instanceof Aa||this.zb.add(t);var i=this;lr(t,function(t){Cn(i,t)}),(t instanceof Aa||t instanceof Cs&&null!==t.Kb)&&t.I(),e=t.data,null!==e&&(t instanceof Aa||(t instanceof Ua?this.Lj.add(e,t):this.Ai.add(e,t)),lr(t,function(t){Ln(i,t)})),!0!==Ko(t)&&!0!==wa(t)||this.sg.add(t),va(t,!0,this),Ca(t)?(t.W.H()&&this.na(da(t,t.W)),this.rc()):t.isVisible()&&t.W.H()&&this.na(da(t,t.W)),this.Le()},Ii.prototype.jf=function(t){if(t.Bt(),t instanceof Ba){if(this.gp.remove(t),t instanceof Cs){var e=t.Ka;null===e?this.yl.remove(t):e.dp.remove(t),e=t.Sb,null!==e&&(e.g=null)}}else t instanceof Ua?this.$o.remove(t):t instanceof Aa||this.zb.remove(t);var i=this;lr(t,function(t){Bn(i,t)}),e=t.data,null!==e&&(t instanceof Aa||(t instanceof Ua?this.Lj.remove(e):this.Ai.remove(e)),lr(t,function(t){Nn(i,t)})),this.sg.remove(t),Ca(t)?(t.W.H()&&this.na(da(t,t.W)),this.rc()):t.isVisible()&&t.W.H()&&this.na(da(t,t.W)),this.Le()},Ii.prototype.remove=Ii.prototype.remove=function(t){_h.G(t,sa,Ii,"remove:part"),vn(this,t,!0)},Ii.prototype.removeParts=Ii.prototype.XA=function(t,e){if(_h.isArray(t))for(var i=_h.Ya(t),n=0;n<i;n++){var o=_h.Da(t,n);e&&!o.canDelete()||this.remove(o)}else for(o=new f(sa),o.Hc(t),i=o.i;i.next();)o=i.value,e&&!o.canDelete()||this.remove(o)},Ii.prototype.copyParts=Ii.prototype.Mp=function(t,e,i){return this.ob.Mp(t,e,i)},Ii.prototype.moveParts=Ii.prototype.moveParts=function(t,e,i){_h.G(e,b,Ii,"moveParts:offset");var n=this.ab;if(null!==n){n=n.re,null===n&&(n=new de,n.Qc(this));var o=new v(sa);if(null!==t)t=t.i;else{for(t=this.Jk;t.next();)ye(n,o,t.value,i);for(t=this.eg;t.next();)ye(n,o,t.value,i);t=this.links}for(;t.next();)ye(n,o,t.value,i);n.moveParts(o,e,i)}},Ii.prototype.addLayer=Ii.prototype.tt=function(t){bn(this,t,null),t.Qc(this);var e=this.ac,i=e.count-1;if(!t.Kc)for(;0<=i&&e.da(i).Kc;)i--;e.Md(i+1,t),null!==this.ke&&this.Xc(yc,"layers",this,null,t,null,i+1),this.na(),this.rc()},Ii.prototype.addLayerBefore=Ii.prototype.bH=function(t,e){bn(this,t,e),t.Qc(this);var i=this.ac,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.ke&&this.Xc(mc,"layers",this,t,null,n,null));for(var o=i.count,r=0;r<o;r++)if(i.da(r)===e){i.Md(r,t);break}null!==this.ke&&this.Xc(yc,"layers",this,null,t,null,r),this.na(),0>n&&this.rc()},Ii.prototype.addLayerAfter=function(t,e){bn(this,t,e),t.Qc(this);var i=this.ac,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.ke&&this.Xc(mc,"layers",this,t,null,n,null));for(var o=i.count,r=0;r<o;r++)if(i.da(r)===e){i.Md(r+1,t);break}null!==this.ke&&this.Xc(yc,"layers",this,null,t,null,r+1),this.na(),0>n&&this.rc()},Ii.prototype.removeLayer=function(t){if(_h.G(t,Di,Ii,"removeLayer:layer"),t.g!==this&&_h.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),""!==t.name){var e=this.ac,i=e.indexOf(t);if(e.remove(t)){for(e=t.zb.copy().i;e.next();){var n=e.value,o=n.Xf;n.Xf=o!==t.name?o:""}null!==this.ke&&this.Xc(mc,"layers",this,t,null,i,null),this.na(),this.rc()}}},Ii.prototype.findLayer=Ii.prototype.Kt=function(t){for(var e=this.Dx;e.next();){var i=e.value;if(i.name===t)return i}return null},Ii.prototype.addModelChangedListener=Ii.prototype.dH=function(t){_h.j(t,"function",Ii,"addModelChangedListener:listener"),null===this.gh&&(this.gh=new u("function")),this.gh.add(t),this.ba.fn(t)},Ii.prototype.removeModelChangedListener=function(t){_h.j(t,"function",Ii,"removeModelChangedListener:listener"),null!==this.gh&&(this.gh.remove(t),0===this.gh.count&&(this.gh=null)),this.ba.wu(t)},Ii.prototype.addChangedListener=Ii.prototype.fn=function(t){_h.j(t,"function",Ii,"addChangedListener:listener"),null===this.vi&&(this.vi=new u("function")),this.vi.add(t)},Ii.prototype.removeChangedListener=Ii.prototype.wu=function(t){_h.j(t,"function",Ii,"removeChangedListener:listener"),null!==this.vi&&(this.vi.remove(t),0===this.vi.count&&(this.vi=null))},Ii.prototype.Qw=function(t){if(this.wb||this.oa.$E(t),t.yc!==pc&&(this.ni=!0),null!==this.vi){var e=this.vi,i=e.length;if(1===i)(e=e.da(0))(t);else if(0!==i)for(var n=e.ec(),o=0;o<i;o++)(e=n[o])(t)}},Ii.prototype.raiseChangedEvent=Ii.prototype.Xc=function(t,e,i,n,o,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var s=new Bt;s.g=this,s.yc=t,s.propertyName=e,s.object=i,s.oldValue=n,s.Bj=r,s.newValue=o,s.Aj=a,this.Qw(s)},Ii.prototype.raiseChanged=Ii.prototype.h=function(t,e,i,n,o){this.Xc(gc,t,this,e,i,n,o)},_h.u(Ii,{Pa:"animationManager"},function(){return this.OB}),_h.u(Ii,{oa:"undoManager"},function(){return this.ke.oa}),_h.defineProperty(Ii,{wb:"skipsUndoManager"},function(){return this.cj},function(t){_h.j(t,"boolean",Ii,"skipsUndoManager"),this.cj=t,this.ke.cj=t}),_h.defineProperty(Ii,{bA:"delaysLayout"},function(){return this.Ly},function(t){this.Ly=t}),Ii.prototype.nn=function(t,e){if(null!==t&&t.g===this){var i=this.Ne;try{this.Ne=!0;var n,o=t.yc;if(o===gc){var r=t.object,a=t.propertyName,s=t.ja(e);if(_h.Ma(r,a,s),r instanceof Mo){var l,h=r.U;null!==h&&h.ce()}this.ni=!0}else if(o===yc){var u=t.object,c=t.Aj,r=t.newValue;if(u instanceof Zo){if("number"==typeof c&&r instanceof Mo){l=r;var f=u;e?f.jf(c):f.Md(c,l),h=u.U,null!==h&&h.ce()}else if("number"==typeof c&&r instanceof Mr){var d=r,f=u;e?d.ve?f.RF(c):f.OF(c):(n=d.ve?f.be(d.index):f.ae(d.index),n.Lp(d))}}else if(u instanceof Di){var p=!0===t.Bj;if("number"==typeof c&&r instanceof sa){var h=r,g=u;e?(h.fb=!1,h.Mg=!1,h.ce(),g.jf(p?c:-1,h,p)):g.Zp(c,h,p)}}else if(u instanceof Ii){if("number"==typeof c&&r instanceof Di){var y=r;e?this.ac.Yc(c):(o=y,o.Qc(this),this.ac.Md(c,o))}}else _h.k("unknown ChangedEvent.Insert object: "+t.toString());this.ni=!0}else o===mc?(u=t.object,c=t.Bj,r=t.oldValue,u instanceof Zo?"number"==typeof c&&r instanceof Mo?(f=u,e?f.Md(c,r):f.jf(c)):"number"==typeof c&&r instanceof Mr&&(d=r,f=u,e?(n=d.ve?f.be(d.index):f.ae(d.index),n.Lp(d)):d.ve?f.RF(c):f.OF(c)):u instanceof Di?(p=!0===t.Aj,"number"==typeof c&&r instanceof sa&&(h=r,g=u,e?g.Zp(c,h,p):(h.fb=!1,h.Mg=!1,h.ce(),g.jf(p?c:-1,h,p)))):u instanceof Ii?"number"==typeof c&&r instanceof Di&&(y=r,e?(o=y,o.Qc(this),this.ac.Md(c,o)):this.ac.Yc(c)):_h.k("unknown ChangedEvent.Remove object: "+t.toString()),this.ni=!0):o!==pc&&_h.k("unknown ChangedEvent: "+t.toString())}finally{this.Ne=i}}},Ii.prototype.startTransaction=Ii.prototype.Ub=function(t){return this.oa.Ub(t)},Ii.prototype.commitTransaction=Ii.prototype.Gd=function(t){return this.oa.Gd(t)},Ii.prototype.rollbackTransaction=Ii.prototype.mq=function(){return this.oa.mq()},Ii.prototype.updateAllTargetBindings=Ii.prototype.xG=function(t){void 0===t&&(t="");for(var e=this.Jk;e.next();)e.value.Hb(t);for(e=this.eg;e.next();)e.value.Hb(t);for(e=this.links;e.next();)e.value.Hb(t)},Ii.prototype.updateAllRelationshipsFromData=Ii.prototype.SJ=function(){for(var t=this.ba,e=new f,i=t.dg,n=0;n<i.length;n++){var o=i[n];e.add(o)}var r=[];for(this.eg.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),this.Jk.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),r.forEach(function(e){_t(t,e,!1)}),n=0;n<i.length;n++){var o=i[n],a=this.vh(o);null===a&&Ut(t,o,!1)}if(t instanceof Xt){for(var s=new f,i=t.Ng,n=0;n<i.length;n++)o=i[n],s.add(o);var l=[];for(this.links.each(function(t){null===t.data||s.contains(t.data)||l.push(t.data)}),l.forEach(function(e){Zt(t,e,!1)}),n=0;n<i.length;n++)o=i[n],null===(a=this.Rf(o))&&Qt(t,o,!1)}for(n=this.Jk;n.next();)a=n.value,a.updateRelationshipsFromData();for(n=this.eg;n.next();)n.value.updateRelationshipsFromData();for(n=this.links;n.next();)a=n.value,a.updateRelationshipsFromData()},Ii.prototype.tu=function(t,e,i,n,o){t.L(e)||(void 0===o&&(o=!1),o||dn(this),pn(this),n=this.Sb,null===n||!n.zx||this.Gl!==Qc||o||t.width===e.width&&t.height===e.height||n.J(),n=this.Za,!0===this.Cm&&n instanceof pi&&(this.R.ca=this.vB(this.R.bf),gi(n,this)),this.Sc||this.eF(t,e),wn(this),this.nh.scale=i,this.nh.position.x=t.x,this.nh.position.y=t.y,this.nh.bounds.set(t),this.nh.isScroll=o,this.Aa("ViewportBoundsChanged",this.nh,t),this.BA&&this.links.each(function(t){t.sj&&t.W.Tf(e)&&t.Yb()}))},Ii.prototype.clearSelection=Ii.prototype.Rw=function(){var t=0<this.selection.count;t&&this.Aa("ChangingSelection"),kn(this),t&&this.Aa("ChangedSelection")},Ii.prototype.select=Ii.prototype.select=function(t){null!==t&&(_h.G(t,sa,Ii,"select:part"),t.layer.g===this&&(!t.fb||1<this.selection.count)&&(this.Aa("ChangingSelection"),kn(this),t.fb=!0,this.Aa("ChangedSelection")))},Ii.prototype.selectCollection=Ii.prototype.cG=function(t){if(this.Aa("ChangingSelection"),kn(this),_h.isArray(t))for(var e=_h.Ya(t),i=0;i<e;i++){var n=_h.Da(t,i);n instanceof sa||_h.k("Diagram.selectCollection given something that is not a Part: "+n),n.fb=!0}else for(t=t.i;t.next();)n=t.value,n instanceof sa||_h.k("Diagram.selectCollection given something that is not a Part: "+n),n.fb=!0;this.Aa("ChangedSelection")},Ii.prototype.clearHighlighteds=Ii.prototype.mH=function(){var t=this.Vl;if(0<t.count){for(var e=t.ec(),i=e.length,n=0;n<i;n++)e[n].Mg=!1;t.Ra(),t.clear(),t.freeze()}},Ii.prototype.highlight=function(t){null!==t&&t.layer.g===this&&(_h.G(t,sa,Ii,"highlight:part"),!t.Mg||1<this.Vl.count)&&(this.mH(),t.Mg=!0)},Ii.prototype.highlightCollection=function(t){for(var e=new f(sa).Hc(t),i=this.Vl.copy().Ux(e).i;i.next();)t=i.value,t.Mg=!1;for(e=e.i;e.next();)t=e.value,t instanceof sa||_h.k("Diagram.highlightCollection given something that is not a Part: "+t),t.Mg=!0},Ii.prototype.scroll=Ii.prototype.scroll=function(t,e,i){void 0===i&&(i=1);var n="up"===e||"down"===e,o=0;if("pixel"===t)o=i;else if("line"===t)o=i*(n?this.Cu:this.Bu);else if("page"===t)t=n?this.pb.height:this.pb.width,0!==(t*=this.scale)&&(o=Math.max(t-(n?this.Cu:this.Bu),0),o*=i);else{if("document"===t)return o=this.qe,n=this.pb,i=_h.K(),"up"===e?this.position=i.m(n.x,o.y):"left"===e?this.position=i.m(o.x,n.y):"down"===e?this.position=i.m(n.x,o.bottom-n.height):"right"===e&&(this.position=i.m(o.right-n.width,n.y)),void _h.v(i);_h.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,i=this.position.copy(),"up"===e?i.y=this.position.y-o:"down"===e?i.y=this.position.y+o:"left"===e?i.x=this.position.x-o:"right"===e?i.x=this.position.x+o:_h.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=i},Ii.prototype.scrollToRect=Ii.prototype.vJ=function(t){var e=this.pb;e.wk(t)||(t=t.Hl,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},Ii.prototype.centerRect=Ii.prototype.lH=function(t){var e=this.pb;t=t.Hl,t.x-=e.width/2,t.y-=e.height/2,this.position=t},Ii.prototype.transformDocToView=Ii.prototype.uG=function(t){var e=this.dd;e.reset(),1!==this.tb&&e.scale(this.tb);var i=this.ib;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.dd)},Ii.prototype.transformViewToDoc=Ii.prototype.vB=function(t){var e=this.dd;e.reset(),1!==this.tb&&e.scale(this.tb);var i=this.ib;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),w(t.copy(),this.dd)};var Qc;Ii.None=Qc=_h.p(Ii,"None",0);var Zc;Ii.Uniform=Zc=_h.p(Ii,"Uniform",1);var tf;Ii.UniformToFill=tf=_h.p(Ii,"UniformToFill",2);var ef;Ii.CycleAll=ef=_h.p(Ii,"CycleAll",10);var nf;Ii.CycleNotDirected=nf=_h.p(Ii,"CycleNotDirected",11);var of
;Ii.CycleNotDirectedFast=of=_h.p(Ii,"CycleNotDirectedFast",12);var rf;Ii.CycleNotUndirected=rf=_h.p(Ii,"CycleNotUndirected",13);var af;Ii.CycleDestinationTree=af=_h.p(Ii,"CycleDestinationTree",14);var sf;Ii.CycleSourceTree=sf=_h.p(Ii,"CycleSourceTree",15);var lf;Ii.DocumentScroll=lf=_h.p(Ii,"DocumentScroll",1);var hf;Ii.InfiniteScroll=hf=_h.p(Ii,"InfiniteScroll",2);var uf;Ii.TreeParentCollapsed=uf=_h.p(Ii,"TreeParentCollapsed",21);var cf;Ii.AllParentsCollapsed=cf=_h.p(Ii,"AllParentsCollapsed",22);var ff;Ii.AnyParentsCollapsed=ff=_h.p(Ii,"AnyParentsCollapsed",23),_h.defineProperty(Ii,{TJ:"validCycle"},function(){return this.Ew},function(t){var e=this.Ew;e!==t&&(_h.mb(t,Ii,Ii,"validCycle"),this.Ew=t,this.h("validCycle",e,t))}),_h.u(Ii,{Dx:"layers"},function(){return this.ac.i}),_h.defineProperty(Ii,{yf:"isModelReadOnly"},function(){var t=this.ke;return null!==t&&t.eb},function(t){var e=this.ke;null!==e&&(e.eb=t)}),_h.defineProperty(Ii,{eb:"isReadOnly"},function(){return this.Ji},function(t){var e=this.Ji;e!==t&&(_h.j(t,"boolean",Ii,"isReadOnly"),this.Ji=t,this.h("isReadOnly",e,t))}),_h.defineProperty(Ii,{isEnabled:"isEnabled"},function(){return this.cf},function(t){var e=this.cf;e!==t&&(_h.j(t,"boolean",Ii,"isEnabled"),this.cf=t,this.h("isEnabled",e,t))}),_h.defineProperty(Ii,{Oz:"allowClipboard"},function(){return this.Su},function(t){var e=this.Su;e!==t&&(_h.j(t,"boolean",Ii,"allowClipboard"),this.Su=t,this.h("allowClipboard",e,t))}),_h.defineProperty(Ii,{tk:"allowCopy"},function(){return this.Mk},function(t){var e=this.Mk;e!==t&&(_h.j(t,"boolean",Ii,"allowCopy"),this.Mk=t,this.h("allowCopy",e,t))}),_h.defineProperty(Ii,{gn:"allowDelete"},function(){return this.Nk},function(t){var e=this.Nk;e!==t&&(_h.j(t,"boolean",Ii,"allowDelete"),this.Nk=t,this.h("allowDelete",e,t))}),_h.defineProperty(Ii,{yt:"allowDragOut"},function(){return this.Tu},function(t){var e=this.Tu;e!==t&&(_h.j(t,"boolean",Ii,"allowDragOut"),this.Tu=t,this.h("allowDragOut",e,t))}),_h.defineProperty(Ii,{hE:"allowDrop"},function(){return this.Uu},function(t){var e=this.Uu;e!==t&&(_h.j(t,"boolean",Ii,"allowDrop"),this.Uu=t,this.h("allowDrop",e,t))}),_h.defineProperty(Ii,{Nw:"allowTextEdit"},function(){return this.Wk},function(t){var e=this.Wk;e!==t&&(_h.j(t,"boolean",Ii,"allowTextEdit"),this.Wk=t,this.h("allowTextEdit",e,t))}),_h.defineProperty(Ii,{Kw:"allowGroup"},function(){return this.Ok},function(t){var e=this.Ok;e!==t&&(_h.j(t,"boolean",Ii,"allowGroup"),this.Ok=t,this.h("allowGroup",e,t))}),_h.defineProperty(Ii,{Ow:"allowUngroup"},function(){return this.Xk},function(t){var e=this.Xk;e!==t&&(_h.j(t,"boolean",Ii,"allowUngroup"),this.Xk=t,this.h("allowUngroup",e,t))}),_h.defineProperty(Ii,{Fp:"allowInsert"},function(){return this.Wu},function(t){var e=this.Wu;e!==t&&(_h.j(t,"boolean",Ii,"allowInsert"),this.Wu=t,this.h("allowInsert",e,t))}),_h.defineProperty(Ii,{zt:"allowLink"},function(){return this.Pk},function(t){var e=this.Pk;e!==t&&(_h.j(t,"boolean",Ii,"allowLink"),this.Pk=t,this.h("allowLink",e,t))}),_h.defineProperty(Ii,{hn:"allowRelink"},function(){return this.Rk},function(t){var e=this.Rk;e!==t&&(_h.j(t,"boolean",Ii,"allowRelink"),this.Rk=t,this.h("allowRelink",e,t))}),_h.defineProperty(Ii,{El:"allowMove"},function(){return this.Qk},function(t){var e=this.Qk;e!==t&&(_h.j(t,"boolean",Ii,"allowMove"),this.Qk=t,this.h("allowMove",e,t))}),_h.defineProperty(Ii,{Lw:"allowReshape"},function(){return this.Sk},function(t){var e=this.Sk;e!==t&&(_h.j(t,"boolean",Ii,"allowReshape"),this.Sk=t,this.h("allowReshape",e,t))}),_h.defineProperty(Ii,{At:"allowResize"},function(){return this.Tk},function(t){var e=this.Tk;e!==t&&(_h.j(t,"boolean",Ii,"allowResize"),this.Tk=t,this.h("allowResize",e,t))}),_h.defineProperty(Ii,{Mw:"allowRotate"},function(){return this.Uk},function(t){var e=this.Uk;e!==t&&(_h.j(t,"boolean",Ii,"allowRotate"),this.Uk=t,this.h("allowRotate",e,t))}),_h.defineProperty(Ii,{tf:"allowSelect"},function(){return this.Vk},function(t){var e=this.Vk;e!==t&&(_h.j(t,"boolean",Ii,"allowSelect"),this.Vk=t,this.h("allowSelect",e,t))}),_h.defineProperty(Ii,{iE:"allowUndo"},function(){return this.Xu},function(t){var e=this.Xu;e!==t&&(_h.j(t,"boolean",Ii,"allowUndo"),this.Xu=t,this.h("allowUndo",e,t))}),_h.defineProperty(Ii,{Pw:"allowZoom"},function(){return this.Zu},function(t){var e=this.Zu;e!==t&&(_h.j(t,"boolean",Ii,"allowZoom"),this.Zu=t,this.h("allowZoom",e,t))}),_h.defineProperty(Ii,{tA:"hasVerticalScrollbar"},function(){return this.Dv},function(t){var e=this.Dv;e!==t&&(_h.j(t,"boolean",Ii,"hasVerticalScrollbar"),this.Dv=t,dn(this),this.na(),this.h("hasVerticalScrollbar",e,t),_i(this,!1))}),_h.defineProperty(Ii,{sA:"hasHorizontalScrollbar"},function(){return this.Cv},function(t){var e=this.Cv;e!==t&&(_h.j(t,"boolean",Ii,"hasHorizontalScrollbar"),this.Cv=t,dn(this),this.na(),this.h("hasHorizontalScrollbar",e,t),_i(this,!1))}),_h.defineProperty(Ii,{me:"allowHorizontalScroll"},function(){return this.Vu},function(t){var e=this.Vu;e!==t&&(_h.j(t,"boolean",Ii,"allowHorizontalScroll"),this.Vu=t,this.h("allowHorizontalScroll",e,t),_i(this,!1))}),_h.defineProperty(Ii,{ne:"allowVerticalScroll"},function(){return this.Yu},function(t){var e=this.Yu;e!==t&&(_h.j(t,"boolean",Ii,"allowVerticalScroll"),this.Yu=t,this.h("allowVerticalScroll",e,t),_i(this,!1))}),_h.defineProperty(Ii,{Bu:"scrollHorizontalLineChange"},function(){return this.ow},function(t){var e=this.ow;e!==t&&(_h.j(t,"number",Ii,"scrollHorizontalLineChange"),0>t&&_h.Ea(t,">= 0",Ii,"scrollHorizontalLineChange"),this.ow=t,this.h("scrollHorizontalLineChange",e,t))}),_h.defineProperty(Ii,{Cu:"scrollVerticalLineChange"},function(){return this.sw},function(t){var e=this.sw;e!==t&&(_h.j(t,"number",Ii,"scrollVerticalLineChange"),0>t&&_h.Ea(t,">= 0",Ii,"scrollVerticalLineChange"),this.sw=t,this.h("scrollVerticalLineChange",e,t))}),_h.defineProperty(Ii,{R:"lastInput"},function(){return this.Pb},function(t){this.Pb=t}),_h.defineProperty(Ii,{zc:"firstInput"},function(){return this.Hi},function(t){this.Hi=t}),_h.defineProperty(Ii,{cc:"currentCursor"},function(){return this.jv},function(t){""===t&&(t=this.ir);var e=this.jv;if(e!==t){_h.j(t,"string",Ii,"currentCursor");var i=this.Fb,n=this.Mb;null!==i&&(this.jv=t,i.style.cursor=t,n.style.cursor=t,i.style.cursor===e&&(i.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,i.style.cursor===e&&(i.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,i.style.cursor===e&&(i.style.cursor=t,n.style.cursor=t))))}}),_h.defineProperty(Ii,{FK:"defaultCursor"},function(){return this.ir},function(t){""===t&&(t="auto");var e=this.ir;e!==t&&(_h.j(t,"string",Ii,"defaultCursor"),this.ir=t,this.h("defaultCursor",e,t))}),_h.defineProperty(Ii,{click:"click"},function(){return this.wi},function(t){var e=this.wi;e!==t&&(null!==t&&_h.j(t,"function",Ii,"click"),this.wi=t,this.h("click",e,t))}),_h.defineProperty(Ii,{Gt:"doubleClick"},function(){return this.Ei},function(t){var e=this.Ei;e!==t&&(null!==t&&_h.j(t,"function",Ii,"doubleClick"),this.Ei=t,this.h("doubleClick",e,t))}),_h.defineProperty(Ii,{Wz:"contextClick"},function(){return this.yi},function(t){var e=this.yi;e!==t&&(null!==t&&_h.j(t,"function",Ii,"contextClick"),this.yi=t,this.h("contextClick",e,t))}),_h.defineProperty(Ii,{NA:"mouseOver"},function(){return this.Vi},function(t){var e=this.Vi;e!==t&&(null!==t&&_h.j(t,"function",Ii,"mouseOver"),this.Vi=t,this.h("mouseOver",e,t))}),_h.defineProperty(Ii,{MA:"mouseHover"},function(){return this.Ui},function(t){var e=this.Ui;e!==t&&(null!==t&&_h.j(t,"function",Ii,"mouseHover"),this.Ui=t,this.h("mouseHover",e,t))}),_h.defineProperty(Ii,{LA:"mouseHold"},function(){return this.Ti},function(t){var e=this.Ti;e!==t&&(null!==t&&_h.j(t,"function",Ii,"mouseHold"),this.Ti=t,this.h("mouseHold",e,t))}),_h.defineProperty(Ii,{YI:"mouseDragOver"},function(){return this.bw},function(t){var e=this.bw;e!==t&&(null!==t&&_h.j(t,"function",Ii,"mouseDragOver"),this.bw=t,this.h("mouseDragOver",e,t))}),_h.defineProperty(Ii,{KA:"mouseDrop"},function(){return this.Si},function(t){var e=this.Si;e!==t&&(null!==t&&_h.j(t,"function",Ii,"mouseDrop"),this.Si=t,this.h("mouseDrop",e,t))}),_h.defineProperty(Ii,{rB:"toolTip"},function(){return this.dj},function(t){var e=this.dj;e!==t&&(this.dj=t,this.h("toolTip",e,t))}),_h.defineProperty(Ii,{contextMenu:"contextMenu"},function(){return this.zi},function(t){var e=this.zi;e!==t&&(this.zi=t,this.h("contextMenu",e,t))}),_h.defineProperty(Ii,{ob:"commandHandler"},function(){return this.Ey},function(t){var e=this.Ey;e!==t&&(_h.G(t,se,Ii,"commandHandler"),null!==t.g&&_h.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),null!==e&&e.Qc(null),this.Ey=t,t.Qc(this))}),_h.defineProperty(Ii,{ab:"toolManager"},function(){return this.Gz},function(t){var e=this.Gz;e!==t&&(_h.G(t,pi,Ii,"toolManager"),null!==t.g&&_h.k("Cannot share ToolManagers between Diagrams: "+t.toString()),null!==e&&e.Qc(null),this.Gz=t,t.Qc(this))}),_h.defineProperty(Ii,{Et:"defaultTool"},function(){return this.Ky},function(t){var e=this.Ky;e!==t&&(_h.G(t,ce,Ii,"defaultTool"),this.Ky=t,this.Za===e&&(this.Za=t))}),_h.defineProperty(Ii,{Za:"currentTool"},function(){return this.Hy},function(t){var e=this.Hy;null!==e&&(e.sa&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.Et),null!==t&&(_h.G(t,ce,Ii,"currentTool"),this.Hy=t,t.Qc(this),t.doStart())}),_h.u(Ii,{selection:"selection"},function(){return this.uw}),_h.defineProperty(Ii,{OI:"maxSelectionCount"},function(){return this.Yv},function(t){var e=this.Yv;if(e!==t)if(_h.j(t,"number",Ii,"maxSelectionCount"),0<=t&&!isNaN(t)){if(this.Yv=t,this.h("maxSelectionCount",e,t),!this.oa.gb&&0<(t=this.selection.count-t)){this.Aa("ChangingSelection");for(var e=this.selection.ec(),i=0;i<t;i++)e[i].fb=!1;this.Aa("ChangedSelection")}}else _h.Ea(t,">= 0",Ii,"maxSelectionCount")}),_h.defineProperty(Ii,{aJ:"nodeSelectionAdornmentTemplate"},function(){return this.cw},function(t){var e=this.cw;e!==t&&(_h.G(t,Aa,Ii,"nodeSelectionAdornmentTemplate"),this.cw=t,this.h("nodeSelectionAdornmentTemplate",e,t))}),_h.defineProperty(Ii,{eI:"groupSelectionAdornmentTemplate"},function(){return this.Av},function(t){var e=this.Av;e!==t&&(_h.G(t,Aa,Ii,"groupSelectionAdornmentTemplate"),this.Av=t,this.h("groupSelectionAdornmentTemplate",e,t))}),_h.defineProperty(Ii,{II:"linkSelectionAdornmentTemplate"},function(){return this.Tv},function(t){var e=this.Tv;e!==t&&(_h.G(t,Aa,Ii,"linkSelectionAdornmentTemplate"),this.Tv=t,this.h("linkSelectionAdornmentTemplate",e,t))}),_h.u(Ii,{Vl:"highlighteds"},function(){return this.Ev}),_h.defineProperty(Ii,{ni:"isModified"},function(){var t=this.oa;return t.isEnabled?null!==t.lj||this.Lv&&this.dh!==t.qj:this.Lv},function(t){if(this.Lv!==t){_h.j(t,"boolean",Ii,"isModified"),this.Lv=t;var e=this.oa;!t&&e.isEnabled&&(this.dh=e.qj),t||Sn(this)}}),_h.defineProperty(Ii,{ba:"model"},function(){return this.ke},function(t){var e=this.ke;if(e!==t){_h.G(t,Dt,Ii,"model"),this.Za.doCancel(),null!==e&&e.oa!==t.oa&&e.oa.mF&&_h.k("Do not replace a Diagram.model while a transaction is in progress."),this.Pa.pi(),this.Rw(),this.eh=!1,this.Io=!0,this.dh=-2,this.Nf=!1;var i=this.Xd;this.Xd=!0,this.Pa.Un("Model"),null!==e&&(null!==this.gh&&this.gh.each(function(t){e.wu(t)}),e.wu(this.dD),e instanceof Xt&&qn(this,e.Ng),qn(this,e.dg)),this.ke=t,t.fn(this.cD),Fn(this,t.dg),t instanceof Xt&&zn(this,t.Ng),t.wu(this.cD),t.fn(this.dD),null!==this.gh&&this.gh.each(function(e){t.fn(e)}),this.Xd=i,this.Sc||this.na(),null!==e&&(t.oa.isEnabled=e.oa.isEnabled)}}),_h.defineProperty(Ii,{Ua:null},function(){return this.VC},function(t){this.VC=t}),_h.u(Ii,{Gx:null},function(){return this.JG}),_h.defineProperty(Ii,{Ne:"skipsModelSourceBindings"},function(){return this.yD},function(t){this.yD=t}),_h.defineProperty(Ii,{Iu:null},function(){return this.Bz},function(t){this.Bz=t}),Ii.prototype.rebuildParts=Ii.prototype.bm=function(){for(var t=this.QA.i;t.next();){var e=t.value,i=t.key;(!e.de()||e instanceof Cs)&&_h.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.rA.i;t.next();)e=t.value,i=t.key,e instanceof Cs||_h.k('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+e);for(t=this.DA.i;t.next();)e=t.value,i=t.key,e instanceof Ua||_h.k('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+e);for(t=_h.lb(),e=this.selection.i;e.next();)(i=e.value.data)&&t.push(i);for(var e=_h.lb(),n=this.Vl.i;n.next();)(i=n.value.data)&&e.push(i);for(i=_h.lb(),n=this.eg.i;n.next();){var o=n.value;null!==o.data&&(i.push(o.data),i.push(o.location))}for(n=this.links.i;n.next();)o=n.value,null!==o.data&&(i.push(o.data),i.push(o.location));for(n=this.Jk.i;n.next();)o=n.value,null!==o.data&&(i.push(o.data),i.push(o.location));for(n=this.ba,n instanceof Xt&&qn(this,n.Ng),qn(this,n.dg),Fn(this,n.dg),n instanceof Xt&&zn(this,n.Ng),n=0;n<t.length;n++)null!==(o=this.vh(t[n]))&&(o.fb=!0);for(n=0;n<e.length;n++)null!==(o=this.vh(e[n]))&&(o.Mg=!0);for(n=0;n<i.length;n+=2)null!==(o=this.vh(i[n]))&&(o.location=i[n+1]);_h.wa(t),_h.wa(e),_h.wa(i)},Ii.prototype.nA=function(t){return this.ba.nA(t)};var df=!1,pf=!1;Ii.prototype.lx=function(t){var e=this.ba,i="";return e instanceof Xt?i=e.lx(t):e instanceof ee&&(i=e.ZH(t)),i};var gf=!1;Ii.prototype.findPartForKey=Ii.prototype.RH=function(t){if(null===t||void 0===t)return null;var e=this.ba.te(t);return null!==e?this.Ai.ja(e):this.ba instanceof Xt&&null!==(e=this.ba.Tp(t))?this.Lj.ja(e):null},Ii.prototype.findNodeForKey=Ii.prototype.Ie=function(t){return null===t||void 0===t?null:null===(t=this.ba.te(t))?null:(t=this.Ai.ja(t),t instanceof Ba?t:null)},Ii.prototype.findPartForData=Ii.prototype.vh=function(t){if(null===t)return null;var e=this.Ai.ja(t);return null!==e?e:e=this.Lj.ja(t)},Ii.prototype.findNodeForData=Ii.prototype.ix=function(t){return null===t?null:(t=this.Ai.ja(t),t instanceof Ba?t:null)},Ii.prototype.findLinkForData=Ii.prototype.Rf=function(t){return null===t?null:this.Lj.ja(t)},Ii.prototype.findNodesByExample=function(){for(var t=new f(Ba),e=this.gp.i;e.next();){var i=e.value,n=i.data;if(null!==n)for(var o=0;o<arguments.length;o++){var r=arguments[o];if(_h.Qa(r)&&Hn(this,n,r)){t.add(i);break}}}return t.i},Ii.prototype.findLinksByExample=function(){for(var t=new f(Ua),e=this.$o.i;e.next();){var i=e.value,n=i.data;if(null!==n)for(var o=0;o<arguments.length;o++){var r=arguments[o];if(_h.Qa(r)&&Hn(this,n,r)){t.add(i);break}}}return t.i},_h.defineProperty(Ii,{qL:"nodeTemplate"},function(){return this.Wi.ja("")},function(t){var e=this.Wi.ja("");e!==t&&(_h.G(t,sa,Ii,"nodeTemplate"),this.Wi.add("",t),this.h("nodeTemplate",e,t),this.oa.gb||this.bm())}),_h.defineProperty(Ii,{QA:"nodeTemplateMap"},function(){return this.Wi},function(t){var e=this.Wi;e!==t&&(_h.G(t,v,Ii,"nodeTemplateMap"),this.Wi=t,this.h("nodeTemplateMap",e,t),this.oa.gb||this.bm())}),_h.defineProperty(Ii,{SK:"groupTemplate"},function(){return this.cl.ja("")},function(t){var e=this.cl.ja("");e!==t&&(_h.G(t,Cs,Ii,"groupTemplate"),this.cl.add("",t),this.h("groupTemplate",e,t),this.oa.gb||this.bm())}),_h.defineProperty(Ii,{rA:"groupTemplateMap"},function(){return this.cl},function(t){var e=this.cl;e!==t&&(_h.G(t,v,Ii,"groupTemplateMap"),this.cl=t,this.h("groupTemplateMap",e,t),this.oa.gb||this.bm())}),_h.defineProperty(Ii,{eL:"linkTemplate"},function(){return this.ak.ja("")},function(t){var e=this.ak.ja("");e!==t&&(_h.G(t,Ua,Ii,"linkTemplate"),this.ak.add("",t),this.h("linkTemplate",e,t),this.oa.gb||this.bm())}),_h.defineProperty(Ii,{DA:"linkTemplateMap"},function(){return this.ak},function(t){var e=this.ak;e!==t&&(_h.G(t,v,Ii,"linkTemplateMap"),this.ak=t,this.h("linkTemplateMap",e,t),this.oa.gb||this.bm())}),_h.defineProperty(Ii,{vI:null},function(){return this.Cm},function(t){this.Cm=t}),_h.defineProperty(Ii,{$e:"isMouseCaptured"},function(){return this.SC},function(e){var i=this.Fb;null!==i&&(e?(this.R.bubbles=!1,i.removeEventListener("mousemove",this.Pn,!1),i.removeEventListener("mousedown",this.On,!1),i.removeEventListener("mouseup",this.Rn,!1),i.removeEventListener("mousewheel",this.Og,!1),i.removeEventListener("DOMMouseScroll",this.Og,!1),i.removeEventListener("mouseout",this.Qn,!1),t.addEventListener("mousemove",this.Pn,!0),t.addEventListener("mousedown",this.On,!0),t.addEventListener("mouseup",this.Rn,!0),t.addEventListener("mousewheel",this.Og,!0),t.addEventListener("DOMMouseScroll",this.Og,!0),t.addEventListener("mouseout",this.Qn,!0),t.addEventListener("selectstart",this.preventDefault,!1)):(t.removeEventListener("mousemove",this.Pn,!0),t.removeEventListener("mousedown",this.On,!0),t.removeEventListener("mouseup",this.Rn,!0),t.removeEventListener("mousewheel",this.Og,!0),t.removeEventListener("DOMMouseScroll",this.Og,!0),t.removeEventListener("mouseout",this.Qn,!0),t.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("mousemove",this.Pn,!1),i.addEventListener("mousedown",this.On,!1),i.addEventListener("mouseup",this.Rn,!1),i.addEventListener("mousewheel",this.Og,!1),i.addEventListener("DOMMouseScroll",this.Og,!1),i.addEventListener("mouseout",this.Qn,!1)),this.SC=e)}),_h.defineProperty(Ii,{position:"position"},function(){return this.ib},function(t){var e=this.ib;if(!e.L(t)){_h.G(t,b,Ii,"position");var i=this.pb.copy();if(t=t.copy(),!this.Sc&&null!==this.Fb){this.Sc=!0;var n=this.scale;Ji(this,t,this.qe,this.Ib/n,this.Lb/n,this.to,!1),this.Sc=!1}this.ib=t.S(),t=this.Pa,t.pc&&Ci(t,e,this.ib),this.Sc||this.tu(i,this.pb,this.tb,this.tb,!1)}}),_h.defineProperty(Ii,{mI:"initialPosition"},function(){return this.Gv},function(t){this.Gv.L(t)||(_h.G(t,b,Ii,"initialPosition"),this.Gv=t.S())}),_h.defineProperty(Ii,{nI:"initialScale"},function(){return this.Hv},function(t){this.Hv!==t&&(_h.j(t,"number",Ii,"initialScale"),this.Hv=t)}),_h.defineProperty(Ii,{Dn:"grid"},function(){return null===this.pd&&Wi(this),this.pd},function(t){var e=this.pd;if(e!==t){null===e&&(Wi(this),e=this.pd),_h.G(t,Zo,Ii,"grid"),t.type!==id&&_h.k("Diagram.grid must be a Panel of type Panel.Grid");var i=e.O;null!==i&&i.remove(e),this.pd=t,t.name="GRID",null!==i&&i.add(t),wn(this),this.na(),this.h("grid",e,t)}}),_h.u(Ii,{pb:"viewportBounds"},function(){var t=this.XD;if(null===this.Fb)return t;var e=this.ib,i=this.tb;return t.m(e.x,e.y,Math.max(this.Ib,0)/i,Math.max(this.Lb,0)/i),t}),_h.defineProperty(Ii,{OE:"fixedBounds"},function(){return this.yv},function(t){var e=this.yv;e.L(t)||(_h.G(t,S,Ii,"fixedBounds"),-Infinity!==t.width&&Infinity!==t.height&&-Infinity!==t.height||_h.k("fixedBounds width/height must not be Infinity"),this.yv=t=t.S(),this.rc(),this.h("fixedBounds",e,t))}),_h.defineProperty(Ii,{$F:"scrollMargin"},function(){return this.pw},function(t){"number"==typeof t?t=new A(t):_h.G(t,A,Ii,"scrollMargin");var e=this.pw;e.L(t)||(this.pw=t=t.S(),this.rc(),this.h("scrollMargin",e,t))}),_h.defineProperty(Ii,{$A:"scrollMode"},function(){return this.qw},function(t){var e=this.qw;e!==t&&(_h.mb(t,Ii,Ii,"scrollMode"),this.qw=t,t===lf&&_i(this,!1),this.h("scrollMode",e,t))}),_h.defineProperty(Ii,{LF:"positionComputation"},function(){return this.kw},function(t){var e=this.kw;e!==t&&(null!==t&&_h.j(t,"function",Ii,"positionComputation"),this.kw=t,_i(this,!1),this.h("positionComputation",e,t))}),_h.defineProperty(Ii,{ZF:"scaleComputation"},function(){return this.mw},function(t){var e=this.mw;e!==t&&(null!==t&&_h.j(t,"function",Ii,"scaleComputation"),this.mw=t,xn(this,this.scale,this.scale),this.h("scaleComputation",e,t))}),_h.u(Ii,{qe:"documentBounds"},function(){return this.rv}),_h.defineProperty(Ii,{BA:"isVirtualized"},function(){return this.Pv},function(t){var e=this.Pv;e!==t&&(_h.j(t,"boolean",Ii,"isVirtualized"),this.Pv=t,this.h("isVirtualized",e,t))}),_h.defineProperty(Ii,{scale:"scale"},function(){return this.tb},function(t){var e=this.tb;_h.Fd(t,Ii,"scale"),e!==t&&xn(this,e,t)}),_h.defineProperty(Ii,{Gl:"autoScale"},function(){return this.qm},function(t){var e=this.qm;e!==t&&(_h.mb(t,Ii,Ii,"autoScale"),this.qm=t,this.h("autoScale",e,t),t!==Qc&&_i(this,!1))}),_h.defineProperty(Ii,{VK:"initialAutoScale"},function(){return this.gl},function(t){var e=this.gl;e!==t&&(_h.mb(t,Ii,Ii,"initialAutoScale"),this.gl=t,this.h("initialAutoScale",e,t))}),_h.defineProperty(Ii,{oI:"initialViewportSpot"},function(){return this.Iv},function(t){var e=this.Iv;e!==t&&(_h.G(t,D,Ii,"initialViewportSpot"),t.fd()||_h.k("initialViewportSpot must be a specific Spot: "+t),this.Iv=t,this.h("initialViewportSpot",e,t))}),_h.defineProperty(Ii,{lI:"initialDocumentSpot"},function(){return this.Fv},function(t){var e=this.Fv;e!==t&&(_h.G(t,D,Ii,"initialDocumentSpot"),t.fd()||_h.k("initialViewportSpot must be a specific Spot: "+t),this.Fv=t,this.h("initialDocumentSpot",e,t))}),_h.defineProperty(Ii,{yh:"minScale"},function(){return this.Zv},function(t){_h.Fd(t,Ii,"minScale");var e=this.Zv;e!==t&&(0<t?(this.Zv=t,this.h("minScale",e,t),t>this.scale&&(this.scale=t)):_h.Ea(t,"> 0",Ii,"minScale"))}),_h.defineProperty(Ii,{xh:"maxScale"},function(){return this.Xv},function(t){_h.Fd(t,Ii,"maxScale");var e=this.Xv;e!==t&&(0<t?(this.Xv=t,this.h("maxScale",e,t),t<this.scale&&(this.scale=t)):_h.Ea(t,"> 0",Ii,"maxScale"))}),_h.defineProperty(Ii,{lm:"zoomPoint"},function(){return this.Hw},function(t){this.Hw.L(t)||(_h.G(t,b,Ii,"zoomPoint"),this.Hw=t=t.S())}),_h.defineProperty(Ii,{tE:"contentAlignment"},function(){return this.to},function(t){var e=this.to;e.L(t)||(_h.G(t,D,Ii,"contentAlignment"),this.to=t=t.S(),this.h("contentAlignment",e,t),_i(this,!1))}),_h.defineProperty(Ii,{WK:"initialContentAlignment"},function(){return this.No},function(t){var e=this.No;e.L(t)||(_h.G(t,D,Ii,"initialContentAlignment"),this.No=t=t.S(),this.h("initialContentAlignment",e,t))}),_h.defineProperty(Ii,{padding:"padding"},function(){return this.ff},function(t){"number"==typeof t?t=new A(t):_h.G(t,A,Ii,"padding");var e=this.ff;e.L(t)||(this.ff=t=t.S(),this.rc(),this.h("padding",e,t))}),_h.u(Ii,{eg:"nodes"},function(){return this.gp.i}),_h.u(Ii,{links:"links"},function(){return this.$o.i}),_h.u(Ii,{Jk:"parts"},function(){return this.zb.i}),Ii.prototype.findTopLevelNodesAndLinks=function(){for(var t=new f(sa),e=this.gp.i;e.next();){var i=e.value;i.bq&&t.add(i)}for(e=this.$o.i;e.next();)i=e.value,i.bq&&t.add(i);return t.i},Ii.prototype.findTopLevelGroups=function(){return this.yl.i},_h.defineProperty(Ii,{Sb:"layout"},function(){return this.ie},function(t){var e=this.ie;e!==t&&(_h.G(t,Es,Ii,"layout"),null!==e&&(e.g=null,e.group=null),this.ie=t,t.g=this,t.group=null,this.av=!0,this.h("layout",e,t),this.Le())}),Ii.prototype.layoutDiagram=function(t){sn(this),t&&_n(this,!0),Jn(this,!1)},_h.defineProperty(Ii,{Pd:"isTreePathToChildren"},function(){return this.Ov},function(t){var e=this.Ov;if(e!==t&&(_h.j(t,"boolean",Ii,"isTreePathToChildren"),this.Ov=t,this.h("isTreePathToChildren",e,t),!this.oa.gb))for(t=this.eg;t.next();)za(t.value)}),Ii.prototype.findTreeRoots=function(){for(var t=new u(Ba),e=this.eg;e.next();){var i=e.value;i.bq&&null===i.xn()&&t.add(i)}return t.i},_h.defineProperty(Ii,{wB:"treeCollapsePolicy"},function(){return this.Cw},function(t){var e=this.Cw;e!==t&&(t!==uf&&t!==cf&&t!==ff&&_h.k("Unknown Diagram.treeCollapsePolicy: "+t),this.Cw=t,this.h("treeCollapsePolicy",e,t))}),_h.defineProperty(Ii,{wh:null},function(){return this.KC},function(t){this.KC=t}),Ii.prototype.addDiagramListener=Ii.prototype.Nz=function(t,e){_h.j(t,"string",Ii,"addDiagramListener:name"),_h.j(e,"function",Ii,"addDiagramListener:listener");var i=Qn(this,t);null!==i&&i.add(e)},Ii.prototype.removeDiagramListener=Ii.prototype.PF=function(t,e){_h.j(t,"string",Ii,"removeDiagramListener:name"),_h.j(e,"function",Ii,"addDiagramListener:listener");var i=Qn(this,t);null!==i&&i.remove(e)},Ii.prototype.raiseDiagramEvent=Ii.prototype.Aa=function(t,e,i){var n=Qn(this,t),o=new At;if(o.g=this,t=Xn(this,t),null!==t&&(o.name=t),void 0!==e&&(o.nB=e),void 0!==i&&(o.SA=i),1===(e=n.length))(n=n.da(0))(o);else if(0!==e)for(i=n.ec(),t=0;t<e;t++)(n=i[t])(o);return o.cancel},Ii.prototype.isUnoccupied=Ii.prototype.$l=function(t,e){return void 0===e&&(e=null),to(this,!1,null,e).$l(t.x,t.y,t.width,t.height)},Ii.prototype.computeOccupiedArea=function(){return this.BA?this.pb.copy():this.Vj?Ui(this):this.qe.copy()},Ii.invalidatePositionArray=Ii.prototype.xA=function(t){null!==this.Cd&&!this.Cd.Xt&&(void 0===t&&(t=null),null===t||t.Rz&&!t.lf)&&(this.Cd.Xt=!0)},Ii.prototype.simulatedMouseMove=function(t,e,i){if(null!==Pc){var n=Pc.g;i instanceof Ii||(i=null);var o=Tc;return i!==o&&(null!==o&&o!==n&&null!==o.ab.re&&(no(o),Pc.tx=!1,o.ab.re.doSimulatedDragLeave()),Tc=i,null!==i&&i!==n&&null!==i.ab.re&&(ve(),o=i.ab.re,Mc.contains(o)||Mc.add(o),i.ab.re.doSimulatedDragEnter())),null!==i&&i!==n&&i.hE&&!i.eb&&i.Fp?(n=i.ab.re,null!==n&&(null!==t?e=i.yr(t):null===e&&(e=new b),i.Pb.ca=e,i.Pb.Ol=!1,i.Pb.up=!1,n.doSimulatedDragOver()),!0):!1}return!1},Ii.prototype.simulatedMouseUp=function(t,e,i,n){if(null!==Pc){null===n&&(n=e),e=Tc;var o=Pc.g;if(n!==e){if(null!==e&&e!==o&&null!==e.ab.re)return no(e),Pc.tx=!1,e.ab.re.doSimulatedDragLeave(),!1;Tc=n,null!==n&&null!==n.ab.re&&(ve(),e=n.ab.re,Mc.contains(e)||Mc.add(e),n.ab.re.doSimulatedDragEnter())}if(null===n)return Pc.doCancel(),!0;if(n!==this)return null!==t&&(i=n.yr(t)),n.Pb.ca=i,n.Pb.Ol=!1,n.Pb.up=!0,t=n.ab.re,null!==t&&t.doSimulatedDrop(),t=Pc,null!==t&&(n=t.mayCopy(),t.Gf=n?"Copy":"Move",t.stopTool()),!0}return!1},_h.defineProperty(Ii,{vK:"autoScrollInterval"},function(){return this.Mq},function(t){var e=this.Mq;_h.Fd(t,Ii,"scale"),e!==t&&(this.Mq=t,this.h("autoScrollInterval",e,t))}),_h.defineProperty(Ii,{nE:"autoScrollRegion"},function(){return this.cv},function(t){"number"==typeof t?t=new A(t):_h.G(t,A,Ii,"autoScrollRegion");var e=this.cv;e.L(t)||(this.cv=t=t.S(),this.rc(),this.h("autoScrollRegion",e,t))}),Ii.prototype.doAutoScroll=Ii.prototype.dA=function(t){this.bv.assign(t),oo(this,this.bv).Ic(this.position)?no(this):io(this)},Ii.prototype.makeSvg=Ii.prototype.makeSVG=function(t){return void 0===t&&(t=new n),t.context="svg",t=ro(this,t),null!==t?t.gm:null},Ii.prototype.makeImage=function(t){void 0===t&&(t=new n);var e=(t.document||document).createElement("img");return e.src=this.JI(t),e},Ii.prototype.makeImageData=Ii.prototype.JI=function(t){void 0===t&&(t=new n);var e=ro(this,t);if(null!==e){var i=t.returnType,i=void 0===i?"string":i.toLowerCase();switch(i){case"imagedata":return e.xk.getImageData(0,0,e.width,e.height);case"blob":if(e=e.Hd,"function"!=typeof(i=t.callback)){_h.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');break}if("function"==typeof e.toBlob)return e.toBlob(i,t.type,t.details),"toBlob";if("function"==typeof e.msToBlob)return i(e.msToBlob()),"msToBlob";i(null);break;default:return e.toDataURL(t.type,t.details)}}return""};var yf=!1;Ii.inherit=function(t,e){_h.j(t,"function",Ii,"inherit"),_h.j(e,"function",Ii,"inherit"),e.SG&&_h.k("Cannot inherit from "+_h.hf(e)),_h.La(t,e)},ao.prototype.km=function(t){return t.qf.setTransform(t.Ad,0,0,t.Ad,0,0),null===this.Fi&&so(this),0<this.Fi&&this!==this.FD},ao.prototype.t=function(){this.FD=null},_h.La(ho,Ii),_h.fa("Palette",ho),_h.La(uo,Ii),_h.fa("Overview",uo),uo.prototype.computePixelRatio=function(){return 1},uo.prototype.se=function(){if(null===this.Mb&&_h.k("No div specified"),null===this.Fb&&_h.k("No canvas specified"),this.Be){var t=this.gk;if(null!==t&&!t.Pa.kf){gn(this);var e=t.Dn;(null!==e&&e.visible&&isNaN(e.width)||isNaN(e.height))&&wn(t);var i=this.Fb,e=this.qf,n=this.Dz,o=this.TG;n.width=i.width,n.height=i.height,e.Ee(!0),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),n=this.dd,n.reset(),1!==this.scale&&n.scale(this.scale),0===this.position.x&&0===this.position.y||n.translate(-this.position.x,-this.position.y),e.scale(this.Ad,this.Ad),e.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy);for(var n=this.uv,r=this.pb,a=t.ac.n,s=a.length,t=0;t<s;t++){var l=a[t],h=e,u=r,c=n;if(l.visible&&0!==l.wc&&(void 0===c&&(c=!0),c||!l.Kc)){1!==l.wc&&(h.globalAlpha=l.wc);for(var c=this.scale,l=l.zb.n,f=l.length,d=0;d<f;d++){var p=l[d],g=p.W;g.Tf(u)&&(1<g.width*c||1<g.height*c?p.se(h,this):ba(p,h))}h.globalAlpha=1}}for(o.drawImage(i.Hd,0,0),i=this.ac.n,o=i.length,t=0;t<o;t++)i[t].se(e,this);this.Be=this.hl=!1}}},_h.defineProperty(uo,{RA:"observed"},function(){return this.gk},function(t){var e=this.gk;null!==t&&_h.G(t,Ii,uo,"observed"),t instanceof uo&&_h.k("Overview.observed Diagram may not be an Overview itself: "+t),e!==t&&(null!==e&&(this.remove(this.rh),e.PF("ViewportBoundsChanged",this.EF),e.PF("DocumentBoundsChanged",this.DF),e.gw.remove(this)),this.gk=t,null!==t&&(t.Nz("ViewportBoundsChanged",this.EF),t.Nz("DocumentBoundsChanged",this.DF),t.gw.add(this),this.add(this.rh),fo(this)),this.rc(),this.h("observed",e,t))}),_h.defineProperty(uo,{rh:"box"},function(){return this.rm},function(t){var e=this.rm;e!==t&&(this.rm=t,this.remove(e),this.add(this.rm),fo(this),this.h("box",e,t))}),_h.defineProperty(uo,{QK:"drawsTemporaryLayers"},function(){return this.uv},function(t){this.uv!==t&&(this.uv=t,this.Rx())}),uo.prototype.sh=function(){var t=this.gk;return null===t?Iu:t.qe},uo.prototype.eF=function(){!0!==this.Be&&(this.Be=!0,co(this))},uo.prototype.tu=function(t,e,i,n,o){this.Sc||(pn(this),this.na(),dn(this),this.rc(),fo(this),this.nh.scale=i,this.nh.position.x=t.x,this.nh.position.y=t.y,this.nh.bounds.set(t),this.nh.isScroll=o,this.Aa("ViewportBoundsChanged",this.nh,t))},_h.La(po,de),po.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.El||!t.tf)return!1;var e=t.RA;if(null===e)return!1;if(null===this.findDraggablePart()){var i=e.pb;this.rl=new b(i.width/2,i.height/2),t=t.zc.ca,e.position=new b(t.x-this.rl.x,t.y-this.rl.y)}return!0},po.prototype.doActivate=function(){this.rl=null,de.prototype.doActivate.call(this)},po.prototype.moveParts=function(){var t=this.g,e=t.RA;if(null!==e){var i=t.rh;if(null!==i){if(null===this.rl){var n=t.zc.ca,i=i.location;this.rl=new b(n.x-i.x,n.y-i.y)}t=t.R.ca,e.position=new b(t.x-this.rl.x,t.y-this.rl.y)}}},_h.La(go,Je),go.prototype.resize=function(t){var e=this.g.RA;if(null!==e){var i=e.pb.copy();e.position=t.position,(i.width!==t.width||i.height!==t.height)&&0<t.width&&0<t.height&&(e.scale=Math.min(i.width/t.width,i.height/t.height))}},_h.fa("Brush",mo);var mf;mo.Solid=mf=_h.p(mo,"Solid",0);var vf;mo.Linear=vf=_h.p(mo,"Linear",1);var bf;mo.Radial=bf=_h.p(mo,"Radial",2);var xf;mo.Pattern=xf=_h.p(mo,"Pattern",4);var wf;mo.Lab=wf=_h.p(mo,"Lab",5);var kf;mo.HSL=kf=_h.p(mo,"HSL",6),mo.prototype.copy=function(){var t=new mo;return t.ma=this.ma,t.ro=this.ro,t.rp=this.rp.S(),t.Go=this.Go.S(),t.xw=this.xw,t.vv=this.vv,null!==this.ah&&(t.ah=this.ah.copy()),t.iw=this.iw,t},Vh=mo.prototype,Vh.Ga=function(){return this.freeze(),Object.freeze(this),this},Vh.freeze=function(){return this.Q=!0,null!==this.ah&&this.ah.freeze(),this},Vh.Ra=function(){return Object.isFrozen(this)&&_h.k("cannot thaw constant: "+this),this.Q=!1,null!==this.ah&&this.ah.Ra(),this},Vh.gc=function(t){t.De===mo?this.type=t:_h.Fj(this,t)},Vh.toString=function(){var t="Brush(";if(this.type===mf)t+=this.color;else if(t=this.type===vf?t+"Linear ":this.type===bf?t+"Radial ":this.type===xf?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.uk)for(var e=this.uk.i;e.next();)t+=" "+e.key+":"+e.value;return t+")"},mo.prototype.addColorStop=mo.prototype.addColorStop=function(t,e){this.Q&&_h.la(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&_h.Ea(t,"0 <= loc <= 1",mo,"addColorStop:loc"),_h.j(e,"string",mo,"addColorStop:color"),null===this.ah&&(this.ah=new v("number","string")),this.ah.add(t,e),this.ma===mf&&(this.type=vf),this.bh=null},_h.defineProperty(mo,{type:"type"},function(){return this.ma},function(t){this.Q&&_h.la(this,t),_h.mb(t,mo,mo,"type"),this.ma=t,this.start.Od()&&(t===vf?this.start=nu:t===bf&&(this.start=au)),this.end.Od()&&(t===vf?this.end=hu:t===bf&&(this.end=au)),this.bh=null}),_h.defineProperty(mo,{color:"color"},function(){return this.ro},function(t){this.Q&&_h.la(this,t),this.ro=t,this.bh=null}),_h.defineProperty(mo,{start:"start"},function(){return this.rp},function(t){this.Q&&_h.la(this,t),_h.G(t,D,mo,"start"),this.rp=t.S(),this.bh=null}),_h.defineProperty(mo,{end:"end"},function(){return this.Go},function(t){this.Q&&_h.la(this,t),_h.G(t,D,mo,"end"),this.Go=t.S(),this.bh=null}),_h.defineProperty(mo,{Ju:"startRadius"},function(){return this.xw},function(t){this.Q&&_h.la(this,t),_h.Fd(t,mo,"startRadius"),0>t&&_h.Ea(t,">= zero",mo,"startRadius"),this.xw=t,this.bh=null}),_h.defineProperty(mo,{
Ht:"endRadius"},function(){return this.vv},function(t){this.Q&&_h.la(this,t),_h.Fd(t,mo,"endRadius"),0>t&&_h.Ea(t,">= zero",mo,"endRadius"),this.vv=t,this.bh=null}),_h.defineProperty(mo,{uk:"colorStops"},function(){return this.ah},function(t){this.Q&&_h.la(this,t),this.ah=t,this.bh=null}),_h.defineProperty(mo,{pattern:"pattern"},function(){return this.iw},function(t){this.Q&&_h.la(this,t),this.iw=t,this.bh=null}),mo.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var i=Math.abs(e-t),n=Math.floor(t+Math.random()*i).toString(16),o=Math.floor(t+Math.random()*i).toString(16),i=Math.floor(t+Math.random()*i).toString(16);return 2>n.length&&(n="0"+n),2>o.length&&(o="0"+o),2>i.length&&(i="0"+i),"#"+n+o+i};var Sf,Mf=new V(null).xk;mo.isValidColor=Sf=function(t){if("black"===t)return!0;if(""===t)return!1;Mf.fillStyle="#000000";var e=Mf.fillStyle;return Mf.fillStyle=t,Mf.fillStyle!==e||(Mf.fillStyle="#FFFFFF",e=Mf.fillStyle,Mf.fillStyle=t,Mf.fillStyle!==e)};var Pf=new yo,Tf=new yo,Lf=new yo,Nf=new yo;mo.lighten=function(t){return Cf(t)},mo.prototype.lightenBy=function(t,e){this.Q&&_h.la(this);var i=void 0===t||"number"!=typeof t?.2:t,n=void 0===e?wf:e;if(this.type===mf)bo(this.color),this.color=vo(i,n);else if((this.type===vf||this.type===bf)&&null!==this.uk)for(var o=this.uk.i;o.next();)bo(o.value),this.addColorStop(o.key,vo(i,n));return this};var Cf;mo.lightenBy=Cf=function(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?wf:i,bo(t),vo(e,i)},mo.darken=function(t){return Af(t)},mo.prototype.darkenBy=function(t,e){this.Q&&_h.la(this);var i=void 0===t||"number"!=typeof t?.2:t,n=void 0===e?wf:e;if(this.type===mf)bo(this.color),this.color=vo(-i,n);else if((this.type===vf||this.type===bf)&&null!==this.uk)for(var o=this.uk.i;o.next();)bo(o.value),this.addColorStop(o.key,vo(-i,n));return this};var Af;mo.darkenBy=Af=function(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?wf:i,bo(t),vo(-e,i)};var Bf=216/24389,Df=24389/27,Ff=[95.047,100,108.883];_h.ji(Mo),_h.fa("GraphObject",Mo),Mo.prototype.cloneProtected=function(t){t.P=6144|this.P,t.wc=this.wc,t.Qb=this.Qb,t.Eb=this.Eb,t.$b=this.$b,t.ib.assign(this.ib),t.Re=this.Re.S(),t.Vh=this.Vh.S(),t.Uh=this.Uh.S(),t.Qi=this.Qi.copy(),t.tb=this.tb,t.ig=this.ig,t.Cg=this.Cg,t.Lm=this.Lm.S(),t.qd.assign(this.qd),t.nc.assign(this.nc),t.Tc.assign(this.Tc),t.As=this.As,null!==this.V&&(t.V=this.V.copy()),t.ge=this.ge.S(),t.nm=this.nm.S(),t.Ns=this.Ns,t.aj=this.aj,t.Tq=this.Tq,t.xi=this.xi,t.ct=this.ct,t.Rs=this.Rs,t.Wm=this.Wm,t.Xm=this.Xm.S(),t.Ym=this.Ym,t.br=this.br,null!==this.ha&&(t.ha=this.ha.copy()),t.tc=this.tc,t.po=this.po,null!==this.$k&&(t.$k=_h.Il(this.$k)),null!==this.lg&&(t.lg=this.lg.copy()),t.bn=this.bn},Mo.prototype.addCopyProperty=Mo.prototype.aH=function(t){var e=this.$k;if(_h.isArray(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.$k=e=[];e.push(t)},Mo.prototype.ki=function(t){t.Bs=null,t.Sm=null,t.I()},Mo.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.$k)for(var e=0;e<this.$k.length;e++){var i=this.$k[e];t[i]=this[i]}return t},Mo.prototype.copy=function(){return this.clone()},Mo.prototype.gc=function(t){t.De===Ua?0===t.name.indexOf("Orient")?this.qq=t:_h.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.De===Mo?this.stretch=t:_h.Fj(this,t)},Mo.prototype.toString=function(){return _h.hf(Object.getPrototypeOf(this))+"#"+_h.Kd(this)};var jf;Mo.None=jf=_h.p(Mo,"None",0);var Ef;Mo.Default=Ef=_h.p(Mo,"Default",0);var If;Mo.Vertical=If=_h.p(Mo,"Vertical",4);var Of;Mo.Horizontal=Of=_h.p(Mo,"Horizontal",5);var zf;Mo.Fill=zf=_h.p(Mo,"Fill",3);var Gf;Mo.Uniform=Gf=_h.p(Mo,"Uniform",1);var Rf;Mo.UniformToFill=Rf=_h.p(Mo,"UniformToFill",2);var qf;Mo.FlipVertical=qf=_h.p(Mo,"FlipVertical",1);var Wf;Mo.FlipHorizontal=Wf=_h.p(Mo,"FlipHorizontal",2);var Hf;Mo.FlipBoth=Hf=_h.p(Mo,"FlipBoth",3),Mo.prototype.Ld=function(){if(null===this.V){var t=new Ns;t.Sj=tu,t.pk=tu,t.Qj=10,t.nk=10,t.Pj=Id,t.mk=Id,t.Rj=0,t.ok=0,this.V=t}},Mo.prototype.raiseChangedEvent=Mo.prototype.Xc=function(t,e,i,n,o,r,a){var s=this.U;if(null!==s&&(s.Vn(t,e,i,n,o,r,a),qo(this)&&i===this&&t===gc&&Lo(this,s,e),i===s&&0!=(16777216&s.P)&&null!==s.data))for(t=this.xa.n,i=t.length,n=0;n<i;n++)(o=t[n])instanceof Zo&&lr(o,function(t){null!==t.data&&0!=(16777216&t.P)&&t.Hb(e)})},Mo.prototype.gx=function(t){return this.po===t?this:null},Mo.prototype.raiseChanged=Mo.prototype.h=function(t,e,i){this.Xc(gc,t,this,e,i)},Mo.prototype.ME=function(t,e,i){if(!1===this.Tg)return!1;var n=this.Ia;e=t.uf(e);var o=!1;return i&&(o=Yh(t.x,t.y,0,0,0,n.height)<e||Yh(t.x,t.y,0,n.height,n.width,n.height)<e||Yh(t.x,t.y,n.width,n.height,n.width,0)<e||Yh(t.x,t.y,n.width,0,0,0)<e),i||(o=Yh(t.x,t.y,0,0,0,n.height)<e&&Yh(t.x,t.y,0,n.height,n.width,n.height)<e&&Yh(t.x,t.y,n.width,n.height,n.width,0)<e&&Yh(t.x,t.y,n.width,0,0,0)<e),o},Mo.prototype.Yg=function(){return!0},Mo.prototype.containsPoint=Mo.prototype.Ha=function(t){var e=_h.K();e.assign(t),this.transform.nb(e);var i=this.W;if(!i.H())return _h.v(e),!1;var n=this.g;if(null!==n&&n.il){var o=n.Tt("extraTouchThreshold"),r=n.Tt("extraTouchArea"),a=r/2,s=this.Ia,n=this.oj()*n.scale,l=1/n;if(s.width*n<o&&s.height*n<o)return t=Qh(i.x-a*l,i.y-a*l,i.width+r*l,i.height+r*l,e.x,e.y),_h.v(e),t}return(this instanceof Aa||this instanceof Tr?Qh(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.Ha(e))?(o=!1,o=!(this.lg&&!this.lg.Ha(e))&&(!(null===this.$b||!i.Ha(e))||(!(null===this.Eb||!this.Tc.Ha(t))||this.vk(t))),_h.v(e),o):(_h.v(e),!1)},Mo.prototype.vk=function(t){var e=this.Ia;return Qh(0,0,e.width,e.height,t.x,t.y)},Mo.prototype.containsRect=Mo.prototype.wk=function(t){if(0===this.angle)return this.W.wk(t);var e=this.Ia,e=_h.hg(0,0,e.width,e.height),i=this.transform,n=!1,o=_h.xb(t.x,t.y);return e.Ha(i.li(o))&&(o.m(t.x,t.bottom),e.Ha(i.li(o))&&(o.m(t.right,t.bottom),e.Ha(i.li(o))&&(o.m(t.right,t.y),e.Ha(i.li(o))&&(n=!0)))),_h.v(o),_h.Db(e),n},Mo.prototype.containedInRect=Mo.prototype.qn=function(t,e){if(void 0===e)return t.wk(this.W);var i=this.Ia,n=!1,o=_h.xb(0,0);return t.Ha(e.nb(o))&&(o.m(0,i.height),t.Ha(e.nb(o))&&(o.m(i.width,i.height),t.Ha(e.nb(o))&&(o.m(i.width,0),t.Ha(e.nb(o))&&(n=!0)))),_h.v(o),n},Mo.prototype.intersectsRect=Mo.prototype.Tf=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Tf(this.W);var i=this.Ia,n=e,o=_h.xb(0,0),r=_h.xb(0,i.height),a=_h.xb(i.width,i.height),s=_h.xb(i.width,0),l=!1;if(t.Ha(n.nb(o))||t.Ha(n.nb(r))||t.Ha(n.nb(a))||t.Ha(n.nb(s)))l=!0;else{var i=_h.hg(0,0,i.width,i.height),h=_h.xb(t.x,t.y);i.Ha(n.li(h))?l=!0:(h.m(t.x,t.bottom),i.Ha(n.li(h))?l=!0:(h.m(t.right,t.bottom),i.Ha(n.li(h))?l=!0:(h.m(t.right,t.y),i.Ha(n.li(h))&&(l=!0)))),_h.v(h),_h.Db(i),!l&&(ht(t,o,r)||ht(t,r,a)||ht(t,a,s)||ht(t,s,o))&&(l=!0)}return _h.v(o),_h.v(r),_h.v(a),_h.v(s),l},Mo.prototype.getDocumentPoint=Mo.prototype.Wa=function(t,e){if(void 0===e&&(e=new b),t instanceof D){t.Od()&&_h.k("getDocumentPoint:s Spot must be specific: "+t.toString());var i=this.Ia;e.m(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.ph.nb(e),e},Mo.prototype.getDocumentAngle=Mo.prototype.zn=function(){var t;return t=this.ph,1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},Mo.prototype.getDocumentScale=Mo.prototype.oj=function(){if(0!=(4096&this.P)==!1)return this.Do;var t=this.tb;return null!==this.O?t*this.O.oj():t},Mo.prototype.getLocalPoint=Mo.prototype.RE=function(t,e){return void 0===e&&(e=new b),e.assign(t),this.ph.li(e),e},Mo.prototype.getNearestIntersectionPoint=Mo.prototype.SE=function(t,e,i){return this.Bn(t.x,t.y,e.x,e.y,i)},Vh=Mo.prototype,Vh.Bn=function(t,e,i,n,o){var r=this.transform,a=1/(r.m11*r.m22-r.m12*r.m21),s=r.m22*a,l=-r.m12*a,h=-r.m21*a,u=r.m11*a,c=a*(r.m21*r.dy-r.m22*r.dx),f=a*(r.m12*r.dx-r.m11*r.dy);return null!==this.jn?(r=this.W,st(r.left,r.top,r.right,r.bottom,t,e,i,n,o)):(a=t*s+e*h+c,t=t*l+e*u+f,e=i*s+n*h+c,i=i*l+n*u+f,o.m(0,0),n=this.Ia,i=st(0,0,n.width,n.height,a,t,e,i,o),o.transform(r),i)},Vh.Nn=function(){},Vh.tj=function(){return!1},Vh.hc=function(t,e,i,n,o){this.Ii();var r=_h.Ef();if(r.assign(this.nc),this.nc.Ra(),!1===Ko(this)){var a=this.nc;a.x=t,a.y=e,a.width=i,a.height=n}else this.ij(t,e,i,n);this.nc.freeze(),this.lg=void 0===o?null:o,i=!1,void 0!==o?i=!0:null!==this.O&&(o=this.O.Tc,n=this.za,null!==this.jn&&(n=this.nc),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=o.width+.05&&0<=e+.05&&i<=o.height+.05),this instanceof Er&&(t=this.Tc,this.Wv>t.height||this.Oi.ef>t.width))&&(i=!0),this.P=i?256|this.P:-257&this.P,this.nc.H()||_h.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.nc.toString()),this.Kx(r,this.nc),Jo(this,!1),_h.Db(r)},Vh.ij=function(){},Vh.Kx=function(t,e){var i=this.U;null!==i&&null!==i.g&&(i.Du!==this&&i.VF!==this&&i.YF!==this||Sa(i,!0),this.na(),P(t,e)||(i.Ek(),this.ss(i)))},Vh.ss=function(t){null!==this.Qd&&(Sa(t,!0),t instanceof Ba&&ja(t,this))},_h.defineProperty(Mo,{uq:"shadowVisible"},function(){return this.bn},function(t){var e=this.bn;e!==t&&(this.bn=t,this.na(),this.h("shadowVisible",e,t))}),Mo.prototype.se=function(t,e){if(this.visible){var i=this.nc;if(0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)){var n=this.opacity,o=1;if(1!==n){if(0===n)return;o=t.globalAlpha,t.globalAlpha=o*n}if(t instanceof I){t:if(this.visible){var r=null,a=t.Ax;if(this instanceof Zo&&(this.type===Zf||this.type===td))Do(this,t,e);else{var s=this.nc;if(0!==s.width&&0!==s.height&&!isNaN(s.x)&&!isNaN(s.y)){var l=this.transform,h=this.O;0!=(4096&this.P)==!0&&jo(this);var i=0!=(256&this.P),u=!1;if(this instanceof Er&&(t.font=this.font),i){if(u=h.Yg()?h.Ia:h.W,null!==this.lg)var c=this.lg,f=c.x,d=c.y,p=c.width,c=c.height;else f=Math.max(s.x,u.x),d=Math.max(s.y,u.y),p=Math.min(s.right,u.right)-f,c=Math.min(s.bottom,u.bottom)-d;if(f>s.width+s.x||s.x>u.width+u.x||d>s.height+s.y||s.y>u.height+u.y)break t;u=!0,H(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(f,d,p,c),t.clip()}if(this.tj()){var g=this;if(!g.isVisible())break t}t.uh.Tb=[1,0,0,1,0,0],f=!1,this.tj()&&this.Zl&&e.pj("drawShadows")&&(d=this.an,t.lB(d.x*e.scale*e.Ad,d.y*e.scale*e.Ad,g.Bg),t.Zn(),t.shadowColor=g.$m),g=!1,this.U&&e.pj("drawShadows")&&(g=this.U.Zl),!0===this.uq?(t.Zn(),!1===f&&g&&(H(t,1,0,0,1,0,0),t.$a(),f=!0)):!1===this.uq&&t.Yn(),null!==this.$b&&(Fo(this,t,this.$b,!0,!0),!1===f&&g&&(H(t,1,0,0,1,0,0),t.$a(),f=!0),this.$b instanceof mo&&this.$b.type===bf?(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.Jg(this.$b)):t.fillRect(s.x,s.y,s.width,s.height)),this instanceof Zo?H(t,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy):t.uh.Tb=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],null!==this.Eb&&(!1===f&&g&&(H(t,1,0,0,1,0,0),t.$a(),f=!0),p=this.Ia,l=s=0,d=p.width,p=p.height,c=0,this instanceof Tr&&(p=this.hb.cb,s=p.x,l=p.y,d=p.width,p=p.height,c=this.fi),Fo(this,t,this.Eb,!0,!1),this.Eb instanceof mo&&this.Eb.type===bf?(t.beginPath(),t.rect(s-c/2,l-c/2,d+c,p+c),t.Jg(this.Eb)):t.fillRect(s-c/2,l-c/2,d+c,p+c)),g&&(null!==this.Eb||null!==this.$b||null!==h&&0!=(512&h.P)||null!==h&&(h.type===Xf||h.type===$f)&&h.Jd()!==this)?(Ro(this,!0),null===this.uq&&t.Yn()):Ro(this,!1),this.yk(t,e),g&&0!=(512&this.P)==!0&&t.Zn(),this.tj()&&g&&t.Yn(),i&&(t.restore(),u&&t.wf.pop()),this instanceof Zo&&(r=t.wf.pop()),!0===f&&t.wf.pop(),null!==t.EE&&(null===r&&(a===t.Ax?(H(t,1,0,0,1,0,0),r=t.wf.pop()):r=t.Ax),t.EE(this,r))}}}}else{if(this instanceof Zo&&(this.type===Zf||this.type===td))return Do(this,t,e),void(1!==n&&(t.globalAlpha=o));if(this instanceof Ua&&this.ku(!1),r=this.transform,a=this.O,0!=(4096&this.P)==!0&&jo(this),h=0!=(256&this.P),t.Jp&&(h=!1),this instanceof Er&&(t.font=this.font),h){if(u=a.Yg()?a.Ia:a.W,null!==this.lg?(f=this.lg,s=f.x,l=f.y,g=f.width,f=f.height):(s=Math.max(i.x,u.x),l=Math.max(i.y,u.y),g=Math.min(i.right,u.right)-s,f=Math.min(i.bottom,u.bottom)-l),s>i.width+i.x||i.x>u.width+u.x||l>i.height+i.y||i.y>u.height+u.y)return void(1!==n&&(t.globalAlpha=o));t.save(),t.beginPath(),t.rect(s,l,g,f),t.clip()}if(this.tj()){if(!this.isVisible())return void(1!==n&&(t.globalAlpha=o));this.Zl&&e.pj("drawShadows")&&(u=this.an,t.lB(u.x*e.scale*e.Ad,u.y*e.scale*e.Ad,this.Bg),t.Zn(),t.shadowColor=this.$m)}u=!1,this.U&&e.pj("drawShadows")&&(u=this.U.Zl),!0===this.uq?t.Zn():!1===this.uq&&t.Yn(),null!==this.$b&&(Fo(this,t,this.$b,!0,!0),this.$b instanceof mo&&this.$b.type===bf?(t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.Jg(this.$b)):t.fillRect(i.x,i.y,i.width,i.height)),r.bu()||t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),null!==this.Eb&&(g=this.Ia,s=i=0,l=g.width,g=g.height,f=0,this instanceof Tr&&(g=this.hb.cb,i=g.x,s=g.y,l=g.width,g=g.height,f=this.fi),Fo(this,t,this.Eb,!0,!1),this.Eb instanceof mo&&this.Eb.type===bf?(t.beginPath(),t.rect(i-f/2,s-f/2,l+f,g+f),t.Jg(this.Eb)):t.fillRect(i-f/2,s-f/2,l+f,g+f)),u&&(null!==this.Eb||null!==this.$b||null!==a&&0!=(512&a.P)||null!==a&&(a.type===Xf||a.type===$f)&&a.Jd()!==this)?(Ro(this,!0),null===this.uq&&t.Yn()):Ro(this,!1),this.yk(t,e),u&&0!=(512&this.P)==!0&&t.Zn(),this.tj()&&u&&t.Yn(),h?(t.restore(),this instanceof Zo?t.Ee(!0):t.Ee(!1)):r.bu()||(a=1/(r.m11*r.m22-r.m12*r.m21),t.transform(r.m22*a,-r.m12*a,-r.m21*a,r.m11*a,a*(r.m21*r.dy-r.m22*r.dx),a*(r.m12*r.dx-r.m11*r.dy)))}1!==n&&(t.globalAlpha=o)}}},Mo.prototype.yk=function(){},Mo.prototype.isContainedBy=Mo.prototype.Xl=function(t){if(t instanceof Zo)t:{if(this!==t&&null!==t)for(var e=this.O;null!==e;){if(e===t){t=!0;break t}e=e.O}t=!1}else t=!1;return t},Mo.prototype.isVisibleObject=Mo.prototype.xj=function(){if(!this.visible)return!1;var t=this.O;return null===t||t.xj()},Mo.prototype.isEnabledObject=Mo.prototype.$t=function(){for(var t=this instanceof Zo?this:this.O;null!==t&&t.isEnabled;)t=t.O;return null===t},_h.defineProperty(Mo,{FE:"enabledChanged"},function(){return null!==this.ha?this.ha.rr:null},function(t){Po(this);var e=this.ha.rr;e!==t&&(null!==t&&_h.j(t,"function",Mo,"enabledChanged"),this.ha.rr=t,this.h("enabledChanged",e,t))}),Vh=Mo.prototype,Vh.I=function(t){if(void 0===t&&(t=!1),!0!==Uo(this)){_o(this,!0),Jo(this,!0);var e=this.O;null===e||t||e.I()}},Vh.aq=function(){!0!==Uo(this)&&(_o(this,!0),Jo(this,!0))},Vh.Ii=function(){0!=(2048&this.P)==!1&&(Ho(this,!0),Vo(this,!0))},Vh.wA=function(){Vo(this,!0)},Vh.na=function(){var t=this.U;null!==t&&t.na()},_h.defineProperty(Mo,{qq:"segmentOrientation"},function(){return this.Ym},function(t){var e=this.Ym;e!==t&&(this.Ym=t,this.I(),this.h("segmentOrientation",e,t),t===qd&&(this.angle=0))}),_h.defineProperty(Mo,{Me:"segmentIndex"},function(){return this.Rs},function(t){t=Math.round(t);var e=this.Rs;e!==t&&(this.Rs=t,this.I(),this.h("segmentIndex",e,t))}),_h.defineProperty(Mo,{aB:"segmentFraction"},function(){return this.Wm},function(t){isNaN(t)?t=0:0>t?t=0:1<t&&(t=1);var e=this.Wm;e!==t&&(this.Wm=t,this.I(),this.h("segmentFraction",e,t))}),_h.defineProperty(Mo,{bB:"segmentOffset"},function(){return this.Xm},function(t){var e=this.Xm;e.L(t)||(this.Xm=t=t.S(),this.I(),this.h("segmentOffset",e,t))}),_h.defineProperty(Mo,{stretch:"stretch"},function(){return this.Cg},function(t){var e=this.Cg;e!==t&&(this.Cg=t,this.I(),this.h("stretch",e,t))}),_h.defineProperty(Mo,{name:"name"},function(){return this.Qb},function(t){var e=this.Qb;e!==t&&(this.Qb=t,null!==this.U&&(this.U.Nm=null),this.h("name",e,t))}),_h.defineProperty(Mo,{opacity:"opacity"},function(){return this.wc},function(t){var e=this.wc;e!==t&&(_h.j(t,"number",Mo,"opacity"),(0>t||1<t)&&_h.Ea(t,"0 <= value <= 1",Mo,"opacity"),this.wc=t,this.h("opacity",e,t),t=this.g,e=this.U,null!==t&&null!==e&&t.na(da(e,e.W)))}),_h.defineProperty(Mo,{visible:"visible"},function(){return 0!=(1&this.P)},function(t){var e=0!=(1&this.P);e!==t&&(this.P^=1,this.h("visible",e,t),e=this.O,null!==e?e.I():this.tj()&&this.vd(t),this.na(),$o(this))}),_h.defineProperty(Mo,{Tg:"pickable"},function(){return 0!=(2&this.P)},function(t){var e=0!=(2&this.P);e!==t&&(this.P^=2,this.h("pickable",e,t))}),_h.defineProperty(Mo,{TH:"fromLinkableDuplicates"},function(){return 0!=(4&this.P)},function(t){var e=0!=(4&this.P);e!==t&&(this.P^=4,this.h("fromLinkableDuplicates",e,t))}),_h.defineProperty(Mo,{UH:"fromLinkableSelfNode"},function(){return 0!=(8&this.P)},function(t){var e=0!=(8&this.P);e!==t&&(this.P^=8,this.h("fromLinkableSelfNode",e,t))}),_h.defineProperty(Mo,{LJ:"toLinkableDuplicates"},function(){return 0!=(16&this.P)},function(t){var e=0!=(16&this.P);e!==t&&(this.P^=16,this.h("toLinkableDuplicates",e,t))}),_h.defineProperty(Mo,{MJ:"toLinkableSelfNode"},function(){return 0!=(32&this.P)},function(t){var e=0!=(32&this.P);e!==t&&(this.P^=32,this.h("toLinkableSelfNode",e,t))}),_h.defineProperty(Mo,{Vf:"isPanelMain"},function(){return 0!=(64&this.P)},function(t){var e=0!=(64&this.P);e!==t&&(this.P^=64,this.I(),this.h("isPanelMain",e,t))}),_h.defineProperty(Mo,{qx:"isActionable"},function(){return 0!=(128&this.P)},function(t){var e=0!=(128&this.P);e!==t&&(this.P^=128,this.h("isActionable",e,t))}),_h.defineProperty(Mo,{jn:"areaBackground"},function(){return this.$b},function(t){var e=this.$b;e!==t&&(t instanceof mo&&t.freeze(),this.$b=t,this.na(),this.h("areaBackground",e,t))}),_h.defineProperty(Mo,{background:"background"},function(){return this.Eb},function(t){var e=this.Eb;e!==t&&(t instanceof mo&&t.freeze(),this.Eb=t,this.na(),this.h("background",e,t))}),_h.u(Mo,{U:"part"},function(){if(this.tj())return this;if(null!==this.Sm)return this.Sm;var t;for(t=this.O;t;){if(t instanceof sa)return this.Sm=t;t=t.O}return null}),_h.u(Mo,{O:"panel"},function(){return this.lh}),Mo.prototype.dm=function(t){this.lh=t},_h.u(Mo,{layer:"layer"},function(){var t=this.U;return null!==t?t.layer:null},{configurable:!0}),_h.u(Mo,{g:"diagram"},function(){var t=this.U;return null!==t?t.g:null},{configurable:!0}),_h.defineProperty(Mo,{position:"position"},function(){return this.ib},function(t){var e=t.x,i=t.y,n=this.ib,o=n.x,r=n.y;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))?this.iB():(t=t.S(),this.hB(t,n)&&this.h("position",n,t))}),Mo.prototype.iB=function(){},Mo.prototype.hB=function(t){return this.ib=t,Io(this),this.Ii(),!0},Mo.prototype.gy=function(t,e){this.ib.m(t,e),this.Ii()},_h.u(Mo,{W:"actualBounds"},function(){return this.nc}),_h.defineProperty(Mo,{scale:"scale"},function(){return this.tb},function(t){var e=this.tb;e!==t&&(0>=t&&_h.k("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.tb=t,this.Ii(),this.I(),this.h("scale",e,t))}),_h.defineProperty(Mo,{angle:"angle"},function(){return this.ig},function(t){var e=this.ig;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.ig=t,this.I(),this.Ii(),this.h("angle",e,t)))}),_h.defineProperty(Mo,{Ba:"desiredSize"},function(){return this.Re},function(t){var e=t.width,i=t.height,n=this.Re,o=n.width,r=n.height;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))||(this.Re=t=t.S(),this.I(),this instanceof Tr&&this.Ke(),this.h("desiredSize",n,t),qo(this)&&null!==(t=this.U)&&(Lo(this,t,"width"),Lo(this,t,"height")))}),_h.defineProperty(Mo,{width:"width"},function(){return this.Re.width},function(t){var e=this.Re.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Re,this.Re=t=new k(t,this.Re.height).freeze(),this.I(),this instanceof Tr&&this.Ke(),this.h("desiredSize",e,t),qo(this)&&null!==(t=this.U)&&Lo(this,t,"width"))}),_h.defineProperty(Mo,{height:"height"},function(){return this.Re.height},function(t){var e=this.Re.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Re,this.Re=t=new k(this.Re.width,t).freeze(),this.I(),this instanceof Tr&&this.Ke(),this.h("desiredSize",e,t),qo(this)&&null!==(t=this.U)&&Lo(this,t,"height"))}),_h.defineProperty(Mo,{zh:"minSize"},function(){return this.Vh},function(t){var e=this.Vh;e.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Vh=t,this.I(),this.h("minSize",e,t))}),_h.defineProperty(Mo,{Bf:"maxSize"},function(){return this.Uh},function(t){var e=this.Uh;e.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=Infinity),isNaN(t.height)&&(t.height=Infinity),t.freeze(),this.Uh=t,this.I(),this.h("maxSize",e,t))}),_h.u(Mo,{za:"measuredBounds"},function(){return this.qd}),_h.u(Mo,{Ia:"naturalBounds"},function(){return this.Tc},{configurable:!0}),_h.defineProperty(Mo,{margin:"margin"},function(){return this.Lm},function(t){"number"==typeof t&&(t=new A(t));var e=this.Lm;e.L(t)||(this.Lm=t=t.S(),this.I(),this.h("margin",e,t))}),_h.u(Mo,{transform:null},function(){return 0!=(2048&this.P)==!0&&jo(this),this.dd}),_h.u(Mo,{ph:null},function(){return 0!=(4096&this.P)==!0&&jo(this),this.om}),_h.defineProperty(Mo,{alignment:"alignment"},function(){return this.ge},function(t){var e=this.ge;e.L(t)||(t.Od()&&!t.Vc()&&_h.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.ge=t=t.S(),Io(this),this.h("alignment",e,t))}),_h.defineProperty(Mo,{column:"column"},function(){return this.Tq},function(t){t=Math.round(t);var e=this.Tq;e!==t&&(0>t&&_h.Ea(t,">= 0",Mo,"column"),this.Tq=t,this.I(),this.h("column",e,t))}),_h.defineProperty(Mo,{tH:"columnSpan"},function(){return this.xi},function(t){t=Math.round(t);var e=this.xi;e!==t&&(1>t&&_h.Ea(t,">= 1",Mo,"columnSpan"),this.xi=t,this.I(),this.h("columnSpan",e,t))}),_h.defineProperty(Mo,{Zb:"row"},function(){return this.Ns},function(t){t=Math.round(t);var e=this.Ns;e!==t&&(0>t&&_h.Ea(t,">= 0",Mo,"row"),this.Ns=t,this.I(),this.h("row",e,t))}),_h.defineProperty(Mo,{rowSpan:"rowSpan"},function(){return this.aj},function(t){t=Math.round(t);var e=this.aj;e!==t&&(1>t&&_h.Ea(t,">= 1",Mo,"rowSpan"),this.aj=t,this.I(),this.h("rowSpan",e,t))}),_h.defineProperty(Mo,{hy:"spanAllocation"},function(){return this.ct},function(t){var e=this.ct;e!==t&&(null!==t&&_h.j(t,"function",Mo,"spanAllocation"),this.ct=t,this.I(),this.h("spanAllocation",e,t))}),_h.defineProperty(Mo,{oh:"alignmentFocus"},function(){return this.nm},function(t){var e=this.nm;e.L(t)||(!t.Od()||t.Vc()||t.L(tu)&&this instanceof Ba||_h.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+t),this.nm=t=t.S(),this.I(),this.h("alignmentFocus",e,t))}),_h.defineProperty(Mo,{Qd:"portId"},function(){return this.As},function(t){var e=this.As;if(e!==t){var i=this.U;if(null===i||i instanceof Ba||(_h.k("Cannot set portID on a Link: "+t),i=null),null!==e&&null!==i&&Ra(i,this),this.As=t,null!==t&&i){i.Dk=!0,null===i.le&&Ga(i);var n=this.Qd;null!==n&&i.le.add(n,this)}this.h("portId",e,t)}}),_h.defineProperty(Mo,{Bb:"toSpot"},function(){return null!==this.V?this.V.pk:tu},function(t){this.Ld();var e=this.V.pk;e.L(t)||(t=t.S(),this.V.pk=t,this.h("toSpot",e,t),Yo(this))}),_h.defineProperty(Mo,{jm:"toEndSegmentLength"},function(){return null!==this.V?this.V.nk:10},function(t){this.Ld();var e=this.V.nk;e!==t&&(0>t&&_h.Ea(t,">= 0",Mo,"toEndSegmentLength"),this.V.nk=t,this.h("toEndSegmentLength",e,t),Yo(this))}),_h.defineProperty(Mo,{Ku:"toEndSegmentDirection"},function(){return null!==this.V?this.V.mk:Id},function(t){this.Ld();var e=this.V.mk;e!==t&&(_h.Ft("GraphObject.toEndSegmentDirection","2.0"),this.V.mk=t,this.h("toEndSegmentDirection",e,t),Yo(this))}),_h.defineProperty(Mo,{Lu:"toShortLength"},function(){return null!==this.V?this.V.ok:0},function(t){this.Ld();var e=this.V.ok;e!==t&&(this.V.ok=t,this.h("toShortLength",e,t),Yo(this))}),_h.defineProperty(Mo,{pG:"toLinkable"},function(){return null!==this.V?this.V.kt:null},function(t){this.Ld();var e=this.V.kt;e!==t&&(this.V.kt=t,this.h("toLinkable",e,t))}),_h.defineProperty(Mo,{NJ:"toMaxLinks"},function(){return null!==this.V?this.V.lt:Infinity},function(t){this.Ld();var e=this.V.lt;e!==t&&(0>t&&_h.Ea(t,">= 0",Mo,"toMaxLinks"),this.V.lt=t,this.h("toMaxLinks",e,t))}),_h.defineProperty(Mo,{Ab:"fromSpot"},function(){return null!==this.V?this.V.Sj:tu},function(t){this.Ld();var e=this.V.Sj;e.L(t)||(t=t.S(),this.V.Sj=t,this.h("fromSpot",e,t),Yo(this))}),_h.defineProperty(Mo,{Sl:"fromEndSegmentLength"},function(){return null!==this.V?this.V.Qj:10},function(t){this.Ld();var e=this.V.Qj;e!==t&&(0>t&&_h.Ea(t,">= 0",Mo,"fromEndSegmentLength"),this.V.Qj=t,this.h("fromEndSegmentLength",e,t),Yo(this))}),_h.defineProperty(Mo,{Rt:"fromEndSegmentDirection"},function(){return null!==this.V?this.V.Pj:Id},function(t){this.Ld();var e=this.V.Pj;e!==t&&(_h.Ft("GraphObject.fromEndSegmentDirection","2.0"),this.V.Pj=t,this.h("fromEndSegmentDirection",e,t),Yo(this))}),_h.defineProperty(Mo,{St:"fromShortLength"},function(){return null!==this.V?this.V.Rj:0},function(t){this.Ld();var e=this.V.Rj;e!==t&&(this.V.Rj=t,this.h("fromShortLength",e,t),Yo(this))}),_h.defineProperty(Mo,{PE:"fromLinkable"},function(){return null!==this.V?this.V.ur:null},function(t){this.Ld();var e=this.V.ur;e!==t&&(this.V.ur=t,this.h("fromLinkable",e,t))}),_h.defineProperty(Mo,{lA:"fromMaxLinks"},function(){return null!==this.V?this.V.vr:Infinity},function(t){this.Ld();var e=this.V.vr;e!==t&&(0>t&&_h.Ea(t,">= 0",Mo,"fromMaxLinks"),this.V.vr=t,this.h("fromMaxLinks",e,t))}),_h.defineProperty(Mo,{cursor:"cursor"},function(){return this.br},function(t){var e=this.br;e!==t&&(_h.j(t,"string",Mo,"cursor"),this.br=t,this.h("cursor",e,t))}),_h.defineProperty(Mo,{click:"click"},function(){return null!==this.ha?this.ha.wi:null},function(t){Po(this);var e=this.ha.wi;e!==t&&(null!==t&&_h.j(t,"function",Mo,"click"),this.ha.wi=t,this.h("click",e,t))}),_h.defineProperty(Mo,{Gt:"doubleClick"},function(){return null!==this.ha?this.ha.Ei:null},function(t){Po(this);var e=this.ha.Ei;e!==t&&(null!==t&&_h.j(t,"function",Mo,"doubleClick"),this.ha.Ei=t,this.h("doubleClick",e,t))}),_h.defineProperty(Mo,{Wz:"contextClick"},function(){return null!==this.ha?this.ha.yi:null},function(t){Po(this);var e=this.ha.yi;e!==t&&(null!==t&&_h.j(t,"function",Mo,"contextClick"),this.ha.yi=t,this.h("contextClick",e,t))}),_h.defineProperty(Mo,{mu:"mouseEnter"},function(){return null!==this.ha?this.ha.ks:null},function(t){Po(this);var e=this.ha.ks;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseEnter"),this.ha.ks=t,this.h("mouseEnter",e,t))}),_h.defineProperty(Mo,{nu:"mouseLeave"},function(){return null!==this.ha?this.ha.ls:null},function(t){Po(this);var e=this.ha.ls;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseLeave"),this.ha.ls=t,this.h("mouseLeave",e,t))}),_h.defineProperty(Mo,{NA:"mouseOver"},function(){return null!==this.ha?this.ha.Vi:null},function(t){Po(this);var e=this.ha.Vi;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseOver"),this.ha.Vi=t,this.h("mouseOver",e,t))}),_h.defineProperty(Mo,{MA:"mouseHover"},function(){return null!==this.ha?this.ha.Ui:null},function(t){Po(this);var e=this.ha.Ui;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseHover"),this.ha.Ui=t,this.h("mouseHover",e,t))}),_h.defineProperty(Mo,{LA:"mouseHold"},function(){return null!==this.ha?this.ha.Ti:null},function(t){Po(this);var e=this.ha.Ti;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseHold"),this.ha.Ti=t,this.h("mouseHold",e,t))}),_h.defineProperty(Mo,{WI:"mouseDragEnter"},function(){return null!==this.ha?this.ha.hs:null},function(t){Po(this);var e=this.ha.hs;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseDragEnter"),this.ha.hs=t,this.h("mouseDragEnter",e,t))}),_h.defineProperty(Mo,{XI:"mouseDragLeave"},function(){return null!==this.ha?this.ha.js:null},function(t){Po(this);var e=this.ha.js;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseDragLeave"),this.ha.js=t,this.h("mouseDragLeave",e,t))}),_h.defineProperty(Mo,{KA:"mouseDrop"},function(){return null!==this.ha?this.ha.Si:null},function(t){Po(this);var e=this.ha.Si;e!==t&&(null!==t&&_h.j(t,"function",Mo,"mouseDrop"),this.ha.Si=t,this.h("mouseDrop",e,t))}),_h.defineProperty(Mo,{bE:"actionDown"},function(){return null!==this.ha?this.ha.Bq:null},function(t){Po(this);var e=this.ha.Bq;e!==t&&(null!==t&&_h.j(t,"function",Mo,"actionDown"),this.ha.Bq=t,this.h("actionDown",e,t))}),_h.defineProperty(Mo,{cE:"actionMove"},function(){return null!==this.ha?this.ha.Cq:null},function(t){Po(this);var e=this.ha.Cq;e!==t&&(null!==t&&_h.j(t,"function",Mo,"actionMove"),this.ha.Cq=t,this.h("actionMove",e,t))}),_h.defineProperty(Mo,{dE:"actionUp"},function(){return null!==this.ha?this.ha.Dq:null},function(t){Po(this);var e=this.ha.Dq;e!==t&&(null!==t&&_h.j(t,"function",Mo,"actionUp"),this.ha.Dq=t,this.h("actionUp",e,t))}),_h.defineProperty(Mo,{aE:"actionCancel"},function(){return null!==this.ha?this.ha.Aq:null},function(t){Po(this);var e=this.ha.Aq;e!==t&&(null!==t&&_h.j(t,"function",Mo,"actionCancel"),this.ha.Aq=t,this.h("actionCancel",e,t))}),_h.defineProperty(Mo,{rB:"toolTip"},function(){return null!==this.ha?this.ha.dj:null},function(t){Po(this);var e=this.ha.dj;e!==t&&(this.ha.dj=t,this.h("toolTip",e,t))}),_h.defineProperty(Mo,{contextMenu:"contextMenu"},function(){return null!==this.ha?this.ha.zi:null},function(t){Po(this);var e=this.ha.zi;e!==t&&(this.ha.zi=t,this.h("contextMenu",e,t))}),Mo.prototype.bind=Mo.prototype.bind=function(t){t.Dg=this;var e=this.Ql();null!==e&&mr(e)&&_h.k("Cannot add a Binding to a template that has already been copied: "+t),null===this.tc&&(this.tc=new u(ie)),this.tc.add(t)},Mo.prototype.findTemplateBinder=Mo.prototype.Ql=function(){for(var t=this instanceof Zo?this:this.O;null!==t;){if(null!==t.Yk)return t;t=t.O}return null},Mo.prototype.setProperties=function(t){_h.Eu(this,t)};var Vf;Mo.make=Vf=function(t){var e=arguments,i=null,n=null;if("function"==typeof t)n=t;else if("string"==typeof t){var o=Uf.ja(t);"function"==typeof o?(e=_h.Il(arguments),i=o(e),_h.Qa(i)||_h.k('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):n=Uh[t]}if(null===i&&(void 0!==n&&null!==n&&n.constructor||_h.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new n),o=1,i instanceof Ii&&1<e.length){var r=i,n=e[1];("string"==typeof n||n instanceof HTMLDivElement)&&(lo(r,n),o++)}for(;o<e.length;o++)n=e[o],void 0===n?_h.k("Undefined value at argument "+o+" for object being constructed by GraphObject.make: "+i):Xo(i,n);return i};var Uf=new v("string","function");Mo.getBuilders=function(){var t,e=new v("string","function");for(t in Uf)if(t!==t.toLowerCase()){var i=Uf.ja(t);"function"==typeof i&&e.add(t,i)}return e.freeze(),e};var _f;Mo.defineBuilder=_f=function(t,e){_h.j(t,"string",Mo,"defineBuilder:name"),_h.j(e,"function",Mo,"defineBuilder:func");var i=t.toLowerCase();""!==t&&"none"!==i&&t!==i||_h.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Uf.add(t,e)};var Kf;Mo.takeBuilderArgument=Kf=function(t,e,i){void 0===i&&(i=null);var n=t[1];if("function"==typeof i?i(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===e)throw Error("no "+("function"==typeof i?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e},_f("Button",function(){var t=new mo(vf);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var e=new mo(vf);return e.addColorStop(0,"white"),e.addColorStop(1,"dodgerblue"),t=Vf(Zo,Xf,{qx:!0,FE:function(t,e){var i=t.ud("ButtonBorder");null!==i&&(i.fill=e?t._buttonFillNormal:t._buttonFillDisabled)},_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:e,_buttonStrokeOver:"blue",_buttonFillDisabled:"darkgray"},Vf(Tr,{name:"ButtonBorder",Cb:"Rectangle",A:new D(0,0,2.761423749153968,2.761423749153968),B:new D(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"})),t.mu=function(t,e){if(e.$t()){var i=e.ud("ButtonBorder");if(i instanceof Tr){var n=e._buttonFillOver;e._buttonFillNormal=i.fill,i.fill=n,n=e._buttonStrokeOver,e._buttonStrokeNormal=i.stroke,i.stroke=n}}},t.nu=function(t,e){if(e.$t()){var i=e.ud("ButtonBorder");i instanceof Tr&&(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal)}},t}),_f("TreeExpanderButton",function(){var t=Vf("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Vf(Tr,{name:"ButtonIcon",Cb:"MinusLine",Ba:Vu},new ie("figure","isTreeExpanded",function(t,e){var i=e.O;return t?i._treeExpandedFigure:i._treeCollapsedFigure}).Jx()),{visible:!1},new ie("visible","isTreeLeaf",function(t){return!t}).Jx());return t.click=function(t,e){var i=e.U;if(i instanceof Aa&&(i=i.Of),i instanceof Ba){var n=i.g;if(null!==n){if(n=n.ob,i.gd){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;t.Ac=!0,i.gd?n.collapseTree(i):n.expandTree(i)}}},t}),_f("SubGraphExpanderButton",function(){var t=Vf("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Vf(Tr,{name:"ButtonIcon",Cb:"MinusLine",Ba:Vu},new ie("figure","isSubGraphExpanded",function(t,e){var i=e.O;return t?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).Jx()));return t.click=function(t,e){var i=e.U;if(i instanceof Aa&&(i=i.Of),i instanceof Cs){var n=i.g;if(null!==n){if(n=n.ob,i.we){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;t.Ac=!0,i.we?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),
_f("ContextMenuButton",function(){var t=Vf("Button");t.stretch=Of;var e=t.ud("ButtonBorder");return e instanceof Tr&&(e.Cb="Rectangle",e.A=new D(0,0,2,3),e.B=new D(1,1,-2,-2)),t}),_f("PanelExpanderButton",function(t){var e=Kf(t,"COLLAPSIBLE"),i=Vf("Button",{_buttonExpandedFigure:"TriangleUp",_buttonCollapsedFigure:"TriangleDown"},Vf(Tr,"TriangleUp",{name:"ButtonIcon",Ba:new k(6,4)},new ie("figure","visible",function(t){return t?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Jx(e)));return t=i.ud("ButtonBorder"),t instanceof Tr&&(t.stroke=null,t.fill="transparent"),i.click=function(t,i){var n=i.g;if(null!==n&&!n.eb){var o=i.Ql();null===o&&(o=i.U),null!==o&&null!==(o=o.ud(e))&&(n.Ub("Collapse/Expand Panel"),o.visible=!o.visible,n.Gd("Collapse/Expand Panel"))}},i}),_f("CheckBoxButton",function(t){var e=Kf(t);return t=Vf("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},Vf(Tr,{name:"ButtonIcon",VH:"M0 4 L3 9 9 0",kb:2,stretch:zf,mA:Gf,visible:!1},""!==e?new ie("visible",e).KI():[])),t.click=function(t,i){var n=t.g;if(!(null===n||n.eb||""!==e&&n.ba.eb)){t.Ac=!0;var o=i.ud("ButtonIcon");n.Ub("checkbox"),o.visible=!o.visible,"function"==typeof i._doClick&&i._doClick(t,i),n.Gd("checkbox")}},t}),_f("CheckBox",function(t){t=Kf(t),t=Vf("CheckBoxButton",t,{name:"Button",margin:new A(0,1,0,0)});var e=Vf(Zo,"Horizontal",t,{qx:!0,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillDisabled:t._buttonFillDisabled,mu:t.mu,nu:t.nu,click:t.click,_buttonClick:t.click});return t.mu=null,t.nu=null,t.click=null,e}),Qo.prototype.copy=function(){var t=new Qo;return t.wi=this.wi,t.Ei=this.Ei,t.yi=this.yi,t.ks=this.ks,t.ls=this.ls,t.Vi=this.Vi,t.Ui=this.Ui,t.Ti=this.Ti,t.hs=this.hs,t.js=this.js,t.Si=this.Si,t.Bq=this.Bq,t.Cq=this.Cq,t.Dq=this.Dq,t.Aq=this.Aq,t.dj=this.dj,t.zi=this.zi,t.rr=this.rr,t},_h.La(Zo,Mo),_h.ji(Zo),_h.fa("Panel",Zo),Zo.prototype.cloneProtected=function(t){if(Mo.prototype.cloneProtected.call(this,t),t.ma=this.ma,t.ff=this.ff.S(),t.fr=this.fr.S(),t.Ci=this.Ci,t.ma===Qf){t.Mj=this.Mj.S(),t.Mh=this.Mh,t.Bi=this.Bi,t.um=this.um,t.Lh=this.Lh,t.Kh=this.Kh,t.tm=this.tm;var e=[];if(0<this.Yd.length)for(var i=this.Yd,n=i.length,o=0;o<n;o++)if(void 0!==i[o]){var r=i[o].copy();r.dm(t),e[o]=r}if(t.Yd=e,e=[],0<this.Td.length)for(i=this.Td,n=i.length,o=0;o<n;o++)void 0!==i[o]&&(r=i[o].copy(),r.dm(t),e[o]=r);t.Td=e,t.Vm=this.Vm,t.sm=this.sm,t.ej=this.ej,t.Ni=this.Ni}t.Dp=this.Dp,t.Dr=this.Dr.S(),t.Er=this.Er.S(),t.Ar=this.Ar,t.zr=this.zr,t.Cr=this.Cr,t.Br=this.Br,t.zm=this.zm,t.Tj=this.Tj,t.Vd=this.Vd,t.Yk=this.Yk,t.Qr=this.Qr,t.$j=this.$j,t.ug=this.ug,t.Vo=this.Vo,t.fj.assign(this.fj),t.Ij=this.Ij,null!==this.Os&&(t.Os=this.Os)},Zo.prototype.ki=function(t){Mo.prototype.ki.call(this,t),t.xa=this.xa;for(var e=t.xa.n,i=e.length,n=0;n<i;n++)e[n].lh=t;t.dn=null},Zo.prototype.copy=function(){var t=Mo.prototype.copy.call(this);if(null!==t){for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n].copy(),r=t;o.dm(r),o.Sm=null;var a=r.xa,s=a.count;if(a.Md(s,o),null!==(a=r.U)){a.Nm=null,null!==o.Qd&&a instanceof Ba&&(a.Dk=!0);var l=r.g;null!==l&&l.oa.gb||a.Xc(yc,"elements",r,null,o,null,s)}}return t}return null},Zo.prototype.gc=function(t){t.De===Zo?this.type=t:Mo.prototype.gc.call(this,t)},Zo.prototype.toString=function(){return"Panel("+this.type+")#"+_h.Kd(this)};var Jf;Zo.Position=Jf=_h.p(Zo,"Position",0),Zo.Horizontal=_h.p(Zo,"Horizontal",1);var Yf;Zo.Vertical=Yf=_h.p(Zo,"Vertical",2);var $f;Zo.Spot=$f=_h.p(Zo,"Spot",3);var Xf;Zo.Auto=Xf=_h.p(Zo,"Auto",4);var Qf;Zo.Table=Qf=_h.p(Zo,"Table",5),Zo.Viewbox=_h.p(Zo,"Viewbox",6);var Zf;Zo.TableRow=Zf=_h.p(Zo,"TableRow",7);var td;Zo.TableColumn=td=_h.p(Zo,"TableColumn",8);var ed;Zo.Link=ed=_h.p(Zo,"Link",9);var id;Zo.Grid=id=_h.p(Zo,"Grid",10);var nd;Zo.Graduated=nd=_h.p(Zo,"Graduated",11),_h.defineProperty(Zo,{type:"type"},function(){return this.ma},function(t){var e=this.ma;e!==t&&(e!==Zf&&e!==td||_h.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.ma=t,this.ma===id?this.Gn=!0:this.ma===Qf&&tr(this),this.I(),this.h("type",e,t))}),_h.u(Zo,{elements:"elements"},function(){return this.xa.i}),_h.u(Zo,{Ia:"naturalBounds"},function(){return this.Tc}),_h.defineProperty(Zo,{padding:"padding"},function(){return this.ff},function(t){"number"==typeof t?(0>t&&_h.Ea(t,">= 0",Zo,"padding"),t=new A(t)):(_h.G(t,A,Zo,"padding"),0>t.left&&_h.Ea(t.left,">= 0",Zo,"padding:value.left"),0>t.right&&_h.Ea(t.right,">= 0",Zo,"padding:value.right"),0>t.top&&_h.Ea(t.top,">= 0",Zo,"padding:value.top"),0>t.bottom&&_h.Ea(t.bottom,">= 0",Zo,"padding:value.bottom"));var e=this.ff;e.L(t)||(this.ff=t=t.S(),this.I(),this.h("padding",e,t))}),_h.defineProperty(Zo,{Ml:"defaultAlignment"},function(){return this.fr},function(t){var e=this.fr;e.L(t)||(this.fr=t=t.S(),this.I(),this.h("defaultAlignment",e,t))}),_h.defineProperty(Zo,{Zd:"defaultStretch"},function(){return this.Ci},function(t){var e=this.Ci;e!==t&&(_h.mb(t,Mo,Zo,"defaultStretch"),this.Ci=t,this.I(),this.h("defaultStretch",e,t))}),_h.defineProperty(Zo,{LK:"defaultSeparatorPadding"},function(){return void 0===this.Mj?Ou:this.Mj},function(t){if(void 0!==this.Mj){"number"==typeof t&&(t=new A(t));var e=this.Mj;e.L(t)||(this.Mj=t=t.S(),this.I(),this.h("defaultSeparatorPadding",e,t))}}),_h.defineProperty(Zo,{JK:"defaultRowSeparatorStroke"},function(){return void 0===this.Bi?null:this.Bi},function(t){var e=this.Bi;e!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Bi=t,this.na(),this.h("defaultRowSeparatorStroke",e,t))}),_h.defineProperty(Zo,{KK:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Mh?1:this.Mh},function(t){if(void 0!==this.Mh){var e=this.Mh;e!==t&&isFinite(t)&&0<=t&&(this.Mh=t,this.I(),this.h("defaultRowSeparatorStrokeWidth",e,t))}}),_h.defineProperty(Zo,{IK:"defaultRowSeparatorDashArray"},function(){return void 0===this.um?null:this.um},function(t){if(void 0!==this.um){var e=this.um;if(e!==t){if(null===t||Array.isArray(t)||_h.yd(t,"Array",Zo,"defaultRowSeparatorDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||_h.k("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}this.um=t,this.na(),this.h("defaultRowSeparatorDashArray",e,t)}}}),_h.defineProperty(Zo,{DK:"defaultColumnSeparatorStroke"},function(){return void 0===this.Kh?null:this.Kh},function(t){if(void 0!==this.Kh){var e=this.Kh;e!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Kh=t,this.na(),this.h("defaultColumnSeparatorStroke",e,t))}}),_h.defineProperty(Zo,{EK:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Lh?1:this.Lh},function(t){if(void 0!==this.Lh){var e=this.Lh;e!==t&&isFinite(t)&&0<=t&&(this.Lh=t,this.I(),this.h("defaultColumnSeparatorStrokeWidth",e,t))}}),_h.defineProperty(Zo,{CK:"defaultColumnSeparatorDashArray"},function(){return void 0===this.tm?null:this.tm},function(t){if(void 0!==this.tm){var e=this.tm;if(e!==t){if(null===t||Array.isArray(t)||_h.yd(t,"Array",Zo,"defaultColumnSeparatorDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||_h.k("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}this.tm=t,this.na(),this.h("defaultColumnSeparatorDashArray",e,t)}}}),_h.defineProperty(Zo,{VL:"viewboxStretch"},function(){return this.Dp},function(t){var e=this.Dp;e!==t&&(_h.mb(t,Mo,Zo,"viewboxStretch"),this.Dp=t,this.I(),this.h("viewboxStretch",e,t))}),_h.defineProperty(Zo,{ox:"gridCellSize"},function(){return this.Dr},function(t){var e=this.Dr;if(!e.L(t)){_h.G(t,k,Zo,"gridCellSize"),t.H()&&0!==t.width&&0!==t.height||_h.k("Invalid Panel.gridCellSize: "+t),this.Dr=t.S();var i=this.g;null!==i&&this===i.Dn&&wn(i),this.na(),this.h("gridCellSize",e,t)}}),_h.defineProperty(Zo,{YE:"gridOrigin"},function(){return this.Er},function(t){var e=this.Er;if(!e.L(t)){_h.G(t,b,Zo,"gridOrigin"),t.H()||_h.k("Invalid Panel.gridOrigin: "+t),this.Er=t.S();var i=this.g;null!==i&&this===i.Dn&&wn(i),this.na(),this.h("gridOrigin",e,t)}}),_h.defineProperty(Zo,{Ck:"graduatedMin"},function(){return this.Ar},function(t){_h.Fd(t,Zo,"graduatedMin");var e=this.Ar;e!==t&&(this.Ar=t,this.I(),this.h("graduatedMin",e,t),qo(this)&&null!==(t=this.U)&&Lo(this,t,"graduatedRange"))}),_h.defineProperty(Zo,{pA:"graduatedMax"},function(){return this.zr},function(t){_h.Fd(t,Zo,"graduatedMax");var e=this.zr;e!==t&&(this.zr=t,this.I(),this.h("graduatedMax",e,t),qo(this)&&null!==(t=this.U)&&Lo(this,t,"graduatedRange"))}),_h.u(Zo,{nx:"graduatedRange"},function(){return this.pA-this.Ck}),_h.defineProperty(Zo,{qA:"graduatedTickUnit"},function(){return this.Cr},function(t){_h.Fd(t,Zo,"graduatedTickUnit");var e=this.Cr;e!==t&&0<t&&(this.Cr=t,this.I(),this.h("graduatedTickUnit",e,t))}),_h.defineProperty(Zo,{XE:"graduatedTickBase"},function(){return this.Br},function(t){_h.Fd(t,Zo,"graduatedTickBase");var e=this.Br;e!==t&&(this.Br=t,this.I(),this.h("graduatedTickBase",e,t))}),Vh=Zo.prototype,Vh.ss=function(t){Mo.prototype.ss.call(this,t);for(var e=this.xa.n,i=e.length,n=0;n<i;n++)e[n].ss(t)},Vh.yk=function(t,e){if(this.ma===id){var i=this.oj()*e.scale;0>=i&&(i=1);var n=this.ox,o=n.width,n=n.height,r=this.Ia,a=r.width,r=r.height,s=Math.ceil(a/o),l=Math.ceil(r/n),h=this.YE;t.save(),t.beginPath(),t.rect(0,0,a,r),t.clip();for(var u=[],c=this.xa.n,f=c.length,d=0;d<f;d++){var p=c[d],g=[];if(u.push(g),p.visible)for(var p=rr(p.Cb),y=d+1;y<f;y++){var m=c[y];m.visible&&rr(m.Cb)===p&&2<=(m=m.interval)&&g.push(m)}}for(c=this.xa.n,f=c.length,d=0;d<f;d++){var v=c[d];if(v.visible&&(g=v.interval,!(2>o*g*i))){var p=u[d],y=!1,b=!0,x=v.mG;if(null!==x&&(y=!0,b=t.fA(x,v.sf)),"LineV"===v.Cb){t.lineWidth=v.kb,Fo(this,t,v.stroke,!1,!1),t.beginPath();for(var w=m=Math.floor(-h.x/o);w<=m+s;w++){var k=w*o+h.x;0<=k&&k<a&&or(w,g,p)&&(y&&!b?To(t,k,0,k,r,x,v.sf):(t.moveTo(k,0),t.lineTo(k,r)))}t.stroke()}else if("LineH"===v.Cb){for(t.lineWidth=v.kb,Fo(this,t,v.stroke,!1,!1),t.beginPath(),w=m=Math.floor(-h.y/n);w<=m+l;w++)0<=(k=w*n+h.y)&&k<=r&&or(w,g,p)&&(y&&!b?To(t,0,k,a,k,x,v.sf):(t.moveTo(0,k),t.lineTo(a,k)));t.stroke()}else if("BarV"===v.Cb)for(Fo(this,t,v.fill,!0,!1),v=v.width,isNaN(v)&&(v=o),w=m=Math.floor(-h.x/o);w<=m+s;w++)0<=(k=w*o+h.x)&&k<a&&or(w,g,p)&&t.fillRect(k,0,v,r);else if("BarH"===v.Cb)for(Fo(this,t,v.fill,!0,!1),v=v.height,isNaN(v)&&(v=n),w=m=Math.floor(-h.y/n);w<=m+l;w++)0<=(k=w*n+h.y)&&k<=r&&or(w,g,p)&&t.fillRect(0,k,a,v);y&&t.cA()}}t.restore(),t.Ee(!1)}else if(this.ma===nd){for(o=this.Ia,i=o.width,o=o.height,t.save(),t.beginPath(),t.rect(-1,-1,i+1,o+1),t.clip(),i=this.Jd(),i.se(t,e),o=this.oj()*e.scale,0>=o&&(o=1),n=i.W,a=this.xa.n,r=this.zm,s=a.length,l=0;l<s;l++)if(f=a[l],h=r[l],u=h.length,f.visible&&f!==i&&0!==h.length)if(f instanceof Tr){if(!(2>this.qA*f.interval*o))for(d=f.za,g=f.kb*f.scale,p=f.oh,p.Od()&&(p=nu),c=0;c<u;c++){var y=f,m=h[c][0],w=n,v=h[c][1],b=d,x=g,k=p,S=y.dd;S.reset(),S.translate(m.x+w.x,m.y+w.y),S.rotate(v+y.angle,0,0),S.translate(-b.width*k.x+k.offsetX+x/2,-b.height*k.y+k.offsetY+x/2),S.scale(y.scale,y.scale),Ho(y,!1),y.om.set(y.dd),y.Do=y.scale,Vo(y,!1),f.se(t,e),f.dd.reset()}}else if(f instanceof Er)for(null===this.lk&&(this.lk=new Er),d=this.lk,er(f,d),c=0;c<u;c++)m=h[c],3<m.length&&(p=m[6],d.Ed=m[2],d.ig=m[3],d.je=m[4],d.Oi=m[5],d.Tc=m[8],d.hc(p.x,p.y,p.width,p.height),f=d,g=n,y=m[7],m=m[8],w=f.dd,w.reset(),w.translate(p.x+g.x,p.y+g.y),w.translate(-y.x,-y.y),Eo(f,w,m.x,m.y,m.width,m.height),Ho(f,!1),f.om.set(f.dd),f.Do=f.scale,Vo(f,!1),d.se(t,e));t.restore(),t.Ee(!0)}else{for(this.ma===Qf&&(t.lineCap="butt",nr(this,t,!0,this.Yd,!0),nr(this,t,!1,this.Td,!0),ir(this,t,!0,this.Yd),ir(this,t,!1,this.Td),nr(this,t,!0,this.Yd,!1),nr(this,t,!1,this.Td,!1)),(i=this.Yt)&&t.save(),o=this.Jd(),n=this.xa.n,a=n.length,r=0;r<a;r++)s=n[r],i&&s===o&&(t.Jp=!0),s.se(t,e),i&&s===o&&(t.Jp=!1);i&&(t.restore(),t.Ee(!0))}},Vh.Bn=function(t,e,i,n,o){var r=this.Yg(),a=this.transform,s=1/(a.m11*a.m22-a.m12*a.m21),l=a.m22*s,h=-a.m12*s,u=-a.m21*s,c=a.m11*s,f=s*(a.m21*a.dy-a.m22*a.dx),d=s*(a.m12*a.dx-a.m11*a.dy);if(null!==this.jn)return a=this.W,st(a.left,a.top,a.right,a.bottom,t,e,i,n,o);if(null!==this.background)r=t*l+e*u+f,s=t*h+e*c+d,t=i*l+n*u+f,l=i*h+n*c+d,o.m(0,0),i=this.Ia,i=st(0,0,i.width,i.height,r,s,t,l,o),o.transform(a);else{r||(l=1,u=h=0,c=1,d=f=0),s=t*l+e*u+f,t=t*h+e*c+d,l=i*l+n*u+f,n=i*h+n*c+d,o.m(l,n),h=(l-s)*(l-s)+(n-t)*(n-t),i=!1,c=this.xa.n,d=c.length,u=_h.K(),f=null,e=Infinity;var p=null;this.Yt&&(p=_h.K(),f=this.Jd(),(i=f.Bn(s,t,l,n,p))&&(e=(s-p.x)*(s-p.x)+(t-p.y)*(t-p.y)));for(var g=0;g<d;g++){var y=c[g];y.visible&&y!==f&&y.Bn(s,t,l,n,u)&&(i=!0,(y=(s-u.x)*(s-u.x)+(t-u.y)*(t-u.y))<h&&(h=y,o.set(u)))}this.Yt&&(e>h&&o.set(p),_h.v(p)),_h.v(u),r&&o.transform(a)}return i},Vh.I=function(t){Mo.prototype.I.call(this,t),this.ma!==Xf&&this.ma!==ed||null!==(t=this.Jd())&&t.I(!0),t=this.xa.n;for(var e=t.length,i=0;i<e;i++){var n=t[i];if(!n.Ba.H()){var o=Oo(n,!1);(n instanceof js||n instanceof Zo||n instanceof Er||o!==jf)&&n.I(!0)}}},Vh.aq=function(){if(!1===Uo(this)){_o(this,!0),Jo(this,!0);for(var t=this.xa.n,e=t.length,i=0;i<e;i++)t[i].aq()}},Vh.Ii=function(){if(0!=(2048&this.P)==!1){Ho(this,!0),Vo(this,!0);for(var t=this.xa.n,e=t.length,i=0;i<e;i++)t[i].wA()}},Vh.wA=function(){Vo(this,!0);for(var t=this.xa.n,e=t.length,i=0;i<e;i++)t[i].wA()},Vh.Nn=function(t,e,i,n){var o=this.fj;o.width=0,o.height=0;var r=this.Ba,a=this.zh;void 0===i&&(i=a.width,n=a.height),i=Math.max(i,a.width),n=Math.max(n,a.height);var s=this.Bf;isNaN(r.width)||(t=Math.min(r.width,s.width)),isNaN(r.height)||(e=Math.min(r.height,s.height)),t=Math.max(i,t),e=Math.max(n,e);var l=this.padding;t=Math.max(t-l.left-l.right,0),e=Math.max(e-l.top-l.bottom,0);var h=this.xa.n;if(0!==h.length){var c=this.ma.Qb;switch(c){case"Position":var f=t,d=e,p=i,g=n,y=h.length;o.x=0,o.y=0,o.width=0,o.height=0;for(var m=ar(this),v=0;v<y;v++){var x=h[v];if(x.visible||x===m){var w=x.margin,k=w.right+w.left,P=w.top+w.bottom;Ao(x,f,d,p,g);var T=x.za,L=Math.max(T.width+k,0),N=Math.max(T.height+P,0),A=x.position.x,B=x.position.y;if(isFinite(A)||(A=0),isFinite(B)||(B=0),x instanceof Tr){var D=x;if(D.iF)var F=D.kb/2,A=A-F,B=B-F}C(o,A,B,L,N)}}break;case"Vertical":for(var j=t,E=i,I=h.length,O=_h.lb(),z=ar(this),G=0;G<I;G++){var R=h[G];if(R.visible||R===z){var q=Oo(R,!1);if(q!==jf&&q!==If)O.push(R);else{var W=R.margin,H=W.right+W.left,V=W.top+W.bottom;Ao(R,j,Infinity,E,0);var U=R.za,_=Math.max(U.width+H,0),K=Math.max(U.height+V,0);o.width=Math.max(o.width,_),o.height+=K}}}var Y=O.length;if(0!==Y){for(this.Ba.width?j=Math.min(this.Ba.width,this.Bf.width):0!==o.width&&(j=Math.min(o.width,this.Bf.width)),G=0;G<Y;G++)R=O[G],(R.visible||R===z)&&(W=R.margin,H=W.right+W.left,V=W.top+W.bottom,Ao(R,j,Infinity,E,0),U=R.za,_=Math.max(U.width+H,0),K=Math.max(U.height+V,0),o.width=Math.max(o.width,_),o.height+=K);_h.wa(O)}break;case"Horizontal":for(var $=e,X=n,Q=h.length,Z=_h.lb(),tt=ar(this),et=0;et<Q;et++){var it=h[et];if(it.visible||it===tt){var nt=Oo(it,!1);if(nt!==jf&&nt!==Of)Z.push(it);else{var ot=it.margin,rt=ot.right+ot.left,at=ot.top+ot.bottom;Ao(it,Infinity,$,0,X);var st=it.za,lt=Math.max(st.width+rt,0),ht=Math.max(st.height+at,0);o.width+=lt,o.height=Math.max(o.height,ht)}}}var ut=Z.length;if(0!==ut){for(this.Ba.height?$=Math.min(this.Ba.height,this.Bf.height):0!==o.height&&($=Math.min(o.height,this.Bf.height)),et=0;et<ut;et++)it=Z[et],(it.visible||it===tt)&&(ot=it.margin,rt=ot.right+ot.left,at=ot.top+ot.bottom,Ao(it,Infinity,$,0,X),st=it.za,lt=Math.max(st.width+rt,0),ht=Math.max(st.height+at,0),o.width+=lt,o.height=Math.max(o.height,ht));_h.wa(Z)}break;case"Spot":t:{var ct=t,ft=e,dt=i,pt=n,gt=h.length,yt=this.Jd(),mt=yt.margin,vt=0,bt=0,xt=mt.right+mt.left,wt=mt.top+mt.bottom;Ao(yt,ct,ft,dt,pt);for(var kt=yt.za,St=kt.width,Mt=kt.height,Pt=Math.max(St+xt,0),Tt=Math.max(Mt+wt,0),Lt=this.Yt,Nt=_h.hg(-mt.left,-mt.top,Pt,Tt),Ct=!0,At=ar(this),Bt=0;Bt<gt;Bt++){var Dt=h[Bt];if(Dt!==yt&&(Dt.visible||Dt===At)){mt=Dt.margin,vt=mt.right+mt.left,bt=mt.top+mt.bottom,Ao(Dt,ct,ft,0,0);var kt=Dt.za,Pt=Math.max(kt.width+vt,0),Tt=Math.max(kt.height+bt,0),Ft=Dt.alignment;Ft.Vc()&&(Ft=this.Ml),Ft.fd()||(Ft=au);var jt=Dt.oh;jt.Vc()&&(jt=au);var Et=null;Dt instanceof Zo&&""!==Dt.Ij&&(Dt.hc(0,0,kt.width,kt.height),(Et=Dt.ud(Dt.Ij))===Dt&&(Et=null));var It,Ot;if(null!==Et){for(var zt=Et.Ia,Gt=Et.margin,Rt=_h.xb(jt.x*zt.width+jt.offsetX-Gt.left,jt.y*zt.height+jt.offsetY-Gt.top);Et!==Dt;)Et.transform.nb(Rt),Et=Et.O;It=Ft.x*St+Ft.offsetX-Rt.x,Ot=Ft.y*Mt+Ft.offsetY-Rt.y,_h.v(Rt)}else It=Ft.x*St+Ft.offsetX-(jt.x*kt.width-jt.offsetX)-mt.left,Ot=Ft.y*Mt+Ft.offsetY-(jt.y*kt.height-jt.offsetY)-mt.top;Ct?(Ct=!1,o.x=It,o.y=Ot,o.width=Pt,o.height=Tt):C(o,It,Ot,Pt,Tt)}}Ct?o.assign(Nt):Lt?o.cF(Nt.x,Nt.y,Nt.width,Nt.height):C(o,Nt.x,Nt.y,Nt.width,Nt.height),_h.Db(Nt);var qt=yt.stretch;switch(qt===Ef&&(qt=Oo(yt,!1)),qt){case jf:break t;case zf:if(!isFinite(ct)&&!isFinite(ft))break t;break;case Of:if(!isFinite(ct))break t;break;case If:if(!isFinite(ft))break t}for(kt=yt.za,St=kt.width,Mt=kt.height,Pt=Math.max(St+xt,0),Tt=Math.max(Mt+wt,0),mt=yt.margin,Nt=_h.hg(-mt.left,-mt.top,Pt,Tt),Bt=0;Bt<gt;Bt++)(Dt=h[Bt])===yt||!Dt.visible&&Dt!==At||(mt=Dt.margin,vt=mt.right+mt.left,bt=mt.top+mt.bottom,kt=Dt.za,Pt=Math.max(kt.width+vt,0),Tt=Math.max(kt.height+bt,0),Ft=Dt.alignment,Ft.Vc()&&(Ft=this.Ml),Ft.fd()||(Ft=au),jt=Dt.oh,jt.Vc()&&(jt=au),Ct?(Ct=!1,o.x=Ft.x*St+Ft.offsetX-(jt.x*kt.width-jt.offsetX)-mt.left,o.y=Ft.y*Mt+Ft.offsetY-(jt.y*kt.height-jt.offsetY)-mt.top,o.width=Pt,o.height=Tt):C(o,Ft.x*St+Ft.offsetX-(jt.x*kt.width-jt.offsetX)-mt.left,Ft.y*Mt+Ft.offsetY-(jt.y*kt.height-jt.offsetY)-mt.top,Pt,Tt));Ct?o.assign(Nt):Lt?o.cF(Nt.x,Nt.y,Nt.width,Nt.height):C(o,Nt.x,Nt.y,Nt.width,Nt.height),_h.Db(Nt)}break;case"Auto":var Wt=t,Ht=e,Vt=i,Ut=n,_t=h.length,Kt=this.Jd(),Jt=Kt.margin,Yt=Wt,$t=Ht,Xt=Jt.right+Jt.left,Qt=Jt.top+Jt.bottom;Ao(Kt,Wt,Ht,Vt,Ut);var Zt=Kt.za,te=0,ee=null;Kt instanceof Tr&&(ee=Kt,te=ee.kb*ee.scale);var ie=Math.max(Zt.width+Xt,0),ne=Math.max(Zt.height+Qt,0),oe=pr(Kt),re=oe.x*ie+oe.offsetX,ae=oe.y*ne+oe.offsetY,se=gr(Kt),le=se.x*ie+se.offsetX,he=se.y*ne+se.offsetY;isFinite(Wt)&&(Yt=Math.max(Math.abs(re-le)-te,0)),isFinite(Ht)&&($t=Math.max(Math.abs(ae-he)-te,0));var ue=_h.im();ue.m(0,0);for(var ce=ar(this),fe=0;fe<_t;fe++){var de=h[fe];if(de!==Kt&&(de.visible||de===ce)){var Jt=de.margin,pe=Jt.right+Jt.left,ge=Jt.top+Jt.bottom;Ao(de,Yt,$t,0,0),Zt=de.za,ie=Math.max(Zt.width+pe,0),ne=Math.max(Zt.height+ge,0),ue.m(Math.max(ie,ue.width),Math.max(ne,ue.height))}}if(1===_t)o.width=ie,o.height=ne,_h.Ak(ue);else{var oe=pr(Kt),se=gr(Kt),ye=0,me=0;se.x!==oe.x&&se.y!==oe.y&&(ye=ue.width/Math.abs(se.x-oe.x),me=ue.height/Math.abs(se.y-oe.y)),_h.Ak(ue),te=0,null!==ee&&(te=ee.kb*ee.scale,Ar(ee)===Gf&&(ye=me=Math.max(ye,me)));var ye=ye+(Math.abs(oe.offsetX)+Math.abs(se.offsetX)+te),me=me+(Math.abs(oe.offsetY)+Math.abs(se.offsetY)+te),ve=Kt.stretch;switch(ve===Ef&&(ve=Oo(Kt,!1)),ve){case jf:Ut=Vt=0;break;case zf:isFinite(Wt)&&(ye=Wt),isFinite(Ht)&&(me=Ht);break;case Of:isFinite(Wt)&&(ye=Wt),Ut=0;break;case If:Vt=0,isFinite(Ht)&&(me=Ht)}Kt.aq(),Ao(Kt,ye,me,Vt,Ut),o.width=Kt.za.width+Xt,o.height=Kt.za.height+Qt}break;case"Table":for(var be=t,xe=e,we=i,ke=n,Se=h.length,Me=_h.lb(),Pe=_h.lb(),Te=0;Te<Se;Te++){var Le=h[Te],Ne=Le instanceof Zo?Le:null;if(null===Ne||Ne.type!==Zf&&Ne.type!==td||!Le.visible)Me.push(Le);else{Pe.push(Ne);for(var Ce=Ne.xa.n,Ae=Ce.length,Be=0;Be<Ae;Be++){var De=Ce[Be];Ne.type===Zf?De.Zb=Le.Zb:Ne.type===td&&(De.column=Le.column),Me.push(De)}}}Se=Me.length,0===Se&&(this.be(0),this.ae(0));for(var Fe=[],Te=0;Te<Se;Te++)Le=Me[Te],_o(Le,!0),Jo(Le,!0),Fe[Le.Zb]||(Fe[Le.Zb]=[]),Fe[Le.Zb][Le.column]||(Fe[Le.Zb][Le.column]=[]),Fe[Le.Zb][Le.column].push(Le);_h.wa(Me);for(var je=_h.lb(),Ee=_h.lb(),Ie=_h.lb(),Oe={count:0},ze={count:0},Ge=be,Re=xe,qe=this.Yd,Se=qe.length,Te=0;Te<Se;Te++){var We=qe[Te];void 0!==We&&(We.Ja=0)}for(qe=this.Td,Se=qe.length,Te=0;Te<Se;Te++)void 0!==(We=qe[Te])&&(We.Ja=0);for(var He=Fe.length,Ve=0,Te=0;Te<He;Te++)Fe[Te]&&(Ve=Math.max(Ve,Fe[Te].length));for(var Ue=Math.min(this.ej,He-1),_e=Math.min(this.Ni,Ve-1),Ke=0,He=Fe.length,Je=ar(this),Te=0;Te<He;Te++)if(Fe[Te])for(var Ve=Fe[Te].length,Ye=this.be(Te),Be=Ye.Ja=0;Be<Ve;Be++)if(Fe[Te][Be]){var $e=this.ae(Be);void 0===je[Be]&&($e.Ja=0,je[Be]=!0);for(var Xe=Fe[Te][Be],Qe=Xe.length,Ze=0;Ze<Qe;Ze++)if(Le=Xe[Ze],Le.visible||Le===Je){var ti=1<Le.aj||1<Le.xi;ti&&(Te<Ue||Be<_e||Ee.push(Le));var ei=Le.margin,ii=ei.right+ei.left,ni=ei.top+ei.bottom,oi=zo(Le,Ye,$e,!1),ri=Le.Ba,ai=!isNaN(ri.height),si=!isNaN(ri.width)&&ai;if(ti||oi===jf||si||Te<Ue||Be<_e||(void 0!==Oe[Be]||oi!==zf&&oi!==Of||(Oe[Be]=-1,Oe.count++),void 0!==ze[Te]||oi!==zf&&oi!==If||(ze[Te]=-1,ze.count++),Ie.push(Le)),Ao(Le,Infinity,Infinity,0,0),!(Te<Ue||Be<_e)){var li=Le.za,hi=Math.max(li.width+ii,0),ui=Math.max(li.height+ni,0);if(1===Le.aj&&(oi===jf||oi===Of)){var We=this.be(Te),ci=We.Xe(),Ke=Math.max(ui-We.Ja,0);Ke+ci>Re&&(Ke=Math.max(Re-ci,0));var fi=0===We.Ja;We.Ja+=Ke,Re=Math.max(Re-(Ke+(fi?ci:0)),0)}1!==Le.xi||oi!==jf&&oi!==If||(We=this.ae(Be),ci=We.Xe(),Ke=Math.max(hi-We.Ja,0),Ke+ci>Ge&&(Ke=Math.max(Ge-ci,0)),fi=0===We.Ja,We.Ja+=Ke,Ge=Math.max(Ge-(Ke+(fi?ci:0)),0)),ti&&Le.aq()}}}_h.wa(je);for(var di=0,pi=0,Se=this.Kp,Te=0;Te<Se;Te++){var gi=this.Td[Te];void 0!==gi&&(di+=gi.Sa,0!==gi.Sa&&(di+=gi.Xe()))}for(Se=this.pq,Te=0;Te<Se;Te++){var yi=this.Yd[Te];void 0!==yi&&(pi+=yi.Sa,0!==yi.Sa&&(pi+=yi.Xe()))}for(var Ge=Math.max(be-di,0),mi=Re=Math.max(xe-pi,0),vi=Ge,Se=Ie.length,Te=0;Te<Se;Te++){var Le=Ie[Te],Ye=this.be(Le.Zb),$e=this.ae(Le.column),bi=Le.za,ei=Le.margin,ii=ei.right+ei.left,ni=ei.top+ei.bottom;Oe[Le.column]=0===$e.Ja&&void 0!==Oe[Le.column]?Math.max(bi.width+ii,Oe[Le.column]):null,ze[Le.Zb]=0===Ye.Ja&&void 0!==ze[Le.Zb]?Math.max(bi.height+ni,ze[Le.Zb]):null}var xi,wi=0,ki=0;for(xi in ze)"count"!==xi&&(wi+=ze[xi]);for(xi in Oe)"count"!==xi&&(ki+=Oe[xi]);for(var Si=_h.im(),Te=0;Te<Se;Te++)if(Le=Ie[Te],Le.visible||Le===Je){var Ye=this.be(Le.Zb),$e=this.ae(Le.column),Mi=0;isFinite($e.width)?Mi=$e.width:(Mi=isFinite(Ge)&&null!==Oe[Le.column]?0===ki?$e.Ja+Ge:Oe[Le.column]/ki*vi:null!==Oe[Le.column]?Ge:$e.Ja||Ge,Mi=Math.max(0,Mi-$e.Xe()));var Pi=0;switch(isFinite(Ye.height)?Pi=Ye.height:(Pi=isFinite(Re)&&null!==ze[Le.Zb]?0===wi?Ye.Ja+Re:ze[Le.Zb]/wi*mi:null!==ze[Le.Zb]?Re:Ye.Ja||Re,Pi=Math.max(0,Pi-Ye.Xe())),Si.m(Math.max($e.zj,Math.min(Mi,$e.mf)),Math.max(Ye.zj,Math.min(Pi,Ye.mf))),oi=zo(Le,Ye,$e,!1)){case Of:Si.height=Math.max(Si.height,Ye.Ja+Re);break;case If:Si.width=Math.max(Si.width,$e.Ja+Ge)}ei=Le.margin,ii=ei.right+ei.left,ni=ei.top+ei.bottom,Le.aq(),Ao(Le,Si.width,Si.height,$e.zj,Ye.zj),li=Le.za,hi=Math.max(li.width+ii,0),ui=Math.max(li.height+ni,0),isFinite(Ge)&&(hi=Math.min(hi,Si.width)),isFinite(Re)&&(ui=Math.min(ui,Si.height));var Ti=0,Ti=Ye.Ja;Ye.Ja=Math.max(Ye.Ja,ui),Ke=Ye.Ja-Ti,Re=Math.max(Re-Ke,0),Ti=$e.Ja,$e.Ja=Math.max($e.Ja,hi),Ke=$e.Ja-Ti,Ge=Math.max(Ge-Ke,0)}_h.wa(Ie);for(var Li=_h.im(),Se=Ee.length,Te=0;Te<Se;Te++)if(Le=Ee[Te],Le.visible||Le===Je){switch(Ye=this.be(Le.Zb),$e=this.ae(Le.column),Si.m(Math.max($e.zj,Math.min(be,$e.mf)),Math.max(Ye.zj,Math.min(xe,Ye.mf))),oi=zo(Le,Ye,$e,!1)){case zf:0!==$e.Ja&&(Si.width=Math.min(Si.width,$e.Ja)),0!==Ye.Ja&&(Si.height=Math.min(Si.height,Ye.Ja));break;case Of:0!==$e.Ja&&(Si.width=Math.min(Si.width,$e.Ja));break;case If:0!==Ye.Ja&&(Si.height=Math.min(Si.height,Ye.Ja))}isFinite($e.width)&&(Si.width=$e.width),isFinite(Ye.height)&&(Si.height=Ye.height),Li.m(0,0);for(var Ni=1;Ni<Le.aj&&!(Le.Zb+Ni>=this.pq);Ni++)We=this.be(Le.Zb+Ni),Li.height+=Math.max(We.zj,isNaN(We.gf)?We.mf:Math.min(We.gf,We.mf));for(Ni=1;Ni<Le.xi&&!(Le.column+Ni>=this.Kp);Ni++)We=this.ae(Le.column+Ni),Li.width+=Math.max(We.zj,isNaN(We.gf)?We.mf:Math.min(We.gf,We.mf));Si.width+=Li.width,Si.height+=Li.height,ei=Le.margin,ii=ei.right+ei.left,ni=ei.top+ei.bottom,Ao(Le,Si.width,Si.height,we,ke);for(var li=Le.za,hi=Math.max(li.width+ii,0),ui=Math.max(li.height+ni,0),Ci=0,Ni=0;Ni<Le.aj&&!(Le.Zb+Ni>=this.pq);Ni++)We=this.be(Le.Zb+Ni),Ci+=We.total||0;if(Ci<ui){var Ai=ui-Ci,Bi=ui-Ci;if(null!==Le.hy)for(var Di=Le.hy,Ni=0;Ni<Le.aj&&!(0>=Ai)&&!(Le.Zb+Ni>=this.pq);Ni++){var We=this.be(Le.Zb+Ni),Fi=We.Sa||0,ji=Di(Le,We,Bi);We.Ja=Math.min(We.mf,Fi+ji),We.Sa!==Fi&&(Ai-=We.Sa-Fi)}for(;0<Ai&&(Fi=We.Sa||0,isNaN(We.height)&&We.mf>Fi&&(We.Ja=Math.min(We.mf,Fi+Ai),We.Sa!==Fi&&(Ai-=We.Sa-Fi)),0!==We.index);)We=this.be(We.index-1)}for(var Ei=0,Ni=0;Ni<Le.xi&&!(Le.column+Ni>=this.Kp);Ni++)We=this.ae(Le.column+Ni),Ei+=We.total||0;if(Ei<hi){if(Ai=hi-Ei,Bi=hi-Ei,null!==Le.hy)for(Di=Le.hy,Ni=0;Ni<Le.xi&&!(0>=Ai)&&!(Le.column+Ni>=this.Kp);Ni++)We=this.ae(Le.column+Ni),Fi=We.Sa||0,ji=Di(Le,We,Bi),We.Ja=Math.min(We.mf,Fi+ji),We.Sa!==Fi&&(Ai-=We.Sa-Fi);for(;0<Ai&&(Fi=We.Sa||0,isNaN(We.width)&&We.mf>Fi&&(We.Ja=Math.min(We.mf,Fi+Ai),We.Sa!==Fi&&(Ai-=We.Sa-Fi)),0!==We.index);)We=this.ae(We.index-1)}}_h.wa(Ee),_h.Ak(Li),_h.Ak(Si);for(var Ii=0,Oi=0,oi=Oo(this,!0),zi=this.Ba,Gi=this.Bf,Ri=pi=di=0,qi=0,Se=this.Kp,Te=0;Te<Se;Te++)void 0!==this.Td[Te]&&(We=this.ae(Te),isFinite(We.width)?(Ri+=We.width,Ri+=We.Xe()):Pr(We)===sd?(Ri+=We.Sa,Ri+=We.Xe()):0!==We.Sa&&(di+=We.Sa,di+=We.Xe()));var Ii=isFinite(zi.width)?Math.min(zi.width,Gi.width):oi!==jf&&isFinite(be)?be:di,Ii=Math.max(Ii,this.zh.width),Ii=Math.max(Ii-Ri,0),Wi=Math.max(Ii/di,1);for(isFinite(Wi)||(Wi=1),Te=0;Te<Se;Te++)void 0!==this.Td[Te]&&(We=this.ae(Te),isFinite(We.width)||Pr(We)===sd||(We.Ja=We.Sa*Wi),We.position=o.width,0!==We.Sa&&(o.width+=We.Sa,o.width+=We.Xe()));for(Se=this.pq,Te=0;Te<Se;Te++)void 0!==this.Yd[Te]&&(We=this.be(Te),isFinite(We.height)?(qi+=We.height,qi+=We.Xe()):Pr(We)===sd?(qi+=We.Sa,qi+=We.Xe()):0!==We.Sa&&(pi+=We.Sa,0!==We.Sa&&(pi+=We.Xe())));var Oi=isFinite(zi.height)?Math.min(zi.height,Gi.height):oi!==jf&&isFinite(xe)?xe:pi,Oi=Math.max(Oi,this.zh.height),Oi=Math.max(Oi-qi,0),Hi=Math.max(Oi/pi,1);for(isFinite(Hi)||(Hi=1),Te=0;Te<Se;Te++)void 0!==this.Yd[Te]&&(We=this.be(Te),isFinite(We.height)||Pr(We)===sd||(We.Ja=We.Sa*Hi),We.position=o.height,0!==We.Sa&&(o.height+=We.Sa,0!==We.Sa&&(o.height+=We.Xe())));for(Se=Pe.length,Te=0;Te<Se;Te++){var Vi=Pe[Te];Vi.type===Zf?(Mi=o.width,We=this.be(Vi.Zb),Pi=We.Ja):(We=this.ae(Vi.column),Mi=We.Ja,Pi=o.height),Vi.qd.m(0,0,Mi,Pi),_o(Vi,!1),Fe[Vi.Zb]||(Fe[Vi.Zb]=[]),Fe[Vi.Zb][Vi.column]||(Fe[Vi.Zb][Vi.column]=[]),Fe[Vi.Zb][Vi.column].push(Vi)}_h.wa(Pe),this.Os=Fe;break;case"Viewbox":var Ui=t,_i=e,Ki=i,Ji=n;1<h.length&&_h.k("Viewbox Panel cannot contain more than one GraphObject.");var Yi=h[0];Yi.tb=1,Yi.aq(),Ao(Yi,Infinity,Infinity,Ki,Ji);var $i=Yi.za,Xi=Yi.margin,Qi=Xi.right+Xi.left,Zi=Xi.top+Xi.bottom;if(isFinite(Ui)||isFinite(_i)){var tn=Yi.scale,en=$i.width,nn=$i.height,on=Math.max(Ui-Qi,0),rn=Math.max(_i-Zi,0),an=1;this.Dp===Gf?0!==en&&0!==nn&&(an=Math.min(on/en,rn/nn)):0!==en&&0!==nn&&(an=Math.max(on/en,rn/nn)),0===an&&(an=1e-4),Yi.tb*=an,tn!==Yi.scale&&(_o(Yi,!0),Ao(Yi,Infinity,Infinity,Ki,Ji))}$i=Yi.za,o.width=isFinite(Ui)?Ui:Math.max($i.width+Qi,0),o.height=isFinite(_i)?_i:Math.max($i.height+Zi,0);break;case"Link":var sn=h.length;if(this instanceof Aa||this instanceof Ua){var ln=null;if(this instanceof Ua&&(ln=this),this instanceof Aa&&(ln=this.Of),ln instanceof Ua){var hn=ln;if(0===sn){var un=this.Ia;M(un,0,0);var cn=this.za;cn.m(0,0,0,0)}else{var fn=this instanceof Aa?null:ln.path,dn=ln.Wn,pn=this.fj;pn.assign(dn),pn.x=0,pn.y=0;var gn=hn.points,yn=ln.qa;this.ku(!1);var mn=dn.width,vn=dn.height;this.Ri.m(dn.x,dn.y),null===this.$g&&(this.$g=new u(S)),this.$g.clear(),null!==fn&&(Cr(fn,mn,vn,this),cn=fn.za,pn.Gh(cn),this.$g.add(cn));for(var bn=_h.Ff(),xn=_h.K(),wn=_h.K(),kn=0;kn<sn;kn++){var Sn=h[kn];if(Sn!==fn)if(Sn.Vf&&Sn instanceof Tr)Cr(Sn,mn,vn,this),cn=Sn.za,pn.Gh(cn),this.$g.add(cn);else if(2>yn)Ao(Sn,Infinity,Infinity),cn=Sn.za,pn.Gh(cn),this.$g.add(cn);else{var Mn=Sn.Me,Pn=Sn.aB,Tn=Sn.oh;Tn.Od()&&(Tn=au);var Ln=Sn.qq,Nn=Sn.bB,Cn=0,An=0,Bn=0;if(Mn<-yn||Mn>=yn){var Dn=hn.zF,Fn=hn.yF;Ln!==qd&&(Bn=hn.computeAngle(Sn,Ln,Fn),Sn.ig=Bn),Cn=Dn.x-dn.x,An=Dn.y-dn.y}else{var jn,En;if(0<=Mn)jn=gn.da(Mn),En=Mn<yn-1?gn.da(Mn+1):jn;else{var In=yn+Mn;jn=gn.da(In),En=0<In?gn.da(In-1):jn}if(jn.Ic(En)){var On,zn;0<=Mn?(On=0<Mn?gn.da(Mn-1):jn,zn=Mn<yn-2?gn.da(Mn+2):En):(On=In<yn-1?gn.da(In+1):jn,zn=1<In?gn.da(In-2):En);var Gn=On.uf(jn),Rn=En.uf(zn),Fn=Gn>Rn+10?0<=Mn?On.Rb(jn):jn.Rb(On):Rn>Gn+10?0<=Mn?En.Rb(zn):zn.Rb(En):0<=Mn?On.Rb(zn):zn.Rb(On)}else Fn=0<=Mn?jn.Rb(En):En.Rb(jn);Ln!==qd&&(Bn=hn.computeAngle(Sn,Ln,Fn),Sn.ig=Bn),Cn=jn.x+(En.x-jn.x)*Pn-dn.x,An=jn.y+(En.y-jn.y)*Pn-dn.y}Ao(Sn,Infinity,Infinity);var cn=Sn.za,un=Sn.Ia,qn=0;Sn instanceof Tr&&(qn=Sn.kb);var Wn=un.width+qn,Hn=un.height+qn;bn.reset(),bn.translate(-cn.x,-cn.y),bn.scale(Sn.scale,Sn.scale),bn.rotate(Ln===qd?Sn.angle:Fn,Wn/2,Hn/2),Ln!==Yd&&Ln!==Zd||bn.rotate(90,Wn/2,Hn/2),Ln!==$d&&Ln!==tp||bn.rotate(-90,Wn/2,Hn/2),Ln===ep&&(45<Fn&&135>Fn||225<Fn&&315>Fn)&&bn.rotate(-Fn,Wn/2,Hn/2);var Vn=new S(0,0,Wn,Hn);xn.Xn(Vn,Tn),bn.nb(xn);var Un=-xn.x+qn/2,_n=-xn.y+qn/2;wn.assign(Nn),isNaN(wn.x)&&(wn.x=0<=Mn?Wn/2+3:-(Wn/2+3)),isNaN(wn.y)&&(wn.y=-(Hn/2+3)),wn.rotate(Fn),Cn+=wn.x,An+=wn.y,Vn.set(cn),Vn.x=Cn+Un,Vn.y=An+_n,this.$g.add(Vn),pn.Gh(Vn)}}if(this instanceof Ua)for(var Kn=this.Wf;Kn.next();)Ao(Kn.value,Infinity,Infinity);this.fj=pn;var Jn=this.Ri;Jn.m(Jn.x+pn.x,Jn.y+pn.y),M(o,pn.width||0,pn.height||0),_h.ue(bn),_h.v(xn),_h.v(wn)}}}break;case"Grid":break;case"Graduated":var Yn=t,$n=e,Xn=i,Qn=n,Zn=this.Jd();this.xm=[];var to=Zn.margin,eo=to.right+to.left,io=to.top+to.bottom;Ao(Zn,Yn,$n,Xn,Qn);var no=Zn.za,oo=no.height,ro=Math.max(no.width+eo,0),ao=Math.max(oo+io,0),so=new S(-to.left,-to.top,ro,ao);this.xm.push(so),o.assign(so);for(var lo=Zn.vf,ho=Zn.kb,uo=lo.iA,co=lo.kx,fo=lo.jA,po=uo.length,go=0,yo=0,mo=_h.lb(),vo=0;vo<po;vo++){for(var bo=uo[vo],xo=[],yo=go=0,wo=bo.length,ko=0;ko<wo;ko+=2){var So=bo[ko],Mo=bo[ko+1];if(0!==ko){var Po=180*Math.atan2(Mo-yo,So-go)/Math.PI;0>Po&&(Po+=360),xo.push(Po)}go=So,yo=Mo}mo.push(xo)}var To;if(null===this.Tj){for(var Lo=[],Co=this.xa.n,Bo=Co.length,Do=0;Do<Bo;Do++){var Fo=Co[Do],jo=[];if(Lo.push(jo),Fo.visible)for(var Eo=Fo.interval,Io=0;Io<Bo;Io++){var Go=Co[Io];if(Go.visible&&Fo!==Go&&!(Fo instanceof Tr&&!(Go instanceof Tr)||Fo instanceof Er&&!(Go instanceof Er))){var Ro=Go.interval;Ro>Eo&&jo.push(Ro)}}}this.Tj=Lo}To=this.Tj;var qo=this.xa.n,Wo=qo.length,Ho=0,Vo=0,Uo=fo;this.zm=[];for(var Ko=[],Yo=0;Yo<Wo;Yo++){var $o=qo[Yo],Ko=[];if($o.visible&&$o!==Zn){var Xo=$o.interval,Qo=this.qA;if(!(2>Qo*Xo*fo/this.nx)){var tr=this.XE,ir=To[Yo],nr=co[0][0],or=0,rr=0,Vo=fo*$o.WE-1e-4,Uo=fo*$o.UE+1e-4,sr=Qo*Xo;if(tr<this.Ck)var lr=(this.Ck-tr)/sr,lr=0==lr%1?lr:Math.floor(lr+1),tr=tr+lr*sr;else tr>this.Ck+sr&&(lr=Math.floor((tr-this.Ck)/sr),tr-=lr*sr);for(;tr<=this.pA;){var hr;t:{for(var ur=ir.length,cr=0;cr<ur;cr++)if(J((tr-this.XE)%(ir[cr]*this.qA),0)){hr=!1;break t}hr=!0}if(hr&&(Ho=(tr-this.Ck)*fo/this.nx,Ho>fo&&(Ho=fo),Vo<=Ho&&Ho<=Uo)){for(var Po=mo[or][rr],fr=co[or][rr];or<co.length;){for(;Ho>nr&&rr<co[or].length-1;)rr++,Po=mo[or][rr],fr=co[or][rr],nr+=fr;if(Ho<=nr)break;or++,rr=0,Po=mo[or][rr],fr=co[or][rr],nr+=fr}var dr=uo[or],yr=dr[2*rr],mr=dr[2*rr+1],vr=(Ho-(nr-fr))/fr,br=new b(yr+(dr[2*rr+2]-yr)*vr+ho/2-lo.cb.x,mr+(dr[2*rr+3]-mr)*vr+ho/2-lo.cb.y);br.scale(Zn.scale,Zn.scale);var xr=Po,wr=mo[or];if(1e-4>vr?0<rr?xr=wr[rr-1]:J(dr[0],dr[dr.length-2])&&J(dr[1],dr[dr.length-1])&&(xr=wr[wr.length-1]):.9999<vr&&(rr+1<wr.length?xr=wr[rr+1]:J(dr[0],dr[dr.length-2])&&J(dr[1],dr[dr.length-1])&&(xr=wr[0])),Po!==xr&&(180<Math.abs(Po-xr)&&(Po<xr?Po+=360:xr+=360),Po=(Po+xr)/2%360),$o instanceof Er){var kr="",kr=null!==$o.VE?$o.VE(tr):(+tr.toFixed(2)).toString();""!==kr&&Ko.push([br,Po,kr])}else Ko.push([br,Po])}tr+=sr}}}this.zm.push(Ko)}_h.wa(mo);for(var Sr=this.zm,Mr=h.length,Lr=0;Lr<Mr;Lr++){var Nr=h[Lr],Br=Sr[Lr];if(Nr.visible&&Nr!==Zn&&0!==Br.length){if(Nr instanceof Tr){var Dr=Nr,Fr=Br,jr=o,Ir=Dr.oh;Ir.Od()&&(Ir=nu);var Or=Dr.angle;Dr.ig=0,Ao(Dr,Infinity,Infinity),Dr.ig=Or;var zr=Dr.za,Gr=zr.width,Rr=zr.height,qr=_h.hg(0,0,Gr,Rr),Hr=_h.K();Hr.Xn(qr,Ir),_h.Db(qr);for(var Vr=-Hr.x,Ur=-Hr.y,_r=new S,Kr=Fr.length,Jr=0;Jr<Kr;Jr++)for(var Yr=Fr[Jr],$r=Yr[0].x,Xr=Yr[0].y,Qr=Yr[1],Zr=0;4>Zr;Zr++){switch(Zr){case 0:Hr.m(Vr,Ur);break;case 1:Hr.m(Vr+Gr,Ur);break;case 2:Hr.m(Vr,Ur+Rr);break;case 3:Hr.m(Vr+Gr,Ur+Rr)}Hr.rotate(Qr+Dr.angle),Hr.offset($r,Xr),
0===Jr&&0===Zr?_r.m(Hr.x,Hr.y,0,0):_r.ri(Hr),Hr.offset(-$r,-Xr),Hr.rotate(-Qr-Dr.angle)}_h.v(Hr),this.xm.push(_r),C(jr,_r.x,_r.y,_r.width,_r.height)}else if(Nr instanceof Er){var ta=Nr,ea=Br,ia=o;null===this.lk&&(this.lk=new Er);var na=this.lk;er(ta,na);var oa=ta.oh;oa.Od()&&(oa=nu);for(var ra=ta.qq,aa=ta.bB,sa=null,la=0,ha=0,ua=0,ca=0,fa=ea.length,da=0;da<fa;da++){var pa=ea[da],la=pa[0].x,ha=pa[0].y,ua=pa[1];ra!==qd&&(ca=ta.computeAngle(ra,ua),na.ig=ca),na.text=pa[2],Ao(na,Infinity,Infinity);var ga=na.za,ya=na.Ia,ma=ya.width,va=ya.height,ba=_h.Ff();ba.reset(),ba.translate(-ga.x,-ga.y),ba.scale(na.scale,na.scale),ba.rotate(ra===qd?na.angle:ua,ma/2,va/2),ra!==Yd&&ra!==Zd||ba.rotate(90,ma/2,va/2),ra!==$d&&ra!==tp||ba.rotate(-90,ma/2,va/2),ra===ep&&(45<ua&&135>ua||225<ua&&315>ua)&&ba.rotate(-ua,ma/2,va/2);var xa=_h.hg(0,0,ma,va),wa=_h.K();wa.Xn(xa,oa),ba.nb(wa);var ka=-wa.x,Sa=-wa.y,Ma=_h.K();Ma.assign(aa),isNaN(Ma.x)&&(Ma.x=ma/2+3),isNaN(Ma.y)&&(Ma.y=-(va/2+3)),Ma.rotate(ua);var la=la+(Ma.x+ka),ha=ha+(Ma.y+Sa),Pa=new S(la,ha,ga.width,ga.height),Ta=new S(ga.x,ga.y,ga.width,ga.height),La=new S(ya.x,ya.y,ya.width,ya.height),Na=new Wr;Na.Lp(na.Oi),pa.push(ca),pa.push(na.je),pa.push(Na),pa.push(Pa),pa.push(Ta),pa.push(La),0===da?sa=Pa.copy():sa.Gh(Pa),_h.v(Ma),_h.v(wa),_h.Db(xa),_h.ue(ba)}this.xm.push(sa),C(ia,sa.x,sa.y,sa.width,sa.height)}_o(Nr,!1)}}break;case"TableRow":case"TableColumn":_h.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:_h.k("Unknown panel type: "+c)}}var Ca=o.width,Ba=o.height,Da=this.padding,Fa=Da.top+Da.bottom,Ca=Ca+(Da.left+Da.right),Ba=Ba+Fa;isFinite(r.width)&&(Ca=r.width),isFinite(r.height)&&(Ba=r.height),Ca=Math.min(s.width,Ca),Ba=Math.min(s.height,Ba),Ca=Math.max(a.width,Ca),Ba=Math.max(a.height,Ba),Ca=Math.max(i,Ca),Ba=Math.max(n,Ba),o.width=Ca,o.height=Ba,M(this.Tc,Ca,Ba),No(this,0,0,Ca,Ba)},Zo.prototype.findMainElement=Zo.prototype.Jd=function(){if(null===this.dn){var t=this.xa.n,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(!0===n.Vf)return this.dn=n}this.dn=t[0]}return this.dn},Zo.prototype.ij=function(t,e,i,n){var o=this.fj,r=this.xa.n,a=_h.hg(0,0,0,0);if(0===r.length){var s=this.W;s.x=t,s.y=e,s.width=i,s.height=n}else{if(!this.Ba.H()){var l=Oo(this,!0),h=this.qd,u=h.width,c=h.height,f=this.margin,d=f.left+f.right,p=f.top+f.bottom;switch(u===i&&c===n&&(l=jf),l){case jf:(u>i||c>n)&&(this.I(),Ao(this,u>i?i:u,c>n?n:c));break;case zf:this.I(!0),Ao(this,i+d,n+p,0,0);break;case Of:this.I(!0),Ao(this,i+d,c+p,0,0);break;case If:this.I(!0),Ao(this,u+d,n+p,0,0)}}s=this.W,s.x=t,s.y=e,s.width=i,s.height=n;var g=this.ma.Qb;switch(g){case"Position":for(var y=r.length,m=o.x-this.padding.left,v=o.y-this.padding.top,x=0;x<y;x++){var w=r[x],k=w.za,M=w.margin,T=w.position.x,L=w.position.y;if(a.x=isNaN(T)?-m:T-m,a.y=isNaN(L)?-v:L-v,w instanceof Tr){var N=w;if(N.iF){var A=N.kb/2;a.x-=A,a.y-=A}}a.x+=M.left,a.y+=M.top,a.width=k.width,a.height=k.height,w.visible&&w.hc(a.x,a.y,a.width,a.height)}break;case"Vertical":for(var B=r.length,D=this.padding.left,F=this.pF,j=F?o.height:this.padding.top,E=0;E<B;E++){var I=D,O=r[E];if(O.visible){var z=O.za,G=O.margin,R=G.left+G.right,q=D+this.padding.right,W=z.width,H=Oo(O,!1);(isNaN(O.Ba.width)&&H===zf||H===Of)&&(W=Math.max(o.width-R-q,0));var V=W+R+q,U=O.alignment;U.Vc()&&(U=this.Ml),U.fd()||(U=au),F&&(j-=z.height+G.bottom+G.top),O.hc(I+U.offsetX+G.left+(o.width*U.x-V*U.x),j+U.offsetY+G.top,W,z.height),F||(j+=z.height+G.bottom+G.top)}}break;case"Horizontal":for(var _=r.length,K=this.padding.top,J=this.pF,Y=J?o.width:this.padding.left,$=0;$<_;$++){var X=K,Q=r[$];if(Q.visible){var Z=Q.za,tt=Q.margin,et=tt.top+tt.bottom,it=K+this.padding.bottom,nt=Z.height,ot=Oo(Q,!1);(isNaN(Q.Ba.height)&&ot===zf||ot===If)&&(nt=Math.max(o.height-et-it,0));var rt=nt+et+it,at=Q.alignment;at.Vc()&&(at=this.Ml),at.fd()||(at=au),J&&(Y-=Z.width+tt.left+tt.right),Q.hc(Y+at.offsetX+tt.left,X+at.offsetY+tt.top+(o.height*at.y-rt*at.y),Z.width,nt),J||(Y+=Z.width+tt.left+tt.right)}}break;case"Spot":var st=r.length,lt=this.Jd(),ht=lt.za,ut=ht.width,ct=ht.height,ft=this.padding,dt=ft.left,pt=ft.top;a.x=dt-o.x,a.y=pt-o.y,lt.hc(a.x,a.y,ut,ct);for(var gt=0;gt<st;gt++){var yt=r[gt];if(yt!==lt){var mt=yt.za,vt=mt.width,bt=mt.height,xt=yt.alignment;xt.Vc()&&(xt=this.Ml),xt.fd()||(xt=au);var wt=yt.oh;wt.Vc()&&(wt=au);var kt=null;if(yt instanceof Zo&&""!==yt.Ij&&(kt=yt.ud(yt.Ij))===yt&&(kt=null),null!==kt){for(var St=kt.Ia,Mt=_h.xb(wt.x*St.width+wt.offsetX,wt.y*St.height+wt.offsetY);kt!==yt;)kt.transform.nb(Mt),kt=kt.O;a.x=xt.x*ut+xt.offsetX-Mt.x,a.y=xt.y*ct+xt.offsetY-Mt.y,_h.v(Mt)}else a.x=xt.x*ut+xt.offsetX-(wt.x*vt-wt.offsetX),a.y=xt.y*ct+xt.offsetY-(wt.y*bt-wt.offsetY);a.x-=o.x,a.y-=o.y,yt.visible&&yt.hc(dt+a.x,pt+a.y,vt,bt)}}break;case"Auto":var Pt=r.length,Tt=this.Jd(),Lt=Tt.za,Nt=_h.Ef();Nt.m(0,0,1,1);var Ct=Tt.margin,At=Ct.left,Bt=Ct.top,Dt=this.padding,Ft=Dt.left,jt=Dt.top;a.x=At,a.y=Bt,a.width=Lt.width,a.height=Lt.height,Tt.hc(Ft+a.x,jt+a.y,a.width,a.height);var Et=pr(Tt),It=gr(Tt),Ot=0+Et.y*Lt.height+Et.offsetY,zt=0+It.x*Lt.width+It.offsetX,Gt=0+It.y*Lt.height+It.offsetY;Nt.x=0+Et.x*Lt.width+Et.offsetX,Nt.y=Ot,C(Nt,zt,Gt,0,0),Nt.x+=At+Ft,Nt.y+=Bt+jt;for(var Rt=0;Rt<Pt;Rt++){var qt=r[Rt];if(qt!==Tt){var Wt=qt.za,Ct=qt.margin,Ht=Math.max(Wt.width+Ct.right+Ct.left,0),Vt=Math.max(Wt.height+Ct.top+Ct.bottom,0),Ut=qt.alignment;Ut.Vc()&&(Ut=this.Ml),Ut.fd()||(Ut=au),a.x=Nt.width*Ut.x+Ut.offsetX-Ht*Ut.x+Ct.left+Nt.x,a.y=Nt.height*Ut.y+Ut.offsetY-Vt*Ut.y+Ct.top+Nt.y,a.width=Nt.width,a.height=Nt.height,qt.visible&&(Qh(Nt.x,Nt.y,Nt.width,Nt.height,a.x,a.y,Wt.width,Wt.height)?qt.hc(a.x,a.y,Wt.width,Wt.height):qt.hc(a.x,a.y,Wt.width,Wt.height,new S(Nt.x,Nt.y,Nt.width,Nt.height)))}}_h.Db(Nt);break;case"Table":for(var _t=r.length,Kt=this.padding,Jt=Kt.left,Yt=Kt.top,$t=this.Os,Xt=0,Qt=0,Zt=$t.length,te=0,ee=0;ee<Zt;ee++)$t[ee]&&(te=Math.max(te,$t[ee].length));for(var ie=Math.min(this.ej,Zt-1);ie!==Zt&&(void 0===this.Yd[ie]||0===this.Yd[ie].Sa);)ie++;for(var ie=Math.min(ie,Zt-1),ne=-this.Yd[ie].ib,oe=Math.min(this.Ni,te-1);oe!==te&&(void 0===this.Td[oe]||0===this.Td[oe].Sa);)oe++;for(var oe=Math.min(oe,te-1),re=-this.Td[oe].ib,ae=_h.im(),ee=0;ee<Zt;ee++)if($t[ee]){var te=$t[ee].length,se=this.be(ee),Qt=se.ib+ne+Yt;0!==se.Sa&&(Qt+=se.rE());for(var le=0;le<te;le++)if($t[ee][le]){var he=this.ae(le),Xt=he.ib+re+Jt;0!==he.Sa&&(Xt+=he.rE());for(var ue=$t[ee][le],ce=ue.length,fe=0;fe<ce;fe++){var de=ue[fe],pe=de.za,ge=de instanceof Zo?de:null;if(null===ge||ge.type!==Zf&&ge.type!==td){ae.m(0,0);for(var ye=1;ye<de.rowSpan&&!(ee+ye>=this.pq);ye++){var me=this.be(ee+ye);ae.height+=me.total}for(ye=1;ye<de.tH&&!(le+ye>=this.Kp);ye++){var ve=this.ae(le+ye);ae.width+=ve.total}var be=he.Sa+ae.width,xe=se.Sa+ae.height;a.x=Xt,a.y=Qt,a.width=be,a.height=xe;var we=Xt,ke=Qt,Se=be,Me=xe;Xt+be>o.width&&(Se=Math.max(o.width-Xt,0)),Qt+xe>o.height&&(Me=Math.max(o.height-Qt,0));var Pe=de.alignment,Te=0,Le=0,Ne=0,Ce=0;if(Pe.Vc()){Pe=this.Ml,Pe.fd()||(Pe=au);var Te=Pe.x,Le=Pe.y,Ne=Pe.offsetX,Ce=Pe.offsetY,Ae=he.alignment,Be=se.alignment;Ae.fd()&&(Te=Ae.x,Ne=Ae.offsetX),Be.fd()&&(Le=Be.y,Ce=Be.offsetY)}else Te=Pe.x,Le=Pe.y,Ne=Pe.offsetX,Ce=Pe.offsetY;(isNaN(Te)||isNaN(Le))&&(Le=Te=.5,Ce=Ne=0);var De=pe.width,Fe=pe.height,je=de.margin,Ee=je.left+je.right,Ie=je.top+je.bottom,Oe=zo(de,se,he,!1);!isNaN(de.Ba.width)||Oe!==zf&&Oe!==Of||(De=Math.max(be-Ee,0)),!isNaN(de.Ba.height)||Oe!==zf&&Oe!==If||(Fe=Math.max(xe-Ie,0));var ze=de.Bf,Ge=de.zh,De=Math.min(ze.width,De),Fe=Math.min(ze.height,Fe),De=Math.max(Ge.width,De),Fe=Math.max(Ge.height,Fe),Re=Fe+Ie;a.x+=a.width*Te-(De+Ee)*Te+Ne+je.left,a.y+=a.height*Le-Re*Le+Ce+je.top,de.visible&&(Qh(we,ke,Se,Me,a.x,a.y,pe.width,pe.height)?de.hc(a.x,a.y,De,Fe):de.hc(a.x,a.y,De,Fe,new S(we,ke,Se,Me)))}else{de.Ii(),de.nc.Ra();var qe=de.nc,We=_h.hg(qe.x,qe.y,qe.width,qe.height);if(qe.x=ge.type===Zf?Jt:Xt,qe.y=ge.type===td?Yt:Qt,qe.width=pe.width,qe.height=pe.height,de.nc.freeze(),Jo(de,!1),!P(We,qe)){var He=de.U;null!==He&&(He.Ek(),de.ss(He))}_h.Db(We)}}}}for(_h.Ak(ae),ee=0;ee<_t;ee++)de=r[ee],null===(ge=de instanceof Zo?de:null)||ge.type!==Zf&&ge.type!==td||(qe=de.nc,de.Tc.Ra(),de.Tc.m(0,0,qe.width,qe.height),de.Tc.freeze());break;case"Viewbox":var Ve=r[0],Ue=Ve.za,_e=Ve.margin,Ke=_e.top+_e.bottom,Je=Math.max(Ue.width+(_e.right+_e.left),0),Ye=Math.max(Ue.height+Ke,0),$e=Ve.alignment;$e.Vc()&&($e=this.Ml),$e.fd()||($e=au),a.x=o.width*$e.x-Je*$e.x+$e.offsetX,a.y=o.height*$e.y-Ye*$e.y+$e.offsetY,a.width=Ue.width,a.height=Ue.height,Ve.hc(a.x,a.y,a.width,a.height);break;case"Link":var Xe=r.length;if(this instanceof Aa||this instanceof Ua){var Qe=null;this instanceof Ua&&(Qe=this),this instanceof Aa&&(Qe=this.Of);var Ze=Qe,ti=this instanceof Aa?null:Ze.path;if(null!==this.$g){var ei=this.$g.n,ii=0;if(null!==ti&&ii<this.$g.count){var ni=ei[ii];ii++,ti.hc(ni.x-this.fj.x,ni.y-this.fj.y,ni.width,ni.height)}for(var oi=0;oi<Xe;oi++){var ri=r[oi];ri!==ti&&ii<this.$g.count&&(ni=ei[ii],ii++,ri.hc(ni.x-this.fj.x,ni.y-this.fj.y,ni.width,ni.height))}}var ai=Ze.points,si=ai.count;if(2<=si&&this instanceof Ua)for(var li=this.Wf;li.next();){var hi=li.value,ui=si,ci=ai,fi=hi.Me,di=hi.aB,pi=hi.oh,gi=hi.qq,yi=hi.bB,mi=0,vi=0,bi=0;if(fi<-ui||fi>=ui){var xi=this.zF,wi=this.yF;gi!==qd&&(bi=this.computeAngle(hi,gi,wi),hi.angle=bi),mi=xi.x,vi=xi.y}else{var ki=void 0,Si=void 0;if(0<=fi)ki=ci.n[fi],Si=fi<ui-1?ci.n[fi+1]:ki;else var Mi=ui+fi,ki=ci.n[Mi],Si=0<Mi?ci.n[Mi-1]:ki;if(ki.Ic(Si)){var Pi=void 0,Ti=void 0;0<=fi?(Pi=0<fi?ci.n[fi-1]:ki,Ti=fi<ui-2?ci.n[fi+2]:Si):(Pi=Mi<ui-1?ci.n[Mi+1]:ki,Ti=1<Mi?ci.n[Mi-2]:Si);var Li=Pi.uf(ki),Ni=Si.uf(Ti),wi=Li>Ni+10?0<=fi?Pi.Rb(ki):ki.Rb(Pi):Ni>Li+10?0<=fi?Si.Rb(Ti):Ti.Rb(Si):0<=fi?Pi.Rb(Ti):Ti.Rb(Pi)}else wi=0<=fi?ki.Rb(Si):Si.Rb(ki);gi!==qd&&(bi=this.computeAngle(hi,gi,wi),hi.angle=bi),mi=ki.x+(Si.x-ki.x)*di,vi=ki.y+(Si.y-ki.y)*di}if(pi.L(tu))hi.location=new b(mi,vi);else{pi.Od()&&(pi=au);var Ci=_h.Ff();Ci.reset(),Ci.scale(hi.scale,hi.scale),Ci.rotate(hi.angle,0,0);var Ai=hi.Ia,Bi=_h.hg(0,0,Ai.width,Ai.height),Di=_h.K();Di.Xn(Bi,pi),Ci.nb(Di);var Fi=-Di.x,ji=-Di.y,Ei=yi.copy();isNaN(Ei.x)&&(Ei.x=0<=fi?Di.x+3:-(Di.x+3)),isNaN(Ei.y)&&(Ei.y=-(Di.y+3)),Ei.rotate(wi),mi+=Ei.x,vi+=Ei.y,Ci.vG(Bi);var Fi=Fi+Bi.x,ji=ji+Bi.y,Ii=_h.xb(mi+Fi,vi+ji);hi.move(Ii),_h.v(Ii),_h.v(Di),_h.Db(Bi),_h.ue(Ci)}}this.ku(!1)}break;case"Grid":break;case"Graduated":if(null!==this.xm){var Oi=this.Jd(),zi=this.zm,Gi=this.xm,Ri=0,qi=Gi[Ri];Ri++,Oi.hc(qi.x-o.x,qi.y-o.y,qi.width,qi.height);for(var Wi=r.length,Hi=0;Hi<Wi;Hi++){var Vi=r[Hi],Ui=zi[Hi];Vi.visible&&Vi!==Oi&&0!==Ui.length&&(qi=Gi[Ri],Ri++,Vi.hc(qi.x-o.x,qi.y-o.y,qi.width,qi.height))}this.xm=null}break;case"TableRow":case"TableColumn":_h.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:_h.k("Unknown panel type: "+g)}_h.Db(a)}},Zo.prototype.vk=function(t){var e=this.Ia,i=ar(this);if(Qh(0,0,e.width,e.height,t.x,t.y)){for(var e=this.xa.n,n=e.length,o=_h.xb(0,0);n--;){var r=e[n];if((r.visible||r===i)&&(w(o.set(t),r.transform),r.Ha(o)))return _h.v(o),!0}return _h.v(o),null!==this.Eb||null!==this.$b}return!1},Zo.prototype.gx=function(t){if(this.po===t)return this;for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n].gx(t);if(null!==o)return o}return null},Zo.prototype.walkVisualTree=Zo.prototype.UJ=function(t){ur(this,this,t)},Zo.prototype.findInVisualTree=Zo.prototype.Jt=function(t){return cr(this,this,t)},Zo.prototype.findObject=Zo.prototype.ud=function(t){if(this.name===t)return this;for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];if(o.name===t)return o;if(o instanceof Zo)if(null===o.$j&&null===o.ug){if(null!==(o=o.ud(t)))return o}else if(br(o)&&null!==(o=o.xa.first())&&null!==(o=o.ud(t)))return o}return null},Vh=Zo.prototype,Vh.Yg=function(){return!(this.type===Zf||this.type===td)},Vh.Je=function(t,e,i){if(!1===this.Tg)return null;if(void 0===e&&(e=null),void 0===i&&(i=null),Ko(this))return null;var n=this.Ia,o=1/this.oj(),r=this.Yg(),a=r?t:w(_h.xb(t.x,t.y),this.transform),s=this.g,l=10,h=5;if(null!==s&&(l=s.Tt("extraTouchArea"),h=l/2),Qh(-h*o,-h*o,n.width+l*o,n.height+l*o,a.x,a.y)){if(!this.Gn){var o=this.xa.n,u=o.length,s=_h.K(),h=(l=this.Yt)?this.Jd():null;if(l&&(h.Yg()?w(s.set(t),h.transform):s.set(t),!h.Ha(s)))return _h.v(s),r||_h.v(a),null;for(var c=ar(this);u--;){var f=o[u];if((f.visible||f===c)&&(f.Yg()?w(s.set(t),f.transform):s.set(t),!l||f!==h)){var d=null;if(f instanceof Zo?d=f.Je(s,e,i):!0===f.Tg&&f.Ha(s)&&(d=f),null!==d&&(null!==e&&(d=e(d)),null!==d&&(null===i||i(d))))return _h.v(s),r||_h.v(a),d}}_h.v(s)}return null===this.background&&null===this.jn?(r||_h.v(a),null):(t=Qh(0,0,n.width,n.height,a.x,a.y)?this:null,r||_h.v(a),t)}return r||_h.v(a),null},Vh.Lt=function(t,e,i,n){if(!1===this.Tg)return!1;void 0===e&&(e=null),void 0===i&&(i=null),n instanceof u||n instanceof f||(n=new u(Mo));var o=this.Ia,r=this.Yg(),a=r?t:w(_h.xb(t.x,t.y),this.transform);if(Qh(0,0,o.width,o.height,a.x,a.y)){if(!this.Gn){for(var o=this.xa.n,s=o.length,l=_h.K(),h=ar(this);s--;){var c=o[s];if(c.visible||c===h){c.Yg()?w(l.set(t),c.transform):l.set(t);var d=c,c=c instanceof Zo?c:null;(null!==c?c.Lt(l,e,i,n):d.Ha(l))&&!1!==d.Tg&&(null!==e&&(d=e(d)),null===d||null!==i&&!i(d)||n.add(d))}}_h.v(l)}return r||_h.v(a),null!==this.background||null!==this.jn}return r||_h.v(a),!1},Vh.zk=function(t,e,i,n,o,r){if(!1===this.Tg)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var a=r;if(void 0===r&&(a=_h.Ff(),a.reset()),a.multiply(this.transform),this.qn(t,a))return dr(this,e,i,o),void 0===r&&_h.ue(a),!0;if(this.Tf(t,a)){if(!this.Gn)for(var s=ar(this),l=this.xa.n,h=l.length;h--;){var u=l[h];if(u.visible||u===s){var c=u.W,f=this.Ia;c.x>f.width||c.y>f.height||0>c.x+c.width||0>c.y+c.height||(c=u,u=u instanceof Zo?u:null,f=_h.Ff(),f.set(a),(null!==u?u.zk(t,e,i,n,o,f):Co(c,t,n,f))&&(null!==e&&(c=e(c)),null===c||null!==i&&!i(c)||o.add(c)),_h.ue(f))}}return void 0===r&&_h.ue(a),n}return void 0===r&&_h.ue(a),!1},Vh.wn=function(t,e,i,n,o,r){if(!1===this.Tg)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var a=this.Ia,s=this.Yg(),l=s?t:w(_h.xb(t.x,t.y),this.transform),h=s?e:w(_h.xb(e.x,e.y),this.transform),u=l.uf(h),c=0<l.x&&l.x<a.width&&0<l.y&&l.y<a.height||Yh(l.x,l.y,0,0,0,a.height)<u||Yh(l.x,l.y,0,a.height,a.width,a.height)<u||Yh(l.x,l.y,a.width,a.height,a.width,0)<u||Yh(l.x,l.y,a.width,0,0,0)<u,a=0<l.x&&l.x<a.width&&0<l.y&&l.y<a.height&&Yh(l.x,l.y,0,0,0,a.height)<u&&Yh(l.x,l.y,0,a.height,a.width,a.height)<u&&Yh(l.x,l.y,a.width,a.height,a.width,0)<u&&Yh(l.x,l.y,a.width,0,0,0)<u;if(s||(_h.v(l),_h.v(h)),c){if(!this.Gn){for(var s=_h.K(),l=_h.K(),h=ar(this),u=this.xa.n,f=u.length;f--;){var d=u[f];if(d.visible||d===h){var p=d.W,g=this.Ia;p.x>g.width||p.y>g.height||0>p.x+p.width||0>p.y+p.height||(d.Yg()?(p=d.transform,w(s.set(t),p),w(l.set(e),p)):(s.set(t),l.set(e)),p=d,d=d instanceof Zo?d:null,null!==d?!d.wn(s,l,i,n,o,r):!p.ME(s,l,o))||(null!==i&&(p=i(p)),null===p||null!==n&&!n(p)||r.add(p))}}_h.v(s),_h.v(l)}return o?c:a}return!1},Zo.prototype.add=Zo.prototype.add=function(t){_h.G(t,Mo,Zo,"add:element"),this.Md(this.xa.count,t)},Zo.prototype.elt=Zo.prototype.da=function(t){return this.xa.da(t)},Zo.prototype.insertAt=Zo.prototype.Md=function(t,e){e instanceof sa&&_h.k("Cannot add a Part to a Panel: "+e),(this===e||this.Xl(e))&&(this===e&&_h.k("Cannot make a Panel contain itself: "+this.toString()),_h.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.O;if(null!==i&&i!==this&&_h.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.ma!==id||e instanceof Tr||_h.k("Can only add Shapes to a Grid Panel, not: "+e),this.ma!==nd||e instanceof Tr||e instanceof Er||_h.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.dm(this),e.Sm=null,null!==this.dq){var n=e.data;null!==n&&"object"==typeof n&&(null===this.tg&&(this.tg=new v(Object,Zo)),this.tg.add(n,e))}var o=this.xa,n=-1;if(i===this){for(var r=-1,a=this.xa.n,s=a.length,l=0;l<s;l++)if(a[l]===e){r=l;break}if(-1!==r){if(r===t||r+1>=o.count&&t>=o.count)return;o.Yc(r),n=r}else _h.k("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>o.count)&&(t=o.count),o.Md(t,e),this.I(),e.I(),null!==e.Qd?this.Dk=!0:e instanceof Zo&&!0===e.Dk&&(this.Dk=!0),this.Tj=null,null!==(i=this.U)&&(i.Nm=null,i.ck=NaN,this.Dk&&i instanceof Ba&&(i.Dk=!0),i.Dk&&i instanceof Ba&&(i.le=null),null!==(o=this.g)&&o.oa.gb||(-1!==n&&i.Xc(mc,"elements",this,e,null,n,null),i.Xc(yc,"elements",this,null,e,null,t),this.$t()||Sr(this,e,!1)))},_h.defineProperty(Zo,{Dk:null},function(){return 0!=(8388608&this.P)},function(t){0!=(8388608&this.P)!==t&&(this.P^=8388608)}),Zo.prototype.remove=Zo.prototype.remove=function(t){_h.G(t,Mo,Zo,"remove:element");for(var e=this.xa.n,i=e.length,n=-1,o=0;o<i;o++)if(e[o]===t){n=o;break}-1!==n&&this.jf(n)},Zo.prototype.removeAt=Zo.prototype.Yc=function(t){0<=t&&this.jf(t)},Zo.prototype.jf=function(t){var e=this.xa,i=e.da(t);if(i.Sm=null,i.dm(null),null!==this.tg){var n=i.data;"object"==typeof n&&this.tg.remove(n)}e.Yc(t),_o(this,!1),this.I(),this.dn===i&&(this.dn=null),this.Tj=null,null!==(e=this.U)&&(e.Nm=null,e.ck=NaN,e.ce(),null!==(n=this.g)&&n.oa.gb||e.Xc(mc,"elements",this,i,null,t,null))},_h.u(Zo,{pq:"rowCount"},function(){return void 0===this.Yd?0:this.Yd.length}),Zo.prototype.getRowDefinition=Zo.prototype.be=function(t){0>t&&_h.Ea(t,">= 0",Zo,"getRowDefinition:idx"),t=Math.round(t);var e=this.Yd;if(void 0===e[t]){var i=new Mr;i.dm(this),i.ve=!0,i.index=t,e[t]=i}return e[t]},Zo.prototype.removeRowDefinition=Zo.prototype.RF=function(t){0>t&&_h.Ea(t,">= 0",Zo,"removeRowDefinition:idx"),t=Math.round(t);var e=this.Yd;this.Xc(mc,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.I()},_h.u(Zo,{Kp:"columnCount"},function(){return void 0===this.Td?0:this.Td.length}),Zo.prototype.getColumnDefinition=Zo.prototype.ae=function(t){0>t&&_h.Ea(t,">= 0",Zo,"getColumnDefinition:idx"),t=Math.round(t);var e=this.Td;if(void 0===e[t]){var i=new Mr;i.dm(this),i.ve=!1,i.index=t,e[t]=i}return e[t]},Zo.prototype.removeColumnDefinition=Zo.prototype.OF=function(t){0>t&&_h.Ea(t,">= 0",Zo,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.Td;this.Xc(mc,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.I()},_h.defineProperty(Zo,{uJ:"rowSizing"},function(){return void 0===this.Vm?ld:this.Vm},function(t){if(void 0!==this.Vm){var e=this.Vm;e!==t&&(t!==ld&&t!==sd&&_h.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.Vm=t,this.I(),this.h("rowSizing",e,t))}}),_h.defineProperty(Zo,{sH:"columnSizing"},function(){return void 0===this.sm?ld:this.sm},function(t){if(void 0!==this.sm){var e=this.sm;e!==t&&(t!==ld&&t!==sd&&_h.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.sm=t,this.I(),this.h("columnSizing",e,t))}}),_h.defineProperty(Zo,{RL:"topIndex"},function(){return void 0===this.ej?0:this.ej},function(t){if(void 0!==this.ej){var e=this.ej;e!==t&&((!isFinite(t)||0>t)&&_h.k("Panel.topIndex must be greater than zero and a real number, not: "+t),this.ej=t,this.I(),this.h("topIndex",e,t))}}),_h.defineProperty(Zo,{dL:"leftIndex"},function(){return void 0===this.Ni?0:this.Ni},function(t){if(void 0!==this.Ni){var e=this.Ni;e!==t&&((!isFinite(t)||0>t)&&_h.k("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Ni=t,this.I(),this.h("leftIndex",e,t))}}),Zo.prototype.findRowForLocalY=function(t){if(0>t)return-1;if(this.type!==Qf)return NaN;for(var e=0,i=this.Yd,n=i.length,o=this.ej;o<n;o++){var r=i[o];if(void 0!==r&&(e+=r.total,t<e))return o}return-1},Zo.prototype.findColumnForLocalX=function(t){if(0>t)return-1;if(this.type!==Qf)return NaN;for(var e=0,i=this.Td,n=i.length,o=this.Ni;o<n;o++){var r=i[o];if(void 0!==r&&(e+=r.total,t<e))return o}return-1},Zo.prototype.graduatedPointForValue=function(t,e){if(void 0===e&&(e=new b(NaN,NaN)),this.type!==nd)return e.m(NaN,NaN),e;t=Math.min(Math.max(t,this.Ck),this.pA);var i=(t-this.Ck)/this.nx,n=this.Jd();return n.vf.$H(i,e),i=_h.Ff(),i.set(n.transform),e.transform(i),_h.ue(i),e},Zo.prototype.graduatedValueForPoint=function(t){if(this.type!==nd)return NaN;var e=this.Jd(),i=e.vf,n=_h.Ff();return n.set(e.transform),n.px(),t.transform(n),_h.ue(n),i.WH(t)*this.nx+this.Ck},_h.defineProperty(Zo,{data:"data"},function(){return this.Vd},function(t){var e=this.Vd;if(e!==t){var i=this instanceof sa&&!(this instanceof Aa);i&&_h.j(t,"object",Zo,"data"),vr(this),this.Vd=t;var n=this.g;null!==n&&(i?this instanceof Ua?(null!==e&&n.Lj.remove(e),null!==t&&n.Lj.add(t,this)):this instanceof sa&&(null!==e&&n.Ai.remove(e),null!==t&&n.Ai.add(t,this)):null!==(i=this.O)&&null!==i.tg&&(null!==e&&i.tg.remove(e),null!==t&&i.tg.add(t,this))),this.h("data",e,t),null!==n&&n.oa.gb||null!==t&&this.Hb()}}),_h.defineProperty(Zo,{eu:"itemIndex"},function(){return this.Qr},function(t){var e=this.Qr;e!==t&&(this.Qr=t,this.h("itemIndex",e,t))}),Zo.prototype.copyTemplate=function(){var t=this.copy();return t.UJ(function(t){t instanceof Zo&&(t.Yk=null,t.Vd=null);var e=t.tc;null!==e&&(t.tc=null,e.each(function(e){t.bind(e.copy())}))}),t},Zo.prototype.updateTargetBindings=Zo.prototype.Hb=function(t){var e=this.Yk;if(null!==e)for(void 0===t&&(t=""),e=e.i;e.next();){var i=e.value,n=i.jG;if((""===t||""===n||n===t)&&(n=i.iy,null!==i.xH||""!==n)){var n=this.data,o=i.xq;if(null!==o)n=""===o?this:"/"===o?this:"."===o?this:".."===o?this:this.ud(o);else{var r=this.g;null!==r&&i.yx&&(n=r.ba.Gk)}if(null!==n){var r=this,a=i.hm;if(-1!==a){if(null===(r=this.gx(a)))continue}else null!==i.Dg&&(r=i.Dg);if("/"===o?n=r.U:"."===o?n=r:".."===o&&(n=r.O),0!==(o=i.ht)){if(!(r instanceof Zo))continue;a=r,1===o?r=a.ae(i.yp):2===o&&(r=a.be(i.yp))}void 0!==r&&i.yG(r,n)}}}},_h.defineProperty(Zo,{dq:"itemArray"},function(){return this.$j},function(t){var e=this.$j;if(e!==t){var i=this.g;null!==i&&null!==e&&Nn(i,this),this.$j=t,null!==i&&null!==t&&Ln(i,this),this.h("itemArray",e,t),null!==i&&i.oa.gb||this.WA()}}),Zo.prototype.rebuildItemElements=Zo.prototype.WA=function(){var t=0;for(br(this)&&(t=1);this.xa.length>t;)this.jf(this.xa.length-1);if(null!==(t=this.dq))for(var e=_h.Ya(t),i=0;i<e;i++)xr(this,_h.Da(t,i),i)},Zo.prototype.findItemPanelForData=Zo.prototype.QH=function(t){return void 0===t||null===t||null===this.tg?null:(_h.j(t,"object",Zo,"findItemPanelForData"),this.tg.ja(t))},_h.defineProperty(Zo,{bL:"itemTemplate"},function(){return null===this.ug?null:this.ug.ja("")},function(t){if(null===this.ug){if(null===t)return;this.ug=new v("string",Zo)}var e=this.ug.ja("");e!==t&&(_h.G(t,Zo,Zo,"itemTemplate"),(t instanceof sa||t.Vf)&&_h.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.ug.add("",t),this.h("itemTemplate",e,t),null!==(t=this.g)&&t.oa.gb||this.WA())}),_h.defineProperty(Zo,{zI:"itemTemplateMap"},function(){return this.ug},function(t){var e=this.ug;if(e!==t){_h.G(t,v,Zo,"itemTemplateMap");for(var i=t.i;i.next();){var n=i.value;(n instanceof sa||n.Vf)&&_h.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+n)}this.ug=t,this.h("itemTemplateMap",e,t),t=this.g,null!==t&&t.oa.gb||this.WA()}}),_h.defineProperty(Zo,{aL:"itemCategoryProperty"},function(){return this.Vo},function(t){var e=this.Vo;e!==t&&("string"!=typeof t&&"function"!=typeof t&&_h.yd(t,"string or function",Zo,"itemCategoryProperty"),this.Vo=t,this.h("itemCategoryProperty",e,t))});var od=!1,rd=null;_h.defineProperty(Zo,{Gn:"isAtomic"},function(){return 0!=(1048576&this.P)},function(t){var e=0!=(1048576&this.P);e!==t&&(_h.j(t,"boolean",Zo,"isAtomic"),this.P^=1048576,this.h("isAtomic",e,t))}),_h.defineProperty(Zo,{Yt:"isClipping"},function(){return 0!=(2097152&this.P)},function(t){var e=0!=(2097152&this.P);e!==t&&(_h.j(t,"boolean",Zo,"isClipping"),this.P^=2097152,this.I(),this.h("isClipping",e,t))}),_h.defineProperty(Zo,{pF:"isOpposite"},function(){return 0!=(33554432&this.P)},function(t){var e=0!=(33554432&this.P);e!==t&&(_h.j(t,"boolean",Zo,"isOpposite"),this.P^=33554432,this.I(),this.h("isOpposite",e,t))}),_h.defineProperty(Zo,{isEnabled:"isEnabled"},function(){return 0!=(4194304&this.P)},function(t){var e=0!=(4194304&this.P);if(e!==t){_h.j(t,"boolean",Zo,"isEnabled");var i=null===this.O||this.O.$t();this.P^=4194304,this.h("isEnabled",e,t),e=this.g,null!==e&&e.oa.gb||i&&Sr(this,this,t)}}),_h.defineProperty(Zo,{YJ:"alignmentFocusName"},function(){return this.Ij},function(t){var e=this.Ij;e!==t&&(this.Ij=t,this.I(),this.h("alignmentFocusName",e,t))}),_h.fa("RowColumnDefinition",Mr),Mr.prototype.copy=function(){var t=new Mr;return t.Nv=this.Nv,t.uc=this.uc,t.gf=this.gf,t.ek=this.ek,t.dk=this.dk,t.ge=this.ge,t.Sa=this.Sa,t.ib=this.ib,t.Cg=this.Cg,t.$s=this.$s,t.ik=null===this.ik?null:this.ik.S(),t.Vs=this.Vs,t.Ws=this.Ws,t.Xh=null,null!==this.Xh&&(t.Xh=_h.Il(this.Xh)),t.Eb=this.Eb,t.ar=this.ar,t.tc=this.tc,t},Mr.prototype.Lp=function(t){_h.G(t,Mr,Mr,"copyFrom:pd"),t.ve?this.height=t.height:this.width=t.width,this.zj=t.zj,this.mf=t.mf,this.alignment=t.alignment,this.stretch=t.stretch,this.Hu=t.Hu,this.ik=null===t.ik?null:t.ik.S(),this.rq=t.rq,this.sq=t.sq,this.Xh=null,t.Xh&&(this.Xh=_h.Il(t.Xh)),this.background=t.background,this.aA=t.aA,this.tc=t.tc},Mr.prototype.gc=function(t){t.De===Mr?this.Hu=t:_h.Fj(this,t)},Mr.prototype.toString=function(){return"RowColumnDefinition "+(this.ve?"(Row ":"(Column ")+this.index+") #"+_h.Kd(this)};var ad;Mr.Default=ad=_h.p(Mr,"Default",0);var sd;Mr.None=sd=_h.p(Mr,"None",1);var ld;Mr.ProportionalExtra=ld=_h.p(Mr,"ProportionalExtra",2),Mr.prototype.dm=function(t){this.lh=t},Mr.prototype.computeEffectiveSpacingTop=Mr.prototype.rE=function(){var t=0;if(0!==this.index){var e=this.lh,i=this.rq;null===i&&null!==e&&(i=this.ve?e.Bi:e.Kh),null!==i&&(t=this.sq,isNaN(t)&&(t=null!==e?this.ve?e.Mh:e.Lh:0))}if(null===(e=this.dG)){if(null===(e=this.lh))return t;e=e.Mj}return t+(this.ve?e.top:e.left)},Mr.prototype.computeEffectiveSpacing=Mr.prototype.Xe=function(){var t=0;if(0!==this.index){var e=this.lh,i=this.rq;null===i&&null!==e&&(i=this.ve?e.Bi:e.Kh),null!==i&&(t=this.sq,isNaN(t)&&(t=null!==e?this.ve?e.Mh:e.Lh:0))}if(null===(e=this.dG)){if(null===(e=this.lh))return t;e=e.Mj}return t+(this.ve?e.top+e.bottom:e.left+e.right)},Mr.prototype.cd=function(t,e,i,n,o){var r=this.lh;if(null!==r&&(r.Xc(gc,t,this,e,i,n,o),null!==this.tc&&null!==(e=r.g)&&!e.Ne&&null!==(r=r.Ql())&&null!==(e=r.data)))for(i=this.tc.i;i.next();)i.value.jy(this,e,t,r)},_h.u(Mr,{O:"panel"},function(){return this.lh}),_h.defineProperty(Mr,{ve:"isRow"},function(){return this.Nv},function(t){this.Nv=t}),_h.defineProperty(Mr,{index:"index"},function(){return this.uc},function(t){this.uc=t}),_h.defineProperty(Mr,{height:"height"},function(){return this.gf},function(t){var e=this.gf;e!==t&&(0>t&&_h.Ea(t,">= 0",Mr,"height"),this.gf=t,this.Ja=this.Sa,null!==this.O&&this.O.I(),this.cd("height",e,t))}),_h.defineProperty(Mr,{width:"width"},function(){return this.gf},function(t){var e=this.gf;e!==t&&(0>t&&_h.Ea(t,">= 0",Mr,"width"),this.gf=t,this.Ja=this.Sa,null!==this.O&&this.O.I(),this.cd("width",e,t))}),_h.defineProperty(Mr,{zj:"minimum"},function(){return this.ek},function(t){var e=this.ek;e!==t&&((0>t||!isFinite(t))&&_h.Ea(t,">= 0",Mr,"minimum"),this.ek=t,this.Ja=this.Sa,null!==this.O&&this.O.I(),this.cd("minimum",e,t))}),_h.defineProperty(Mr,{mf:"maximum"},function(){return this.dk},function(t){var e=this.dk;e!==t&&(0>t&&_h.Ea(t,">= 0",Mr,"maximum"),this.dk=t,this.Ja=this.Sa,null!==this.O&&this.O.I(),this.cd("maximum",e,t))}),_h.defineProperty(Mr,{alignment:"alignment"},function(){return this.ge},function(t){var e=this.ge;e.L(t)||(this.ge=t.S(),null!==this.O&&this.O.I(),this.cd("alignment",e,t))}),_h.defineProperty(Mr,{stretch:"stretch"},function(){return this.Cg},function(t){var e=this.Cg;e!==t&&(this.Cg=t,null!==this.O&&this.O.I(),this.cd("stretch",e,t))}),_h.defineProperty(Mr,{dG:"separatorPadding"},function(){return this.ik},function(t){"number"==typeof t&&(t=new A(t));var e=this.ik;null!==t&&null!==e&&e.L(t)||(null!==t&&(t=t.S()),this.ik=t,null!==this.O&&this.O.I(),this.cd("separatorPadding",e,t))}),_h.defineProperty(Mr,{rq:"separatorStroke"},function(){return this.Vs},function(t){var e=this.Vs;e!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Vs=t,null!==this.O&&this.O.I(),this.cd("separatorStroke",e,t))}),_h.defineProperty(Mr,{sq:"separatorStrokeWidth"},function(){return this.Ws},function(t){var e=this.Ws;e!==t&&(this.Ws=t,null!==this.O&&this.O.I(),this.cd("separatorStrokeWidth",e,t))}),_h.defineProperty(Mr,{FL:"separatorDashArray"},function(){return this.Xh},function(t){var e=this.Xh;if(e!==t){if(null===t||Array.isArray(t)||_h.yd(t,"Array",Mr,"separatorDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||_h.k("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}this.Xh=t,null!==this.O&&this.O.na(),this.cd("separatorDashArray",e,t)}}),_h.defineProperty(Mr,{background:"background"},function(){return this.Eb},function(t){var e=this.Eb;e!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Eb=t,null!==this.O&&this.O.na(),this.cd("background",e,t))}),_h.defineProperty(Mr,{aA:"coversSeparators"},function(){return this.ar},function(t){var e=this.ar;e!==t&&(_h.j(t,"boolean",Mr,"coversSeparators"),this.ar=t,null!==this.O&&this.O.na(),this.cd("coversSeparators",e,t))}),_h.defineProperty(Mr,{Hu:"sizing"},function(){return this.$s},function(t){var e=this.$s;e!==t&&(this.$s=t,null!==this.O&&this.O.I(),this.cd("sizing",e,t))}),_h.defineProperty(Mr,{Ja:"actual"},function(){return this.Sa},function(t){this.Sa=isNaN(this.gf)?Math.max(Math.min(this.dk,t),this.ek):Math.max(Math.min(this.dk,this.gf),this.ek)}),_h.defineProperty(Mr,{total:"total"},function(){return this.Sa+this.Xe()},function(t){this.Sa=isNaN(this.gf)?Math.max(Math.min(this.dk,t),this.ek):Math.max(Math.min(this.dk,this.gf),this.ek),this.Sa=Math.max(0,this.Sa-this.Xe())}),_h.defineProperty(Mr,{position:"position"},function(){return this.ib},function(t){this.ib=t}),Mr.prototype.bind=Mr.prototype.bind=function(t){t.Dg=this;var e=this.O;if(null!==e){var i=e.Ql();null!==i&&mr(i)&&_h.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}null===this.tc&&(this.tc=new u(ie)),this.tc.add(t)},_h.La(Tr,Mo),_h.fa("Shape",Tr),Tr.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.hb=this.hb,t.Ho=this.Ho,t.xr=this.xr,t.Mf=this.Mf,t.zd=this.zd,t.qc=this.qc,t.fi=this.fi,t.tp=this.tp,t.wp=this.wp,t.cn=this.cn,null!==this.vp&&(t.vp=_h.Il(this.vp)),t.sf=this.sf,t.di=this.di.S(),t.ei=this.ei.S(),t.ws=this.ws,t.xs=this.xs,t.Hr=this.Hr,t.zs=this.zs,t.Ap=this.Ap,t.Jo=this.Jo,t.rg=this.rg,t.qg=this.qg,t.pg=this.pg},Tr.prototype.gc=function(t){t===jf||t===Gf||t===Rf||t===Ef?this.mA=t:Mo.prototype.gc.call(this,t)},Tr.prototype.toString=function(){return"Shape("+("None"!==this.Cb?this.Cb:"None"!==this.yq?this.yq:this.kA)+")#"+_h.Kd(this)},Tr.prototype.yk=function(t,e){if(null!==this.qc||null!==this.zd){null!==this.zd&&Fo(this,t,this.zd,!0,!1),null!==this.qc&&Fo(this,t,this.qc,!1,!1);var i=this.fi;if(0===i){var n=this.U;n instanceof Aa&&n.type===ed&&"Selection"===n.td&&n.rb instanceof Tr&&n.Of.Jd()===n.rb&&(i=n.rb.kb)}t.lineWidth=i,t.lineJoin=this.wp,t.lineCap=this.tp,t.miterLimit=this.cn;var o=!1;this.U&&e.pj("drawShadows")&&(o=this.U.Zl);var r=!0;null!==this.qc&&null===this.zd&&(r=!1);var n=!1,a=!0,s=this.mG;null!==s&&(n=!0,a=t.fA(s,this.sf));var l=this.hb;if(null!==l){if(l.ma===ic)t.beginPath(),n&&!a?To(t,l.xc,l.Gc,l.yb,l.Gb,s,this.sf):(t.moveTo(l.xc,l.Gc),t.lineTo(l.yb,l.Gb)),null!==this.zd&&t.Jg(this.zd),0!==i&&null!==this.qc&&t.Ej();else if(l.ma===nc){var h=l.xc,u=l.Gc,c=l.yb,f=l.Gb,l=Math.min(h,c),d=Math.min(u,f),h=Math.abs(c-h),u=Math.abs(f-u);if(null!==this.zd&&(t.beginPath(),t.rect(l,d,h,u),t.Jg(this.zd)),null!==this.qc){var p=c=0,g=0;r&&o&&(c=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n&&!a?(a=_h.lb(),a.push(l),a.push(d),a.push(l+h),a.push(d),a.push(l+h),a.push(d+u),a.push(l),a.push(d+u),a.push(l),a.push(d),t.beginPath(),Nr(t,a,s,this.sf),t.Ej(),_h.wa(a)):0!==i&&(t.beginPath(),t.rect(l,d,h,u),t.Ej()),r&&o&&(t.shadowOffsetX=c,t.shadowOffsetY=p,t.shadowBlur=g)}}else if(l.ma===oc)h=l.xc,u=l.Gc,
c=l.yb,f=l.Gb,l=Math.abs(c-h)/2,d=Math.abs(f-u)/2,h=Math.min(h,c)+l,u=Math.min(u,f)+d,t.beginPath(),t.moveTo(h,u-d),t.bezierCurveTo(h+ju*l,u-d,h+l,u-ju*d,h+l,u),t.bezierCurveTo(h+l,u+ju*d,h+ju*l,u+d,h,u+d),t.bezierCurveTo(h-ju*l,u+d,h-l,u+ju*d,h-l,u),t.bezierCurveTo(h-l,u-ju*d,h-ju*l,u-d,h,u-d),t.closePath(),null!==this.zd&&t.Jg(this.zd),n&&!a&&(a=_h.lb(),Q(h,u-d,h+ju*l,u-d,h+l,u-ju*d,h+l,u,.5,a),Q(h+l,u,h+l,u+ju*d,h+ju*l,u+d,h,u+d,.5,a),Q(h,u+d,h-ju*l,u+d,h-l,u+ju*d,h-l,u,.5,a),Q(h-l,u,h-l,u-ju*d,h-ju*l,u-d,h,u-d,.5,a),t.beginPath(),Nr(t,a,s,this.sf),_h.wa(a)),0!==i&&null!==this.qc&&(r&&o?(c=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.Ej(),t.shadowOffsetX=c,t.shadowOffsetY=p,t.shadowBlur=g):t.Ej());else if(l.ma===rc){for(d=l.Oj,u=d.length,f=0;f<u;f++){h=d.n[f],t.beginPath(),t.moveTo(h.ia,h.ga);for(var c=h.vb.n,p=c.length,y=null,g=0;g<p;g++){var m=c[g];switch(m.ma){case lc:t.moveTo(m.D,m.F);break;case hc:t.lineTo(m.D,m.F);break;case uc:t.bezierCurveTo(m.Bd,m.Ve,m.mh,m.Ag,m.yb,m.Gb);break;case cc:t.quadraticCurveTo(m.Bd,m.Ve,m.yb,m.Gb);break;case fc:if(m.radiusX===m.radiusY)y=Math.PI/180,t.arc(m.Bd,m.Ve,m.radiusX,m.ye*y,(m.ye+m.of)*y,0>m.of);else{var y=Lt(m,h),v=y.length;if(0===v){t.lineTo(m.ka,m.ra);break}for(var b=0;b<v;b++){var x=y[b];0===b&&t.lineTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7])}}break;case dc:if(b=v=0,null!==y&&y.type===fc){if(y=Lt(y,h),0===(x=y.length)){t.lineTo(m.ka,m.ra);break}y=y[x-1]||null,null!==y&&(v=y[6],b=y[7])}else v=null!==y?y.D:h.ia,b=null!==y?y.F:h.ga;if(y=Nt(m,h,v,b),0===(v=y.length)){t.lineTo(m.ka,m.ra);break}for(b=0;b<v;b++)x=y[b],t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]);break;default:_h.k("Segment not of valid type: "+m.ma)}m.Ph&&t.closePath(),y=m}o?(g=p=c=0,h.So?(!0===h.Bm&&null!==this.zd?(t.Jg(this.zd),r=!0):r=!1,0!==i&&null!==this.qc&&(r&&(c=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n&&!a||t.Ej(),r&&(t.shadowOffsetX=c,t.shadowOffsetY=p,t.shadowBlur=g))):(r&&(c=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===h.Bm&&null!==this.zd&&t.Jg(this.zd),0!==i&&null!==this.qc&&(n&&!a||t.Ej()),r&&(t.shadowOffsetX=c,t.shadowOffsetY=p,t.shadowBlur=g))):(!0===h.Bm&&null!==this.zd&&t.Jg(this.zd),0===i||null===this.qc||n&&!a||t.Ej())}if(n&&!a)for(i=r,r=l.Oj,a=r.length,l=0;l<a;l++){for(d=r.n[l],t.beginPath(),u=_h.lb(),u.push(d.ia),u.push(d.ga),f=d.ia,h=d.ga,c=f,p=h,g=d.vb.n,m=g.length,y=0;y<m;y++){switch(v=g[y],v.ma){case lc:Nr(t,u,s,this.sf),u.length=0,u.push(v.D),u.push(v.F),f=v.D,h=v.F,c=f,p=h;break;case hc:u.push(v.D),u.push(v.F),f=v.D,h=v.F;break;case uc:Q(f,h,v.Bd,v.Ve,v.mh,v.Ag,v.yb,v.Gb,.5,u),f=v.D,h=v.F;break;case cc:it(f,h,v.Bd,v.Ve,v.yb,v.Gb,.5,u),f=v.D,h=v.F;break;case fc:if(b=Lt(v,d),0===(x=b.length)){u.push(v.ka),u.push(v.ra),f=v.ka,h=v.ra;break}for(var w=0;w<x;w++){var k=b[w];Q(f,h,k[2],k[3],k[4],k[5],k[6],k[7],.5,u),f=k[6],h=k[7]}break;case dc:if(b=Nt(v,d,f,h),0===(x=b.length)){u.push(v.ka),u.push(v.ra),f=v.ka,h=v.ra;break}for(w=0;w<x;w++)k=b[w],Q(f,h,k[2],k[3],k[4],k[5],k[6],k[7],.5,u),f=k[6],h=k[7];break;default:_h.k("Segment not of valid type: "+v.ma)}v.Ph&&(u.push(c),u.push(p),Nr(t,u,s,this.sf))}Nr(t,u,s,this.sf),_h.wa(u),null!==this.qc&&(f=u=d=0,i&&o&&(d=t.shadowOffsetX,u=t.shadowOffsetY,f=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.Ej(),i&&o&&(t.shadowOffsetX=d,t.shadowOffsetY=u,t.shadowBlur=f))}}if(n&&t.cA(),null!==this.Mx){if(n=this.Mx,Ao(n,Infinity,Infinity),s=n.za,n.hc(0,0,s.width,s.height),i=this.vf,t.save(),t.beginPath(),s=_h.lb(),i.type===ic)s.push(i.ia),s.push(i.ga),s.push(i.D),s.push(i.F),Lr(t,e,s,n);else if(i.type===rc)for(a=i.dc.i;a.next();){for(l=a.value,s.length=0,s.push(l.ia),s.push(l.ga),r=l.ia,d=l.ga,u=r,f=d,h=l.vb.n,c=h.length,p=0;p<c;p++){switch(g=h[p],g.ma){case lc:Lr(t,e,s,n),s.length=0,s.push(g.D),s.push(g.F),r=g.D,d=g.F,u=r,f=d;break;case hc:s.push(g.D),s.push(g.F),r=g.D,d=g.F;break;case uc:Q(r,d,g.Bd,g.Ve,g.mh,g.Ag,g.yb,g.Gb,.5,s),r=g.D,d=g.F;break;case cc:it(r,d,g.Bd,g.Ve,g.yb,g.Gb,.5,s),r=g.D,d=g.F;break;case fc:if(i=Lt(g,l),0===(o=i.length)){s.push(g.ka),s.push(g.ra),r=g.ka,d=g.ra;break}for(m=0;m<o;m++)y=i[m],Q(r,d,y[2],y[3],y[4],y[5],y[6],y[7],.5,s),r=y[6],d=y[7];break;case dc:if(i=Nt(g,l,r,d),0===(o=i.length)){s.push(g.ka),s.push(g.ra),r=g.ka,d=g.ra;break}for(m=0;m<o;m++)y=i[m],Q(r,d,y[2],y[3],y[4],y[5],y[6],y[7],.5,s),r=y[6],d=y[7];break;default:_h.k("Segment not of valid type: "+g.ma)}g.Ph&&(s.push(u),s.push(f),Lr(t,e,s,n))}Lr(t,e,s,n)}else if(i.type===nc)s.push(i.ia),s.push(i.ga),s.push(i.D),s.push(i.ga),s.push(i.D),s.push(i.F),s.push(i.ia),s.push(i.F),s.push(i.ia),s.push(i.ga),Lr(t,e,s,n);else if(i.type===oc){if(a=new Pt,a.ia=i.D,a.ga=(i.ga+i.F)/2,r=new Tt(fc),r.ye=0,r.of=360,r.ka=(i.ia+i.D)/2,r.ra=(i.ga+i.F)/2,r.radiusX=Math.abs(i.ia-i.D)/2,r.radiusY=Math.abs(i.ga-i.F)/2,a.add(r),i=Lt(r,a),0===(o=i.length))s.push(r.ka),s.push(r.ra);else for(r=a.ia,d=a.ga,m=0;m<o;m++)y=i[m],Q(r,d,y[2],y[3],y[4],y[5],y[6],y[7],.5,s),r=y[6],d=y[7];Lr(t,e,s,n)}_h.wa(s),t.restore(),t.Ee(!1)}}}},Tr.prototype.getDocumentPoint=Tr.prototype.Wa=function(t,e){if(void 0===e&&(e=new b),t instanceof D){t.Od()&&_h.k("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.Ia,n=this.kb;e.m(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.ph.nb(e),e},Tr.prototype.vk=function(t,e){var i=this.vf;if(null===i||null===this.fill&&null===this.stroke)return!1;var n=i.cb,o=this.kb/2;i.type!==ic||e||(o+=2);var r=_h.Ef();if(r.assign(n),r.xf(o+2,o+2),!r.Ha(t))return _h.Db(r),!1;if(n=o+1e-4,i.type===ic)return null!==this.stroke&&(n=(i.D-i.ia)*(t.x-i.ia)+(i.F-i.ga)*(t.y-i.ga),!(0>(i.ia-i.D)*(t.x-i.D)+(i.ga-i.F)*(t.y-i.F)||0>n)&&(_h.Db(r),Y(i.ia,i.ga,i.D,i.F,o,t.x,t.y)));if(i.type===nc){var a=i.ia,s=i.ga,l=i.D,h=i.F;if(r.x=Math.min(a,l),r.y=Math.min(s,h),r.width=Math.abs(l-a),r.height=Math.abs(h-s),null===this.fill){if(r.xf(-n,-n),r.Ha(t))return _h.Db(r),!1;r.xf(n,n)}return null!==this.stroke&&r.xf(o,o),o=r.Ha(t),_h.Db(r),o}if(i.type===oc){var a=i.ia,s=i.ga,l=i.D,h=i.F,i=Math.min(a,l),u=Math.min(s,h),a=Math.abs(l-a)/2,s=Math.abs(h-s)/2,i=t.x-(i+a),u=t.y-(u+s);if(null===this.fill){if(a-=n,s-=n,0>=a||0>=s||1>=i*i/(a*a)+u*u/(s*s))return _h.Db(r),!1;a+=n,s+=n}return null!==this.stroke&&(a+=o,s+=o),_h.Db(r),!(0>=a||0>=s)&&1>=i*i/(a*a)+u*u/(s*s)}return i.type===rc?(_h.Db(r),null===this.fill?kt(i,t.x,t.y,o):i.Ha(t,o,1<this.kb,e)):(_h.k("Unknown Geometry type: "+i.type),!1)},Tr.prototype.Nn=function(t,e,i,n){var o=this.Ba,r=this.fi;t=Math.max(t,0),e=Math.max(e,0);var a;if(null!==this.Mf)a=this.vf.cb;else{var s=this.Cb,l=Zu[s];if(void 0===l){var h=Ld[s];"string"==typeof h&&(h=Ld[h]),"function"==typeof h?(l=h(null,100,100),Zu[s]=l):_h.k("Unsupported Figure: "+s)}a=l.cb}var s=a.width,l=a.height,h=a.width,u=a.height;switch(Oo(this,!0)){case jf:n=i=0;break;case zf:h=Math.max(t-r,0),u=Math.max(e-r,0);break;case Of:h=Math.max(t-r,0),n=0;break;case If:i=0,u=Math.max(e-r,0)}switch(isFinite(o.width)&&(h=o.width),isFinite(o.height)&&(u=o.height),o=this.Bf,a=this.zh,i=Math.max(i,a.width)-r,n=Math.max(n,a.height)-r,h=Math.min(o.width,h),u=Math.min(o.height,u),h=isFinite(h)?Math.max(i,h):Math.max(s,i),u=isFinite(u)?Math.max(n,u):Math.max(l,n),i=Ar(this)){case jf:break;case zf:s=h,l=u;break;case Gf:i=Math.min(h/s,u/l),isFinite(i)||(i=1),s*=i,l*=i;break;default:_h.k(i+" is not a valid geometryStretch.")}null!==this.Mf?(s=Math.max(s,.01),l=Math.max(l,.01),a=null!==this.Mf?this.Mf:this.hb,o=s,n=l,i=a.copy(),a=a.cb,o/=a.width,n/=a.height,isFinite(o)||(o=1),isFinite(n)||(n=1),1===o&&1===n||i.scale(o,n),this.hb=i):null!==this.hb&&J(this.hb.Ro,t-r)&&J(this.hb.Po,e-r)||(this.hb=Tr.makeGeometry(this,s,l)),a=this.hb.cb,Infinity===t||Infinity===e?No(this,a.x-r/2,a.y-r/2,0===t&&0===s?0:a.width+r,0===e&&0===l?0:a.height+r):No(this,-r/2,-r/2,h+r,u+r)},Tr.prototype.ij=function(t,e,i,n){Bo(this,t,e,i,n)},Tr.prototype.getNearestIntersectionPoint=Tr.prototype.SE=function(t,e,i){return this.Bn(t.x,t.y,e.x,e.y,i)},Tr.prototype.Bn=function(t,e,i,n,o){var r=this.transform,a=1/(r.m11*r.m22-r.m12*r.m21),s=r.m22*a,l=-r.m12*a,h=-r.m21*a,u=r.m11*a,c=a*(r.m21*r.dy-r.m22*r.dx),f=a*(r.m12*r.dx-r.m11*r.dy),r=t*s+e*h+c,a=t*l+e*u+f,s=i*s+n*h+c,l=i*l+n*u+f,h=this.kb/2,c=this.hb;if(null===c&&(Ao(this,Infinity,Infinity),c=this.hb),f=c.cb,u=!1,c.type===ic)if(1.5>=this.kb)u=at(c.xc,c.Gc,c.yb,c.Gb,r,a,s,l,o);else{var d=0,p=0;if(c.xc===c.yb?(d=h,p=0):(e=(c.Gb-c.Gc)/(c.yb-c.xc),p=h/Math.sqrt(1+e*e),d=p*e),n=_h.lb(),e=new b,at(c.xc+d,c.Gc+p,c.yb+d,c.Gb+p,r,a,s,l,e)&&n.push(e),e=new b,at(c.xc-d,c.Gc-p,c.yb-d,c.Gb-p,r,a,s,l,e)&&n.push(e),e=new b,at(c.xc+d,c.Gc+p,c.xc-d,c.Gc-p,r,a,s,l,e)&&n.push(e),e=new b,at(c.yb+d,c.Gb+p,c.yb-d,c.Gb-p,r,a,s,l,e)&&n.push(e),0===(e=n.length))return _h.wa(n),!1;for(u=!0,p=Infinity,d=0;d<e;d++){var s=n[d],g=(s.x-r)*(s.x-r)+(s.y-a)*(s.y-a);g<p&&(p=g,o.x=s.x,o.y=s.y)}_h.wa(n)}else if(c.type===nc)e=f.x-h,u=st(e,f.y-h,f.x+f.width+h,f.y+f.height+h,r,a,s,l,o);else if(c.type===oc)t:if(e=f.copy().xf(h,h),0===e.width)u=at(e.x,e.y,e.x,e.y+e.height,r,a,s,l,o);else if(0===e.height)u=at(e.x,e.y,e.x+e.width,e.y,r,a,s,l,o);else{t=e.width/2;var y=e.height/2;if(n=e.x+t,e=e.y+y,i=9999,r!==s&&(i=(a-l)/(r-s)),9999>Math.abs(i)){if(u=a-e-i*(r-n),0>t*t*i*i+y*y-u*u){o.x=NaN,o.y=NaN,u=!1;break t}h=Math.sqrt(t*t*i*i+y*y-u*u),s=(-t*t*i*u+t*y*h)/(y*y+t*t*i*i)+n,t=(-t*t*i*u-t*y*h)/(y*y+t*t*i*i)+n,l=i*(s-n)+u+e,e=i*(t-n)+u+e,n=Math.abs((r-s)*(r-s))+Math.abs((a-l)*(a-l)),a=Math.abs((r-t)*(r-t))+Math.abs((a-e)*(a-e)),n<a?(o.x=s,o.y=l):(o.x=t,o.y=e)}else{if(s=y*y,l=r-n,0>(s-=s/(t*t)*l*l)){o.x=NaN,o.y=NaN,u=!1;break t}h=Math.sqrt(s),l=e+h,e-=h,n=Math.abs(l-a),a=Math.abs(e-a),n<a?(o.x=r,o.y=l):(o.x=r,o.y=e)}u=!0}else if(c.type===rc){var m=0,v=0,x=g=0,f=_h.K(),d=s-r,p=l-a,p=d*d+p*p;for(o.x=s,o.y=l,d=0;d<c.dc.count;d++)for(var w=c.dc.n[d],k=w.vb,m=w.ia,v=w.ga,S=m,M=v,P=0;P<k.count;P++){var T=k.n[P],L=T.type,g=T.D,x=T.F,N=!1;switch(L){case lc:S=g,M=x;break;case hc:N=Dr(m,v,g,x,r,a,s,l,f);break;case uc:var N=T.sc,L=T.Pc,C=T.Ah,A=T.Bh,N=nt(m,v,N,L,C,A,g,x,r,a,s,l,.5,f);break;case cc:N=(m+2*T.sc)/3,L=(v+2*T.Pc)/3,C=(2*T.sc+g)/3,A=(2*T.sc+g)/3,N=nt(m,v,N,L,C,A,g,x,r,a,s,l,.5,f);break;case fc:case dc:if(L=T.type===fc?Lt(T,w):Nt(T,w,m,v),0===(C=L.length)){N=Dr(m,v,T.ka,T.ra,r,a,s,l,f);break}for(x=0;x<C;x++)y=L[x],0===x&&Dr(m,v,y[0],y[1],r,a,s,l,f)&&(g=Br(r,a,f,p,o))<p&&(p=g,u=!0),nt(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],r,a,s,l,.5,f)&&(g=Br(r,a,f,p,o))<p&&(p=g,u=!0);g=y[6],x=y[7];break;default:_h.k("Unknown Segment type: "+L)}m=g,v=x,N&&(g=Br(r,a,f,p,o))<p&&(p=g,u=!0),T.sx&&(g=S,x=M,Dr(m,v,g,x,r,a,s,l,f)&&(g=Br(r,a,f,p,o))<p&&(p=g,u=!0))}r=i-t,a=n-e,e=Math.sqrt(r*r+a*a),0!==e&&(r/=e,a/=e),o.x-=r*h,o.y-=a*h,_h.v(f)}else _h.k("Unknown Geometry type: "+c.type);return!!u&&(this.transform.nb(o),!0)},Tr.prototype.containedInRect=Tr.prototype.qn=function(t,e){if(void 0===e)return t.wk(this.W);var i=this.hb;null===i&&(Ao(this,Infinity,Infinity),i=this.hb);var i=i.cb,n=this.kb/2,o=!1,r=_h.K();return r.m(i.x-n,i.y-n),t.Ha(e.nb(r))&&(r.m(i.x-n,i.bottom+n),t.Ha(e.nb(r))&&(r.m(i.right+n,i.bottom+n),t.Ha(e.nb(r))&&(r.m(i.right+n,i.y-n),t.Ha(e.nb(r))&&(o=!0)))),_h.v(r),o},Tr.prototype.intersectsRect=Tr.prototype.Tf=function(t,e){if(this.qn(t,e)||void 0===e&&(e=this.transform,t.wk(this.W)))return!0;var i=_h.Ff();i.set(e),i.px();var n=t.left,o=t.right,r=t.top,a=t.bottom,s=_h.K();if(s.m(n,r),i.nb(s),this.vk(s,!0))return _h.v(s),!0;if(s.m(o,r),i.nb(s),this.vk(s,!0))return _h.v(s),!0;if(s.m(n,a),i.nb(s),this.vk(s,!0))return _h.v(s),!0;if(s.m(o,a),i.nb(s),this.vk(s,!0))return _h.v(s),!0;var l=_h.K(),h=_h.K();i.set(e),i.BF(this.transform),i.px(),l.x=o,l.y=r,l.transform(i),s.x=n,s.y=r,s.transform(i);var u=!1;return Fr(this,s,l,h)?u=!0:(s.x=o,s.y=a,s.transform(i),Fr(this,s,l,h)?u=!0:(l.x=n,l.y=a,l.transform(i),Fr(this,s,l,h)?u=!0:(s.x=n,s.y=r,s.transform(i),Fr(this,s,l,h)&&(u=!0)))),_h.v(s),_h.ue(i),_h.v(l),_h.v(h),u},Tr.prototype.ME=function(t,e,i){function n(t,e){for(var i=t.length,n=0;n<i;n+=2)if(e.Rp(t[n],t[n+1])>o)return!0;return!1}if(i&&null!==this.fill&&this.vk(t,!0))return!0;var o=t.uf(e);e=o,1.5<this.kb&&(o=this.kb/2+Math.sqrt(o),o*=o);var r=this.hb;if(null===r&&(Ao(this,Infinity,Infinity),null===(r=this.hb)))return!1;if(!i){var a=r.cb,s=a.x,l=a.y,h=a.x+a.width,a=a.y+a.height;if($h(t.x,t.y,s,l)<=o&&$h(t.x,t.y,h,l)<=o&&$h(t.x,t.y,s,a)<=o&&$h(t.x,t.y,h,a)<=o)return!0}if(s=r.xc,l=r.Gc,h=r.yb,a=r.Gb,r.type===ic){if(i=Yh(t.x,t.y,s,l,h,a),r=(s-h)*(t.x-h)+(l-a)*(t.y-a),i<=(0<=(h-s)*(t.x-s)+(a-l)*(t.y-l)&&0<=r?o:e))return!0}else{if(r.type===nc)return e=!1,i&&(e=Yh(t.x,t.y,s,l,s,a)<=o||Yh(t.x,t.y,s,l,h,l)<=o||Yh(t.x,t.y,h,l,h,a)<=o||Yh(t.x,t.y,s,a,h,a)<=o),e;if(r.type===oc){e=t.x-(s+h)/2;var r=t.y-(l+a)/2,u=Math.abs(h-s)/2,c=Math.abs(a-l)/2;if(0===u||0===c)return(i=Yh(t.x,t.y,s,l,h,a))<=o;if(!i)return!($h(e,r,-u,0)>=o||$h(e,r,0,-c)>=o||$h(e,r,0,c)>=o||$h(e,r,u,0)>=o);if((t=yt(u,c,e,r))*t<=o)return!0}else if(r.type===rc){if(a=r.cb,s=a.x,l=a.y,h=a.x+a.width,a=a.y+a.height,t.x>h&&t.x<s&&t.y>a&&t.y<l&&Yh(t.x,t.y,s,l,s,a)>o&&Yh(t.x,t.y,s,l,h,l)>o&&Yh(t.x,t.y,h,a,s,a)>o&&Yh(t.x,t.y,h,a,h,l)>o)return!1;if(e=Math.sqrt(o),!i){for(i=r.dc,e=0;e<i.count;e++){if(s=i.n[e],u=s.ia,c=s.ga,t.Rp(u,c)>o)return!1;for(l=s.vb.n,h=l.length,a=0;a<h;a++){var f=l[a];switch(f.type){case lc:case hc:if(u=f.D,c=f.F,t.Rp(u,c)>o)return!1;break;case uc:if(r=_h.lb(),Q(u,c,f.sc,f.Pc,f.Ah,f.Bh,f.D,f.F,.8,r),u=n(r,t),_h.wa(r),u)return!1;if(u=f.D,c=f.F,t.Rp(u,c)>o)return!1;break;case cc:if(r=_h.lb(),it(u,c,f.sc,f.Pc,f.D,f.F,.8,r),u=n(r,t),_h.wa(r),u)return!1;if(u=f.D,c=f.F,t.Rp(u,c)>o)return!1;break;case fc:case dc:var d=f.type===fc?Lt(f,s):Nt(f,s,u,c),p=d.length;if(0===p){if(u=f.ka,c=f.ra,t.Rp(u,c)>o)return!1;break}for(f=null,r=_h.lb(),e=0;e<p;e++)if(f=d[e],r.length=0,Q(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],.8,r),n(r,t))return _h.wa(r),!1;_h.wa(r),null!==f&&(u=f[6],c=f[7]);break;default:_h.k("Unknown Segment type: "+f.type)}}}return!0}if(null===this.fill?kt(r,t.x,t.y,e):r.Ha(t,e,!0))return!0}}return!1},_h.defineProperty(Tr,{vf:"geometry"},function(){return null!==this.hb?this.hb:this.Mf},function(t){var e=this.hb;if(e!==t){this.Mf=this.hb=null!==t?t.freeze():null;var i=this.U;null!==i&&(i.ck=NaN),this.I(),this.h("geometry",e,t),qo(this)&&null!==(t=this.U)&&Lo(this,t,"geometryString")}}),_h.defineProperty(Tr,{VH:"geometryString"},function(){return null===this.vf?"":this.vf.toString()},function(t){t=sc(t);var e=t.normalize();this.vf=t,this.position=t=_h.xb(-e.x,-e.y),_h.v(t)}),_h.defineProperty(Tr,{iF:"isGeometryPositioned"},function(){return this.Hr},function(t){var e=this.Hr;e!==t&&(this.Hr=t,this.I(),this.h("isGeometryPositioned",e,t))}),Tr.prototype.Ke=function(){this.hb=null},_h.defineProperty(Tr,{fill:"fill"},function(){return this.zd},function(t){var e=this.zd;e!==t&&(t instanceof mo&&t.freeze(),this.zd=t,this.na(),this.h("fill",e,t))}),_h.defineProperty(Tr,{stroke:"stroke"},function(){return this.qc},function(t){var e=this.qc;e!==t&&(t instanceof mo&&t.freeze(),this.qc=t,this.na(),this.h("stroke",e,t))}),_h.defineProperty(Tr,{kb:"strokeWidth"},function(){return this.fi},function(t){var e=this.fi;if(e!==t)if(0<=t){this.fi=t,this.I();var i=this.U;null!==i&&(i.ck=NaN),this.h("strokeWidth",e,t)}else _h.Ea(t,"value >= 0",Tr,"strokeWidth:value")}),_h.defineProperty(Tr,{KL:"strokeCap"},function(){return this.tp},function(t){var e=this.tp;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?_h.Ea(t,'"butt", "round", or "square"',Tr,"strokeCap"):(this.tp=t,this.na(),this.h("strokeCap",e,t)))}),_h.defineProperty(Tr,{ML:"strokeJoin"},function(){return this.wp},function(t){var e=this.wp;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?_h.Ea(t,'"miter", "bevel", or "round"',Tr,"strokeJoin"):(this.wp=t,this.na(),this.h("strokeJoin",e,t)))}),_h.defineProperty(Tr,{NL:"strokeMiterLimit"},function(){return this.cn},function(t){var e=this.cn;if(e!==t)if(1<=t){this.cn=t,this.na();var i=this.U;null!==i&&(i.ck=NaN),this.h("strokeMiterLimit",e,t)}else _h.Ea(t,"value >= 1",Tr,"strokeWidth:value")}),_h.defineProperty(Tr,{mG:"strokeDashArray"},function(){return this.vp},function(t){var e=this.vp;if(e!==t){if(null===t||Array.isArray(t)||_h.yd(t,"Array",Tr,"strokeDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||_h.k("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}this.vp=t,this.na(),this.h("strokeDashArray",e,t)}}),_h.defineProperty(Tr,{LL:"strokeDashOffset"},function(){return this.sf},function(t){var e=this.sf;e!==t&&0<=t&&(this.sf=t,this.na(),this.h("strokeDashOffset",e,t))}),_h.defineProperty(Tr,{Cb:"figure"},function(){return this.Ho},function(t){var e=this.Ho;if(e!==t){var i=Ld[t];"function"==typeof i?i=t:(i=Ld[t.toLowerCase()])||_h.k("Unknown Shape.figure: "+t),e!==i&&(t=this.U,null!==t&&(t.ck=NaN),this.Ho=i,this.Mf=null,this.Ke(),this.I(),this.h("figure",e,i))}}),_h.defineProperty(Tr,{yq:"toArrow"},function(){return this.Ap},function(t){var e=this.Ap;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=aa(t);null===i?_h.k("Unknown Shape.toArrow: "+t):e!==i&&(this.Ap=i,this.Mf=null,this.Ke(),this.I(),jr(this),this.h("toArrow",e,i))}}),_h.defineProperty(Tr,{kA:"fromArrow"},function(){return this.Jo},function(t){var e=this.Jo;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=aa(t);null===i?_h.k("Unknown Shape.fromArrow: "+t):e!==i&&(this.Jo=i,this.Mf=null,this.Ke(),this.I(),jr(this),this.h("fromArrow",e,i))}}),_h.defineProperty(Tr,{A:"spot1"},function(){return this.di},function(t){_h.G(t,D,Tr,"spot1");var e=this.di;e.L(t)||(this.di=t=t.S(),this.I(),this.h("spot1",e,t))}),_h.defineProperty(Tr,{B:"spot2"},function(){return this.ei},function(t){_h.G(t,D,Tr,"spot2");var e=this.ei;e.L(t)||(this.ei=t=t.S(),this.I(),this.h("spot2",e,t))}),_h.defineProperty(Tr,{Cc:"parameter1"},function(){return this.ws},function(t){var e=this.ws;e!==t&&(this.ws=t,this.Ke(),this.I(),this.h("parameter1",e,t))}),_h.defineProperty(Tr,{uu:"parameter2"},function(){return this.xs},function(t){var e=this.xs;e!==t&&(this.xs=t,this.Ke(),this.I(),this.h("parameter2",e,t))}),_h.u(Tr,{Ia:"naturalBounds"},function(){if(null!==this.hb)return this.Tc.assign(this.hb.cb),this.Tc;var t=this.Ba;return new S(0,0,t.width,t.height)}),_h.defineProperty(Tr,{Mx:"pathPattern"},function(){return this.zs},function(t){var e=this.zs;e!==t&&(this.zs=t,this.na(),this.h("pathPattern",e,t))}),_h.defineProperty(Tr,{AL:"pathObject"},function(){return this.Mx},function(t){this.Mx=t}),_h.defineProperty(Tr,{mA:"geometryStretch"},function(){return this.xr},function(t){var e=this.xr;e!==t&&(_h.mb(t,Mo,Tr,"geometryStretch"),this.xr=t,this.h("geometryStretch",e,t))}),_h.defineProperty(Tr,{interval:"interval"},function(){return this.rg},function(t){var e=this.rg;if(t=Math.floor(t),e!==t&&0<=t){this.rg=t;var i=this.g;null!==i&&this.O===i.Dn&&wn(i),this.I(),i=this.O,null!==i&&i.type===nd&&(i.Tj=null),this.h("interval",e,t)}}),_h.defineProperty(Tr,{WE:"graduatedStart"},function(){return this.qg},function(t){var e=this.qg;e!==t&&(0>t?t=0:1<t&&(t=1),this.qg=t,this.I(),this.h("graduatedStart",e,t))}),_h.defineProperty(Tr,{UE:"graduatedEnd"},function(){return this.pg},function(t){var e=this.pg;e!==t&&(0>t?t=0:1<t&&(t=1),this.pg=t,this.I(),this.h("graduatedEnd",e,t))}),Tr.makeGeometry=function(t,e,i){var n=null;if("None"!==t.yq)n=tc[t.yq];else if("None"!==t.kA)n=tc[t.kA];else{var o=Ld[t.Cb];"string"==typeof o&&(o=Ld[o]),void 0===o&&_h.k("Unknown Shape.figure: "+t.Cb),n=o(t,e,i),n.Ro=e,n.Po=i}return null===n&&"function"==typeof(o=Ld.Rectangle)&&(n=o(t,e,i)),n},Tr.getFigureGenerators=function(){var t,e=new v("string","function");for(t in Ld)if(t!==t.toLowerCase()){var i=Ld[t];"function"==typeof i&&e.add(t,i)}return e.freeze(),e},Tr.defineFigureGenerator=function(t,e){_h.j(t,"string",Tr,"defineFigureGenerator:name"),"string"==typeof e?""!==e&&Ld[e]||_h.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+e):_h.j(e,"function",Tr,"defineFigureGenerator:func");var i=t.toLowerCase();""!==t&&"none"!==i&&t!==i||_h.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Ld[t]=e,Ld[i]=t},Tr.getArrowheadGeometries=function(){var t,e=new v("string",mt);for(t in Nd)if(void 0===tc[t]){var i=sc(Nd[t],!1);tc[t]=i,i=t.toLowerCase(),i!==t&&(tc[i]=t)}for(t in tc)t!==t.toLowerCase()&&(i=tc[t])instanceof mt&&e.add(t,i);return e.freeze(),e},Tr.defineArrowheadGeometry=function(t,e){_h.j(t,"string",Tr,"defineArrowheadGeometry:name");var i=null;"string"==typeof e?(_h.j(e,"string",Tr,"defineArrowheadGeometry:pathstr"),i=sc(e,!1)):(_h.G(e,mt,Tr,"defineArrowheadGeometry:pathstr"),i=e);var n=t.toLowerCase();""!==t&&"none"!==n&&t!==n||_h.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t),tc[t]=i,tc[n]=t},_h.La(Er,Mo),_h.fa("TextBlock",Er);var hd=/[ \u200b\u00ad]/;Er.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.Ed=this.Ed,t.qc=this.qc,t.ng=this.ng,t.wl=this.wl,t.mg=this.mg,t.Al=this.Al,t.Dm=this.Dm,t.Zj=this.Zj,t.Yj=this.Yj,t.Xi=this.Xi,t.rk=this.rk,t.je=this.je,t.Wv=this.Wv,t.kz=this.kz,t.jz=this.jz,t.wm=this.wm,t.Oi.Lp(this.Oi),t.qr=this.qr,t.jt=this.jt,t.xl=this.xl,t.it=this.it,t.Rq=this.Rq,t.Te=this.Te,t.bi=this.bi,t.ci=this.ci,t.fh=this.fh,t.Yo=this.Yo,t.rg=this.rg,t.qg=this.qg,t.pg=this.pg,t.ym=this.ym},Er.prototype.gc=function(t){t.De===Er?this.AG=t:Mo.prototype.gc.call(this,t)},Er.prototype.toString=function(){return 22<this.Ed.length?'TextBlock("'+this.Ed.substring(0,20)+'"...)':'TextBlock("'+this.Ed+'")'};var ud=new n,cd=0,fd=new n,dd=0,pd="...",gd="",yd=new V(null).xk;Er.getEllipsis=function(){return pd},Er.setEllipsis=function(t){pd=t,fd=new n,dd=0};var md;Er.None=md=_h.p(Er,"None",0);var vd;Er.WrapFit=vd=_h.p(Er,"WrapFit",1);var bd;Er.WrapDesiredSize=bd=_h.p(Er,"WrapDesiredSize",2);var xd;Er.OverflowClip=xd=_h.p(Er,"OverflowClip",0);var wd;Er.OverflowEllipsis=wd=_h.p(Er,"OverflowEllipsis",1),Er.prototype.I=function(){Mo.prototype.I.call(this),this.jz=this.kz=null},_h.defineProperty(Er,{font:"font"},function(){return this.ng},function(t){var e=this.ng;e!==t&&(this.ng=t,this.wm=null,this.I(),this.h("font",e,t))}),Er.isValidFont=function(t){var e=yd.font;if(t===e||"10px sans-serif"===t)return!0;yd.font="10px sans-serif";var i;yd.font=t;var n=yd.font;return"10px sans-serif"!==n?(yd.font=e,!0):(yd.font="19px serif",i=yd.font,yd.font=t,n=yd.font,yd.font=e,n!==i)},_h.defineProperty(Er,{text:"text"},function(){return this.Ed},function(t){var e=this.Ed;t=null!==t&&void 0!==t?t.toString():"",e!==t&&(this.Ed=t,this.I(),this.h("text",e,t))}),_h.defineProperty(Er,{textAlign:"textAlign"},function(){return this.wl},function(t){var e=this.wl;e!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t?(this.wl=t,this.na(),this.h("textAlign",e,t)):_h.Ea(t,'"start", "end", "left", "right", or "center"',Er,"textAlign"))}),_h.defineProperty(Er,{Ot:"flip"},function(){return this.mg},function(t){var e=this.mg;e!==t&&(_h.mb(t,Mo,Er,"flip"),this.mg=t,this.na(),this.h("flip",e,t))}),_h.defineProperty(Er,{TL:"verticalAlignment"},function(){return this.Al},function(t){var e=this.Al;e.L(t)||(t.Od()&&_h.k("TextBlock.verticalAlignment for "+this+" must be a real Spot, not:"+t),this.Al=t=t.S(),Io(this),this.h("verticalAlignment",e,t))}),_h.u(Er,{Ia:"naturalBounds"},function(){if(!this.Tc.H()){var t=Ir(this,this.Ed,this.Oi,999999).width,e=qr(this,t,this.Oi),i=this.Ba;isNaN(i.width)||(t=i.width),isNaN(i.height)||(e=i.height),M(this.Tc,t,e)}return this.Tc}),_h.defineProperty(Er,{xx:"isMultiline"},function(){return this.Dm},function(t){var e=this.Dm;e!==t&&(this.Dm=t,this.I(),this.h("isMultiline",e,t))}),_h.defineProperty(Er,{$K:"isUnderline"},function(){return this.Zj},function(t){var e=this.Zj;e!==t&&(this.Zj=t,this.na(),this.h("isUnderline",e,t))}),_h.defineProperty(Er,{ZK:"isStrikethrough"},function(){return this.Yj},function(t){var e=this.Yj;e!==t&&(this.Yj=t,this.na(),this.h("isStrikethrough",e,t))}),_h.defineProperty(Er,{AG:"wrap"},function(){return this.rk},function(t){var e=this.rk;e!==t&&(this.rk=t,this.I(),this.h("wrap",e,t))}),_h.defineProperty(Er,{overflow:"overflow"},function(){return this.Xi},function(t){var e=this.Xi;e!==t&&(this.Xi=t,this.I(),this.h("overflow",e,t))}),_h.defineProperty(Er,{stroke:"stroke"},function(){return this.qc},function(t){var e=this.qc;e!==t&&(t instanceof mo&&t.freeze(),this.qc=t,this.na(),this.h("stroke",e,t))}),_h.u(Er,{EI:"lineCount"},function(){return this.je}),_h.defineProperty(Er,{eA:"editable"},function(){return this.qr},function(t){var e=this.qr;e!==t&&(this.qr=t,this.h("editable",e,t))}),_h.defineProperty(Er,{oG:"textEditor"},function(){return this.jt},function(t){var e=this.jt;e!==t&&(this.jt=t,this.h("textEditor",e,t))}),_h.defineProperty(Er,{gA:"errorFunction"},function(){return this.Te},function(t){var e=this.Te;e!==t&&(null!==t&&_h.j(t,"function",Er,"errorFunction"),this.Te=t,this.h("errorFunction",e,t))}),_h.defineProperty(Er,{interval:"interval"},function(){return this.rg},function(t){var e=this.rg;if(t=Math.floor(t),e!==t&&0<=t){this.rg=t,this.I();var i=this.O;null!==i&&i.type===nd&&(i.Tj=null),this.h("interval",e,t)}}),_h.defineProperty(Er,{WE:"graduatedStart"},function(){return this.qg},function(t){var e=this.qg;e!==t&&(0>t?t=0:1<t&&(t=1),this.qg=t,this.I(),this.h("graduatedStart",e,t))}),_h.defineProperty(Er,{UE:"graduatedEnd"},function(){return this.pg},function(t){var e=this.pg;e!==t&&(0>t?t=0:1<t&&(t=1),this.pg=t,this.I(),this.h("graduatedEnd",e,t))}),_h.defineProperty(Er,{VE:"graduatedFunction"},function(){return this.ym},function(t){var e=this.ym;e!==t&&(null!==t&&_h.j(t,"function",Er,"graduatedFunction"),this.ym=t,this.I(),this.h("graduatedFunction",e,t))}),Er.prototype.yk=function(t,e){if(null!==this.qc&&0!==this.Ed.length&&null!==this.ng){var i=this.Ia.width,n=this.Ia.height,o=Gr(this),r=t.textAlign=this.wl,a=e.Kr;"start"===r&&(r=a?"right":"left"),"end"===r&&(r=a?"left":"right"),Fo(this,t,this.qc,!0,!1),(this.Zj||this.Yj)&&Fo(this,t,this.qc,!1,!1);var s=0,a=!1,l=_h.xb(0,0);this.ph.nb(l);var h=_h.xb(0,o);this.ph.nb(h);var u=l.uf(h);switch(_h.v(l),_h.v(h),l=e.scale,8>u*l*l&&(a=!0),e.qf!==t&&(a=!1),!1===e.pj("textGreeking")&&(a=!1),u=this.bi,l=this.ci,this.Ot){case Wf:t.translate(i,0),t.scale(-1,1);break;case qf:t.translate(0,n),t.scale(1,-1);break;case Hf:t.translate(i,n),t.scale(-1,-1)}var h=this.je,c=(u+o+l)*h;n>c&&(s=this.Al,s=s.y*n-s.y*c+s.offsetY);for(var c=this.Oi,f=0;f<h;f++){var d=c.pf[f],p=c.Qe[f];d>i&&(d=i);var s=s+u,g=p,p=t,y=s,m=i,v=o,b=r,x=0;a?("left"===b?x=0:"right"===b?x=m-d:"center"===b&&(x=(m-d)/2),p.fillRect(0+x,y+.25*v,d,1)):("left"===b?x=0:"right"===b?x=m:"center"===b&&(x=m/2),p.fillText(g,0+x,y+v-.25*v),g=v/20|0,0===g&&(g=1),"right"===b?x-=d:"center"===b&&(x-=d/2),this.Zj&&(p.beginPath(),p.lineWidth=g,p.moveTo(0+x,y+v-.2*v),p.lineTo(0+x+d,y+v-.2*v),p.stroke()),this.Yj&&(p.beginPath(),p.lineWidth=g,y=y+v-v/2.2|0,0!=g%2&&(y+=.5),p.moveTo(0+x,y),p.lineTo(0+x+d,y),p.stroke())),s+=o+l}switch(this.Ot){case Wf:t.scale(-1,1),t.translate(-i,0);break;case qf:t.scale(1,-1),t.translate(0,-n);break;case Hf:t.scale(-1,-1),t.translate(-i,-n)}}},Er.prototype.computeAngle=function(t,e){var i=0;switch(t){default:case qd:i=0;break;case Jd:i=e;break;case Yd:i=e+90;break;case $d:i=e-90;break;case Xd:i=e+180;break;case Qd:i=ft(e),90<i&&270>i&&(i-=180);break;case Zd:i=ft(e+90),90<i&&270>i&&(i-=180);break;case tp:i=ft(e-90),90<i&&270>i&&(i-=180);break;case ep:if(45<(i=ft(e))&&135>i||225<i&&315>i)return 0;90<i&&270>i&&(i-=180)}return ft(i)},Er.prototype.Nn=function(t,e,i,n){this.Yo=t;var o=this.Oi;o.reset();var r=0,a=0;if(isNaN(this.Ba.width)){if(r=this.Ed.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),0===r.length)r=0;else if(this.xx){for(var s=a=0,l=!1;!l;){var h=r.indexOf("\n",s);-1===h&&(h=r.length,l=!0),s=zr(r.substr(s,h-s).replace(/^\s+|\s+$/g,""),this.ng),s>a&&(a=s),s=h+1}r=a}else a=r.indexOf("\n",0),0<=a&&(r=r.substr(0,a)),r=s=zr(r,this.ng);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.Ba.width;if(null!==this.O&&(r=Math.min(r,this.O.Bf.width),r=Math.max(r,this.O.zh.width)),a=qr(this,r,o),h=a=isNaN(this.Ba.height)?Math.min(a,e/this.scale):this.Ba.height,0!==o.ef&&1!==o.Qe.length&&this.Xi===wd&&(e=this.ng,l=this.Xi===wd?Rr(e):0,s=this.bi+this.ci,s=Math.max(0,Gr(this)+s),!((h=Math.min(this.MI-1,Math.max(Math.floor(h/s+.01)-1,0)))+1>=o.Qe.length))){for(s=o.Qe[h],t=Math.max(1,t-l);zr(s,e)>t&&1<s.length;)s=s.substr(0,s.length-1);s+=pd,t=zr(s,e),o.Qe[h]=s,o.Qe=o.Qe.slice(0,h+1),o.pf[h]=t,o.pf=o.pf.slice(0,h+1),o.gj=o.Qe.length,o.ef=Math.max(o.ef,t),this.je=o.gj}(this.AG===vd||isNaN(this.Ba.width))&&(r=o.ef,isNaN(this.Ba.width)&&(r=Math.max(8,r))),r=Math.max(i,r),a=Math.max(n,a),M(this.Tc,r,a),No(this,0,0,r,a)},Er.prototype.ij=function(t,e,i,n){Bo(this,t,e,i,n)},_h.defineProperty(Er,{pB:"textValidation"},function(){return this.xl},function(t){var e=this.xl;e!==t&&(null!==t&&_h.j(t,"function",Er,"textValidation"),this.xl=t,this.h("textValidation",e,t))}),_h.defineProperty(Er,{nG:"textEdited"},function(){return this.it},function(t){var e=this.it;e!==t&&(null!==t&&_h.j(t,"function",Er,"textEdited"),this.it=t,this.h("textEdited",e,t))}),_h.defineProperty(Er,{HL:"spacingAbove"},function(){return this.bi},function(t){var e=this.bi;e!==t&&(this.bi=t,this.h("spacingAbove",e,t))}),_h.defineProperty(Er,{IL:"spacingBelow"},function(){return this.ci},function(t){var e=this.ci;e!==t&&(this.ci=t,this.h("spacingBelow",e,t))}),_h.defineProperty(Er,{MI:"maxLines"},function(){return this.fh},function(t){var e=this.fh;e!==t&&(t=Math.floor(t),0>=t&&_h.Ea(t,"> 0",Er,"maxLines"),this.fh=t,this.h("maxLines",e,t),this.I())}),_h.u(Er,{lL:"metrics"},function(){return this.Oi}),_h.defineProperty(Er,{xK:"choices"},function(){return this.Rq},function(t){var e=this.Rq;e!==t&&(null===t||Array.isArray(t)||_h.yd(t,"Array",Er,"choices:value"),this.Rq=t,this.h("choices",e,t))}),Wr.prototype.reset=function(){this.ef=this.gj=0,this.pf=[],this.Qe=[]},Wr.prototype.Lp=function(t){this.gj=t.gj,this.ef=t.ef,this.pf=_h.Il(t.pf),this.Qe=_h.Il(t.Qe)},_h.u(Wr,{tK:"arrSize"},function(){return this.pf}),_h.u(Wr,{uK:"arrText"},function(){return this.Qe}),_h.u(Wr,{kL:"maxLineWidth"},function(){return this.ef}),_h.La(Hr,Mo),_h.fa("Picture",Hr),Hr.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.element=this.Se,t.bt=this.bt,t.jk=this.jk.S(),t.Mo=this.Mo,t.mg=this.mg,t.Te=this.Te,t.gi=this.gi,t.Lo=this.Lo.S(),t.xv=this.xv,t.op=this.op},Hr.prototype.gc=function(t){t===jf||t===Gf||t===Rf?this.kI=t:Mo.prototype.gc.call(this,t)},Hr.prototype.toString=function(){return"Picture("+this.source+")#"+_h.Kd(this)};var kd,Sd=new n,Md=0,Pd=[];Hr.clearCache=kd=function(t){void 0===t&&(t=""),_h.j(t,"string",Hr,"clearCache:url"),""!==t?Sd[t]&&(delete Sd[t],Md--):(Sd=new n,Md=0)},_h.defineProperty(Hr,{element:"element"},function(){return this.Se},function(t){var e=this.Se;if(e!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||_h.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.ez=t instanceof HTMLCanvasElement,this.Se=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.Ko instanceof Event&&null!==this.Te&&this.Te(this,t.Ko),!0===t.Kv&&null!==this.gi&&this.gi(this,t.wz),t.Kv=!0,this.Ba.H()||(_o(this,!1),this.I());else{var i=this;t.FC||(t.addEventListener("load",function(e){Ur(t,e),i.Ba.H()||(_o(i,!1),i.I())}),t.addEventListener("error",function(e){_r(t,e)}),t.FC=!0)}this.h("element",e,t),this.na()}}),_h.defineProperty(Hr,{source:"source"},function(){return this.bt},function(t){var e=this.bt;if(e!==t){_h.j(t,"string",Hr,"source"),this.bt=t;var i=Sd,n=this.g;if(void 0!==i[t])var o=i[t].Gp[0].source;else{30<Md&&(kd(),i=Sd);var o=_h.createElement("img"),r=this;o.addEventListener("load",function(t){Ur(o,t),r.Ba.H()||(_o(r,!1),r.I())}),o.addEventListener("error",function(t){_r(o,t)}),o.FC=!0;var a=this.op;null!==a&&(o.crossOrigin=a(this)),o.src=t,i[t]=new Kr(o),Md++}null!==n&&Dn(n,this),this.element=o,null!==n&&An(n,this),this.I(),this.na(),this.h("source",e,t)}}),_h.defineProperty(Hr,{GL:"sourceCrossOrigin"},function(){return this.op},function(t){if(this.op!==t&&(null!==t&&_h.j(t,"function",Hr,"sourceCrossOrigin"),this.op=t,null!==this.element)){var e=this.element.src;null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}),_h.defineProperty(Hr,{Dj:"sourceRect"},function(){return this.jk
},function(t){var e=this.jk;e.L(t)||(_h.G(t,S,Hr,"sourceRect"),this.jk=t=t.S(),this.na(),this.h("sourceRect",e,t))}),_h.defineProperty(Hr,{kI:"imageStretch"},function(){return this.Mo},function(t){var e=this.Mo;e!==t&&(_h.mb(t,Mo,Hr,"imageStretch"),this.Mo=t,this.na(),this.h("imageStretch",e,t))}),_h.defineProperty(Hr,{Ot:"flip"},function(){return this.mg},function(t){var e=this.mg;e!==t&&(_h.mb(t,Mo,Hr,"flip"),this.mg=t,this.na(),this.h("flip",e,t))}),_h.defineProperty(Hr,{TK:"imageAlignment"},function(){return this.Lo},function(t){_h.G(t,D,Hr,"imageAlignment");var e=this.Lo;e.L(t)||(this.Lo=t=t.S(),this.I(),this.h("imageAlignment",e,t))}),_h.defineProperty(Hr,{gA:"errorFunction"},function(){return this.Te},function(t){var e=this.Te;e!==t&&(null!==t&&_h.j(t,"function",Hr,"errorFunction"),this.Te=t,this.h("errorFunction",e,t))}),_h.defineProperty(Hr,{QL:"successFunction"},function(){return this.gi},function(t){var e=this.gi;e!==t&&(null!==t&&_h.j(t,"function",Hr,"successFunction"),this.gi=t,this.h("successFunction",e,t))}),Hr.prototype.yk=function(t,e){var i=this.Se;if(null!==i){var n=i.src;if(null!==n&&""!==n||_h.k('Element has no source ("src") attribute: '+i),!(i.Ko instanceof Event)&&!0===i.Kv){var n=this.Ia,o=0,r=0,a=this.ez,s=a?+i.width:i.naturalWidth,a=a?+i.height:i.naturalHeight;if(void 0===s&&i.videoWidth&&(s=i.videoWidth),void 0===a&&i.videoHeight&&(a=i.videoHeight),s=s||n.width,a=a||n.height,0!==s&&0!==a){var l=s,h=a;this.Dj.H()&&(o=this.jk.x,r=this.jk.y,s=this.jk.width,a=this.jk.height);var u=s,c=a,f=this.Mo,d=this.Lo;switch(f){case jf:if(this.Dj.H())break;u>=n.width&&(o=o+d.offsetX+(u*d.x-n.width*d.x)),c>=n.height&&(r=r+d.offsetY+(c*d.y-n.height*d.y)),s=Math.min(n.width,u),a=Math.min(n.height,c);break;case zf:u=n.width,c=n.height;break;case Gf:case Rf:var p=0;f===Gf?(p=Math.min(n.height/c,n.width/u),u*=p,c*=p):f===Rf&&(p=Math.max(n.height/c,n.width/u),u*=p,c*=p,u>=n.width&&(o=(o+d.offsetX+(u*d.x-n.width*d.x)/u)*s),c>=n.height&&(r=(r+d.offsetY+(c*d.y-n.height*d.y)/c)*a),s*=1/(u/n.width),a*=1/(c/n.height),u=n.width,c=n.height)}var f=this.oj()*e.scale,g=s*a/(u*f*c*f),p=Sd[this.source],f=null;if(void 0!==p&&16<g){2>p.Gp.length&&(Jr(p,4,l,h),Jr(p,16,l,h));for(var l=p.Gp,h=l.length,f=l[0],y=0;y<h&&l[y].jq*l[y].jq<g;y++)f=l[y]}if(!e.Eo){if(null===this.xp)if(null===this.Se)this.xp=!1;else{l=new V(null).xk,l.drawImage(this.Se,0,0);try{l.getImageData(0,0,1,1).data[3]&&(this.xp=!1),this.xp=!1}catch(t){this.xp=!0}}if(this.xp)return}switch(l=0,u<n.width&&(l=d.offsetX+(n.width*d.x-u*d.x)),h=0,c<n.height&&(h=d.offsetY+(n.height*d.y-c*d.y)),this.Ot){case Wf:t.translate(Math.min(n.width,u),0),t.scale(-1,1);break;case qf:t.translate(0,Math.min(n.height,c)),t.scale(1,-1);break;case Hf:t.translate(Math.min(n.width,u),Math.min(n.height,c)),t.scale(-1,-1)}if(e.pj("pictureRatioOptimization")&&!e.fz&&void 0!==p&&null!==f&&1!==f.jq){t.save(),p=f.jq;try{t.drawImage(f.source,o/p,r/p,Math.min(f.source.width,s/p),Math.min(f.source.height,a/p),l,h,Math.min(n.width,u),Math.min(n.height,c))}catch(t){this.xv=!1}t.restore()}else try{t.drawImage(i,o,r,s,a,l,h,Math.min(n.width,u),Math.min(n.height,c))}catch(t){this.xv=!1}switch(this.Ot){case Wf:t.scale(-1,1),t.translate(-Math.min(n.width,u),0);break;case qf:t.scale(1,-1),t.translate(0,-Math.min(n.height,c));break;case Hf:t.scale(-1,-1),t.translate(-Math.min(n.width,u),-Math.min(n.height,c))}}}}},_h.u(Hr,{Ia:"naturalBounds"},function(){return this.Tc}),Hr.prototype.Nn=function(t,e,i,n){var o=this.Ba,r=Oo(this,!0),a=this.Se,s=this.ez;(s||!this.Uv&&a&&a.complete)&&(this.Uv=!0),null===a&&(isFinite(t)||(t=0),isFinite(e)||(e=0)),isFinite(o.width)||r===zf||r===Of?(isFinite(t)||(t=this.Dj.H()?this.Dj.width:s?+a.width:a.naturalWidth),i=0):null!==a&&!1!==this.Uv&&(t=this.Dj.H()?this.Dj.width:s?+a.width:a.naturalWidth),isFinite(o.height)||r===zf||r===If?(isFinite(e)||(e=this.Dj.H()?this.Dj.height:s?+a.height:a.naturalHeight),n=0):null!==a&&!1!==this.Uv&&(e=this.Dj.H()?this.Dj.height:s?+a.height:a.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height),o=this.Bf,r=this.zh,i=Math.max(i,r.width),n=Math.max(n,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(i,t),e=Math.max(n,e),null===a||a.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),M(this.Tc,t,e),No(this,0,0,t,e)},Hr.prototype.ij=function(t,e,i,n){Bo(this,t,e,i,n)},Vh=$r.prototype,Vh.reset=function(){this.o=new mt,this.Vb=null},Vh.$a=function(t){null===this.o&&_h.k("StreamGeometryContext has been closed"),null===this.Vb&&_h.k("Need to call beginFigure first"),this.Vb.Zl=t},Vh.moveTo=function(t,e,i){void 0===i&&(i=!1),null===this.o&&_h.k("StreamGeometryContext has been closed"),null===this.Vb&&_h.k("Need to call beginFigure first");var n=new Tt(lc);n.D=t,n.F=e,i&&n.close(),this.Vb.vb.add(n)},Vh.lineTo=function(t,e,i){void 0===i&&(i=!1),null===this.o&&_h.k("StreamGeometryContext has been closed"),null===this.Vb&&_h.k("Need to call beginFigure first");var n=new Tt(hc);n.D=t,n.F=e,i&&n.close(),this.Vb.vb.add(n)},Vh.arcTo=function(t,e,i,n,o,r,a){void 0===r&&(r=0),void 0===a&&(a=!1),null===this.o&&_h.k("StreamGeometryContext has been closed"),null===this.Vb&&_h.k("Need to call beginFigure first");var s=new Tt(fc);s.ye=t,s.of=e,s.ka=i,s.ra=n,s.radiusX=o,s.radiusY=0!==r?r:o,a&&s.close(),this.Vb.vb.add(s)};var Td,Ld={None:"Rectangle",Rectangle:function(t,e,i){return t=new mt,t.type=nc,t.ia=0,t.ga=0,t.D=e,t.F=i,t},Square:function(t,e,i){return t=new mt,t.Zd=Gf,t.type=nc,t.ia=0,t.ga=0,t.D=Math.min(e,i),t.F=Math.min(e,i),t},Ellipse:function(t,e,i){return t=new mt,t.type=oc,t.ia=0,t.ga=0,t.D=e,t.F=i,t.A=Xu,t.B=Qu,t},Circle:function(t,e,i){return t=new mt,t.Zd=Gf,t.type=oc,t.ia=0,t.ga=0,t.D=Math.min(e,i),t.F=Math.min(e,i),t.A=Xu,t.B=Qu,t},Connector:"Ellipse",TriangleRight:function(t,e,i){t=new mt;var n=new Pt,o=new Tt;return o.D=e,o.F=.5*i,n.vb.add(o),e=new Tt,e.D=0,e.F=i,n.vb.add(e.close()),t.dc.add(n),t.A=new D(0,.25),t.B=new D(.5,.75),t},TriangleDown:function(t,e,i){t=new mt;var n=new Pt,o=new Tt;return o.D=e,o.F=0,n.vb.add(o),o=new Tt,o.D=.5*e,o.F=i,n.vb.add(o.close()),t.dc.add(n),t.A=new D(.25,0),t.B=new D(.75,.5),t},TriangleLeft:function(t,e,i){t=new mt;var n=new Pt;n.ia=e,n.ga=i;var o=new Tt;return o.D=0,o.F=.5*i,n.vb.add(o),i=new Tt,i.D=e,i.F=0,n.vb.add(i.close()),t.dc.add(n),t.A=new D(.5,.25),t.B=new D(1,.75),t},TriangleUp:function(t,e,i){t=new mt;var n=new Pt;n.ia=e,n.ga=i;var o=new Tt;return o.D=0,o.F=i,n.vb.add(o),i=new Tt,i.D=.5*e,i.F=0,n.vb.add(i.close()),t.dc.add(n),t.A=new D(.25,.5),t.B=new D(.75,1),t},Line1:function(t,e,i){return t=new mt,t.type=ic,t.ia=0,t.ga=0,t.D=e,t.F=i,t},Line2:function(t,e,i){return t=new mt,t.type=ic,t.ia=e,t.ga=0,t.D=0,t.F=i,t},MinusLine:"LineH",LineH:function(t,e,i){return t=new mt,t.type=ic,t.ia=0,t.ga=i/2,t.D=e,t.F=i/2,t},LineV:function(t,e,i){return t=new mt,t.type=ic,t.ia=e/2,t.ga=0,t.D=e/2,t.F=i,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),ta(t,ju*e,0,1*e,(1-ju)*i,e,i),e=t.o,_h.q(t),e},Curve2:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),ta(t,0,ju*i,(1-ju)*e,i,e,i),e=t.o,_h.q(t),e},Curve3:function(t,e,i){return t=_h.s(),Xr(t,1*e,0,!1),ta(t,1*e,ju*i,ju*e,1*i,0,1*i),e=t.o,_h.q(t),e},Curve4:function(t,e,i){return t=_h.s(),Xr(t,1*e,0,!1),ta(t,(1-ju)*e,0,0,(1-ju)*i,0,1*i),e=t.o,_h.q(t),e},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0*i,!0),t.lineTo(0*e,1*i),t.lineTo(1*e,1*i,!0),e=t.o,e.A=new D(.25,.5),e.B=new D(.75,1),_h.q(t),e},Decision:"Diamond",Diamond:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!0),t.lineTo(0,.5*i),t.lineTo(.5*e,1*i),t.lineTo(1*e,.5*i,!0),e=t.o,e.A=new D(.25,.25),e.B=new D(.75,.75),_h.q(t),e},Pentagon:function(t,e,i){var n=ra(5);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;5>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.2,.22),e.B=new D(.8,.9),_h.q(t),e},DataTransmission:"Hexagon",Hexagon:function(t,e,i){var n=ra(6);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;6>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.07,.25),e.B=new D(.93,.75),_h.q(t),e},Heptagon:function(t,e,i){var n=ra(7);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;7>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.2,.15),e.B=new D(.8,.85),_h.q(t),e},Octagon:function(t,e,i){var n=ra(8);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;8>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.15,.15),e.B=new D(.85,.85),_h.q(t),e},Nonagon:function(t,e,i){var n=ra(9);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;9>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.17,.13),e.B=new D(.82,.82),_h.q(t),e},Decagon:function(t,e,i){var n=ra(10);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;10>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.16,.16),e.B=new D(.84,.84),_h.q(t),e},Dodecagon:function(t,e,i){var n=ra(12);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;12>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.16,.16),e.B=new D(.84,.84),_h.q(t),e},FivePointedStar:function(t,e,i){var n=oa(5);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;10>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.312,.383),e.B=new D(.693,.765),_h.q(t),e},SixPointedStar:function(t,e,i){var n=oa(6);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;12>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.17,.251),e.B=new D(.833,.755),_h.q(t),e},SevenPointedStar:function(t,e,i){var n=oa(7);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;14>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.363,.361),e.B=new D(.641,.709),_h.q(t),e},EightPointedStar:function(t,e,i){var n=oa(8);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;16>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.252,.255),e.B=new D(.75,.75),_h.q(t),e},NinePointedStar:function(t,e,i){var n=oa(9);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;18>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.355,.361),e.B=new D(.645,.651),_h.q(t),e},TenPointedStar:function(t,e,i){var n=oa(10);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;20>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.281,.261),e.B=new D(.723,.748),_h.q(t),e},FivePointedBurst:function(t,e,i){var n=na(5);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ta(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.312,.383),e.B=new D(.693,.765),_h.q(t),e},SixPointedBurst:function(t,e,i){var n=na(6);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ta(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.17,.251),e.B=new D(.833,.755),_h.q(t),e},SevenPointedBurst:function(t,e,i){var n=na(7);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ta(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.363,.361),e.B=new D(.641,.709),_h.q(t),e},EightPointedBurst:function(t,e,i){var n=na(8);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ta(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.252,.255),e.B=new D(.75,.75),_h.q(t),e},NinePointedBurst:function(t,e,i){var n=na(9);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ta(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.355,.361),e.B=new D(.645,.651),_h.q(t),e},TenPointedBurst:function(t,e,i){var n=na(10);t=_h.s(),Xr(t,n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ta(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return _h.wa(n),Qr(t),e=t.o,e.A=new D(.281,.261),e.B=new D(.723,.748),_h.q(t),e},Cloud:function(t,e,i){return t=_h.s(),Xr(t,.08034461*e,.1944299*i,!0),ta(t,-.09239631*e,.07836421*i,.1406031*e,-.0542823*i,.2008615*e,.05349299*i),ta(t,.2450511*e,-.00697547*i,.3776197*e,-.01112067*i,.4338609*e,.074219*i),ta(t,.4539471*e,0,.6066018*e,-.02526587*i,.6558228*e,.07004196*i),ta(t,.6914277*e,-.01904177*i,.8921095*e,-.01220843*i,.8921095*e,.08370865*i),ta(t,1.036446*e,.04105738*i,1.020377*e,.3022052*i,.9147671*e,.3194596*i),ta(t,1.04448*e,.360238*i,.992256*e,.5219009*i,.9082935*e,.562044*i),ta(t,1.032337*e,.5771781*i,1.018411*e,.8120651*i,.9212406*e,.8217117*i),ta(t,1.028411*e,.9571472*i,.8556702*e,1.052487*i,.7592566*e,.9156953*i),ta(t,.7431877*e,1.009325*i,.5624123*e,1.021761*i,.5101666*e,.9310455*i),ta(t,.4820677*e,1.031761*i,.3030112*e,1.002796*i,.2609328*e,.9344623*i),ta(t,.2329994*e,1.01518*i,.03213784*e,1.01518*i,.08034461*e,.870098*i),ta(t,-.02812061*e,.9032597*i,-.01205169*e,.6835638*i,.06829292*e,.6545475*i),ta(t,-.01812061*e,.6089503*i,-.00606892*e,.4555777*i,.06427569*e,.4265613*i),ta(t,-.01606892*e,.3892545*i,-.01205169*e,.1944299*i,.08034461*e,.1944299*i),Qr(t),e=t.o,e.A=new D(.1,.1),e.B=new D(.9,.9),_h.q(t),e},Gate:"Crescent",Crescent:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),ta(t,1*e,0,1*e,1*i,0,1*i),ta(t,.5*e,.75*i,.5*e,.25*i,0,0),Qr(t),e=t.o,e.A=new D(.511,.19),e.B=new D(.776,.76),_h.q(t),e},FramedRectangle:function(t,e,i){var n=_h.s(),o=t?t.Cc:NaN;return t=t?t.uu:NaN,isNaN(o)&&(o=.1),isNaN(t)&&(t=.1),Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i,!0),Xr(n,o*e,t*i,!1,!0),n.lineTo(o*e,(1-t)*i),n.lineTo((1-o)*e,(1-t)*i),n.lineTo((1-o)*e,t*i,!0),e=n.o,e.A=new D(o,t),e.B=new D(1-o,1-t),_h.q(n),e},Delay:"HalfEllipse",HalfEllipse:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),ta(t,ju*e,0,1*e,(.5-ju/2)*i,1*e,.5*i),ta(t,1*e,(.5+ju/2)*i,ju*e,1*i,0,1*i),Qr(t),e=t.o,e.A=new D(0,.2),e.B=new D(.75,.8),_h.q(t),e},Heart:function(t,e,i){return t=_h.s(),Xr(t,.5*e,1*i,!0),ta(t,.1*e,.8*i,0,.5*i,0*e,.3*i),ta(t,0*e,0,.45*e,0,.5*e,.3*i),ta(t,.55*e,0,1*e,0,1*e,.3*i),ta(t,e,.5*i,.9*e,.8*i,.5*e,1*i),Qr(t),e=t.o,e.A=new D(.15,.29),e.B=new D(.86,.68),_h.q(t),e},Spade:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!0),t.lineTo(.51*e,.01*i),ta(t,.6*e,.2*i,e,.25*i,e,.5*i),ta(t,e,.8*i,.6*e,.8*i,.55*e,.7*i),ta(t,.5*e,.75*i,.55*e,.95*i,.75*e,i),t.lineTo(.25*e,i),ta(t,.45*e,.95*i,.5*e,.75*i,.45*e,.7*i),ta(t,.4*e,.8*i,0,.8*i,0,.5*i),ta(t,0,.25*i,.4*e,.2*i,.49*e,.01*i),Qr(t),e=t.o,e.A=new D(.19,.26),e.B=new D(.8,.68),_h.q(t),e},Club:function(t,e,i){t=_h.s(),Xr(t,.4*e,.6*i,!0),ta(t,.5*e,.75*i,.45*e,.95*i,.15*e,1*i),t.lineTo(.85*e,i),ta(t,.55*e,.95*i,.5*e,.75*i,.6*e,.6*i);var n=.2,o=.3,r=0,a=4*(Math.SQRT2-1)/3*n;return ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,(.5+o)*e,(.5+n+r)*i),ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,(.5+n+o)*e,(.5+r)*i),ta(t,(.5+n+o)*e,(.5-a+r)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o+.05)*e,(.5-a+r-.02)*i,.65*e,.36771243*i),n=.2,o=0,r=-.3,a=4*(Math.SQRT2-1)/3*n,ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,(.5+n+o)*e,(.5+r)*i),ta(t,(.5+n+o)*e,(.5-a+r)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o)*e,(.5-a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,.35*e,.36771243*i),n=.2,o=-.3,r=0,a=4*(Math.SQRT2-1)/3*n,ta(t,(.5+n+o-.05)*e,(.5-a+r-.02)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o)*e,(.5-a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,(.5+o)*e,(.5+n+r)*i),ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,.4*e,.6*i),Qr(t),e=t.o,e.A=new D(.06,.39),e.B=new D(.93,.58),_h.q(t),e},Ring:function(t,e,i){t=_h.s();var n=4*(Math.SQRT2-1)/3*.5;return Xr(t,e,.5*i,!0),ta(t,e,(.5-n)*i,(.5+n)*e,0,.5*e,0),ta(t,(.5-n)*e,0,0,(.5-n)*i,0,.5*i),ta(t,0,(.5+n)*i,(.5-n)*e,i,.5*e,i),ta(t,(.5+n)*e,i,e,(.5+n)*i,e,.5*i),n=4*(Math.SQRT2-1)/3*.4,Xr(t,.5*e,.1*i,!0,!0),ta(t,(.5+n)*e,.1*i,.9*e,(.5-n)*i,.9*e,.5*i),ta(t,.9*e,(.5+n)*i,(.5+n)*e,.9*i,.5*e,.9*i),ta(t,(.5-n)*e,.9*i,.1*e,(.5+n)*i,.1*e,.5*i),ta(t,.1*e,(.5-n)*i,(.5-n)*e,.1*i,.5*e,.1*i),e=t.o,e.A=new D(.146,.146),e.B=new D(.853,.853),e.Zd=Gf,_h.q(t),e},YinYang:function(t,e,i){var n=.5;t=_h.s(),n=.5,Xr(t,.5*e,0,!0),t.arcTo(270,180,.5*e,.5*e,.5*e),ta(t,1*e,n*i,0,n*i,n*e,0,!0);var n=.1,o=.25;return Xr(t,(.5+n)*e,o*i,!0,!0),t.arcTo(0,-360,.5*e,i*o,n*e),Qr(t),Xr(t,.5*e,0,!1),t.arcTo(270,-180,.5*e,.5*e,.5*e),t.$a(!1),o=.75,Xr(t,(.5+n)*e,o*i,!0),t.arcTo(0,360,.5*e,i*o,n*e),Qr(t),e=t.o,e.Zd=Gf,_h.q(t),e},Peace:function(t,e,i){t=_h.s();var n=4*(Math.SQRT2-1)/3*.5;Xr(t,e,.5*i,!0),ta(t,e,(.5-n)*i,(.5+n)*e,0,.5*e,0),ta(t,(.5-n)*e,0,0,(.5-n)*i,0,.5*i),ta(t,0,(.5+n)*i,(.5-n)*e,i,.5*e,i),ta(t,(.5+n)*e,i,e,(.5+n)*i,e,.5*i),n=4*(Math.SQRT2-1)/3*.4,Xr(t,.5*e,.1*i,!0,!0),ta(t,(.5+n)*e,.1*i,.9*e,(.5-n)*i,.9*e,.5*i),ta(t,.9*e,(.5+n)*i,(.5+n)*e,.9*i,.5*e,.9*i),ta(t,(.5-n)*e,.9*i,.1*e,(.5+n)*i,.1*e,.5*i),ta(t,.1*e,(.5-n)*i,(.5-n)*e,.1*i,.5*e,.1*i);var n=.07,o=0,r=.11*-.707,a=4*(Math.SQRT2-1)/3*n;return Xr(t,(.5+n+o)*e,(.5+r)*i,!0),ta(t,(.5+n+o)*e,(.5-a+r)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o)*e,(.5-a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,(.5+o)*e,(.5+n+r)*i),ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,(.5+n+o)*e,(.5+r)*i),n=.07,o=.11*-.707,r=.707*.11,a=4*(Math.SQRT2-1)/3*n,Xr(t,(.5+n+o)*e,(.5+r)*i,!0),ta(t,(.5+n+o)*e,(.5-a+r)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o)*e,(.5-a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,(.5+o)*e,(.5+n+r)*i),ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,(.5+n+o)*e,(.5+r)*i),n=.07,o=.707*.11,r=.707*.11,a=4*(Math.SQRT2-1)/3*n,Xr(t,(.5+n+o)*e,(.5+r)*i,!0),ta(t,(.5+n+o)*e,(.5-a+r)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o)*e,(.5-a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,(.5+o)*e,(.5+n+r)*i),ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,(.5+n+o)*e,(.5+r)*i),e=t.o,e.A=new D(.146,.146),e.B=new D(.853,.853),e.Zd=Gf,_h.q(t),e},NotAllowed:function(t,e,i){var n=.5*ju,o=.5;t=_h.s(),Xr(t,.5*e,(.5-o)*i,!0),ta(t,(.5-n)*e,(.5-o)*i,(.5-o)*e,(.5-n)*i,(.5-o)*e,.5*i),ta(t,(.5-o)*e,(.5+n)*i,(.5-n)*e,(.5+o)*i,.5*e,(.5+o)*i),ta(t,(.5+n)*e,(.5+o)*i,(.5+o)*e,(.5+n)*i,(.5+o)*e,.5*i),ta(t,(.5+o)*e,(.5-n)*i,(.5+n)*e,(.5-o)*i,.5*e,(.5-o)*i);var o=.4,n=.4*ju,r=_h.K(),a=_h.K(),s=_h.K(),l=_h.K();Z(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.42,r,a,s,l,l);var h=_h.K(),u=_h.K(),c=_h.K();Z(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.58,l,l,c,h,u);var f=_h.K(),d=_h.K(),p=_h.K();Z(.5,.5+o,.5-n,.5+o,.5-o,.5+n,.5-o,.5,.42,f,d,p,l,l);var g=_h.K(),y=_h.K(),m=_h.K();return Z(.5,.5+o,.5-n,.5+o,.5-o,.5+n,.5-o,.5,.58,l,l,m,g,y),Xr(t,m.x*e,m.y*i,!0,!0),ta(t,g.x*e,g.y*i,y.x*e,y.y*i,(.5-o)*e,.5*i),ta(t,(.5-o)*e,(.5-n)*i,(.5-n)*e,(.5-o)*i,.5*e,(.5-o)*i),ta(t,r.x*e,r.y*i,a.x*e,a.y*i,s.x*e,s.y*i),t.lineTo(m.x*e,m.y*i),Qr(t),Xr(t,p.x*e,p.y*i,!0,!0),t.lineTo(c.x*e,c.y*i),ta(t,h.x*e,h.y*i,u.x*e,u.y*i,(.5+o)*e,.5*i),ta(t,(.5+o)*e,(.5+n)*i,(.5+n)*e,(.5+o)*i,.5*e,(.5+o)*i),ta(t,f.x*e,f.y*i,d.x*e,d.y*i,p.x*e,p.y*i),Qr(t),_h.v(r),_h.v(a),_h.v(s),_h.v(l),_h.v(h),_h.v(u),_h.v(c),_h.v(f),_h.v(d),_h.v(p),_h.v(g),_h.v(y),_h.v(m),e=t.o,_h.q(t),e.Zd=Gf,e},Fragile:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.25*e,0),t.lineTo(.2*e,.15*i),t.lineTo(.3*e,.25*i),t.lineTo(.29*e,.33*i),t.lineTo(.35*e,.25*i),t.lineTo(.3*e,.15*i),t.lineTo(.4*e,0),t.lineTo(1*e,0),ta(t,1*e,.25*i,.75*e,.5*i,.55*e,.5*i),t.lineTo(.55*e,.9*i),t.lineTo(.7*e,.9*i),t.lineTo(.7*e,1*i),t.lineTo(.3*e,1*i),t.lineTo(.3*e,.9*i),t.lineTo(.45*e,.9*i),t.lineTo(.45*e,.5*i),ta(t,.25*e,.5*i,0,.25*i,0,0),Qr(t),e=t.o,e.A=new D(.25,0),e.B=new D(.75,.4),_h.q(t),e},HourGlass:function(t,e,i){return t=_h.s(),Xr(t,.65*e,.5*i,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(.35*e,.5*i),t.lineTo(0,0),t.lineTo(1*e,0),Qr(t),e=t.o,_h.q(t),e},Lightning:function(t,e,i){return t=_h.s(),Xr(t,0*e,.55*i,!0),t.lineTo(.75*e,0),t.lineTo(.25*e,.45*i),t.lineTo(.9*e,.48*i),t.lineTo(.4*e,1*i),t.lineTo(.65*e,.55*i),Qr(t),e=t.o,_h.q(t),e},Parallelogram1:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var n=_h.s();return Xr(n,t*e,0,!0),n.lineTo(1*e,0),n.lineTo((1-t)*e,1*i),n.lineTo(0,1*i),Qr(n),e=n.o,e.A=new D(t,0),e.B=new D(1-t,1),_h.q(n),e},Input:"Output",Output:function(t,e,i){return t=_h.s(),Xr(t,0,1*i,!0),t.lineTo(.1*e,0),t.lineTo(1*e,0),t.lineTo(.9*e,1*i),Qr(t),e=t.o,e.A=new D(.1,0),e.B=new D(.9,1),_h.q(t),e},Parallelogram2:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.25);var n=_h.s();return Xr(n,t*e,0,!0),n.lineTo(1*e,0),n.lineTo((1-t)*e,1*i),n.lineTo(0,1*i),Qr(n),e=n.o,e.A=new D(t,0),e.B=new D(1-t,1),_h.q(n),e},ThickCross:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.25);var n=_h.s();return Xr(n,(.5-t/2)*e,0,!0),n.lineTo((.5+t/2)*e,0),n.lineTo((.5+t/2)*e,(.5-t/2)*i),n.lineTo(1*e,(.5-t/2)*i),n.lineTo(1*e,(.5+t/2)*i),n.lineTo((.5+t/2)*e,(.5+t/2)*i),n.lineTo((.5+t/2)*e,1*i),n.lineTo((.5-t/2)*e,1*i),n.lineTo((.5-t/2)*e,(.5+t/2)*i),n.lineTo(0,(.5+t/2)*i),n.lineTo(0,(.5-t/2)*i),n.lineTo((.5-t/2)*e,(.5-t/2)*i),Qr(n),e=n.o,e.A=new D(.5-t/2,.5-t/2),e.B=new D(.5+t/2,.5+t/2),_h.q(n),e},ThickX:function(t,e,i){t=.25/Math.SQRT2;var n=_h.s();return Xr(n,.3*e,0,!0),n.lineTo(.5*e,.2*i),n.lineTo(.7*e,0),n.lineTo(1*e,.3*i),n.lineTo(.8*e,.5*i),n.lineTo(1*e,.7*i),n.lineTo(.7*e,1*i),n.lineTo(.5*e,.8*i),n.lineTo(.3*e,1*i),n.lineTo(0,.7*i),n.lineTo(.2*e,.5*i),n.lineTo(0,.3*i),Qr(n),e=n.o,e.A=new D(.5-t,.5-t),e.B=new D(.5+t,.5+t),_h.q(n),e},ThinCross:function(t,e,i){var n=t?t.Cc:NaN;return isNaN(n)&&(n=.1),t=_h.s(),Xr(t,(.5-n/2)*e,0,!0),t.lineTo((.5+n/2)*e,0),t.lineTo((.5+n/2)*e,(.5-n/2)*i),t.lineTo(1*e,(.5-n/2)*i),t.lineTo(1*e,(.5+n/2)*i),t.lineTo((.5+n/2)*e,(.5+n/2)*i),t.lineTo((.5+n/2)*e,1*i),t.lineTo((.5-n/2)*e,1*i),t.lineTo((.5-n/2)*e,(.5+n/2)*i),t.lineTo(0,(.5+n/2)*i),t.lineTo(0,(.5-n/2)*i),t.lineTo((.5-n/2)*e,(.5-n/2)*i),Qr(t),e=t.o,_h.q(t),e},ThinX:function(t,e,i){return t=_h.s(),Xr(t,.1*e,0,!0),t.lineTo(.5*e,.4*i),t.lineTo(.9*e,0),t.lineTo(1*e,.1*i),t.lineTo(.6*e,.5*i),t.lineTo(1*e,.9*i),t.lineTo(.9*e,1*i),t.lineTo(.5*e,.6*i),t.lineTo(.1*e,1*i),t.lineTo(0,.9*i),t.lineTo(.4*e,.5*i),t.lineTo(0,.1*i),Qr(t),e=t.o,_h.q(t),e},RightTriangle:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),Qr(t),e=t.o,e.A=new D(0,.5),e.B=new D(.5,1),_h.q(t),e},RoundedIBeam:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(1*e,0),ta(t,.5*e,.25*i,.5*e,.75*i,1*e,1*i),t.lineTo(0,1*i),ta(t,.5*e,.75*i,.5*e,.25*i,0,0),Qr(t),e=t.o,_h.q(t),e},RoundedRectangle:function(t,e,i){var n=t?t.Cc:NaN;isNaN(n)&&(n=5),n=Math.min(n,e/3),n=Math.min(n,i/3),t=n*ju;var o=_h.s();return Xr(o,n,0,!0),o.lineTo(e-n,0),ta(o,e-t,0,e,t,e,n),o.lineTo(e,i-n),ta(o,e,i-t,e-t,i,e-n,i),o.lineTo(n,i),ta(o,t,i,0,i-t,0,i-n),o.lineTo(0,n),ta(o,0,t,t,0,n,0),Qr(o),e=o.o,1<t?(e.A=new D(0,0,t,t),e.B=new D(1,1,-t,-t)):(e.A=iu,e.B=uu),_h.q(o),e},Border:function(t,e,i){var n=t?t.Cc:NaN;return isNaN(n)&&(n=5),n=Math.min(n,e/3),n=Math.min(n,i/3),t=_h.s(),Xr(t,n,0,!0),t.lineTo(e-n,0),ta(t,e-0,0,e,0,e,n),t.lineTo(e,i-n),ta(t,e,i-0,e-0,i,e-n,i),t.lineTo(n,i),ta(t,0,i,0,i-0,0,i-n),t.lineTo(0,n),ta(t,0,0,0,0,n,0),Qr(t),e=t.o,e.A=iu,e.B=uu,_h.q(t),e},SquareIBeam:function(t,e,i){var n=t?t.Cc:NaN;return isNaN(n)&&(n=.2),t=_h.s(),Xr(t,0,0,!0),t.lineTo(1*e,0),t.lineTo(1*e,n*i),t.lineTo((.5+n/2)*e,n*i),t.lineTo((.5+n/2)*e,(1-n)*i),t.lineTo(1*e,(1-n)*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,(1-n)*i),t.lineTo((.5-n/2)*e,(1-n)*i),t.lineTo((.5-n/2)*e,n*i),t.lineTo(0,n*i),Qr(t),e=t.o,_h.q(t),e},Trapezoid:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.2);var n=_h.s();return Xr(n,t*e,0,!0),n.lineTo((1-t)*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),e=n.o,e.A=new D(t,0),e.B=new D(1-t,1),_h.q(n),e},ManualLoop:"ManualOperation",ManualOperation:function(t,e,i){var n=t?t.Cc:NaN;return isNaN(n)&&(n=0),t=_h.s(),Xr(t,n,0,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(.9*e,1*i),t.lineTo(.1*e,1*i),Qr(t),e=t.o,e.A=new D(.1,0),e.B=new D(.9,1),_h.q(t),e},GenderMale:function(t,e,i){t=_h.s();var n=.4*ju,o=.4,r=_h.K(),a=_h.K(),s=_h.K(),l=_h.K();Xr(t,(.5-o)*e,.5*i,!0),ta(t,(.5-o)*e,(.5-n)*i,(.5-n)*e,(.5-o)*i,.5*e,(.5-o)*i),Z(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.44,s,l,a,r,r),ta(t,s.x*e,s.y*i,l.x*e,l.y*i,a.x*e,a.y*i);var h=_h.xb(a.x,a.y);Z(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.56,r,r,a,s,l);var u=_h.xb(a.x,a.y);return t.lineTo((.1*h.x+.855)*e,.1*h.y*i),t.lineTo(.85*e,.1*h.y*i),t.lineTo(.85*e,0),t.lineTo(1*e,0),t.lineTo(1*e,.15*i),t.lineTo((.1*u.x+.9)*e,.15*i),t.lineTo((.1*u.x+.9)*e,(.1*u.y+.05*.9)*i),t.lineTo(u.x*e,u.y*i),ta(t,s.x*e,s.y*i,l.x*e,l.y*i,(.5+o)*e,.5*i),ta(t,(.5+o)*e,(.5+n)*i,(.5+n)*e,(.5+o)*i,.5*e,(.5+o)*i),ta(t,(.5-n)*e,(.5+o)*i,(.5-o)*e,(.5+n)*i,(.5-o)*e,.5*i),o=.35,n=.35*ju,Xr(t,.5*e,(.5-o)*i,!0,!0),ta(t,(.5-n)*e,(.5-o)*i,(.5-o)*e,(.5-n)*i,(.5-o)*e,.5*i),ta(t,(.5-o)*e,(.5+n)*i,(.5-n)*e,(.5+o)*i,.5*e,(.5+o)*i),ta(t,(.5+n)*e,(.5+o)*i,(.5+o)*e,(.5+n)*i,(.5+o)*e,.5*i),ta(t,(.5+o)*e,(.5-n)*i,(.5+n)*e,(.5-o)*i,.5*e,(.5-o)*i),Xr(t,(.5-o)*e,.5*i,!0),_h.v(r),_h.v(a),_h.v(s),_h.v(l),_h.v(h),_h.v(u),e=t.o,e.A=new D(.202,.257),e.B=new D(.692,.839),e.Zd=Gf,_h.q(t),e},GenderFemale:function(t,e,i){t=_h.s();var n=.375,o=0,r=-.125,a=4*(Math.SQRT2-1)/3*n;return Xr(t,(.525+o)*e,(.5+n+r)*i,!0),ta(t,(.5+a+o)*e,(.5+n+r)*i,(.5+n+o)*e,(.5+a+r)*i,(.5+n+o)*e,(.5+r)*i),ta(t,(.5+n+o)*e,(.5-a+r)*i,(.5+a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5-a+o)*e,(.5-n+r)*i,(.5-n+o)*e,(.5-a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5+a+r)*i,(.5-a+o)*e,(.5+n+r)*i,(.475+o)*e,(.5+n+r)*i),t.lineTo(.475*e,.85*i),t.lineTo(.425*e,.85*i),t.lineTo(.425*e,.9*i),t.lineTo(.475*e,.9*i),t.lineTo(.475*e,1*i),t.lineTo(.525*e,1*i),t.lineTo(.525*e,.9*i),t.lineTo(.575*e,.9*i),t.lineTo(.575*e,.85*i),t.lineTo(.525*e,.85*i),Qr(t),n=.325,o=0,r=-.125,a=4*(Math.SQRT2-1)/3*n,Xr(t,(.5+n+o)*e,(.5+r)*i,!0,!0),ta(t,(.5+n+o)*e,(.5+a+r)*i,(.5+a+o)*e,(.5+n+r)*i,(.5+o)*e,(.5+n+r)*i),ta(t,(.5-a+o)*e,(.5+n+r)*i,(.5-n+o)*e,(.5+a+r)*i,(.5-n+o)*e,(.5+r)*i),ta(t,(.5-n+o)*e,(.5-a+r)*i,(.5-a+o)*e,(.5-n+r)*i,(.5+o)*e,(.5-n+r)*i),ta(t,(.5+a+o)*e,(.5-n+r)*i,(.5+n+o)*e,(.5-a+r)*i,(.5+n+o)*e,(.5+r)*i),Xr(t,(.525+o)*e,(.5+n+r)*i,!0),e=t.o,e.A=new D(.232,.136),e.B=new D(.782,.611),e.Zd=Gf,_h.q(t),e},PlusLine:function(t,e,i){return t=_h.s(),Xr(t,0,.5*i,!1),t.lineTo(1*e,.5*i),t.moveTo(.5*e,0),t.lineTo(.5*e,1*i),e=t.o,_h.q(t),e},XLine:function(t,e,i){return t=_h.s(),Xr(t,0,1*i,!1),t.lineTo(1*e,0),t.moveTo(0,0),t.lineTo(1*e,1*i),e=t.o,_h.q(t),e},AsteriskLine:function(t,e,i){t=_h.s();var n=.2/Math.SQRT2;return Xr(t,n*e,(1-n)*i,!1),t.lineTo((1-n)*e,n*i),t.moveTo(n*e,n*i),t.lineTo((1-n)*e,(1-n)*i),t.moveTo(0*e,.5*i),t.lineTo(1*e,.5*i),t.moveTo(.5*e,0*i),t.lineTo(.5*e,1*i),e=t.o,_h.q(t),e},CircleLine:function(t,e,i){var n=.5*ju;return t=_h.s(),Xr(t,1*e,.5*i,!1),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),e=t.o,e.A=new D(.146,.146),e.B=new D(.853,.853),e.Zd=Gf,_h.q(t),e},Pie:function(t,e,i){t=_h.s();var n=4*(Math.SQRT2-1)/3*.5;return Xr(t,(.5*Math.SQRT2/2+.5)*e,(.5-.5*Math.SQRT2/2)*i,!0),ta(t,.7*e,0*i,.5*e,0*i,.5*e,0*i),ta(t,(.5-n+0)*e,0*i,0*e,(.5-n+0)*i,0*e,.5*i),ta(t,0*e,(.5+n+0)*i,(.5-n+0)*e,1*i,.5*e,1*i),ta(t,(.5+n+0)*e,1*i,1*e,(.5+n+0)*i,1*e,.5*i),t.lineTo(.5*e,.5*i),Qr(t),e=t.o,_h.q(t),e},PiePiece:function(t,e,i){var n=ju/Math.SQRT2*.5,o=Math.SQRT2/2,r=1-Math.SQRT2/2;return t=_h.s(),Xr(t,e,i,!0),ta(t,e,(1-n)*i,(o+n)*e,(r+n)*i,o*e,r*i),t.lineTo(0,i),Qr(t),e=t.o,_h.q(t),e},StopSign:function(t,e,i){t=1/(Math.SQRT2+2);var n=_h.s();return Xr(n,t*e,0,!0),n.lineTo((1-t)*e,0),n.lineTo(1*e,t*i),n.lineTo(1*e,(1-t)*i),n.lineTo((1-t)*e,1*i),n.lineTo(t*e,1*i),n.lineTo(0,(1-t)*i),n.lineTo(0,t*i),Qr(n),e=n.o,e.A=new D(t/2,t/2),e.B=new D(1-t/2,1-t/2),_h.q(n),e},LogicImplies:function(t,e,i){var n=t?t.Cc:NaN;return isNaN(n)&&(n=.2),t=_h.s(),Xr(t,(1-n)*e,0*i,!1),t.lineTo(1*e,.5*i),t.lineTo((1-n)*e,i),t.moveTo(0,.5*i),t.lineTo(e,.5*i),e=t.o,e.A=iu,e.B=new D(.8,.5),_h.q(t),e},LogicIff:function(t,e,i){var n=t?t.Cc:NaN;return isNaN(n)&&(n=.2),t=_h.s(),Xr(t,(1-n)*e,0*i,!1),t.lineTo(1*e,.5*i),t.lineTo((1-n)*e,i),t.moveTo(0,.5*i),t.lineTo(e,.5*i),t.moveTo(n*e,0),t.lineTo(0,.5*i),t.lineTo(n*e,i),e=t.o,e.A=new D(.2,0),e.B=new D(.8,.5),_h.q(t),e},LogicNot:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,_h.q(t),e},LogicAnd:function(t,e,i){return t=_h.s(),Xr(t,0,1*i,!1),t.lineTo(.5*e,0),t.lineTo(1*e,1*i),e=t.o,e.A=new D(.25,.5),e.B=new D(.75,1),_h.q(t),e},LogicOr:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(.5*e,1*i),t.lineTo(1*e,0),e=t.o,e.A=new D(.219,0),e.B=new D(.78,.409),_h.q(t),e},LogicXor:function(t,e,i){t=_h.s(),Xr(t,.5*e,0,!1),t.lineTo(.5*e,1*i),t.moveTo(0,.5*i),t.lineTo(1*e,.5*i);var n=.5*ju;return ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),e=t.o,e.Zd=Gf,_h.q(t),e},LogicTruth:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(1*e,0),t.moveTo(.5*e,0),t.lineTo(.5*e,1*i),e=t.o,_h.q(t),e},LogicFalsity:function(t,e,i){return t=_h.s(),Xr(t,0,1*i,!1),t.lineTo(1*e,1*i),t.moveTo(.5*e,1*i),t.lineTo(.5*e,0),e=t.o,_h.q(t),e},LogicThereExists:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(1*e,0),t.lineTo(1*e,.5*i),t.lineTo(0,.5*i),t.moveTo(1*e,.5*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),e=t.o,_h.q(t),e},LogicForAll:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(.5*e,1*i),t.lineTo(1*e,0),t.moveTo(.25*e,.5*i),t.lineTo(.75*e,.5*i),e=t.o,e.A=new D(.25,0),e.B=new D(.75,.5),_h.q(t),e},LogicIsDefinedAs:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(e,0),t.moveTo(0,.5*i),t.lineTo(e,.5*i),t.moveTo(0,i),t.lineTo(e,i),e=t.o,e.A=new D(.01,.01),e.B=new D(.99,.49),_h.q(t),e},LogicIntersect:function(t,e,i){var n=.5*ju;return t=_h.s(),Xr(t,0,1*i,!1),t.lineTo(0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),t.lineTo(1*e,1*i),e=t.o,e.A=new D(0,.5),e.B=uu,_h.q(t),e},LogicUnion:function(t,e,i){var n=.5*ju;return t=_h.s(),Xr(t,1*e,0,!1),t.lineTo(1*e,.5*i),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),t.lineTo(0,0),e=t.o,e.A=iu,e.B=new D(1,.5),_h.q(t),e},Arrow:function(t,e,i){var n=t?t.Cc:NaN,o=t?t.uu:NaN;return isNaN(n)&&(n=.3),isNaN(o)&&(o=.3),t=_h.s(),Xr(t,0,(.5-o/2)*i,!0),t.lineTo((1-n)*e,(.5-o/2)*i),t.lineTo((1-n)*e,0),t.lineTo(1*e,.5*i),t.lineTo((1-n)*e,1*i),t.lineTo((1-n)*e,(.5+o/2)*i),t.lineTo(0,(.5+o/2)*i),Qr(t),e=t.o,e.A=new D(0,.5-o/2),n=lt(0,.5+o/2,1,.5+o/2,1-n,1,1,.5,_h.K()),e.B=new D(n.x,n.y),_h.v(n),_h.q(t),e},ISOProcess:"Chevron",Chevron:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.5*e,0),t.lineTo(1*e,.5*i),t.lineTo(.5*e,1*i),t.lineTo(0,1*i),t.lineTo(.5*e,.5*i),Qr(t),e=t.o,_h.q(t),e},DoubleArrow:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.3*e,.214*i),t.lineTo(.3*e,0),t.lineTo(1*e,.5*i),t.lineTo(.3*e,1*i),t.lineTo(.3*e,.786*i),t.lineTo(0,1*i),Qr(t),Xr(t,.3*e,.214*i,!1),t.lineTo(.3*e,.786*i),t.$a(!1),e=t.o,_h.q(t),e},DoubleEndArrow:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(.7*e,.7*i),t.lineTo(.3*e,.7*i),t.lineTo(.3*e,1*i),t.lineTo(0,.5*i),t.lineTo(.3*e,0),t.lineTo(.3*e,.3*i),t.lineTo(.7*e,.3*i),t.lineTo(.7*e,0),Qr(t),e=t.o,i=lt(0,.5,.3,0,0,.3,.3,.3,_h.K()),e.A=new D(i.x,i.y),i=lt(.7,1,1,.5,.7,.7,1,.7,i),e.B=new D(i.x,i.y),_h.v(i),_h.q(t),e},IBeamArrow:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(.7*e,.7*i),t.lineTo(.2*e,.7*i),t.lineTo(.2*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.2*e,0),t.lineTo(.2*e,.3*i),t.lineTo(.7*e,.3*i),t.lineTo(.7*e,0),Qr(t),e=t.o,e.A=new D(0,.3),i=lt(.7,1,1,.5,.7,.7,1,.7,_h.K()),e.B=new D(i.x,i.y),_h.v(i),_h.q(t),e},Pointer:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(0,1*i),t.lineTo(.2*e,.5*i),t.lineTo(0,0),Qr(t),e=t.o,e.A=new D(.2,.35),i=lt(.2,.65,1,.65,0,1,1,.5,_h.K()),e.B=new D(i.x,i.y),_h.v(i),_h.q(t),e},RoundedPointer:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(0,1*i),ta(t,.5*e,.75*i,.5*e,.25*i,0,0),Qr(t),e=t.o,e.A=new D(.4,.35),i=lt(.2,.65,1,.65,0,1,1,.5,_h.K()),e.B=new D(i.x,i.y),_h.v(i),_h.q(t),e},SplitEndArrow:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(.7*e,.7*i),t.lineTo(0,.7*i),t.lineTo(.2*e,.5*i),t.lineTo(0,.3*i),t.lineTo(.7*e,.3*i),t.lineTo(.7*e,0),Qr(t),e=t.o,e.A=new D(.2,.3),i=lt(.7,1,1,.5,.7,.7,1,.7,_h.K()),e.B=new D(i.x,i.y),_h.v(i),_h.q(t),e},MessageToUser:"SquareArrow",SquareArrow:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.7*e,0),Qr(t),e=t.o,e.A=iu,e.B=new D(.7,1),_h.q(t),e},Cone1:function(t,e,i){var n=.5*ju,o=.1*ju;return t=_h.s(),Xr(t,0,.9*i,!0),t.lineTo(.5*e,0),t.lineTo(1*e,.9*i),ta(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),
ta(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),Qr(t),e=t.o,e.A=new D(.25,.5),e.B=new D(.75,.97),_h.q(t),e},Cone2:function(t,e,i){return t=_h.s(),Xr(t,0,.9*i,!0),ta(t,(1-.85/.9)*e,1*i,.85/.9*e,1*i,1*e,.9*i),t.lineTo(.5*e,0),t.lineTo(0,.9*i),Qr(t),Xr(t,0,.9*i,!1),ta(t,(1-.85/.9)*e,.8*i,.85/.9*e,.8*i,1*e,.9*i),t.$a(!1),e=t.o,e.A=new D(.25,.5),e.B=new D(.75,.82),_h.q(t),e},Cube1:function(t,e,i){return t=_h.s(),Xr(t,.5*e,1*i,!0),t.lineTo(1*e,.85*i),t.lineTo(1*e,.15*i),t.lineTo(.5*e,0*i),t.lineTo(0*e,.15*i),t.lineTo(0*e,.85*i),Qr(t),Xr(t,.5*e,1*i,!1),t.lineTo(.5*e,.3*i),t.lineTo(0,.15*i),t.moveTo(.5*e,.3*i),t.lineTo(1*e,.15*i),t.$a(!1),e=t.o,e.A=new D(0,.3),e.B=new D(.5,.85),_h.q(t),e},Cube2:function(t,e,i){return t=_h.s(),Xr(t,0,.3*i,!0),t.lineTo(0*e,1*i),t.lineTo(.7*e,i),t.lineTo(1*e,.7*i),t.lineTo(1*e,0*i),t.lineTo(.3*e,0*i),Qr(t),Xr(t,0,.3*i,!1),t.lineTo(.7*e,.3*i),t.lineTo(1*e,0*i),t.moveTo(.7*e,.3*i),t.lineTo(.7*e,1*i),t.$a(!1),e=t.o,e.A=new D(0,.3),e.B=new D(.7,1),_h.q(t),e},MagneticData:"Cylinder1",Cylinder1:function(t,e,i){var n=.5*ju,o=.1*ju;return t=_h.s(),Xr(t,0,.1*i,!0),ta(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),t.lineTo(e,.9*i),ta(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),Xr(t,0,.1*i,!1),ta(t,0,(.1+o)*i,(.5-n)*e,.2*i,.5*e,.2*i),ta(t,(.5+n)*e,.2*i,1*e,(.1+o)*i,1*e,.1*i),t.$a(!1),e=t.o,e.A=new D(0,.2),e.B=new D(1,.9),_h.q(t),e},Cylinder2:function(t,e,i){var n=.5*ju,o=.1*ju;return t=_h.s(),Xr(t,0,.9*i,!0),t.lineTo(0,.1*i),ta(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),t.lineTo(1*e,.9*i),ta(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),Xr(t,0,.9*i,!1),ta(t,0,(.9-o)*i,(.5-n)*e,.8*i,.5*e,.8*i),ta(t,(.5+n)*e,.8*i,1*e,(.9-o)*i,1*e,.9*i),t.$a(!1),e=t.o,e.A=new D(0,.1),e.B=new D(1,.8),_h.q(t),e},Cylinder3:function(t,e,i){var n=.1*ju,o=.5*ju;return t=_h.s(),Xr(t,.1*e,0,!0),t.lineTo(.9*e,0),ta(t,(.9+n)*e,0,1*e,(.5-o)*i,1*e,.5*i),ta(t,1*e,(.5+o)*i,(.9+n)*e,1*i,.9*e,1*i),t.lineTo(.1*e,1*i),ta(t,(.1-n)*e,1*i,0,(.5+o)*i,0,.5*i),ta(t,0,(.5-o)*i,(.1-n)*e,0,.1*e,0),Xr(t,.1*e,0,!1),ta(t,(.1+n)*e,0,.2*e,(.5-o)*i,.2*e,.5*i),ta(t,.2*e,(.5+o)*i,(.1+n)*e,1*i,.1*e,1*i),t.$a(!1),e=t.o,e.A=new D(.2,0),e.B=new D(.9,1),_h.q(t),e},DirectData:"Cylinder4",Cylinder4:function(t,e,i){var n=.1*ju,o=.5*ju;return t=_h.s(),Xr(t,.9*e,0,!0),ta(t,(.9+n)*e,0,1*e,(.5-o)*i,1*e,.5*i),ta(t,1*e,(.5+o)*i,(.9+n)*e,1*i,.9*e,1*i),t.lineTo(.1*e,1*i),ta(t,(.1-n)*e,1*i,0,(.5+o)*i,0,.5*i),ta(t,0,(.5-o)*i,(.1-n)*e,0,.1*e,0),t.lineTo(.9*e,0),Xr(t,.9*e,0,!1),ta(t,(.9-n)*e,0,.8*e,(.5-o)*i,.8*e,.5*i),ta(t,.8*e,(.5+o)*i,(.9-n)*e,1*i,.9*e,1*i),t.$a(!1),e=t.o,e.A=new D(.1,0),e.B=new D(.8,1),_h.q(t),e},Prism1:function(t,e,i){return t=_h.s(),Xr(t,.25*e,.25*i,!0),t.lineTo(.75*e,0),t.lineTo(e,.5*i),t.lineTo(.5*e,i),t.lineTo(0,i),Qr(t),Xr(t,.25*e,.25*i,!1),t.lineTo(.5*e,i),t.$a(!1),e=t.o,e.A=new D(.408,.172),e.B=new D(.833,.662),_h.q(t),e},Prism2:function(t,e,i){return t=_h.s(),Xr(t,0,.25*i,!0),t.lineTo(.75*e,0),t.lineTo(1*e,.25*i),t.lineTo(.75*e,.75*i),t.lineTo(0,1*i),Qr(t),Xr(t,0,i,!1),t.lineTo(.25*e,.5*i),t.lineTo(e,.25*i),t.moveTo(0,.25*i),t.lineTo(.25*e,.5*i),t.$a(!1),e=t.o,e.A=new D(.25,.5),e.B=new D(.75,.75),_h.q(t),e},Pyramid1:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!0),t.lineTo(e,.75*i),t.lineTo(.5*e,1*i),t.lineTo(0,.75*i),Qr(t),Xr(t,.5*e,0,!1),t.lineTo(.5*e,1*i),t.$a(!1),e=t.o,e.A=new D(.25,.367),e.B=new D(.75,.875),_h.q(t),e},Pyramid2:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!0),t.lineTo(e,.85*i),t.lineTo(.5*e,1*i),t.lineTo(0,.85*i),Qr(t),Xr(t,.5*e,0,!1),t.lineTo(.5*e,.7*i),t.lineTo(0,.85*i),t.moveTo(.5*e,.7*i),t.lineTo(1*e,.85*i),t.$a(!1),e=t.o,e.A=new D(.25,.367),e.B=new D(.75,.875),_h.q(t),e},Actor:function(t,e,i){var n=.2*ju,o=.1*ju,r=.5,a=.1;return t=_h.s(),Xr(t,r*e,(a+.1)*i,!0),ta(t,(r-n)*e,(a+.1)*i,(r-.2)*e,(a+o)*i,(r-.2)*e,a*i),ta(t,(r-.2)*e,(a-o)*i,(r-n)*e,(a-.1)*i,r*e,(a-.1)*i),ta(t,(r+n)*e,(a-.1)*i,(r+.2)*e,(a-o)*i,(r+.2)*e,a*i),ta(t,(r+.2)*e,(a+o)*i,(r+n)*e,(a+.1)*i,r*e,(a+.1)*i),n=.05,o=ju*n,Xr(t,.5*e,.2*i,!0),t.lineTo(.95*e,.2*i),r=.95,a=.25,ta(t,(r+o)*e,(a-n)*i,(r+n)*e,(a-o)*i,(r+n)*e,a*i),t.lineTo(1*e,.6*i),t.lineTo(.85*e,.6*i),t.lineTo(.85*e,.35*i),n=.025,o=ju*n,r=.825,a=.35,ta(t,(r+n)*e,(a-o)*i,(r+o)*e,(a-n)*i,r*e,(a-n)*i),ta(t,(r-o)*e,(a-n)*i,(r-n)*e,(a-o)*i,(r-n)*e,a*i),t.lineTo(.8*e,1*i),t.lineTo(.55*e,1*i),t.lineTo(.55*e,.7*i),n=.05,o=ju*n,r=.5,a=.7,ta(t,(r+n)*e,(a-o)*i,(r+o)*e,(a-n)*i,r*e,(a-n)*i),ta(t,(r-o)*e,(a-n)*i,(r-n)*e,(a-o)*i,(r-n)*e,a*i),t.lineTo(.45*e,1*i),t.lineTo(.2*e,1*i),t.lineTo(.2*e,.35*i),n=.025,o=ju*n,r=.175,a=.35,ta(t,(r+n)*e,(a-o)*i,(r+o)*e,(a-n)*i,r*e,(a-n)*i),ta(t,(r-o)*e,(a-n)*i,(r-n)*e,(a-o)*i,(r-n)*e,a*i),t.lineTo(.15*e,.6*i),t.lineTo(0*e,.6*i),t.lineTo(0*e,.25*i),n=.05,o=ju*n,r=.05,a=.25,ta(t,(r-n)*e,(a-o)*i,(r-o)*e,(a-n)*i,r*e,(a-n)*i),t.lineTo(.5*e,.2*i),e=t.o,e.A=new D(.2,.2),e.B=new D(.8,.65),_h.q(t),e},Card:function(t,e,i){return t=_h.s(),Xr(t,1*e,0*i,!0),t.lineTo(1*e,1*i),t.lineTo(0*e,1*i),t.lineTo(0*e,.2*i),t.lineTo(.2*e,0*i),Qr(t),e=t.o,e.A=new D(0,.2),e.B=uu,_h.q(t),e},Collate:function(t,e,i){return t=_h.s(),Xr(t,.5*e,.5*i,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(.5*e,.5*i),Xr(t,.5*e,.5*i,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(.5*e,.5*i),e=t.o,e.A=new D(.25,0),e.B=new D(.75,.25),_h.q(t),e},CreateRequest:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),Xr(n,0,t*i,!1),n.lineTo(1*e,t*i),n.moveTo(0,(1-t)*i),n.lineTo(1*e,(1-t)*i),n.$a(!1),e=n.o,e.A=new D(0,t),e.B=new D(1,1-t),_h.q(n),e},Database:function(t,e,i){t=_h.s();var n=.5*ju,o=.1*ju;return Xr(t,1*e,.1*i,!0),t.lineTo(1*e,.9*i),ta(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ta(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),Xr(t,1*e,.1*i,!1),ta(t,1*e,(.1+o)*i,(.5+n)*e,.2*i,.5*e,.2*i),ta(t,(.5-n)*e,.2*i,0,(.1+o)*i,0,.1*i),t.moveTo(1*e,.2*i),ta(t,1*e,(.2+o)*i,(.5+n)*e,.3*i,.5*e,.3*i),ta(t,(.5-n)*e,.3*i,0,(.2+o)*i,0,.2*i),t.moveTo(1*e,.3*i),ta(t,1*e,(.3+o)*i,(.5+n)*e,.4*i,.5*e,.4*i),ta(t,(.5-n)*e,.4*i,0,(.3+o)*i,0,.3*i),t.$a(!1),e=t.o,e.A=new D(0,.4),e.B=new D(1,.9),_h.q(t),e},StoredData:"DataStorage",DataStorage:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.75*e,0),ta(t,1*e,0,1*e,1*i,.75*e,1*i),t.lineTo(0,1*i),ta(t,.25*e,.9*i,.25*e,.1*i,0,0),Qr(t),e=t.o,e.A=new D(.226,0),e.B=new D(.81,1),_h.q(t),e},DiskStorage:function(t,e,i){t=_h.s();var n=.5*ju,o=.1*ju;return Xr(t,1*e,.1*i,!0),t.lineTo(1*e,.9*i),ta(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ta(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),Xr(t,1*e,.1*i,!1),ta(t,1*e,(.1+o)*i,(.5+n)*e,.2*i,.5*e,.2*i),ta(t,(.5-n)*e,.2*i,0,(.1+o)*i,0,.1*i),t.moveTo(1*e,.2*i),ta(t,1*e,(.2+o)*i,(.5+n)*e,.3*i,.5*e,.3*i),ta(t,(.5-n)*e,.3*i,0,(.2+o)*i,0,.2*i),t.$a(!1),e=t.o,e.A=new D(0,.3),e.B=new D(1,.9),_h.q(t),e},Display:function(t,e,i){return t=_h.s(),Xr(t,.25*e,0,!0),t.lineTo(.75*e,0),ta(t,1*e,0,1*e,1*i,.75*e,1*i),t.lineTo(.25*e,1*i),t.lineTo(0,.5*i),Qr(t),e=t.o,e.A=new D(.25,0),e.B=new D(.75,1),_h.q(t),e},DividedEvent:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)?t=.2:.15>t&&(t=.15);var n=_h.s(),o=.2*ju;return Xr(n,0,.2*i,!0),ta(n,0,(.2-o)*i,(.2-o)*e,0,.2*e,0),n.lineTo(.8*e,0),ta(n,(.8+o)*e,0,1*e,(.2-o)*i,1*e,.2*i),n.lineTo(1*e,.8*i),ta(n,1*e,(.8+o)*i,(.8+o)*e,1*i,.8*e,1*i),n.lineTo(.2*e,1*i),ta(n,(.2-o)*e,1*i,0,(.8+o)*i,0,.8*i),n.lineTo(0,.2*i),Xr(n,0,t*i,!1),n.lineTo(1*e,t*i),n.$a(!1),e=n.o,e.A=new D(0,t),e.B=new D(1,1-t),_h.q(n),e},DividedProcess:function(t,e,i){t=t?t.Cc:NaN,(isNaN(t)||.1>t)&&(t=.1);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),Xr(n,0,t*i,!1),n.lineTo(1*e,t*i),n.$a(!1),e=n.o,e.A=new D(0,t),e.B=uu,_h.q(n),e},Document:function(t,e,i){return i/=.8,t=_h.s(),Xr(t,0,.7*i,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(1*e,.7*i),ta(t,.5*e,.4*i,.5*e,1*i,0,.7*i),Qr(t),e=t.o,e.A=iu,e.B=new D(1,.6),_h.q(t),e},ExternalOrganization:function(t,e,i){t=t?t.Cc:NaN,(isNaN(t)||.2>t)&&(t=.2);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),Xr(n,t*e,0,!1),n.lineTo(0,t*i),n.moveTo(1*e,t*i),n.lineTo((1-t)*e,0),n.moveTo(0,(1-t)*i),n.lineTo(t*e,1*i),n.moveTo((1-t)*e,1*i),n.lineTo(1*e,(1-t)*i),n.$a(!1),e=n.o,e.A=new D(t/2,t/2),e.B=new D(1-t/2,1-t/2),_h.q(n),e},ExternalProcess:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!0),t.lineTo(1*e,.5*i),t.lineTo(.5*e,1*i),t.lineTo(0,.5*i),Qr(t),Xr(t,.1*e,.4*i,!1),t.lineTo(.1*e,.6*i),t.moveTo(.9*e,.6*i),t.lineTo(.9*e,.4*i),t.moveTo(.6*e,.1*i),t.lineTo(.4*e,.1*i),t.moveTo(.4*e,.9*i),t.lineTo(.6*e,.9*i),t.$a(!1),e=t.o,e.A=new D(.25,.25),e.B=new D(.75,.75),_h.q(t),e},File:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.75*e,0),t.lineTo(1*e,.25*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),Qr(t),Xr(t,.75*e,0,!1),t.lineTo(.75*e,.25*i),t.lineTo(1*e,.25*i),t.$a(!1),e=t.o,e.A=new D(0,.25),e.B=uu,_h.q(t),e},Interrupt:function(t,e,i){return t=_h.s(),Xr(t,1*e,.5*i,!0),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(1*e,.5*i),Xr(t,1*e,.5*i,!1),t.lineTo(1*e,1*i),Xr(t,1*e,.5*i,!1),t.lineTo(1*e,0),e=t.o,e.A=new D(0,.25),e.B=new D(.5,.75),_h.q(t),e},InternalStorage:function(t,e,i){var n=t?t.Cc:NaN;t=t?t.uu:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.1);var o=_h.s();return Xr(o,0,0,!0),o.lineTo(1*e,0),o.lineTo(1*e,1*i),o.lineTo(0,1*i),Qr(o),Xr(o,n*e,0,!1),o.lineTo(n*e,1*i),o.moveTo(0,t*i),o.lineTo(1*e,t*i),o.$a(!1),e=o.o,e.A=new D(n,t),e.B=uu,_h.q(o),e},Junction:function(t,e,i){t=_h.s();var n=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,r=.5*ju;return Xr(t,1*e,.5*i,!0),ta(t,1*e,(.5+r)*i,(.5+r)*e,1*i,.5*e,1*i),ta(t,(.5-r)*e,1*i,0,(.5+r)*i,0,.5*i),ta(t,0,(.5-r)*i,(.5-r)*e,0,.5*e,0),ta(t,(.5+r)*e,0,1*e,(.5-r)*i,1*e,.5*i),Xr(t,(o+n)*e,(o+n)*i,!1),t.lineTo(o*e,o*i),t.moveTo(o*e,(o+n)*i),t.lineTo((o+n)*e,o*i),t.$a(!1),e=t.o,e.Zd=Gf,_h.q(t),e},LinedDocument:function(t,e,i){return i/=.8,t=_h.s(),Xr(t,0,.7*i,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(1*e,.7*i),ta(t,.5*e,.4*i,.5*e,1*i,0,.7*i),Qr(t),Xr(t,.1*e,0,!1),t.lineTo(.1*e,.75*i),t.$a(!1),e=t.o,e.A=new D(.1,0),e.B=new D(1,.6),_h.q(t),e},LoopLimit:function(t,e,i){return t=_h.s(),Xr(t,0,1*i,!0),t.lineTo(0,.25*i),t.lineTo(.25*e,0),t.lineTo(.75*e,0),t.lineTo(1*e,.25*i),t.lineTo(1*e,1*i),Qr(t),e=t.o,e.A=new D(0,.25),e.B=uu,_h.q(t),e},SequentialData:"MagneticTape",MagneticTape:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,.5*e,1*i,!0),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ta(t,1*e,(.5+n)*i,(.5+n)*e,.9*i,.6*e,.9*i),t.lineTo(1*e,.9*i),t.lineTo(1*e,1*i),t.lineTo(.5*e,1*i),e=t.o,e.A=new D(.15,.15),e.B=new D(.85,.8),_h.q(t),e},ManualInput:function(t,e,i){return t=_h.s(),Xr(t,1*e,0,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,.25*i),Qr(t),e=t.o,e.A=new D(0,.25),e.B=uu,_h.q(t),e},MessageFromUser:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.7);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(t*e,.5*i),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),e=n.o,e.A=iu,e.B=new D(t,1),_h.q(n),e},MicroformProcessing:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.25);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(.5*e,t*i),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(.5*e,(1-t)*i),n.lineTo(0,1*i),Qr(n),e=n.o,e.A=new D(0,t),e.B=new D(1,1-t),_h.q(n),e},MicroformRecording:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.75*e,.25*i),t.lineTo(1*e,.15*i),t.lineTo(1*e,.85*i),t.lineTo(.75*e,.75*i),t.lineTo(0,1*i),Qr(t),e=t.o,e.A=new D(0,.25),e.B=new D(1,.75),_h.q(t),e},MultiDocument:function(t,e,i){return i/=.8,t=_h.s(),Xr(t,e,0,!0),t.lineTo(e,.5*i),ta(t,.96*e,.47*i,.93*e,.45*i,.9*e,.44*i),t.lineTo(.9*e,.6*i),ta(t,.86*e,.57*i,.83*e,.55*i,.8*e,.54*i),t.lineTo(.8*e,.7*i),ta(t,.4*e,.4*i,.4*e,1*i,0,.7*i),t.lineTo(0,.2*i),t.lineTo(.1*e,.2*i),t.lineTo(.1*e,.1*i),t.lineTo(.2*e,.1*i),t.lineTo(.2*e,0),Qr(t),Xr(t,.1*e,.2*i,!1),t.lineTo(.8*e,.2*i),t.lineTo(.8*e,.54*i),t.moveTo(.2*e,.1*i),t.lineTo(.9*e,.1*i),t.lineTo(.9*e,.44*i),t.$a(!1),e=t.o,e.A=new D(0,.25),e.B=new D(.8,.77),_h.q(t),e},MultiProcess:function(t,e,i){return t=_h.s(),Xr(t,.1*e,.1*i,!0),t.lineTo(.2*e,.1*i),t.lineTo(.2*e,0),t.lineTo(1*e,0),t.lineTo(1*e,.8*i),t.lineTo(.9*e,.8*i),t.lineTo(.9*e,.9*i),t.lineTo(.8*e,.9*i),t.lineTo(.8*e,1*i),t.lineTo(0,1*i),t.lineTo(0,.2*i),t.lineTo(.1*e,.2*i),Qr(t),Xr(t,.2*e,.1*i,!1),t.lineTo(.9*e,.1*i),t.lineTo(.9*e,.8*i),t.moveTo(.1*e,.2*i),t.lineTo(.8*e,.2*i),t.lineTo(.8*e,.9*i),t.$a(!1),e=t.o,e.A=new D(0,.2),e.B=new D(.8,1),_h.q(t),e},OfflineStorage:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var n=1-t,o=_h.s();return Xr(o,0,0,!0),o.lineTo(1*e,0),o.lineTo(.5*e,1*i),Qr(o),Xr(o,.5*t*e,t*i,!1),o.lineTo((1-.5*t)*e,t*i),o.$a(!1),e=o.o,e.A=new D(n/4+.5*t,t),e.B=new D(3*n/4+.5*t,t+.5*n),_h.q(o),e},OffPageConnector:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(.75*e,0),t.lineTo(1*e,.5*i),t.lineTo(.75*e,1*i),t.lineTo(0,1*i),Qr(t),e=t.o,e.A=iu,e.B=new D(.75,1),_h.q(t),e},Or:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,1*e,.5*i,!0),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),Xr(t,1*e,.5*i,!1),t.lineTo(0,.5*i),t.moveTo(.5*e,1*i),t.lineTo(.5*e,0),t.$a(!1),e=t.o,e.Zd=Gf,_h.q(t),e},PaperTape:function(t,e,i){return i/=.8,t=_h.s(),Xr(t,0,.7*i,!0),t.lineTo(0,.3*i),ta(t,.5*e,.6*i,.5*e,0,1*e,.3*i),t.lineTo(1*e,.7*i),ta(t,.5*e,.4*i,.5*e,1*i,0,.7*i),Qr(t),e=t.o,e.A=new D(0,.49),e.B=new D(1,.75),_h.q(t),e},PrimitiveFromCall:function(t,e,i){var n=t?t.Cc:NaN;t=t?t.uu:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var o=_h.s();return Xr(o,0,0,!0),o.lineTo(1*e,0),o.lineTo((1-t)*e,.5*i),o.lineTo(1*e,1*i),o.lineTo(0,1*i),Qr(o),e=o.o,e.A=new D(n,0),e.B=new D(1-t,1),_h.q(o),e},PrimitiveToCall:function(t,e,i){var n=t?t.Cc:NaN;t=t?t.uu:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var o=_h.s();return Xr(o,0,0,!0),o.lineTo((1-t)*e,0),o.lineTo(1*e,.5*i),o.lineTo((1-t)*e,1*i),o.lineTo(0,1*i),Qr(o),e=o.o,e.A=new D(n,0),e.B=new D(1-t,1),_h.q(o),e},Subroutine:"Procedure",Procedure:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),Xr(n,(1-t)*e,0,!1),n.lineTo((1-t)*e,1*i),n.moveTo(t*e,0),n.lineTo(t*e,1*i),n.$a(!1),e=n.o,e.A=new D(t,0),e.B=new D(1-t,1),_h.q(n),e},Process:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),Qr(n),Xr(n,t*e,0,!1),n.lineTo(t*e,1*i),n.$a(!1),e=n.o,e.A=new D(t,0),e.B=uu,_h.q(n),e},Sort:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!0),t.lineTo(1*e,.5*i),t.lineTo(.5*e,1*i),t.lineTo(0,.5*i),Qr(t),Xr(t,0,.5*i,!1),t.lineTo(1*e,.5*i),t.$a(!1),e=t.o,e.A=new D(.25,.25),e.B=new D(.75,.5),_h.q(t),e},Start:function(t,e,i){return t=_h.s(),Xr(t,.25*e,0,!0),Xr(t,.25*e,0,!0),t.arcTo(270,180,.75*e,.5*i,.25*e,.5*i),t.arcTo(90,180,.25*e,.5*i,.25*e,.5*i),Xr(t,.25*e,0,!1),t.lineTo(.25*e,1*i),t.moveTo(.75*e,0),t.lineTo(.75*e,1*i),t.$a(!1),e=t.o,e.A=new D(.25,0),e.B=new D(.75,1),_h.q(t),e},Terminator:function(t,e,i){return t=_h.s(),Xr(t,.25*e,0,!0),t.arcTo(270,180,.75*e,.5*i,.25*e,.5*i),t.arcTo(90,180,.25*e,.5*i,.25*e,.5*i),e=t.o,e.A=new D(.23,0),e.B=new D(.77,1),_h.q(t),e},TransmittalTape:function(t,e,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var n=_h.s();return Xr(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(.75*e,(1-t)*i),n.lineTo(0,(1-t)*i),Qr(n),e=n.o,e.A=iu,e.B=new D(1,1-t),_h.q(n),e},AndGate:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,0,0,!0),t.lineTo(.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),t.lineTo(0,1*i),Qr(t),e=t.o,e.A=iu,e.B=new D(.55,1),_h.q(t),e},Buffer:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(1*e,.5*i),t.lineTo(0,1*i),Qr(t),e=t.o,e.A=new D(0,.25),e.B=new D(.5,.75),_h.q(t),e},Clock:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,1*e,.5*i,!0),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),Xr(t,1*e,.5*i,!1),t.lineTo(1*e,.5*i),Xr(t,.8*e,.75*i,!1),t.lineTo(.8*e,.25*i),t.lineTo(.6*e,.25*i),t.lineTo(.6*e,.75*i),t.lineTo(.4*e,.75*i),t.lineTo(.4*e,.25*i),t.lineTo(.2*e,.25*i),t.lineTo(.2*e,.75*i),t.$a(!1),e=t.o,e.Zd=Gf,_h.q(t),e},Ground:function(t,e,i){return t=_h.s(),Xr(t,.5*e,0,!1),t.lineTo(.5*e,.4*i),t.moveTo(.2*e,.6*i),t.lineTo(.8*e,.6*i),t.moveTo(.3*e,.8*i),t.lineTo(.7*e,.8*i),t.moveTo(.4*e,1*i),t.lineTo(.6*e,1*i),e=t.o,_h.q(t),e},Inverter:function(t,e,i){t=_h.s();var n=.1*ju;return Xr(t,.8*e,.5*i,!0),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.8*e,.5*i),Xr(t,1*e,.5*i,!0),ta(t,1*e,(.5+n)*i,(.9+n)*e,.6*i,.9*e,.6*i),ta(t,(.9-n)*e,.6*i,.8*e,(.5+n)*i,.8*e,.5*i),ta(t,.8*e,(.5-n)*i,(.9-n)*e,.4*i,.9*e,.4*i),ta(t,(.9+n)*e,.4*i,1*e,(.5-n)*i,1*e,.5*i),e=t.o,e.A=new D(0,.25),e.B=new D(.4,.75),_h.q(t),e},NandGate:function(t,e,i){t=_h.s();var n=.5*ju,o=.4*ju,r=.1*ju;return Xr(t,.8*e,.5*i,!0),ta(t,.8*e,(.5+o)*i,(.4+n)*e,1*i,.4*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.4*e,0),ta(t,(.4+n)*e,0,.8*e,(.5-o)*i,.8*e,.5*i),Xr(t,1*e,.5*i,!0),ta(t,1*e,(.5+r)*i,(.9+r)*e,.6*i,.9*e,.6*i),ta(t,(.9-r)*e,.6*i,.8*e,(.5+r)*i,.8*e,.5*i),ta(t,.8*e,(.5-r)*i,(.9-r)*e,.4*i,.9*e,.4*i),ta(t,(.9+r)*e,.4*i,1*e,(.5-r)*i,1*e,.5*i),e=t.o,e.A=new D(0,.05),e.B=new D(.55,.95),_h.q(t),e},NorGate:function(t,e,i){t=_h.s();var n=.5,o=ju*n,r=0,a=.5;return Xr(t,.8*e,.5*i,!0),ta(t,.7*e,(a+o)*i,(r+o)*e,(a+n)*i,0,1*i),ta(t,.25*e,.75*i,.25*e,.25*i,0,0),ta(t,(r+o)*e,(a-n)*i,.7*e,(a-o)*i,.8*e,.5*i),n=.1,o=.1*ju,r=.9,a=.5,Xr(t,(r-n)*e,a*i,!0),ta(t,(r-n)*e,(a-o)*i,(r-o)*e,(a-n)*i,r*e,(a-n)*i),ta(t,(r+o)*e,(a-n)*i,(r+n)*e,(a-o)*i,(r+n)*e,a*i),ta(t,(r+n)*e,(a+o)*i,(r+o)*e,(a+n)*i,r*e,(a+n)*i),ta(t,(r-o)*e,(a+n)*i,(r-n)*e,(a+o)*i,(r-n)*e,a*i),e=t.o,e.A=new D(.2,.25),e.B=new D(.6,.75),_h.q(t),e},OrGate:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,0,0,!0),ta(t,(0+n+n)*e,0*i,.8*e,(.5-n)*i,1*e,.5*i),ta(t,.8*e,(.5+n)*i,(0+n+n)*e,1*i,0,1*i),ta(t,.25*e,.75*i,.25*e,.25*i,0,0),Qr(t),e=t.o,e.A=new D(.2,.25),e.B=new D(.75,.75),_h.q(t),e},XnorGate:function(t,e,i){t=_h.s();var n=.5,o=ju*n,r=.2,a=.5;return Xr(t,.1*e,0,!1),ta(t,.35*e,.25*i,.35*e,.75*i,.1*e,1*i),Xr(t,.8*e,.5*i,!0),ta(t,.7*e,(a+o)*i,(r+o)*e,(a+n)*i,.2*e,1*i),ta(t,.45*e,.75*i,.45*e,.25*i,.2*e,0),ta(t,(r+o)*e,(a-n)*i,.7*e,(a-o)*i,.8*e,.5*i),n=.1,o=.1*ju,r=.9,a=.5,Xr(t,(r-n)*e,a*i,!0),ta(t,(r-n)*e,(a-o)*i,(r-o)*e,(a-n)*i,r*e,(a-n)*i),ta(t,(r+o)*e,(a-n)*i,(r+n)*e,(a-o)*i,(r+n)*e,a*i),ta(t,(r+n)*e,(a+o)*i,(r+o)*e,(a+n)*i,r*e,(a+n)*i),ta(t,(r-o)*e,(a+n)*i,(r-n)*e,(a+o)*i,(r-n)*e,a*i),e=t.o,e.A=new D(.4,.25),e.B=new D(.65,.75),_h.q(t),e},XorGate:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,.1*e,0,!1),ta(t,.35*e,.25*i,.35*e,.75*i,.1*e,1*i),Xr(t,.2*e,0,!0),ta(t,(.2+n)*e,0*i,.9*e,(.5-n)*i,1*e,.5*i),ta(t,.9*e,(.5+n)*i,(.2+n)*e,1*i,.2*e,1*i),ta(t,.45*e,.75*i,.45*e,.25*i,.2*e,0),Qr(t),e=t.o,e.A=new D(.4,.25),e.B=new D(.8,.75),_h.q(t),e},Capacitor:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(0,1*i),t.moveTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,_h.q(t),e},Resistor:function(t,e,i){return t=_h.s(),Xr(t,0,.5*i,!1),t.lineTo(.1*e,0),t.lineTo(.2*e,1*i),t.lineTo(.3*e,0),t.lineTo(.4*e,1*i),t.lineTo(.5*e,0),t.lineTo(.6*e,1*i),t.lineTo(.7*e,.5*i),e=t.o,_h.q(t),e},Inductor:function(t,e,i){t=_h.s();var n=.1*ju,o=.1;return Xr(t,(o-.5*n)*e,i,!1),ta(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),o=.3,ta(t,(o+.1)*e,0,(o+n)*e,i,o*e,i),ta(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),o=.5,ta(t,(o+.1)*e,0,(o+n)*e,i,o*e,i),ta(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),o=.7,ta(t,(o+.1)*e,0,(o+n)*e,i,o*e,i),ta(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),o=.9,ta(t,(o+.1)*e,0,(o+n)*e,i,(o+.5*n)*e,i),e=t.o,_h.q(t),e},ACvoltageSource:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,0*e,.5*i,!1),ta(t,0*e,(.5-n)*i,(.5-n)*e,0*i,.5*e,0*i),ta(t,(.5+n)*e,0*i,1*e,(.5-n)*i,1*e,.5*i),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0*e,(.5+n)*i,0*e,.5*i),t.moveTo(.1*e,.5*i),ta(t,.5*e,0*i,.5*e,1*i,.9*e,.5*i),e=t.o,e.Zd=Gf,_h.q(t),e},DCvoltageSource:function(t,e,i){return t=_h.s(),Xr(t,0,.75*i,!1),t.lineTo(0,.25*i),t.moveTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,_h.q(t),e},Diode:function(t,e,i){return t=_h.s(),Xr(t,1*e,0,!1),t.lineTo(1*e,.5*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(1*e,.5*i),t.lineTo(1*e,1*i),e=t.o,e.A=new D(0,.25),e.B=new D(.5,.75),_h.q(t),e},Wifi:function(t,e,i){var n=e,o=i;e*=.38,i*=.6,t=_h.s();var r=.8*ju,a=.8,s=0,l=.5,n=(n-e)/2,o=(o-i)/2;return Xr(t,s*e+n,(l+a)*i+o,!0),ta(t,(s-r)*e+n,(l+a)*i+o,(s-a)*e+n,(l+r)*i+o,(s-a)*e+n,l*i+o),ta(t,(s-a)*e+n,(l-r)*i+o,(s-r)*e+n,(l-a)*i+o,s*e+n,(l-a)*i+o),ta(t,s*e+n,(l-a)*i+o,(s-a+.5*r)*e+n,(l-r)*i+o,(s-a+.5*r)*e+n,l*i+o),ta(t,(s-a+.5*r)*e+n,(l+r)*i+o,s*e+n,(l+a)*i+o,s*e+n,(l+a)*i+o),Qr(t),r=.4*ju,a=.4,s=.2,l=.5,Xr(t,s*e+n,(l+a)*i+o,!0),ta(t,(s-r)*e+n,(l+a)*i+o,(s-a)*e+n,(l+r)*i+o,(s-a)*e+n,l*i+o),ta(t,(s-a)*e+n,(l-r)*i+o,(s-r)*e+n,(l-a)*i+o,s*e+n,(l-a)*i+o),ta(t,s*e+n,(l-a)*i+o,(s-a+.5*r)*e+n,(l-r)*i+o,(s-a+.5*r)*e+n,l*i+o),ta(t,(s-a+.5*r)*e+n,(l+r)*i+o,s*e+n,(l+a)*i+o,s*e+n,(l+a)*i+o),Qr(t),r=.2*ju,a=.2,l=s=.5,Xr(t,(s-a)*e+n,l*i+o,!0),ta(t,(s-a)*e+n,(l-r)*i+o,(s-r)*e+n,(l-a)*i+o,s*e+n,(l-a)*i+o),ta(t,(s+r)*e+n,(l-a)*i+o,(s+a)*e+n,(l-r)*i+o,(s+a)*e+n,l*i+o),ta(t,(s+a)*e+n,(l+r)*i+o,(s+r)*e+n,(l+a)*i+o,s*e+n,(l+a)*i+o),ta(t,(s-r)*e+n,(l+a)*i+o,(s-a)*e+n,(l+r)*i+o,(s-a)*e+n,l*i+o),r=.4*ju,a=.4,s=.8,l=.5,Xr(t,s*e+n,(l-a)*i+o,!0),ta(t,(s+r)*e+n,(l-a)*i+o,(s+a)*e+n,(l-r)*i+o,(s+a)*e+n,l*i+o),ta(t,(s+a)*e+n,(l+r)*i+o,(s+r)*e+n,(l+a)*i+o,s*e+n,(l+a)*i+o),ta(t,s*e+n,(l+a)*i+o,(s+a-.5*r)*e+n,(l+r)*i+o,(s+a-.5*r)*e+n,l*i+o),ta(t,(s+a-.5*r)*e+n,(l-r)*i+o,s*e+n,(l-a)*i+o,s*e+n,(l-a)*i+o),Qr(t),r=.8*ju,a=.8,s=1,l=.5,Xr(t,s*e+n,(l-a)*i+o,!0),ta(t,(s+r)*e+n,(l-a)*i+o,(s+a)*e+n,(l-r)*i+o,(s+a)*e+n,l*i+o),ta(t,(s+a)*e+n,(l+r)*i+o,(s+r)*e+n,(l+a)*i+o,s*e+n,(l+a)*i+o),ta(t,s*e+n,(l+a)*i+o,(s+a-.5*r)*e+n,(l+r)*i+o,(s+a-.5*r)*e+n,l*i+o),ta(t,(s+a-.5*r)*e+n,(l-r)*i+o,s*e+n,(l-a)*i+o,s*e+n,(l-a)*i+o),Qr(t),e=t.o,_h.q(t),e},Email:function(t,e,i){return t=_h.s(),Xr(t,0,0,!0),t.lineTo(1*e,0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),Qr(t),Xr(t,0,0,!1),t.lineTo(.5*e,.6*i),t.lineTo(1*e,0),t.moveTo(0,1*i),t.lineTo(.45*e,.54*i),t.moveTo(1*e,1*i),t.lineTo(.55*e,.54*i),t.$a(!1),e=t.o,_h.q(t),e},Ethernet:function(t,e,i){return t=_h.s(),Xr(t,.35*e,0,!0),t.lineTo(.65*e,0),t.lineTo(.65*e,.4*i),t.lineTo(.35*e,.4*i),t.lineTo(.35*e,0),Qr(t),Xr(t,.1*e,1*i,!0,!0),t.lineTo(.4*e,1*i),t.lineTo(.4*e,.6*i),t.lineTo(.1*e,.6*i),t.lineTo(.1*e,1*i),Qr(t),Xr(t,.6*e,1*i,!0,!0),t.lineTo(.9*e,1*i),t.lineTo(.9*e,.6*i),t.lineTo(.6*e,.6*i),t.lineTo(.6*e,1*i),Qr(t),Xr(t,0,.5*i,!1),t.lineTo(1*e,.5*i),t.moveTo(.5*e,.5*i),t.lineTo(.5*e,.4*i),t.moveTo(.75*e,.5*i),t.lineTo(.75*e,.6*i),t.moveTo(.25*e,.5*i),t.lineTo(.25*e,.6*i),t.$a(!1),e=t.o,_h.q(t),e},Power:function(t,e,i){t=_h.s();var n=.4*ju,o=.4,r=_h.K(),a=_h.K(),s=_h.K(),l=_h.K();Z(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.5,r,r,a,s,l);var h=_h.xb(a.x,a.y);return Xr(t,a.x*e,a.y*i,!0),ta(t,s.x*e,s.y*i,l.x*e,l.y*i,(.5+o)*e,.5*i),ta(t,(.5+o)*e,(.5+n)*i,(.5+n)*e,(.5+o)*i,.5*e,(.5+o)*i),ta(t,(.5-n)*e,(.5+o)*i,(.5-o)*e,(.5+n)*i,(.5-o)*e,.5*i),Z(.5-o,.5,.5-o,.5-n,.5-n,.5-o,.5,.5-o,.5,s,l,a,r,r),ta(t,s.x*e,s.y*i,l.x*e,l.y*i,a.x*e,a.y*i),n=.3*ju,o=.3,Z(.5-o,.5,.5-o,.5-n,.5-n,.5-o,.5,.5-o,.5,s,l,a,r,r),t.lineTo(a.x*e,a.y*i),ta(t,l.x*e,l.y*i,s.x*e,s.y*i,(.5-o)*e,.5*i),ta(t,(.5-o)*e,(.5+n)*i,(.5-n)*e,(.5+o)*i,.5*e,(.5+o)*i),ta(t,(.5+n)*e,(.5+o)*i,(.5+o)*e,(.5+n)*i,(.5+o)*e,.5*i),Z(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.5,r,r,a,s,l),ta(t,l.x*e,l.y*i,s.x*e,s.y*i,a.x*e,a.y*i),Qr(t),Xr(t,.45*e,0,!0),t.lineTo(.45*e,.5*i),t.lineTo(.55*e,.5*i),t.lineTo(.55*e,0),Qr(t),_h.v(r),_h.v(a),_h.v(s),_h.v(l),_h.v(h),e=t.o,e.A=new D(.25,.55),e.B=new D(.75,.8),_h.q(t),e},Fallout:function(t,e,i){t=_h.s();var n=.5*ju;Xr(t,0*e,.5*i,!0),ta(t,0*e,(.5-n)*i,(.5-n)*e,0*i,.5*e,0*i),ta(t,(.5+n)*e,0*i,1*e,(.5-n)*i,1*e,.5*i),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0*e,(.5+n)*i,0*e,.5*i);var o=n=0;return Xr(t,(.3+n)*e,(.8+o)*i,!0,!0),t.lineTo((.5+n)*e,(.5+o)*i),t.lineTo((.1+n)*e,(.5+o)*i),t.lineTo((.3+n)*e,(.8+o)*i),n=.4,o=0,Qr(t),Xr(t,(.3+n)*e,(.8+o)*i,!0,!0),t.lineTo((.5+n)*e,(.5+o)*i),t.lineTo((.1+n)*e,(.5+o)*i),t.lineTo((.3+n)*e,(.8+o)*i),n=.2,o=-.3,Qr(t),Xr(t,(.3+n)*e,(.8+o)*i,!0,!0),t.lineTo((.5+n)*e,(.5+o)*i),t.lineTo((.1+n)*e,(.5+o)*i),t.lineTo((.3+n)*e,(.8+o)*i),Qr(t),e=t.o,e.Zd=Gf,_h.q(t),e},IrritationHazard:function(t,e,i){return t=_h.s(),Xr(t,.2*e,0*i,!0),t.lineTo(.5*e,.3*i),t.lineTo(.8*e,0*i),t.lineTo(1*e,.2*i),t.lineTo(.7*e,.5*i),t.lineTo(1*e,.8*i),t.lineTo(.8*e,1*i),t.lineTo(.5*e,.7*i),t.lineTo(.2*e,1*i),t.lineTo(0*e,.8*i),t.lineTo(.3*e,.5*i),t.lineTo(0*e,.2*i),Qr(t),e=t.o,e.A=new D(.3,.3),e.B=new D(.7,.7),_h.q(t),e},ElectricalHazard:function(t,e,i){return t=_h.s(),Xr(t,.37*e,0*i,!0),t.lineTo(.5*e,.11*i),t.lineTo(.77*e,.04*i),t.lineTo(.33*e,.49*i),t.lineTo(1*e,.37*i),t.lineTo(.63*e,.86*i),t.lineTo(.77*e,.91*i),t.lineTo(.34*e,1*i),t.lineTo(.34*e,.78*i),t.lineTo(.44*e,.8*i),t.lineTo(.65*e,.56*i),t.lineTo(0*e,.68*i),Qr(t),e=t.o,_h.q(t),e},FireHazard:function(t,e,i){return t=_h.s(),Xr(t,.1*e,1*i,!0),ta(t,-.25*e,.63*i,.45*e,.44*i,.29*e,0*i),ta(t,.48*e,.17*i,.54*e,.35*i,.51*e,.42*i),ta(t,.59*e,.29*i,.58*e,.28*i,.59*e,.18*i),ta(t,.8*e,.34*i,.88*e,.43*i,.75*e,.6*i),ta(t,.87*e,.48*i,.88*e,.43*i,.88*e,.31*i),ta(t,1.17*e,.76*i,.82*e,.8*i,.9*e,1*i),Qr(t),e=t.o,e.A=new D(.05,.645),e.B=new D(.884,.908),_h.q(t),e},BpmnActivityLoop:function(t,e,i){t=_h.s();var n=4*(Math.SQRT2-1)/3*.5;return Xr(t,.65*e,1*i,!1),ta(t,(1-n+0)*e,1*i,1*e,(.5+n+0)*i,1*e,.5*i),ta(t,1*e,(.5-n+0)*i,(.5+n+0)*e,0*i,.5*e,0*i),ta(t,(.5-n+0)*e,0*i,0*e,(.5-n+0)*i,0*e,.5*i),ta(t,0*e,(.5+n+0)*i,(.5-n+0)*e,1*i,.35*e,.98*i),t.moveTo(.25*e,.8*i),t.lineTo(.35*e,1*i),t.lineTo(.1*e,1*i),e=t.o,_h.q(t),e},BpmnActivityParallel:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(0,1*i),t.moveTo(.5*e,0),t.lineTo(.5*e,1*i),t.moveTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,_h.q(t),e},BpmnActivitySequential:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),t.lineTo(1*e,0),t.moveTo(0,.5*i),t.lineTo(1*e,.5*i),t.moveTo(0,1*i),t.lineTo(1*e,1*i),e=t.o,_h.q(t),e},BpmnActivityAdHoc:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),Xr(t,1*e,1*i,!1),Xr(t,0,.5*i,!1),ta(t,.2*e,.35*i,.3*e,.35*i,.5*e,.5*i),ta(t,.7*e,.65*i,.8*e,.65*i,1*e,.5*i),e=t.o,_h.q(t),e},BpmnActivityCompensation:function(t,e,i){return t=_h.s(),Xr(t,0,.5*i,!0),t.lineTo(.5*e,0),t.lineTo(.5*e,.5*i),t.lineTo(1*e,1*i),t.lineTo(1*e,0),t.lineTo(.5*e,.5*i),t.lineTo(.5*e,1*i),Qr(t),e=t.o,_h.q(t),e},BpmnTaskMessage:function(t,e,i){return t=_h.s(),Xr(t,0,.2*i,!0),t.lineTo(1*e,.2*i),t.lineTo(1*e,.8*i),t.lineTo(0,.8*i),t.lineTo(0,.8*i),Qr(t),Xr(t,0,.2*i,!1),t.lineTo(.5*e,.5*i),t.lineTo(1*e,.2*i),t.$a(!1),e=t.o,_h.q(t),e},BpmnTaskScript:function(t,e,i){return t=_h.s(),Xr(t,.7*e,1*i,!0),t.lineTo(.3*e,1*i),ta(t,.6*e,.5*i,0,.5*i,.3*e,0),t.lineTo(.7*e,0),ta(t,.4*e,.5*i,1*e,.5*i,.7*e,1*i),Qr(t),Xr(t,.45*e,.73*i,!1),t.lineTo(.7*e,.73*i),t.moveTo(.38*e,.5*i),t.lineTo(.63*e,.5*i),t.moveTo(.31*e,.27*i),t.lineTo(.56*e,.27*i),t.$a(!1),e=t.o,_h.q(t),e},BpmnTaskUser:function(t,e,i){t=_h.s(),Xr(t,0,0,!1),Xr(t,.335*e,(1-.555)*i,!0),t.lineTo(.335*e,.595*i),t.lineTo(.665*e,.595*i),t.lineTo(.665*e,(1-.555)*i),ta(t,.88*e,.46*i,.98*e,.54*i,1*e,.68*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,.68*i),ta(t,.02*e,.54*i,.12*e,.46*i,.335*e,(1-.555)*i),t.lineTo(.365*e,.405*i);var n=.5-.285,o=Math.PI/4,r=4*(1-Math.cos(o))/(3*Math.sin(o)),o=r*n,r=r*n;return ta(t,(.5-(o+n)/2)*e,(n+(n+r)/2)*i,(.5-n)*e,(n+r)*i,(.5-n)*e,n*i),ta(t,(.5-n)*e,(n-r)*i,(.5-o)*e,(n-n)*i,.5*e,(n-n)*i),ta(t,(.5+o)*e,(n-n)*i,(.5+n)*e,(n-r)*i,(.5+n)*e,n*i),ta(t,(.5+n)*e,(n+r)*i,(.5+(o+n)/2)*e,(n+(n+r)/2)*i,.635*e,.405*i),t.lineTo(.635*e,.405*i),t.lineTo(.665*e,(1-.555)*i),t.lineTo(.665*e,.595*i),t.lineTo(.335*e,.595*i),Xr(t,.2*e,1*i,!1),t.lineTo(.2*e,.8*i),Xr(t,.8*e,1*i,!1),t.lineTo(.8*e,.8*i),e=t.o,_h.q(t),e},BpmnEventConditional:function(t,e,i){return t=_h.s(),Xr(t,.1*e,0,!0),t.lineTo(.9*e,0),t.lineTo(.9*e,1*i),t.lineTo(.1*e,1*i),Qr(t),Xr(t,.2*e,.2*i,!1),t.lineTo(.8*e,.2*i),t.moveTo(.2*e,.4*i),t.lineTo(.8*e,.4*i),t.moveTo(.2*e,.6*i),t.lineTo(.8*e,.6*i),t.moveTo(.2*e,.8*i),t.lineTo(.8*e,.8*i),t.$a(!1),e=t.o,_h.q(t),e},BpmnEventError:function(t,e,i){return t=_h.s(),Xr(t,0,1*i,!0),t.lineTo(.33*e,0),t.lineTo(.66*e,.5*i),t.lineTo(1*e,0),t.lineTo(.66*e,1*i),t.lineTo(.33*e,.5*i),Qr(t),e=t.o,_h.q(t),e},BpmnEventEscalation:function(t,e,i){return t=_h.s(),Xr(t,0,0,!1),Xr(t,1*e,1*i,!1),Xr(t,.1*e,1*i,!0),t.lineTo(.5*e,0),t.lineTo(.9*e,1*i),t.lineTo(.5*e,.5*i),Qr(t),e=t.o,_h.q(t),e},BpmnEventTimer:function(t,e,i){t=_h.s();var n=.5*ju;return Xr(t,1*e,.5*i,!0),ta(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ta(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ta(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ta(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),Xr(t,.5*e,0,!1),t.lineTo(.5*e,.15*i),t.moveTo(.5*e,1*i),t.lineTo(.5*e,.85*i),t.moveTo(0,.5*i),t.lineTo(.15*e,.5*i),t.moveTo(1*e,.5*i),t.lineTo(.85*e,.5*i),t.moveTo(.5*e,.5*i),t.lineTo(.58*e,.1*i),t.moveTo(.5*e,.5*i),t.lineTo(.78*e,.54*i),t.$a(!1),e=t.o,e.Zd=Gf,_h.q(t),e}};for(Td in Ld)Ld[Td.toLowerCase()]=Td;var Nd={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};_h.La(sa,Zo),_h.fa("Part",sa),sa.prototype.cloneProtected=function(t){Zo.prototype.cloneProtected.call(this,t),t.N=-4097&this.N|49152,t.ui=this.ui,t.ml=this.ml,t.Sr=this.Sr,t.Ss=this.Ss,t.Gs=this.Gs,t.Js=this.Js,t.Us=this.Us,t.Ts=this.Ts,t.Fr=this.Fr,t.si=null,t.Is=this.Is,t.Hs=this.Hs.S(),t.Ks=this.Ks,t.Ed=this.Ed,t.Uq=this.Uq,t.Ri.assign(this.Ri),t.Xr=this.Xr,t.Yr=this.Yr.S(),t.fs=this.fs.S(),t.Zr=this.Zr.S(),t.nr=this.nr,t.Tr=this.Tr,t.an=this.an.S(),t.$m=this.$m,t.Bg=this.Bg,t.st=this.st},sa.prototype.ki=function(t){Zo.prototype.ki.call(this,t),t.Ek(),t.Zm=null,t.kp=null,t.lp=null,t.pl=null,t.Nm=null},sa.prototype.toString=function(){var t=_h.hf(Object.getPrototypeOf(this))+"#"+_h.Kd(this);return null!==this.data&&(t+="("+wc(this.data)+")"),t},sa.LayoutNone=0;var Cd;sa.LayoutAdded=Cd=1;var Ad;sa.LayoutRemoved=Ad=2,sa.LayoutShown=4,sa.LayoutHidden=8,sa.LayoutNodeSized=16;var Bd;sa.LayoutGroupLayout=Bd=32,sa.LayoutNodeReplaced=64;var Dd;sa.LayoutStandard=Dd=Cd|Ad|28|Bd|64,sa.LayoutAll=16777215,sa.prototype.Vn=function(t,e,i,n,o,r,a){var s=this.g;null!==s&&(t===yc&&"elements"===e?o instanceof Zo?lr(o,function(t){Ln(s,t),Cn(s,t)}):o instanceof Hr&&An(s,o):t===mc&&"elements"===e&&(o instanceof Zo?lr(o,function(t){Nn(s,t),Bn(s,t)}):o instanceof Hr&&Dn(s,o)),s.Xc(t,e,i,n,o,r,a))},sa.prototype.updateTargetBindings=sa.prototype.Hb=function(t){if(Zo.prototype.Hb.call(this,t),null!==this.data){t=this.xa.n;for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof Zo&&lr(n,function(t){null!==t.data&&t.Hb()})}}},sa.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var e=this.g;if(null!==e){var i=e.ba;i instanceof Xt&&(t=i.An(t),null===(e=e.RH(t))||e instanceof Cs)&&(this.Ka=e)}}},_h.u(sa,{Jw:"adornments"},function(){return null===this.si?Jh:this.si.tF}),sa.prototype.findAdornment=sa.prototype.Sp=function(t){var e=this.si;return null===e?null:e.ja(t)},sa.prototype.addAdornment=sa.prototype.Bl=function(t,e){if(null!==e){var i=null,n=this.si;if(null!==n&&(i=n.ja(t)),i!==e){if(null!==i){var o=i.g;null!==o&&o.remove(i)}null===n&&(this.si=n=new v("string",Aa)),e.ui!==t&&(e.td=t),n.add(t,e),i=this.g,null!==i&&(i.add(e),e.data=this.data)}}},sa.prototype.removeAdornment=sa.prototype.Cj=function(t){var e=this.si;if(null!==e){var i=e.ja(t);if(null!==i){var n=i.g;null!==n&&n.remove(i)}e.remove(t),0===e.count&&(this.si=null)}},sa.prototype.clearAdornments=sa.prototype.Bt=function(){var t=this.si;if(null!==t){for(var e=_h.lb(),t=t.i;t.next();)e.push(t.key);for(var t=e.length,i=0;i<t;i++)this.Cj(e[i]);_h.wa(e)}},sa.prototype.updateAdornments=function(){var t=this.g;if(null!==t){t:{if(this.fb&&this.wJ){var e=this.Du;if(!(null!==e&&this.W.H()&&this.isVisible()&&e.xj()&&e.W.H()))break t;var i=this.Sp("Selection");if(null===i){if(i=this.xJ,null===i&&(i=this instanceof Ua?t.II:this instanceof Cs?t.eI:t.aJ),!(i instanceof Aa))break t;vr(i),i=i.copy(),null!==i&&(i.rb=e)}if(null!==i){var n=i.placeholder;if(null!==n){var o=e.oj(),r=0;e instanceof Tr&&(r=e.kb);var a=_h.im();a.m((e.Ia.width+r)*o,(e.Ia.height+r)*o),n.Ba=a,_h.Ak(a)}i.angle=e.zn(),i.type!==ed&&(n=_h.K(),i.location=e.Wa(iu,n),_h.v(n)),this.Bl("Selection",i);break t}}this.Cj("Selection")}for(la(this,t),t=this.Jw;t.next();)e=t.value,e.Hb(),e.I()}},_h.u(sa,{layer:"layer"},function(){return this.Rv}),_h.u(sa,{g:"diagram"},function(){var t=this.Rv;return null!==t?t.g:null}),_h.defineProperty(sa,{Xf:"layerName"},function(){return this.ml},function(t){var e=this.ml;if(e!==t){_h.j(t,"string",sa,"layerName");var i=this.g;if((null===i||null!==i.Kt(t)&&!i.Eq)&&(this.ml=t,null!==i&&i.rc(),this.h("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(i=e.g)&&null!==(t=i.Kt(t))&&t!==e)){var n=e.jf(-1,this,!0);if(0<=n&&i.Xc(mc,"parts",e,this,null,n,!0),e.visible!==t.visible&&this.vd(t.visible),n=t.Zp(99999999,this,!0),0<=n&&i.Xc(yc,"parts",t,null,this,!0,n),null!==(n=this.Cx)){var o=i.Ua;i.Ua=!0,n(this,e,t),i.Ua=o}}}}),_h.defineProperty(sa,{Cx:"layerChanged"},function(){return this.Sr},function(t){var e=this.Sr;e!==t&&(null!==t&&_h.j(t,"function",sa,"layerChanged"),this.Sr=t,this.h("layerChanged",e,t))}),_h.defineProperty(sa,{ho:"zOrder"},function(){return this.st},function(t){var e=this.st;if(e!==t){_h.j(t,"number",sa,"zOrder"),this.st=t;var i=this.layer;null!==i&&ji(i,-1,this),this.h("zOrder",e,t),t=this.g,null!==t&&t.na()}}),sa.prototype.invalidateAdornments=sa.prototype.ce=function(){var t=this.g;null!==t&&(pn(t),0!=(16384&this.N)!=!0&&(this.N|=16384,t.Le()))},_h.u(sa,{Yf:"locationObject"},function(){if(null===this.pl){var t=this.EA;""!==t?(t=this.ud(t),this.pl=null!==t?t:this):this.pl=this instanceof Aa&&this.type!==ed&&null!==this.placeholder?this.placeholder:this}return this.pl.visible?this.pl:this}),_h.defineProperty(sa,{UI:"minLocation"},function(){return this.fs},function(t){var e=this.fs;e.L(t)||(this.fs=t=t.S(),this.h("minLocation",e,t))}),_h.defineProperty(sa,{NI:"maxLocation"},function(){return this.Zr},function(t){var e=this.Zr;e.L(t)||(this.Zr=t=t.S(),this.h("maxLocation",e,t))}),_h.defineProperty(sa,{EA:"locationObjectName"},function(){return this.Xr},function(t){var e=this.Xr;e!==t&&(this.Xr=t,this.pl=null,Io(this),this.h("locationObjectName",e,t))}),_h.defineProperty(sa,{Af:"locationSpot"},function(){return this.Yr},function(t){var e=this.Yr;e.L(t)||(this.Yr=t=t.S(),Io(this),this.h("locationSpot",e,t))}),sa.prototype.move=function(t){this.position=t},sa.prototype.moveTo=sa.prototype.moveTo=function(t,e){var i=_h.xb(t,e);this.move(i),_h.v(i)},sa.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return!(null!==t&&!t.visible)&&(!(null===(t=this.g)||(t=t.Pa,!t.kf||null===(t=t.Pm.ja(this))||!t.Tx))||!!(null===(t=this.Ka)||t.we&&t.isVisible()))},sa.prototype.vd=function(t){var e=this.g;t?(this.J(4),this.ce(),null!==e&&e.sg.add(this)):(this.J(8),this.Bt()),this.Ek(),null!==e&&(e.rc(),e.na())},sa.prototype.findObject=sa.prototype.ud=function(t){if(this.name===t)return this;var e=this.Nm;if(null===e&&(this.Nm=e=new n),void 0!==e[t])return e[t];for(var i=this.xa.n,o=i.length,r=0;r<o;r++){var a=i[r];if(a.name===t)return e[t]=a;if(a instanceof Zo)if(null===a.$j&&null===a.ug){if(null!==(a=a.ud(t)))return e[t]=a}else if(br(a)&&null!==(a=a.xa.first())&&a.name===t)return e[t]=a}return e[t]=null},sa.prototype.ensureBounds=sa.prototype.Ze=function(){Ao(this,Infinity,Infinity),this.hc()},sa.prototype.hc=function(){if(this.Ii(),!1===Ko(this))ca(this);else{var t=this.nc,e=_h.Ef();e.assign(t),t.Ra();var i=Ma(this);this.ij(0,0,this.qd.width,this.qd.height);var n=this.position;ga(this,n,this.location),t.x=n.x,t.y=n.y,t.freeze(),this.Kx(e,t),Jo(this,!1),e.L(t)?this.Cf(i):!this.de()||K(e.width,t.width)&&K(e.height,t.height)||0<=this.YC&&this.J(16),_h.Db(e),ka(this,!1)}},sa.prototype.Kx=function(t,e){var i=this.g;if(null!==i){var n=!1;if(!1===i.Vj&&t.H()){var o=i.qe,r=i.padding,a=o.x+r.left,s=o.y+r.top,l=o.width-2*r.right,o=o.height-2*r.bottom;t.x>a&&t.y>s&&t.right<l&&t.bottom<o&&e.x>a&&e.y>s&&e.right<l&&e.bottom<o&&(n=!0)}0!=(65536&this.N)!=!0&&t.L(e)||va(this,n,i),i.na(),P(t,e)||(this instanceof Ba&&!i.oa.gb&&this.Uf(),this.Ek())}},_h.defineProperty(sa,{location:"location"},function(){return this.Ri},function(t){var e=t.x,i=t.y,n=this.Ri,o=n.x,r=n.y;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))||(t=t.S(),e=t,this instanceof Ua?e=!1:(this.Ri=e,this.N|=2097152,!1===Ko(this)&&(ua(this),i=this.ib,i.H()&&(o=i.copy(),i.m(i.x+(e.x-n.x),i.y+(e.y-n.y)),pa(this,this.g,i,o),this.h("position",o,i))),e=!0),e&&this.h("location",n,t))}),Vh=sa.prototype,Vh.hB=function(t,e){if(this instanceof Ua||!t.H())return!1;var i=this.g;if(null!==i&&(pa(this,i,t,e),!0===i.oa.gb))return!0;if(this.ib=t,this.N&=-2097153,i=this.Ri,i.H()){var n=i.copy();i.m(i.x+(t.x-e.x),i.y+(t.y-e.y)),this.h("location",n,i)}return!1===wa(this)&&!1===Ko(this)&&(ua(this),ca(this)),!0},Vh.gy=function(t,e){var i=this.Ri,n=this.ib;wa(this)||Ko(this)?i.m(NaN,NaN):i.m(i.x+t-n.x,i.y+e-n.y),n.m(t,e),ua(this)},Vh.iB=function(){this.N&=-2097153,ua(this)},Vh.Yl=function(){return!0},Vh.de=function(){return!0},Vh.tj=function(){return!0},_h.defineProperty(sa,{td:"category"},function(){return this.ui},function(t){var e=this.ui;if(e!==t){_h.j(t,"string",sa,"category");var i=this.g,n=this.data,o=null;if(null!==i&&null!==n&&!(this instanceof Aa)){var r=i.ba.oa;r.isEnabled&&!r.gb&&(o=this.clone(),o.xa.Hc(this.xa))}this.ui=t,this.h("category",e,t),null===i||null===n||this instanceof Aa?null!==(o=this.Of)&&(t=o.si,null!==t&&t.remove(e),o.Bl(this.td,this)):(r=i.ba,r.oa.gb||(this instanceof Ua?(r instanceof Xt?r.eG(n,t):r instanceof ee&&r.zJ(n,t),null!==(i=Rn(i,t))&&(vr(i),null!==(i=i.copy())&&xa(this,i,e,t))):(null!==r&&r.ay(n,t),null!==(i=En(i,n,t))&&(vr(i),null===(i=i.copy())||i instanceof Ua||(i.location=this.location,xa(this,i,e,t)))),null!==o&&(e=this.clone(),e.xa.Hc(this.xa),this.h("self",o,e))))}}),_h.defineProperty(sa,{self:"self"},function(){return this},function(t){xa(this,t,this.td,t.td)});var Fd=!1;sa.prototype.canCopy=function(){if(!this.CH)return!1;var t=this.layer;return null===t||!!t.tk&&(null===(t=t.g)||!!t.tk)},sa.prototype.canDelete=function(){if(!this.HH)return!1;var t=this.layer;return null===t||!!t.gn&&(null===(t=t.g)||!!t.gn)},sa.prototype.canEdit=function(){if(!this.IJ)return!1;var t=this.layer;return null===t||!!t.Nw&&(null===(t=t.g)||!!t.Nw)},sa.prototype.canGroup=function(){if(!this.fI)return!1;var t=this.layer;return null===t||!!t.Kw&&(null===(t=t.g)||!!t.Kw)},sa.prototype.canMove=function(){if(!this.ZI)return!1;var t=this.layer;return null===t||!!t.El&&(null===(t=t.g)||!!t.El)},sa.prototype.canReshape=function(){if(!this.lJ)return!1;var t=this.layer;return null===t||!!t.Lw&&(null===(t=t.g)||!!t.Lw)},sa.prototype.canResize=function(){if(!this.mJ)return!1;var t=this.layer;return null===t||!!t.At&&(null===(t=t.g)||!!t.At)},sa.prototype.canRotate=function(){if(!this.pJ)return!1;var t=this.layer;return null===t||!!t.Mw&&(null===(t=t.g)||!!t.Mw)},sa.prototype.canSelect=function(){if(!this.cm)return!1;var t=this.layer;return null===t||!!t.tf&&(null===(t=t.g)||!!t.tf)},_h.defineProperty(sa,{CH:"copyable"},function(){return 0!=(1&this.N)},function(t){var e=0!=(1&this.N);e!==t&&(this.N^=1,this.h("copyable",e,t))}),_h.defineProperty(sa,{HH:"deletable"},function(){return 0!=(2&this.N)},function(t){var e=0!=(2&this.N);e!==t&&(this.N^=2,this.h("deletable",e,t))}),_h.defineProperty(sa,{IJ:"textEditable"},function(){return 0!=(4&this.N)},function(t){var e=0!=(4&this.N);e!==t&&(this.N^=4,this.h("textEditable",e,t),this.ce())}),_h.defineProperty(sa,{fI:"groupable"},function(){return 0!=(8&this.N)},function(t){var e=0!=(8&this.N);e!==t&&(this.N^=8,this.h("groupable",e,t))}),_h.defineProperty(sa,{ZI:"movable"},function(){return 0!=(16&this.N)},function(t){var e=0!=(16&this.N);e!==t&&(this.N^=16,this.h("movable",e,t))}),_h.defineProperty(sa,{wJ:"selectionAdorned"},function(){return 0!=(32&this.N)},function(t){var e=0!=(32&this.N);e!==t&&(this.N^=32,this.h("selectionAdorned",e,t),this.ce())}),_h.defineProperty(sa,{AA:"isInDocumentBounds"},function(){return 0!=(64&this.N)},function(t){var e=0!=(64&this.N);if(e!==t){this.N^=64;var i=this.g;null!==i&&i.rc(),this.h("isInDocumentBounds",e,t)}}),_h.defineProperty(sa,{oF:"isLayoutPositioned"},function(){return 0!=(128&this.N)},function(t){var e=0!=(128&this.N);e!==t&&(this.N^=128,this.h("isLayoutPositioned",e,t),this.J(t?4:8))}),_h.defineProperty(sa,{cm:"selectable"},function(){return 0!=(256&this.N)},function(t){var e=0!=(256&this.N);e!==t&&(this.N^=256,this.h("selectable",e,t),this.ce())}),_h.defineProperty(sa,{lJ:"reshapable"},function(){return 0!=(512&this.N)},function(t){var e=0!=(512&this.N);e!==t&&(this.N^=512,this.h("reshapable",e,t),this.ce())}),_h.defineProperty(sa,{mJ:"resizable"},function(){return 0!=(1024&this.N)},function(t){var e=0!=(1024&this.N);e!==t&&(this.N^=1024,this.h("resizable",e,t),this.ce())}),_h.defineProperty(sa,{pJ:"rotatable"},function(){return 0!=(2048&this.N)},function(t){var e=0!=(2048&this.N);e!==t&&(this.N^=2048,this.h("rotatable",e,t),this.ce())}),_h.defineProperty(sa,{fb:"isSelected"},function(){return 0!=(4096&this.N)},function(t){var e=0!=(4096&this.N);if(e!==t){var i=this.g;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.OI)){this.N^=4096;var n=!1;if(null!==i){n=i.wb,i.wb=!0;var o=i.selection;o.Ra(),t?o.add(this):o.remove(this),o.freeze()}this.h("isSelected",e,t),this.ce(),t=this.yJ,null!==t&&t(this),null!==i&&(i.Le(),i.wb=n)}}}),_h.defineProperty(sa,{Mg:"isHighlighted"},function(){return 0!=(524288&this.N)},function(t){var e=0!=(524288&this.N);if(e!==t){this.N^=524288;var i=this.g;null!==i&&(i=i.Vl,i.Ra(),t?i.add(this):i.remove(this),i.freeze()),this.h("isHighlighted",e,t),this.na(),t=this.iI,null!==t&&t(this)}}),_h.defineProperty(sa,{Zl:"isShadowed"},function(){return 0!=(8192&this.N)},function(t){var e=0!=(8192&this.N);e!==t&&(this.N^=8192,this.h("isShadowed",e,t),this.na())}),sa.prototype.Cf=function(t){this.N=t?131072|this.N:-131073&this.N},_h.defineProperty(sa,{fF:"isAnimated"},function(){return 0!=(262144&this.N)},function(t){var e=0!=(262144&this.N);e!==t&&(this.N^=262144,this.h("isAnimated",e,t))}),_h.defineProperty(sa,{iI:"highlightedChanged"},function(){return this.Fr},function(t){var e=this.Fr;e!==t&&(null!==t&&_h.j(t,"function",sa,"highlightedChanged"),this.Fr=t,this.h("highlightedChanged",e,t))}),_h.defineProperty(sa,{cB:"selectionObjectName"},function(){return this.Us},function(t){var e=this.Us;e!==t&&(this.Us=t,this.Zm=null,this.h("selectionObjectName",e,t))}),_h.defineProperty(sa,{xJ:"selectionAdornmentTemplate"},function(){return this.Ss},function(t){var e=this.Ss;e!==t&&(this instanceof Ua&&(t.type=ed),this.Ss=t,this.h("selectionAdornmentTemplate",e,t))}),_h.u(sa,{Du:"selectionObject"},function(){if(null===this.Zm){var t=this.cB;null!==t&&""!==t?(t=this.ud(t),this.Zm=null!==t?t:this):this instanceof Ua?(t=this.path,this.Zm=null!==t?t:this):this.Zm=this}return this.Zm}),_h.defineProperty(sa,{yJ:"selectionChanged"},function(){return this.Ts},function(t){var e=this.Ts;e!==t&&(null!==t&&_h.j(t,"function",sa,"selectionChanged"),this.Ts=t,this.h("selectionChanged",e,t))}),_h.defineProperty(sa,{UF:"resizeAdornmentTemplate"},function(){return this.Gs},function(t){var e=this.Gs;e!==t&&(this.Gs=t,this.h("resizeAdornmentTemplate",e,t))}),_h.defineProperty(sa,{WF:"resizeObjectName"},function(){return this.Is},function(t){var e=this.Is;e!==t&&(this.Is=t,this.kp=null,this.h("resizeObjectName",e,t))}),_h.u(sa,{VF:"resizeObject"},function(){if(null===this.kp){var t=this.WF;null!==t&&""!==t?(t=this.ud(t),this.kp=null!==t?t:this):this.kp=this}return this.kp}),_h.defineProperty(sa,{nJ:"resizeCellSize"},function(){return this.Hs},function(t){var e=this.Hs;e.L(t)||(this.Hs=t=t.S(),this.h("resizeCellSize",e,t))}),_h.defineProperty(sa,{qJ:"rotateAdornmentTemplate"},function(){return this.Js},function(t){var e=this.Js;e!==t&&(this.Js=t,this.h("rotateAdornmentTemplate",e,t))}),_h.defineProperty(sa,{rJ:"rotateObjectName"},function(){return this.Ks},function(t){var e=this.Ks;e!==t&&(this.Ks=t,this.lp=null,this.h("rotateObjectName",e,t))}),_h.u(sa,{YF:"rotateObject"},function(){if(null===this.lp){var t=this.rJ;null!==t&&""!==t?(t=this.ud(t),this.lp=null!==t?t:this):this.lp=this}return this.lp}),_h.defineProperty(sa,{text:"text"},function(){return this.Ed},function(t){var e=this.Ed;e!==t&&(this.Ed=t,this.h("text",e,t))}),_h.defineProperty(sa,{Ka:"containingGroup"},function(){return this.Zk},function(t){if(this.de()){var e=this.Zk;if(e!==t){null===t||this!==t&&!t.mi(this)||(this===t&&_h.k("Cannot make a Group a member of itself: "+this.toString()),_h.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.J(Ad);var i=this.g;if(null!==e?Bs(e,this):this instanceof Cs&&null!==i&&i.yl.remove(this),this.Zk=t,null!==t?As(t,this):this instanceof Cs&&null!==i&&i.yl.add(this),this.J(Cd),null!==i){var n=this.data,o=i.ba;null!==n&&o instanceof Xt&&o.fB(n,o.ub(null!==t?t.data:null))}if(n=this.sE,null!==n&&(o=!0,null!==i&&(o=i.Ua,i.Ua=!0),n(this,e,t),null!==i&&(i.Ua=o)),this instanceof Cs)for(i=new f(sa),le(i,this,!0,0,!0),i=i.i;i.next();)if((n=i.value)instanceof Ba)for(n=n.fe;n.next();)_a(n.value);if(this instanceof Ba)for(n=this.fe;n.next();)_a(n.value);this.h("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&ji(e,-1,t)}}else _h.k("cannot set the Part.containingGroup of a Link or Adornment")}),Vh=sa.prototype,Vh.Ek=function(){var t=this.Ka;null!==t&&(t.I(),null!==t.Kb&&t.Kb.I(),t.Uf())},Vh.na=function(){var t=this.g;null!==t&&!Ko(this)&&!wa(this)&&this.isVisible()&&this.nc.H()&&t.na(da(this,this.nc))},Vh.I=function(){Zo.prototype.I.call(this);var t=this.g;null!==t&&(t.sg.add(this),this instanceof Ba&&null!==this.Mc&&Io(this.Mc),t.Le(!0))},Vh.Vt=function(t){t||null!==(t=this.Zk)&&As(t,this)},Vh.Wt=function(t){t||null!==(t=this.Zk)&&Bs(t,this)},Vh.vn=function(){var t=this.data;if(null!==t){var e=this.g;null!==e&&null!==(e=e.ba)&&e.Wx(t)}},_h.defineProperty(sa,{sE:"containingGroupChanged"},function(){return this.Uq},function(t){var e=this.Uq;e!==t&&(null!==t&&_h.j(t,"function",sa,"containingGroupChanged"),this.Uq=t,this.h("containingGroupChanged",e,t))}),sa.prototype.findSubGraphLevel=function(){return Ta(this,this)},sa.prototype.findTopLevelPart=function(){return La(this,this)},_h.u(sa,{bq:"isTopLevel"},function(){return!(null!==this.Ka||this instanceof Ba&&this.lf)}),sa.prototype.isMemberOf=sa.prototype.mi=function(t){return t instanceof Cs&&Na(this,this,t)},sa.prototype.findCommonContainingGroup=sa.prototype.PH=function(t){if(null===t)return null;if(this===t)return this.Ka;for(var e=this;null!==e;)e instanceof Cs&&Pa(e,!0),e=e.Ka;for(var i=null,e=t;null!==e;){if(0!=(1048576&e.N)){i=e;break}e=e.Ka}for(e=this;null!==e;)e instanceof Cs&&Pa(e,!1),e=e.Ka;return i},_h.defineProperty(sa,{DI:"layoutConditions"},function(){return this.Tr},function(t){var e=this.Tr;e!==t&&(this.Tr=t,this.h("layoutConditions",e,t))}),sa.prototype.canLayout=function(){if(!this.oF||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.Kc||this instanceof Ba&&this.lf)},sa.prototype.invalidateLayout=sa.prototype.J=function(t){void 0===t&&(t=16777215);var e;if(this.oF&&0!=(t&this.DI)?(e=this.layer,null!==e&&e.Kc||this instanceof Ba&&this.lf?e=!1:(e=this.g,e=null===e||!e.oa.gb)):e=!1,e)if(null!==(e=this.Zk)){var i=e.Sb;null!==i?i.J():e.J(t)}else null!==(t=this.g)&&null!==(i=t.Sb)&&i.J()},_h.defineProperty(sa,{DE:"dragComputation"},function(){return this.nr},function(t){var e=this.nr;e!==t&&(null!==t&&_h.j(t,"function",sa,"dragComputation"),this.nr=t,this.h("dragComputation",e,t))}),_h.defineProperty(sa,{BJ:"shadowOffset"},function(){return this.an},function(t){var e=this.an;e.L(t)||(this.an=t=t.S(),this.na(),this.h("shadowOffset",e,t))}),_h.defineProperty(sa,{shadowColor:"shadowColor"},function(){return this.$m},function(t){var e=this.$m;e!==t&&(this.$m=t,this.na(),this.h("shadowColor",e,t))}),_h.defineProperty(sa,{shadowBlur:"shadowBlur"},function(){return this.Bg},function(t){var e=this.Bg;e!==t&&(this.Bg=t,this.na(),this.h("shadowBlur",e,t))}),_h.La(Aa,sa),_h.fa("Adornment",Aa),Aa.prototype.toString=function(){var t=this.Of;return"Adornment("+this.td+")"+(null!==t?t.toString():"")},Aa.prototype.updateRelationshipsFromData=function(){},Aa.prototype.ku=function(t){var e=this.rb.U,i=this.rb;if(e instanceof Ua&&i instanceof Tr){var n=e.path,i=n.vf;for(e.ku(t),i=n.vf,t=this.xa.n,e=t.length,n=0;n<e;n++){var o=t[n];o.Vf&&o instanceof Tr&&(o.hb=i)}}},_h.u(Aa,{placeholder:"placeholder"},function(){return this.Kb}),_h.defineProperty(Aa,{rb:"adornedObject"},function(){return this.Dc},function(t){var e=this.Of,i=null;null!==t&&(i=t.U),null===e||null!==t&&e===i||e.Cj(this.td),this.Dc=t,null!==i&&i.Bl(this.td,this)}),_h.u(Aa,{Of:"adornedPart"},function(){var t=this.Dc;return null!==t?t.U:null}),Aa.prototype.Yl=function(){var t=this.Dc;return null===t||(null===(t=t.U)||!Ko(t))},Aa.prototype.de=function(){return!1},_h.u(Aa,{Ka:"containingGroup"},function(){return null}),Aa.prototype.Vn=function(t,e,i,n,o,r,a){if(t===yc&&"elements"===e)if(o instanceof js){var s=o;null===this.Kb?this.Kb=s:this.Kb!==s&&_h.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else o instanceof Zo&&(s=o.Jt(function(t){return t instanceof js}))instanceof js&&(null===this.Kb?this.Kb=s:this.Kb!==s&&_h.k("Cannot insert a second Placeholder into the visual tree of an Adornment."));else t===mc&&"elements"===e&&null!==this.Kb&&(n===this.Kb?this.Kb=null:n instanceof Zo&&this.Kb.Xl(n)&&(this.Kb=null));sa.prototype.Vn.call(this,t,e,i,n,o,r,a)},Aa.prototype.updateAdornments=function(){},Aa.prototype.vn=function(){},_h.La(Ba,sa),_h.fa("Node",Ba),Ba.prototype.cloneProtected=function(t){sa.prototype.cloneProtected.call(this,t),t.ya=this.ya,t.ya=-17&this.ya,t.Ur=this.Ur,t.Vr=this.Vr,t.ol=this.ol,t.nt=this.nt,t.Nq=this.Nq.S(),t.Cs=this.Cs},Ba.prototype.ki=function(t){sa.prototype.ki.call(this,t),t.Uf(),t.Hh=this.Hh,t.le=null};var jd;Ba.DirectionDefault=jd=_h.p(Ba,"DirectionDefault",0),Ba.DirectionAbsolute=_h.p(Ba,"DirectionAbsolute",1);var Ed;Ba.DirectionRotatedNode=Ed=_h.p(Ba,"DirectionRotatedNode",2);var Id;Ba.DirectionRotatedNodeOrthogonal=Id=_h.p(Ba,"DirectionRotatedNodeOrthogonal",3),Ba.SpreadingNone=_h.p(Ba,"SpreadingNone",10);var Od;Ba.SpreadingEvenly=Od=_h.p(Ba,"SpreadingEvenly",11);var zd;Ba.SpreadingPacked=zd=_h.p(Ba,"SpreadingPacked",12),Ba.prototype.invalidateLinkBundle=function(t,e,i){void 0!==e&&null!==e||(e=""),void 0!==i&&null!==i||(i=""),null!==(t=Fa(this,t,e,i))&&t.$p()},Ba.prototype.Vn=function(t,e,i,n,o,r,a){t===yc&&"elements"===e?this.le=null:t===mc&&"elements"===e&&(null===this.g?this.le=null:n instanceof Mo&&sr(this,n,function(t,e){Ra(t,e,!0)})),sa.prototype.Vn.call(this,t,e,i,n,o,r,a)},Ba.prototype.invalidateConnectedLinks=Ba.prototype.Uf=function(t){void 0===t&&(t=null);for(var e=this.fe;e.next();){var i=e.value;null!==t&&t.contains(i)||(Ea(this,i.Jc),Ea(this,i.jd),i.Yb())}},Ba.prototype.Yl=function(){return!0},_h.defineProperty(Ba,{eJ:"portSpreading"},function(){return this.Cs},function(t){var e=this.Cs;e!==t&&(this.Cs=t,this.h("portSpreading",e,t),null!==(t=this.g)&&t.oa.gb||this.Uf())}),_h.defineProperty(Ba,{Rz:"avoidable"},function(){return 0!=(8&this.ya)},function(t){var e=0!=(8&this.ya);if(e!==t){this.ya^=8;var i=this.g;null!==i&&i.xA(this),this.h("avoidable",e,t)}}),_h.defineProperty(Ba,{jH:"avoidableMargin"},function(){return this.Nq},function(t){"number"==typeof t?t=new A(t):_h.G(t,A,Ba,"avoidableMargin");var e=this.Nq;if(!e.L(t)){this.Nq=t=t.S();var i=this.g;null!==i&&i.xA(this),this.h("avoidableMargin",e,t)}}),Ba.prototype.getAvoidableRect=function(t){return t.set(this.W),t.Iw(this.jH),t},Ba.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.Ka;return t},Ba.prototype.isVisible=function(){if(!sa.prototype.isVisible.call(this))return!1;var t=!0,e=uf,i=this.g;if(null!==i){if(t=i.Pa,t.kf&&null!==(t=t.Pm.ja(this))&&t.Tx)return!0;t=i.Pd,e=i.wB}if(e===uf){if(null!==(i=this.Rl())&&!i.gd)return!1}else if(e===cf){if(i=t?this.KE():this.LE(),0<i.count&&i.all(function(t){return!t.gd}))return!1}else if(e===ff&&(i=t?this.KE():this.LE(),0<i.count&&i.any(function(t){return!t.gd})))return!1;return null===(i=this.Mc)||i.isVisible()},Ba.prototype.vd=function(t){sa.prototype.vd.call(this,t);for(var e=this.fe;e.next();)e.value.vd(t)},_h.u(Ba,{fe:"linksConnected"},function(){return this.oc.i}),Ba.prototype.findLinksConnected=Ba.prototype.IE=function(t){if(void 0===t&&(t=null),null===t)return this.oc.i;var e=new l(this.oc),i=this;return e.iq=function(e){return e.Y===i&&e.Lg===t||e.$===i&&e.Eh===t},e},Ba.prototype.findLinksOutOf=Ba.prototype.hx=function(t){void 0===t&&(t=null);var e=new l(this.oc),i=this;return e.iq=function(e){return e.Y===i&&(null===t||e.Lg===t)},e},Ba.prototype.findLinksInto=Ba.prototype.Kg=function(t){void 0===t&&(t=null);var e=new l(this.oc),i=this;return e.iq=function(e){return e.$===i&&(null===t||e.Eh===t)},e},Ba.prototype.findNodesConnected=Ba.prototype.JE=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.oc.i;n.next();){var o=n.value;o.Y===this?null!==t&&o.Lg!==t||(o=o.$,null!==e?e.add(o):null!==i&&i!==o?(e=new f(Ba),e.add(i),e.add(o)):i=o):o.$!==this||null!==t&&o.Eh!==t||(o=o.Y,null!==e?e.add(o):null!==i&&i!==o?(e=new f(Ba),e.add(i),e.add(o)):i=o)}return null!==e?e.i:null!==i?new a(i):Jh},Ba.prototype.findNodesOutOf=Ba.prototype.LE=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.oc.i;n.next();){var o=n.value;o.Y!==this||null!==t&&o.Lg!==t||(o=o.$,null!==e?e.add(o):null!==i&&i!==o?(e=new f(Ba),e.add(i),e.add(o)):i=o)}return null!==e?e.i:null!==i?new a(i):Jh},Ba.prototype.findNodesInto=Ba.prototype.KE=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.oc.i;n.next();){var o=n.value;o.$!==this||null!==t&&o.Eh!==t||(o=o.Y,null!==e?e.add(o):null!==i&&i!==o?(e=new f(Ba),e.add(i),e.add(o)):i=o)}return null!==e?e.i:null!==i?new a(i):Jh},Ba.prototype.findLinksBetween=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new l(this.oc),o=this;return n.iq=function(n){return!(n.Y!==o||n.$!==t||null!==e&&n.Lg!==e||null!==i&&n.Eh!==i)||!(n.Y!==t||n.$!==o||null!==i&&n.Lg!==i||null!==e&&n.Eh!==e)},n},Ba.prototype.findLinksTo=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new l(this.oc),o=this;return n.iq=function(n){return!(n.Y!==o||n.$!==t||null!==e&&n.Lg!==e||null!==i&&n.Eh===i)},n},_h.defineProperty(Ba,{FI:"linkConnected"},function(){return this.Ur},function(t){var e=this.Ur;e!==t&&(null!==t&&_h.j(t,"function",Ba,"linkConnected"),this.Ur=t,this.h("linkConnected",e,t))}),_h.defineProperty(Ba,{GI:"linkDisconnected"},function(){return this.Vr},function(t){var e=this.Vr;e!==t&&(null!==t&&_h.j(t,"function",Ba,"linkDisconnected"),this.Vr=t,this.h("linkDisconnected",e,t))}),_h.defineProperty(Ba,{Fx:"linkValidation"},function(){return this.ol},function(t){var e=this.ol;e!==t&&(null!==t&&_h.j(t,"function",Ba,"linkValidation"),this.ol=t,this.h("linkValidation",e,t))}),Ba.prototype.updateRelationshipsFromData=function(){sa.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(null!==t){var e=this.g;if(null!==e){var i=e.ba;i instanceof ee&&(t=i.Cn(t),t=e.Ie(t),i=this.Rl(),t!==i&&(i=this.xn(),null!==t?null!==i?e.Pd?i.Y=t:i.$=t:On(e,t,this):null!==i&&vn(e,i,!1)))}}},Ba.prototype.Vt=function(t){sa.prototype.Vt.call(this,t),t||(za(this),null!==(t=this.Wo)&&Ja(t,this))},Ba.prototype.Wt=function(t){sa.prototype.Wt.call(this,t),t||null!==(t=this.Wo)&&null!==t.rf&&(t.rf.remove(this),t.I())},Ba.prototype.vn=function(){if(0<this.oc.count){var t=this.g;if(null!==t)for(var e=t.ob.CE,i=this.oc.copy().i;i.next();){var n=i.value;e?t.remove(n):(n.Y===this&&(n.Y=null),n.$===this&&(n.$=null))}}this.Mc=null,sa.prototype.vn.call(this)},_h.u(Ba,{lf:"isLinkLabel"},function(){return null!==this.Wo}),_h.defineProperty(Ba,{Mc:"labeledLink"},function(){return this.Wo},function(t){var e=this.Wo;if(e!==t){var i=this.g,n=this.data;if(null!==e&&(null!==e.rf&&(e.rf.remove(this),e.I()),null!==i&&null!==n&&!i.oa.gb)){var o=e.data,r=i.ba;if(null!==o&&r instanceof Xt){var a=r.ub(n);void 0!==a&&r.jJ(o,a)}}this.Wo=t,null!==t&&(Ja(t,this),null===i||null===n||i.oa.gb||(o=t.data,r=i.ba,null!==o&&r instanceof Xt&&void 0!==(a=r.ub(n))&&r.fE(o,a))),Io(this),this.h("labeledLink",e,t)}}),Ba.prototype.findPort=Ba.prototype.Pl=function(t){if(null===this.le){if(""===t&&!1===this.Dk)return this;Ga(this)}var e=this.le.ja(t);return null!==e||""!==t&&null!==(e=this.le.ja(""))?e:this},_h.u(Ba,{port:"port"},function(){return this.Pl("")}),_h.u(Ba,{ports:"ports"},function(){return null===this.le&&Ga(this),this.le.tF}),Ba.prototype.isInTreeOf=function(t){if(null===t||t===this)return!1;var e=!0,i=this.g;if(null!==i&&(e=i.Pd),i=this,e)for(;i!==t;){for(var e=null,n=i.oc.i;n.next();){var o=n.value;if(o.Lc&&(e=o.Y)!==i&&e!==this)break}if(e===this||null===e||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.oc.i;n.next()&&(o=n.value,!o.Lc||(e=o.$)===i||e===this););if(e===this||null===e||e===i)return!1;i=e}return!0},Ba.prototype.findTreeRoot=function(){var t=!0,e=this.g;if(null!==e&&(t=e.Pd),e=this,t)for(;;){for(var t=null,i=e.oc.i;i.next();){var n=i.value;if(n.Lc&&(t=n.Y)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,i=e.oc.i;i.next()&&(n=i.value,!n.Lc||(t=n.$)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},Ba.prototype.findCommonTreeParent=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)Pa(e,!0),e=e.Rl();for(var i=null,e=t;null!==e;){if(0!=(1048576&e.N)){i=e;break}e=e.Rl()}for(e=this;null!==e;)Pa(e,!1),e=e.Rl();return i},Ba.prototype.findTreeParentLink=Ba.prototype.xn=function(){var t=!0,e=this.g;if(null!==e&&(t=e.Pd),e=this.oc.i,t){for(;e.next();)if(t=e.value,t.Lc&&t.Y!==this)return t}else for(;e.next();)if(t=e.value,t.Lc&&t.$!==this)return t;return null},Ba.prototype.findTreeParentNode=Ba.prototype.Rl=function(){var t=this.qk;if(null===t)return null;if(t instanceof Ba)return t;var e=!0,t=this.g;if(null!==t&&(e=t.Pd),t=this.oc.i,e){for(;t.next();)if(e=t.value,e.Lc&&(e=e.Y)!==this)return this.qk=e}else for(;t.next();)if(e=t.value,e.Lc&&(e=e.$)!==this)return this.qk=e;return this.qk=null},Ba.prototype.findTreeParentChain=function(){function t(e,i){if(null!==e){i.add(e);var n=e.xn();null!==n&&(i.add(n),t(e.Rl(),i))}}var e=new f(sa);return t(this,e),e},Ba.prototype.findTreeLevel=function(){return qa(this,this)},Ba.prototype.findTreeChildrenLinks=Ba.prototype.jx=function(){var t=!0,e=this.g;null!==e&&(t=e.Pd);var e=new l(this.oc),i=this;return e.iq=t?function(t){return!(!t.Lc||t.Y!==i)}:function(t){return!(!t.Lc||t.$!==i)},e},Ba.prototype.findTreeChildrenNodes=Ba.prototype.NE=function(){var t=!0,e=this.g;null!==e&&(t=e.Pd);var i=e=null,n=this.oc.i;if(t)for(;n.next();)t=n.value,t.Lc&&t.Y===this&&(t=t.$,null!==e?e.add(t):null!==i&&i!==t?(e=new u(Ba),e.add(i),e.add(t)):i=t);else for(;n.next();)t=n.value,t.Lc&&t.$===this&&(t=t.Y,null!==e?e.add(t):null!==i&&i!==t?(e=new u(Ba),e.add(i),e.add(t)):i=t);return null!==e?e.i:null!==i?new a(i):Jh},Ba.prototype.findTreeParts=function(t){void 0===t&&(t=Infinity),_h.j(t,"number",Ba,"findTreeParts:level");var e=new f(sa);return le(e,this,!1,t,!0),e},Ba.prototype.collapseTree=Ba.prototype.collapseTree=function(t){void 0===t&&(t=1),_h.Fd(t,Ba,"collapseTree:level"),1>t&&(t=1);var e=this.g;if(null!==e&&!e.wh){e.wh=!0;var i=new f(Ba);i.add(this),Wa(this,i,e.Pd,t,e.Pa,this,e.wB===uf),e.wh=!1}},Ba.prototype.expandTree=Ba.prototype.expandTree=function(t){void 0===t&&(t=2),_h.Fd(t,Ba,"expandTree:level"),2>t&&(t=2);var e=this.g;if(null!==e&&!e.wh){e.wh=!0;var i=new f(Ba);i.add(this),Va(this,i,e.Pd,t,e.Pa,this,e.wB===uf),e.wh=!1}},_h.defineProperty(Ba,{gd:"isTreeExpanded"},function(){return 0!=(1&this.ya)},function(t){var e=0!=(1&this.ya);if(e!==t){this.ya^=1;var i=this.g;if(this.h("isTreeExpanded",e,t),null!==(e=this.PJ)){var n=!0;null!==i&&(n=i.Ua,i.Ua=!0),e(this),null!==i&&(i.Ua=n)}null!==i&&i.oa.gb?this.vd(t):t?this.expandTree():this.collapseTree()}}),_h.defineProperty(Ba,{Nu:"wasTreeExpanded"},function(){return 0!=(2&this.ya)},function(t){var e=0!=(2&this.ya);e!==t&&(this.ya^=2,this.h("wasTreeExpanded",e,t))}),_h.defineProperty(Ba,{PJ:"treeExpandedChanged"},function(){return this.nt},function(t){var e=this.nt;e!==t&&(null!==t&&_h.j(t,"function",Ba,"treeExpandedChanged"),this.nt=t,this.h("treeExpandedChanged",e,t))}),_h.defineProperty(Ba,{wj:"isTreeLeaf"},function(){return 0!=(4&this.ya)},function(t){var e=0!=(4&this.ya);e!==t&&(this.ya^=4,this.h("isTreeLeaf",e,t))}),_h.La(Ua,sa),_h.fa("Link",Ua),Ua.prototype.cloneProtected=function(t){sa.prototype.cloneProtected.call(this,t),t.Wb=-113&this.Wb,t.Nh=this.Nh,t.wr=this.wr,t.hi=this.hi,t.mt=this.mt,t.Fq=this.Fq,t.$q=this.$q,
t.cr=this.cr,t.dr=this.dr,t.Um=this.Um,t.at=this.at,null!==this.V&&(t.V=this.V.copy())},Ua.prototype.ki=function(t){sa.prototype.ki.call(this,t),this.Nh=t.Nh,this.hi=t.hi,t.Ue=null,t.Yb(),t.ti=this.ti},Ua.prototype.gc=function(t){t.De===Ua?2==(2&t.value)?this.Yx=t:t===Wd||t===Hd||t===Vd?this.Ye=t:t===Ud||t===_d||t===Kd?this.wt=t:t!==Gd&&t!==qd&&_h.k("Unknown Link enum value for a Link property: "+t):sa.prototype.gc.call(this,t)};var Gd;Ua.Normal=Gd=_h.p(Ua,"Normal",1),Ua.Orthogonal=_h.p(Ua,"Orthogonal",2),Ua.AvoidsNodes=_h.p(Ua,"AvoidsNodes",6);var Rd;Ua.AvoidsNodesStraight=Rd=_h.p(Ua,"AvoidsNodesStraight",7);var qd;Ua.None=qd=_h.p(Ua,"None",0);var Wd;Ua.Bezier=Wd=_h.p(Ua,"Bezier",9);var Hd;Ua.JumpGap=Hd=_h.p(Ua,"JumpGap",10);var Vd;Ua.JumpOver=Vd=_h.p(Ua,"JumpOver",11);var Ud;Ua.End=Ud=_h.p(Ua,"End",17);var _d;Ua.Scale=_d=_h.p(Ua,"Scale",18);var Kd;Ua.Stretch=Kd=_h.p(Ua,"Stretch",19);var Jd;Ua.OrientAlong=Jd=_h.p(Ua,"OrientAlong",21);var Yd;Ua.OrientPlus90=Yd=_h.p(Ua,"OrientPlus90",22);var $d;Ua.OrientMinus90=$d=_h.p(Ua,"OrientMinus90",23);var Xd;Ua.OrientOpposite=Xd=_h.p(Ua,"OrientOpposite",24);var Qd;Ua.OrientUpright=Qd=_h.p(Ua,"OrientUpright",25);var Zd;Ua.OrientPlus90Upright=Zd=_h.p(Ua,"OrientPlus90Upright",26);var tp;Ua.OrientMinus90Upright=tp=_h.p(Ua,"OrientMinus90Upright",27);var ep;Ua.OrientUpright45=ep=_h.p(Ua,"OrientUpright45",28),Vh=Ua.prototype,Vh.Ld=function(){null===this.V&&(this.V=new Ns)},Vh.Yl=function(){var t=this.Y;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Ko(t)||wa(t))return!1}return null===(t=this.$)||(e=t.findVisibleNode(),null!==e&&(t=e),!Ko(t)&&!wa(t))},Vh.hB=function(){return!1},Vh.iB=function(){},Vh.de=function(){return!1},Ua.prototype.computeAngle=function(t,e,i){switch(t=0,e){default:case qd:t=0;break;case Jd:t=i;break;case Yd:t=i+90;break;case $d:t=i-90;break;case Xd:t=i+180;break;case Qd:t=ft(i),90<t&&270>t&&(t-=180);break;case Zd:t=ft(i+90),90<t&&270>t&&(t-=180);break;case tp:t=ft(i-90),90<t&&270>t&&(t-=180);break;case ep:if(45<(t=ft(i))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return ft(t)},_h.defineProperty(Ua,{Y:"fromNode"},function(){return this.og},function(t){var e=this.og;if(e!==t){var i=this.Jc;null!==e&&(this.Eg!==e&&Oa(e,this,i),ds(this),this.J(Ad)),this.og=t,null!==t&&this.vd(t.isVisible()),this.Gi=null,this.Yb();var n=this.g;if(null!==n){var o=this.data,r=n.ba;if(null!==o)if(r instanceof Xt){var a=null!==t?t.data:null;r.dB(o,r.ub(a))}else r instanceof ee&&(a=null!==t?t.data:null,n.Pd?r.oi(o,r.ub(a)):(null!==e&&r.oi(e.data,void 0),r.oi(a,r.ub(null!==this.Eg?this.Eg.data:null))))}o=this.Jc,r=this.QE,null!==r&&(a=!0,null!==n&&(a=n.Ua,n.Ua=!0),r(this,i,o),null!==n&&(n.Ua=a)),null!==t&&(this.Eg!==t&&Ia(t,this,o),fs(this),this.J(Cd)),this.h("fromNode",e,t),_a(this)}}),_h.defineProperty(Ua,{Lg:"fromPortId"},function(){return this.Nh},function(t){var e=this.Nh;if(e!==t){var i=this.Jc;null!==i&&Ea(this.Y,i),ds(this),this.Nh=t;var n=this.Jc;null!==n&&Ea(this.Y,n);var o=this.g;if(null!==o){var r=this.data,a=o.ba;null!==r&&a instanceof Xt&&a.eB(r,t)}i!==n&&(this.Gi=null,this.Yb(),null!==(r=this.QE)&&(a=!0,null!==o&&(a=o.Ua,o.Ua=!0),r(this,i,n),null!==o&&(o.Ua=a))),fs(this),this.h("fromPortId",e,t)}}),_h.u(Ua,{Jc:"fromPort"},function(){var t=this.og;return null===t?null:t.Pl(this.Nh)}),_h.defineProperty(Ua,{QE:"fromPortChanged"},function(){return this.wr},function(t){var e=this.wr;e!==t&&(null!==t&&_h.j(t,"function",Ua,"fromPortChanged"),this.wr=t,this.h("fromPortChanged",e,t))}),_h.defineProperty(Ua,{$:"toNode"},function(){return this.Eg},function(t){var e=this.Eg;if(e!==t){var i=this.jd;null!==e&&(this.og!==e&&Oa(e,this,i),ds(this),this.J(Ad)),this.Eg=t,null!==t&&this.vd(t.isVisible()),this.Gi=null,this.Yb();var n=this.g;if(null!==n){var o=this.data,r=n.ba;if(null!==o)if(r instanceof Xt){var a=null!==t?t.data:null;r.jB(o,r.ub(a))}else r instanceof ee&&(a=null!==t?t.data:null,n.Pd?(null!==e&&r.oi(e.data,void 0),r.oi(a,r.ub(null!==this.og?this.og.data:null))):r.oi(o,r.ub(a)))}o=this.jd,r=this.qG,null!==r&&(a=!0,null!==n&&(a=n.Ua,n.Ua=!0),r(this,i,o),null!==n&&(n.Ua=a)),null!==t&&(this.og!==t&&Ia(t,this,o),fs(this),this.J(Cd)),this.h("toNode",e,t),_a(this)}}),_h.defineProperty(Ua,{Eh:"toPortId"},function(){return this.hi},function(t){var e=this.hi;if(e!==t){var i=this.jd;null!==i&&Ea(this.$,i),ds(this),this.hi=t;var n=this.jd;null!==n&&Ea(this.$,n);var o=this.g;if(null!==o){var r=this.data,a=o.ba;null!==r&&a instanceof Xt&&a.kB(r,t)}i!==n&&(this.Gi=null,this.Yb(),null!==(r=this.qG)&&(a=!0,null!==o&&(a=o.Ua,o.Ua=!0),r(this,i,n),null!==o&&(o.Ua=a))),fs(this),this.h("toPortId",e,t)}}),_h.u(Ua,{jd:"toPort"},function(){var t=this.Eg;return null===t?null:t.Pl(this.hi)}),_h.defineProperty(Ua,{qG:"toPortChanged"},function(){return this.mt},function(t){var e=this.mt;e!==t&&(null!==t&&_h.j(t,"function",Ua,"toPortChanged"),this.mt=t,this.h("toPortChanged",e,t))}),_h.defineProperty(Ua,{Ab:"fromSpot"},function(){return null!==this.V?this.V.Sj:eu},function(t){this.Ld();var e=this.V.Sj;e.L(t)||(t=t.S(),this.V.Sj=t,this.h("fromSpot",e,t),this.Yb())}),_h.defineProperty(Ua,{Sl:"fromEndSegmentLength"},function(){return null!==this.V?this.V.Qj:NaN},function(t){this.Ld();var e=this.V.Qj;e!==t&&(0>t&&_h.Ea(t,">= 0",Ua,"fromEndSegmentLength"),this.V.Qj=t,this.h("fromEndSegmentLength",e,t),this.Yb())}),_h.defineProperty(Ua,{Rt:"fromEndSegmentDirection"},function(){return null!==this.V?this.V.Pj:jd},function(t){this.Ld();var e=this.V.Pj;e!==t&&(_h.Ft("Link.fromEndSegmentDirection","2.0"),this.V.Pj=t,this.h("fromEndSegmentDirection",e,t),this.Yb())}),_h.defineProperty(Ua,{St:"fromShortLength"},function(){return null!==this.V?this.V.Rj:NaN},function(t){this.Ld();var e=this.V.Rj;e!==t&&(this.V.Rj=t,this.h("fromShortLength",e,t),this.Yb())}),_h.defineProperty(Ua,{Bb:"toSpot"},function(){return null!==this.V?this.V.pk:eu},function(t){this.Ld();var e=this.V.pk;e.L(t)||(t=t.S(),this.V.pk=t,this.h("toSpot",e,t),this.Yb())}),_h.defineProperty(Ua,{jm:"toEndSegmentLength"},function(){return null!==this.V?this.V.nk:NaN},function(t){this.Ld();var e=this.V.nk;e!==t&&(0>t&&_h.Ea(t,">= 0",Ua,"toEndSegmentLength"),this.V.nk=t,this.h("toEndSegmentLength",e,t),this.Yb())}),_h.defineProperty(Ua,{Ku:"toEndSegmentDirection"},function(){return null!==this.V?this.V.mk:jd},function(t){this.Ld();var e=this.V.mk;e!==t&&(_h.Ft("Link.toEndSegmentDirection","2.0"),this.V.mk=t,this.h("toEndSegmentDirection",e,t),this.Yb())}),_h.defineProperty(Ua,{Lu:"toShortLength"},function(){return null!==this.V?this.V.ok:NaN},function(t){this.Ld();var e=this.V.ok;e!==t&&(this.V.ok=t,this.h("toShortLength",e,t),this.Yb())}),Ua.prototype.Ek=function(){var t=this.Ka;null!==t&&this.Y!==t&&this.$!==t&&t.Sw&&sa.prototype.Ek.call(this)},Ua.prototype.getOtherNode=Ua.prototype.oA=function(t){var e=this.Y;return t===e?this.$:e},Ua.prototype.getOtherPort=function(t){var e=this.Jc;return t===e?this.jd:e},_h.u(Ua,{YK:"isLabeledLink"},function(){return null!==this.rf&&0<this.rf.count}),_h.u(Ua,{Wf:"labelNodes"},function(){return null===this.rf?Jh:this.rf.i}),Ua.prototype.Vt=function(t){sa.prototype.Vt.call(this,t),ls(this)&&us(this,this.W),t||(t=this.og,null!==t&&Ia(t,this,this.Jc),t=this.Eg,null!==t&&Ia(t,this,this.jd),fs(this))},Ua.prototype.Wt=function(t){sa.prototype.Wt.call(this,t),ls(this)&&us(this,this.W),t||(t=this.og,null!==t&&Oa(t,this,this.Jc),t=this.Eg,null!==t&&Oa(t,this,this.jd),ds(this))},Ua.prototype.vn=function(){if(this.Zg=!0,null!==this.rf){var t=this.g;if(null!==t)for(var e=this.rf.copy().i;e.next();)t.remove(e.value)}null!==(e=this.data)&&null!==(t=this.g)&&(t=t.ba,t instanceof Xt?t.Vx(e):t instanceof ee&&t.oi(e,void 0))},Ua.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var e=this.g;if(null!==e){var i=e.ba;if(i instanceof Xt){var n=i.Tl(t);if(this.Y=n=e.Ie(n),n=i.Ul(t),this.$=n=e.Ie(n),t=i.Bk(t),0<t.length||0<this.Wf.count){if(1===t.length&&1===this.Wf.count){var n=t[0],o=this.Wf.first();if(i.ub(o.data)===n)return}var n=(new f).Hc(t),r=new f;if(this.Wf.each(function(t){null!==t.data&&void 0!==(t=i.ub(t.data))&&r.add(t)}),t=r.copy(),t.Ux(n),n=n.copy(),n.Ux(r),0<t.count||0<n.count){var a=this;t.each(function(t){null!==(t=e.Ie(t))&&t.Mc===a&&(t.Mc=null)}),n.each(function(t){null!==(t=e.Ie(t))&&t.Mc!==a&&(t.Mc=a)})}}}}}},Ua.prototype.move=function(t){var e=this.position,i=e.x;for(isNaN(i)&&(i=0),e=e.y,isNaN(e)&&(e=0),i=t.x-i,e=t.y-e,sa.prototype.move.call(this,t),this.Hk(i,e),t=this.Wf;t.next();){var n=t.value,o=n.position;n.moveTo(o.x+i,o.y+e)}},_h.defineProperty(Ua,{hJ:"relinkableFrom"},function(){return 0!=(1&this.Wb)},function(t){var e=0!=(1&this.Wb);e!==t&&(this.Wb^=1,this.h("relinkableFrom",e,t),this.ce())}),_h.defineProperty(Ua,{iJ:"relinkableTo"},function(){return 0!=(2&this.Wb)},function(t){var e=0!=(2&this.Wb);e!==t&&(this.Wb^=2,this.h("relinkableTo",e,t),this.ce())}),Ua.prototype.canRelinkFrom=function(){if(!this.hJ)return!1;var t=this.layer;return null===t||!!t.hn&&!(null!==(t=t.g)&&!t.hn)},Ua.prototype.canRelinkTo=function(){if(!this.iJ)return!1;var t=this.layer;return null===t||!!t.hn&&!(null!==(t=t.g)&&!t.hn)},_h.defineProperty(Ua,{zu:"resegmentable"},function(){return 0!=(4&this.Wb)},function(t){var e=0!=(4&this.Wb);e!==t&&(this.Wb^=4,this.h("resegmentable",e,t),this.ce())}),_h.defineProperty(Ua,{Lc:"isTreeLink"},function(){return 0!=(8&this.Wb)},function(t){var e=0!=(8&this.Wb);e!==t&&(this.Wb^=8,this.h("isTreeLink",e,t),null!==this.Y&&za(this.Y),null!==this.$&&za(this.$))}),_h.u(Ua,{path:"path"},function(){var t=this.Jd();return t instanceof Tr?t:null}),_h.u(Ua,{Wn:"routeBounds"},function(){this.co();var t=new S,e=Infinity,i=Infinity,n=this.qa;if(0===n)t.m(NaN,NaN,0,0);else{if(1===n)n=this.l(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.m(n.x,n.y,0,0);else if(2===n){var o=this.l(0),r=this.l(1),e=Math.min(o.x,r.x),i=Math.min(o.y,r.y);t.m(o.x,o.y,0,0),t.ri(r)}else if(this.computeCurve()===Wd&&3<=n&&!this.jc)if(o=this.l(0),e=o.x,i=o.y,t.m(e,i,0,0),3===n)n=this.l(1),e=Math.min(n.x,e),i=Math.min(n.y,i),r=this.l(2),e=Math.min(r.x,e),i=Math.min(r.y,i),X(o.x,o.y,n.x,n.y,n.x,n.y,r.x,r.y,.5,t);else for(var a=3;a<n;a+=3){var s=this.l(a-2);a+3>=n&&(a=n-1);var l=this.l(a-1),r=this.l(a);X(o.x,o.y,s.x,s.y,l.x,l.y,r.x,r.y,.5,t),e=Math.min(r.x,e),i=Math.min(r.y,i),o=r}else for(o=this.l(0),r=this.l(1),e=Math.min(o.x,r.x),i=Math.min(o.y,r.y),t.m(o.x,o.y,0,0),t.ri(r),a=2;a<n;a++)o=this.l(a),e=Math.min(o.x,e),i=Math.min(o.y,i),t.ri(o);this.Ez.m(e-t.x,i-t.y)}return this.lw=t}),_h.u(Ua,{zF:"midPoint"},function(){return this.co(),this.computeMidPoint(new b)}),Ua.prototype.computeMidPoint=function(t){var e=this.qa;if(0===e)return t.assign(Ju),t;if(1===e)return t.assign(this.l(0)),t;if(2===e){var i=this.l(0),n=this.l(1);return t.m((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.computeCurve()===Wd&&3<=e&&!this.jc){if(3===e)return this.l(1);var i=(e-1)/3|0,o=3*(i/2|0);if(1==i%2){var i=this.l(o),n=this.l(o+1),r=this.l(o+2),o=this.l(o+3),e=n.x,a=n.y,n=r.x,s=r.y,r=(e+n)/2,l=(a+s)/2,a=((i.y+a)/2+l)/2,s=(l+(s+o.y)/2)/2;t.x=(((i.x+e)/2+r)/2+(r+(n+o.x)/2)/2)/2,t.y=(a+s)/2}else t.assign(this.l(o));return t}for(o=0,r=_h.lb(),a=0;a<e-1;a++)i=0,i=this.l(a),n=this.l(a+1),J(i.x,n.x)?0>(i=n.y-i.y)&&(i=-i):J(i.y,n.y)?0>(i=n.x-i.x)&&(i=-i):i=Math.sqrt(i.uf(n)),r.push(i),o+=i;for(n=a=i=0;i<o/2&&a<e&&(n=r[a],!(i+n>o/2));)i+=n,a++;return _h.wa(r),e=this.l(a),r=this.l(a+1),e.x===r.x?e.y>r.y?t.m(e.x,e.y-(o/2-i)):t.m(e.x,e.y+(o/2-i)):e.y===r.y?e.x>r.x?t.m(e.x-(o/2-i),e.y):t.m(e.x+(o/2-i),e.y):(i=(o/2-i)/n,t.m(e.x+i*(r.x-e.x),e.y+i*(r.y-e.y))),t},_h.u(Ua,{yF:"midAngle"},function(){return this.co(),this.computeMidAngle()}),Ua.prototype.computeMidAngle=function(){var t=this.qa;if(2>t)return NaN;if(this.computeCurve()===Wd&&4<=t&&!this.jc){var e=(t-1)/3|0,i=3*(e/2|0);if(1==e%2){var i=Math.floor(i),e=this.l(i),n=this.l(i+1),t=this.l(i+2),i=this.l(i+3),o=n.x,n=n.y,r=t.x,t=t.y,a=(o+r)/2,s=(n+t)/2;return Xh(((e.x+o)/2+a)/2,((e.y+n)/2+s)/2,(a+(r+i.x)/2)/2,(s+(t+i.y)/2)/2)}if(0<i&&i+1<t)return e=this.l(i-1),n=this.l(i+1),e.Rb(n)}return i=t/2|0,0==t%2?(e=this.l(i-1),n=this.l(i),4<=t&&e.Ic(n)&&(e=this.l(i-2),t=this.l(i+1),i=e.uf(n),o=n.uf(t),!(i>o+10))?o>i+10?n.Rb(t):e.Rb(t):e.Rb(n)):(e=this.l(i-1),n=this.l(i),t=this.l(i+1),i=e.uf(n),o=n.uf(t),i>o+10?e.Rb(n):o>i+10?n.Rb(t):e.Rb(t))},_h.defineProperty(Ua,{points:"points"},function(){return this.bd},function(t){var e=this.bd;if(e!==t){var i=null;if(Array.isArray(t)){var n=0==t.length%2;if(n)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){n=!1;break}if(n)for(i=new u(b),n=0;n<t.length/2;n++){var r=new b(t[2*n],t[2*n+1]).freeze();i.add(r)}else{for(o=!0,n=0;n<t.length;n++){var a=t[n];if(!_h.Qa(r)||"number"!=typeof a.x||isNaN(a.x)||"number"!=typeof a.y||isNaN(a.y)){o=!1;break}}if(o)for(i=new u(b),n=0;n<t.length;n++)r=t[n],i.add(new b(r.x,r.y).freeze());else _h.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof u)for(i=t.copy(),t=i.i;t.next();)t.value.freeze();else _h.k("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.bd=i,this.Ke(),this.I(),Ya(this),t=this.g,null!==t&&(t.Hn||t.oa.gb||t.Gx.add(this),t.Pa.pc&&(this.mp=i)),this.h("points",e,i)}}),_h.u(Ua,{qa:"pointsCount"},function(){return this.bd.count}),Ua.prototype.getPoint=Ua.prototype.l=function(t){return this.bd.n[t]},Ua.prototype.setPoint=Ua.prototype.Ug=function(t,e){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.gg(t,e)},Ua.prototype.setPointAt=Ua.prototype.ea=function(t,e,i){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.gg(t,new b(e,i))},Ua.prototype.insertPoint=function(t,e){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.Md(t,e)},Ua.prototype.insertPointAt=Ua.prototype.w=function(t,e,i){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.Md(t,new b(e,i))},Ua.prototype.addPoint=Ua.prototype.ii=function(t){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.add(t)},Ua.prototype.addPointAt=Ua.prototype.hj=function(t,e){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.add(new b(t,e))},Ua.prototype.removePoint=Ua.prototype.QF=function(t){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.Yc(t)},Ua.prototype.clearPoints=Ua.prototype.Ip=function(){null===this.Ue&&_h.k("Call Link.startRoute before modifying the points of the route."),this.bd.clear()},Ua.prototype.movePoints=Ua.prototype.Hk=function(t,e){for(var i=new u(b),n=this.bd.i;n.next();){var o=n.value;i.add(new b(o.x+t,o.y+e).freeze())}i.freeze(),n=this.bd,this.bd=i,this.I(),Ya(this),o=this.g,null!==o&&o.Pa.pc&&(this.mp=i),this.h("points",n,i)},Ua.prototype.startRoute=Ua.prototype.em=function(){null===this.Ue&&(this.Ue=this.bd,this.bd=this.bd.copy())},Ua.prototype.commitRoute=Ua.prototype.jj=function(){if(null!==this.Ue){for(var t=this.Ue,e=this.bd,i=Infinity,n=Infinity,o=t.n,r=o.length,a=0;a<r;a++)var s=o[a],i=Math.min(s.x,i),n=Math.min(s.y,n);for(var l=Infinity,h=Infinity,u=e.n,c=u.length,a=0;a<c;a++)s=u[a],l=Math.min(s.x,l),h=Math.min(s.y,h),s.freeze();if(e.freeze(),c===r){for(a=0;a<c;a++)if(r=o[a],s=u[a],r.x-i!=s.x-l||r.y-n!=s.y-h){this.I(),this.Ke();break}}else this.I(),this.Ke();this.Ue=null,i=this.g,null!==i&&i.Pa.pc&&(this.mp=e),Ya(this),this.h("points",t,e)}},Ua.prototype.rollbackRoute=Ua.prototype.oJ=function(){null!==this.Ue&&(this.bd=this.Ue,this.Ue=null)},Ua.prototype.invalidateRoute=Ua.prototype.Yb=function(){if(!this.fm){var t=this.g;t&&(t.Gx.contains(this)||t.oa.gb||t.Pa.yI&&!t.Pa.kf)||null!==(t=this.path)&&(this.Zg=!1,this.I(),t.I())}},_h.defineProperty(Ua,{Zg:null},function(){return 0!=(16&this.Wb)},function(t){0!=(16&this.Wb)!==t&&(this.Wb^=16)}),_h.defineProperty(Ua,{fm:"suspendsRouting"},function(){return 0!=(32&this.Wb)},function(t){0!=(32&this.Wb)!==t&&(this.Wb^=32)}),_h.defineProperty(Ua,{Vz:null},function(){return 0!=(64&this.Wb)},function(t){0!=(64&this.Wb)!==t&&(this.Wb^=64)}),_h.defineProperty(Ua,{Np:"defaultFromPoint"},function(){return this.mC},function(t){this.mC=t.copy()}),_h.defineProperty(Ua,{Op:"defaultToPoint"},function(){return this.sC},function(t){this.sC=t.copy()}),Ua.prototype.updateRoute=Ua.prototype.co=function(){if(!this.Zg&&!this.Vz){var t=!0;try{this.Vz=!0,this.em(),t=this.computePoints()}finally{this.Vz=!1,t?this.jj():this.oJ()}}},Ua.prototype.computePoints=function(){var t=this.g;if(null===t)return!1;var e=this.Y,i=null;if(null===e?(t.ul||(t.Ls=new Tr,t.Ls.Ba=Wu,t.Ls.kb=0,t.ul=new Ba,t.ul.add(t.Ls),t.ul.Ze()),this.Np&&(t.ul.position=t.ul.location=this.Np,t.ul.Ze(),e=t.ul,i=t.Ls)):i=this.Jc,null!==i&&!e.isVisible()){var n=e.findVisibleNode();null!==n&&n!==e?(e=n,i=n.Pl("")):e=n}if(this.JD=e,null===e||!e.location.H())return!1;for(;!(null===i||i.W.H()&&i.xj());)i=i.O;if(null===i)return!1;var o=this.$,r=null;if(null===o?(t.vl||(t.Ms=new Tr,t.Ms.Ba=Wu,t.Ms.kb=0,t.vl=new Ba,t.vl.add(t.Ms),t.vl.Ze()),this.Op&&(t.vl.position=t.vl.location=this.Op,t.vl.Ze(),o=t.vl,r=t.Ms)):r=this.jd,null===r||o.isVisible()||(t=o.findVisibleNode(),null!==t&&t!==o?(o=t,r=t.Pl("")):o=t),this.KD=o,null===o||!o.location.H())return!1;for(;!(null===r||r.W.H()&&r.xj());)r=r.O;if(null===r)return!1;var a=this.qa,n=Qa(this,i),t=Za(this,r),s=n===tu,l=t===tu,h=i===r&&null!==i,u=this.jc,c=this.Ye===Wd;this.Gi=!(!h||u)&&(c=!0);var f=this.wt===qd||h;if(!u&&!h&&s&&l){if(s=!1,!f&&3<=a&&(f=this.getLinkPoint(e,i,n,!0,!1,o,r),l=this.getLinkPoint(o,r,t,!1,!1,e,i),s=this.adjustPoints(0,f,a-1,l))&&(f=this.getLinkPoint(e,i,n,!0,!1,o,r),l=this.getLinkPoint(o,r,t,!1,!1,e,i),this.adjustPoints(0,f,a-1,l)),!s)if(this.Ip(),c){var a=this.getLinkPoint(e,i,n,!0,!1,o,r),f=this.getLinkPoint(o,r,t,!1,!1,e,i),s=f.x-a.x,l=f.y-a.y,h=this.computeCurviness(),c=u=0,d=a.x+s/3,p=a.y+l/3,g=d,y=p;K(l,0)?y=0<s?y-h:y+h:(u=-s/l,c=Math.sqrt(h*h/(u*u+1)),0>h&&(c=-c),g=(0>l?-1:1)*c+d,y=u*(g-d)+p);var d=a.x+2*s/3,p=a.y+2*l/3,m=d,v=p;K(l,0)?v=0<s?v-h:v+h:(m=(0>l?-1:1)*c+d,v=u*(m-d)+p),this.Ip(),this.ii(a),this.hj(g,y),this.hj(m,v),this.ii(f),this.Ug(0,this.getLinkPoint(e,i,n,!0,!1,o,r)),this.Ug(3,this.getLinkPoint(o,r,t,!1,!1,e,i))}else n=this.getLinkPoint(e,i,n,!0,!1,o,r),t=this.getLinkPoint(o,r,t,!1,!1,e,i),this.hasCurviness()?(f=t.x-n.x,o=t.y-n.y,r=this.computeCurviness(),e=n.x+f/2,i=n.y+o/2,a=e,s=i,K(o,0)?s=0<f?s-r:s+r:(f=-f/o,a=Math.sqrt(r*r/(f*f+1)),0>r&&(a=-a),a=(0>o?-1:1)*a+e,s=f*(a-e)+i),this.ii(n),this.hj(a,s)):this.ii(n),this.ii(t)}else{c=this.sj,f&&(u&&c||h)&&this.Ip();var x=h?this.computeCurviness():0,c=this.getLinkPoint(e,i,n,!0,u,o,r),d=g=p=0;if((u||!s||h)&&(y=this.computeEndSegmentLength(e,i,n,!0),d=this.getLinkDirection(e,i,c,n,!0,u,o,r),h&&(s||n.L(t)||!u&&1===n.x+t.x&&1===n.y+t.y)&&(d-=u?90:30,0>x&&(d-=180)),0>d?d+=360:360<=d&&(d-=360),h&&(y+=Math.abs(x)*(u?1:2)),0===d?p=y:90===d?g=y:180===d?p=-y:270===d?g=-y:(p=y*Math.cos(d*Math.PI/180),g=y*Math.sin(d*Math.PI/180)),n.Od()&&h)){var w=i.Wa(au,_h.K()),k=_h.xb(w.x+1e3*p,w.y+1e3*g);this.getLinkPointFromPoint(e,i,w,k,!0,c),_h.v(w),_h.v(k)}var y=this.getLinkPoint(o,r,t,!1,u,e,i),S=v=m=0;(u||!l||h)&&(w=this.computeEndSegmentLength(o,r,t,!1),S=this.getLinkDirection(o,r,y,t,!1,u,e,i),h&&(l||n.L(t)||!u&&1===n.x+t.x&&1===n.y+t.y)&&(S+=u?0:30,0>x&&(S+=180)),0>S?S+=360:360<=S&&(S-=360),h&&(w+=Math.abs(x)*(u?1:2)),0===S?m=w:90===S?v=w:180===S?m=-w:270===S?v=-w:(m=w*Math.cos(S*Math.PI/180),v=w*Math.sin(S*Math.PI/180)),t.Od()&&h&&(w=r.Wa(au,_h.K()),k=_h.xb(w.x+1e3*m,w.y+1e3*v),this.getLinkPointFromPoint(o,r,w,k,!1,y),_h.v(w),_h.v(k))),t=c,(u||!s||h)&&(t=new b(c.x+p,c.y+g)),n=y,(u||!l||h)&&(n=new b(y.x+m,y.y+v)),!f&&!u&&s&&3<a&&this.adjustPoints(0,c,a-2,n)?this.Ug(a-1,y):!f&&!u&&l&&3<a&&this.adjustPoints(1,t,a-1,y)?this.Ug(0,c):!f&&(u?6<=a:4<a)&&this.adjustPoints(1,t,a-2,n)?(this.Ug(0,c),this.Ug(a-1,y)):(this.Ip(),this.ii(c),(u||!s||h)&&this.ii(t),u&&this.addOrthoPoints(t,d,n,S,e,o),(u||!l||h)&&this.ii(n),this.ii(y))}return!0},Ua.prototype.getLinkPointFromPoint=function(t,e,i,n,o,r){if(void 0===r&&(r=new b),null===t||null===e)return r.assign(i),r;t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(e=o.port);var a=o=0,s=0,l=0;if(t=null,o=e.O,null===o||o.Yg()||(o=o.O),null===o)o=n.x,a=n.y,s=i.x,l=i.y;else{t=o.ph,o=1/(t.m11*t.m22-t.m12*t.m21);var s=t.m22*o,l=-t.m12*o,h=-t.m21*o,u=t.m11*o,c=o*(t.m21*t.dy-t.m22*t.dx),f=o*(t.m12*t.dx-t.m11*t.dy);o=n.x*s+n.y*h+c,a=n.x*l+n.y*u+f,s=i.x*s+i.y*h+c,l=i.x*l+i.y*u+f}return e.Bn(o,a,s,l,r),null!==t&&r.transform(t),r},Ua.prototype.getLinkPoint=function(t,e,i,n,o,r,a,s){if(void 0===s&&(s=new b),i.fd())return e.Wa(i,s),s;if(i.uj()){var l=Xa(this,e);if(null!==l){if(s.assign(l.eq),o&&this.Yx===Rd){var h=Xa(this,a);if(null!==h&&l.tn<h.tn){var l=_h.K(),h=_h.K(),u=new S(e.Wa(iu,l),e.Wa(uu,h)),c=this.computeSpot(!n);t=this.getLinkPoint(r,a,c,!n,o,t,e,h),(i.rj(xu)||i.rj(wu))&&t.y>=u.y&&t.y<=u.y+u.height?s.y=t.y:(i.rj(bu)||i.rj(ku))&&t.x>=u.x&&t.x<=u.x+u.width&&(s.x=t.x),_h.v(l),_h.v(h)}}return s}}return i=e.Wa(au,_h.K()),l=r=null,this.qa>(o?6:2)?(l=n?this.l(1):this.l(this.qa-2),o&&(l=$a(i,l.copy()))):(r=_h.K(),l=a.Wa(au,r),o&&(l=$a(i,l)),_h.v(r)),this.getLinkPointFromPoint(t,e,i,l,n,s),_h.v(i),s},Ua.prototype.getLinkDirection=function(t,e,i,n,o,r,a,s){t:if(n.fd())i=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.uj()){var l=Xa(this,e);if(null!==l)switch(l.xe){case _h.kd:i=270;break t;case _h.Rc:i=180;break t;default:case _h.$c:i=0;break t;case _h.Zc:i=90;break t}}var l=e.Wa(au,_h.K()),h=null,u=null;this.qa>(r?6:2)?(u=o?this.l(1):this.l(this.qa-2),u=r?$a(l,u.copy()):i):(h=_h.K(),u=s.Wa(au,h),_h.v(h)),i=0,i=Math.abs(u.x-l.x)>Math.abs(u.y-l.y)?u.x>=l.x?0:180:u.y>=l.y?90:270,_h.v(l)}switch(n.Od()&&a.mi(t)&&360<=(i+=180)&&(i-=360),t=jd,t=o?this.Rt:this.Ku,t===jd&&(t=o?e.Rt:e.Ku),t){case Ed:e=e.zn(),i+=e,360<=i&&(i-=360);break;case jd:case Id:if(0===(e=e.zn()))break;45<=e&&135>e?i+=90:135<=e&&225>e?i+=180:225<=e&&315>e&&(i+=270),360<=i&&(i-=360)}return i},Ua.prototype.computeEndSegmentLength=function(t,e,i,n){return null!==e&&i.uj()&&null!==(t=Xa(this,e))?t.ax:(t=NaN,t=n?this.Sl:this.jm,null!==e&&isNaN(t)&&(t=n?e.Sl:e.jm),isNaN(t)&&(t=10),t)},Ua.prototype.computeSpot=function(t){return t?Qa(this,this.Jc):Za(this,this.jd)},Ua.prototype.computeOtherPoint=function(t,e){var i,n=e.Wa(au);return i=e.Bs,i=null!==i?Ts(i,this):null,null!==i&&(n=i.eq),n},Ua.prototype.computeShortLength=function(t){if(t){if(t=this.St,isNaN(t)){var e=this.Jc;null!==e&&(t=e.St)}}else t=this.Lu,isNaN(t)&&null!==(e=this.jd)&&(t=e.Lu);return isNaN(t)?0:t},Ua.prototype.zk=function(t,e,i,n,o,r){if(!1===this.Tg)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var a=r;if(void 0===r&&(a=_h.Ff(),a.reset()),a.multiply(this.transform),this.qn(t,a))return dr(this,e,i,o),void 0===r&&_h.ue(a),!0;if(this.Tf(t,a)){var s=!1;if(!this.Gn)for(var l=this.xa.n,h=l.length;h--;){var c=l[h];if(c.visible||c===this.Yf){var d=c.W,p=this.Ia;if(!(d.x>p.width||d.y>p.height||0>d.x+d.width||0>d.y+d.height)){if(d=_h.Ff(),d.set(a),c instanceof Zo)s=c.zk(t,e,i,n,o,d);else if(this.path===c){if(c instanceof Tr){var s=c,g=t,y=n,p=d;if(!1===s.Tg)s=!1;else if(p.multiply(s.transform),y)t:{var m=g,v=p;if(s.qn(m,v))s=!0;else{if(void 0===v&&(v=s.transform,m.wk(s.W))){s=!0;break t}var p=m.left,g=m.right,y=m.top,m=m.bottom,b=_h.K(),x=_h.K(),w=_h.K(),k=_h.Ff();k.set(v),k.BF(s.transform),k.px(),x.x=g,x.y=y,x.transform(k),b.x=p,b.y=y,b.transform(k),v=!1,Fr(s,b,x,w)?v=!0:(b.x=g,b.y=m,b.transform(k),Fr(s,b,x,w)?v=!0:(x.x=p,x.y=m,x.transform(k),Fr(s,b,x,w)?v=!0:(b.x=p,b.y=y,b.transform(k),Fr(s,b,x,w)&&(v=!0)))),_h.ue(k),_h.v(b),_h.v(x),_h.v(w),s=v}}else s=s.qn(g,p)}}else s=Co(c,t,n,d);s&&(null!==e&&(c=e(c)),c&&(null===i||i(c))&&(o instanceof f&&o.add(c),o instanceof u&&o.add(c))),_h.ue(d)}}}return void 0===r&&_h.ue(a),s||null!==this.background||null!==this.jn}return void 0===r&&_h.ue(a),!1},_h.u(Ua,{jc:"isOrthogonal"},function(){return 2==(2&this.Um.value)}),_h.u(Ua,{sj:"isAvoiding"},function(){return 4==(4&this.Um.value)}),Ua.prototype.computeCurve=function(){if(null===this.Gi){var t=this.Jc,e=this.jc;this.Gi=null!==t&&t===this.jd&&!e}return this.Gi?Wd:this.Ye},Ua.prototype.computeCorner=function(){if(this.Ye===Wd)return 0;var t=this.$z;return(isNaN(t)||0>t)&&(t=10),t},Ua.prototype.findMidLabel=function(){for(var t=this.path,e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];if(o!==t&&!o.Vf&&(-Infinity===o.Me||isNaN(o.Me)))return o}for(t=this.Wf;t.next();)if(e=t.value,-Infinity===e.Me||isNaN(e.Me))return e;return null},Ua.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t;t=Math.max(14,this.computeThickness());var e=this.Jc,i=this.jd;if(null!==e&&null!==i){var n=this.findMidLabel();if(null!==n){var o=n.Ia,r=n.margin,a=isNaN(o.width)?30:o.width*n.scale+r.left+r.right,o=isNaN(o.height)?14:o.height*n.scale+r.top+r.bottom,n=n.qq;n===Jd||n===Qd||n===Xd?t=Math.max(t,o):n===$d||n===tp||n===Yd||n===Zd?t=Math.max(t,a):(e=e.Wa(au).Rb(i.Wa(au))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*a)+Math.abs(Math.cos(e)*o)+1)),this.Ye===Wd&&(t*=1.333)}}return t},Ua.prototype.arrangeBundledLinks=function(t,e){if(e)for(var i=0;i<t.length;i++)t[i].Yb()},Ua.prototype.computeCurviness=function(){var t=this.Ww;if(isNaN(t)){var t=16,e=this.ti;if(null!==e){for(var i=_h.lb(),n=0,o=e.links,r=0;r<o.length;r++){var a=o[r],a=a.computeSpacing();i.push(a),n+=a}for(n=-n/2,r=0;r<o.length;r++){if((a=o[r])===this){t=n+i[r]/2;break}n+=i[r]}e.hq===this.Y&&(t=-t),_h.wa(i)}}return t},Ua.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.kb,1):1},Ua.prototype.hasCurviness=function(){return!isNaN(this.Ww)||null!==this.ti},Ua.prototype.adjustPoints=function(t,e,i,n){var o=this.wt;if(this.jc){if(o===_d)return!1;o===Kd&&(o=Ud)}switch(o){case _d:var r=this.l(t),a=this.l(i);if(!r.Ic(e)||!a.Ic(n)){var o=r.x,r=r.y,s=a.x-o,l=a.y-r,h=Math.sqrt(s*s+l*l);if(!J(h,0)){var u=0;J(s,0)?u=0>l?-Math.PI/2:Math.PI/2:(u=Math.atan(l/Math.abs(s)),0>s&&(u=Math.PI-u));var a=e.x,c=e.y,l=n.x-a,f=n.y-c,d=Math.sqrt(l*l+f*f),s=0;for(J(l,0)?s=0>f?-Math.PI/2:Math.PI/2:(s=Math.atan(f/Math.abs(l)),0>l&&(s=Math.PI-s)),h=d/h,u=s-u,this.Ug(t,e),t+=1;t<i;t++)e=this.l(t),s=e.x-o,l=e.y-r,e=Math.sqrt(s*s+l*l),J(e,0)||(f=0,J(s,0)?f=0>l?-Math.PI/2:Math.PI/2:(f=Math.atan(l/Math.abs(s)),0>s&&(f=Math.PI-f)),s=f+u,e*=h,this.ea(t,a+e*Math.cos(s),c+e*Math.sin(s)));this.Ug(i,n)}}return!0;case Kd:if(r=this.l(t),c=this.l(i),!r.Ic(e)||!c.Ic(n)){var o=r.x,r=r.y,a=c.x,c=c.y,h=(a-o)*(a-o)+(c-r)*(c-r),s=e.x,u=e.y,l=n.x,f=n.y,d=0,p=1;for(0!=l-s?(d=(f-u)/(l-s),p=Math.sqrt(1+1/(d*d))):d=9e9,this.Ug(t,e),t+=1;t<i;t++){e=this.l(t);var g=e.x,y=e.y,m=.5;0!==h&&(m=((o-g)*(o-a)+(r-y)*(r-c))/h);var v=o+m*(a-o),b=r+m*(c-r);e=Math.sqrt((g-v)*(g-v)+(y-b)*(y-b)),y<d*(g-v)+b&&(e=-e),0<d&&(e=-e),g=s+m*(l-s),m=u+m*(f-u),0!==d?(e=g+e/p,this.ea(t,e,m-(e-g)/d)):this.ea(t,g,m+e)}this.Ug(i,n)}return!0;case Ud:t:{if(this.jc){if(a=this.l(t),c=this.l(t+1),o=this.l(t+2),h=c.x,s=c.y,K(a.y,c.y)?K(c.x,o.x)?s=e.y:K(c.y,o.y)&&(h=e.x):K(a.x,c.x)&&(K(c.y,o.y)?h=e.x:K(c.x,o.x)&&(s=e.y)),r=this.g,this.sj&&null!==r&&(a=to(r,!0,this.Ka,null),!a.$l(Math.min(h,o.x),Math.min(s,o.y),Math.abs(h-o.x),Math.abs(s-o.y)))){i=!1;break t}if(this.ea(t+1,h,s),a=this.l(i),c=this.l(i-1),o=this.l(i-2),h=c.x,s=c.y,K(a.y,c.y)?K(c.x,o.x)?s=n.y:K(c.y,o.y)&&(h=n.x):K(a.x,c.x)&&(K(c.y,o.y)?h=n.x:K(c.x,o.x)&&(s=n.y)),this.sj&&null!==r&&(a=to(r,!0,this.Ka,null),!a.$l(Math.min(h,o.x),Math.min(s,o.y),Math.abs(h-o.x),Math.abs(s-o.y)))){i=!1;break t}this.ea(i-1,h,s)}this.Ug(t,e),this.Ug(i,n),i=!0}return i;default:return!1}},Ua.prototype.addOrthoPoints=function(t,e,i,n,o,r){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=-45<=n&&45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var a=o.W.copy(),s=r.W.copy();if(a.H()&&s.H()){a.xf(8,8),s.xf(8,8),a.ri(t),s.ri(i);var l,h;0===e?i.x>t.x||270===n&&i.y<t.y&&s.right>t.x||90===n&&i.y>t.y&&s.right>t.x?(l=new b(i.x,t.y),h=new b(i.x,(t.y+i.y)/2),180===n?(l.x=this.computeMidOrthoPosition(t.x,i.x,!1),h.x=l.x,h.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(l.x=t.x<s.left?this.computeMidOrthoPosition(t.x,s.left,!1):t.x<s.right&&(270===n&&t.y<s.top||90===n&&t.y>s.bottom)?this.computeMidOrthoPosition(t.x,i.x,!1):s.right,h.x=l.x,h.y=i.y):0===n&&t.x<s.left&&t.y>s.top&&t.y<s.bottom&&(l.x=t.x,l.y=t.y<i.y?Math.min(i.y,s.top):Math.max(i.y,s.bottom),h.y=l.y)):(l=new b(t.x,i.y),h=new b((t.x+i.x)/2,i.y),(180===n||90===n&&i.y<a.top||270===n&&i.y>a.bottom)&&(180===n&&(s.Ha(t)||a.Ha(i))?l.y=this.computeMidOrthoPosition(t.y,i.y,!0):i.y<t.y&&(180===n||90===n)?l.y=this.computeMidOrthoPosition(a.top,Math.max(i.y,s.bottom),!0):i.y>t.y&&(180===n||270===n)&&(l.y=this.computeMidOrthoPosition(a.bottom,Math.min(i.y,s.top),!0)),h.x=i.x,h.y=l.y),l.y>a.top&&l.y<a.bottom&&(i.x>=a.left&&i.x<=t.x||t.x<=s.right&&t.x>=i.x?90!==n&&270!==n||(l=new b(Math.max((t.x+i.x)/2,t.x),t.y),h=new b(l.x,i.y)):(l.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,0===n?a.top:Math.min(a.top,s.top)):Math.max(i.y,0===n?a.bottom:Math.max(a.bottom,s.bottom)),h.x=i.x,h.y=l.y))):180===e?i.x<t.x||270===n&&i.y<t.y&&s.left<t.x||90===n&&i.y>t.y&&s.left<t.x?(l=new b(i.x,t.y),h=new b(i.x,(t.y+i.y)/2),0===n?(l.x=this.computeMidOrthoPosition(t.x,i.x,!1),h.x=l.x,h.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(l.x=t.x>s.right?this.computeMidOrthoPosition(t.x,s.right,!1):t.x>s.left&&(270===n&&t.y<s.top||90===n&&t.y>s.bottom)?this.computeMidOrthoPosition(t.x,i.x,!1):s.left,h.x=l.x,h.y=i.y):180===n&&t.x>s.right&&t.y>s.top&&t.y<s.bottom&&(l.x=t.x,l.y=t.y<i.y?Math.min(i.y,s.top):Math.max(i.y,s.bottom),h.y=l.y)):(l=new b(t.x,i.y),h=new b((t.x+i.x)/2,i.y),(0===n||90===n&&i.y<a.top||270===n&&i.y>a.bottom)&&(0===n&&(s.Ha(t)||a.Ha(i))?l.y=this.computeMidOrthoPosition(t.y,i.y,!0):i.y<t.y&&(0===n||90===n)?l.y=this.computeMidOrthoPosition(a.top,Math.max(i.y,s.bottom),!0):i.y>t.y&&(0===n||270===n)&&(l.y=this.computeMidOrthoPosition(a.bottom,Math.min(i.y,s.top),!0)),h.x=i.x,h.y=l.y),l.y>a.top&&l.y<a.bottom&&(i.x<=a.right&&i.x>=t.x||t.x>=s.left&&t.x<=i.x?90!==n&&270!==n||(l=new b(Math.min((t.x+i.x)/2,t.x),t.y),h=new b(l.x,i.y)):(l.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,180===n?a.top:Math.min(a.top,s.top)):Math.max(i.y,180===n?a.bottom:Math.max(a.bottom,s.bottom)),h.x=i.x,h.y=l.y))):90===e?i.y>t.y||180===n&&i.x<t.x&&s.bottom>t.y||0===n&&i.x>t.x&&s.bottom>t.y?(l=new b(t.x,i.y),h=new b((t.x+i.x)/2,i.y),270===n?(l.y=this.computeMidOrthoPosition(t.y,i.y,!0),h.x=i.x,h.y=l.y):180===n&&i.x<t.x||0===n&&i.x>t.x?(l.y=t.y<s.top?this.computeMidOrthoPosition(t.y,s.top,!0):t.y<s.bottom&&(180===n&&t.x<s.left||0===n&&t.x>s.right)?this.computeMidOrthoPosition(t.y,i.y,!0):s.bottom,h.x=i.x,h.y=l.y):90===n&&t.y<s.top&&t.x>s.left&&t.x<s.right&&(l.x=t.x<i.x?Math.min(i.x,s.left):Math.max(i.x,s.right),l.y=t.y,h.x=l.x)):(l=new b(i.x,t.y),h=new b(i.x,(t.y+i.y)/2),(270===n||0===n&&i.x<a.left||180===n&&i.x>a.right)&&(270===n&&(s.Ha(t)||a.Ha(i))?l.x=this.computeMidOrthoPosition(t.x,i.x,!1):i.x<t.x&&(270===n||0===n)?l.x=this.computeMidOrthoPosition(a.left,Math.max(i.x,s.right),!1):i.x>t.x&&(270===n||180===n)&&(l.x=this.computeMidOrthoPosition(a.right,Math.min(i.x,s.left),!1)),h.x=l.x,h.y=i.y),l.x>a.left&&l.x<a.right&&(i.y>=a.top&&i.y<=t.y||t.y<=s.bottom&&t.y>=i.y?0!==n&&180!==n||(l=new b(t.x,Math.max((t.y+i.y)/2,t.y)),h=new b(i.x,l.y)):(l.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,90===n?a.left:Math.min(a.left,s.left)):Math.max(i.x,90===n?a.right:Math.max(a.right,s.right)),h.x=l.x,h.y=i.y))):i.y<t.y||180===n&&i.x<t.x&&s.top<t.y||0===n&&i.x>t.x&&s.top<t.y?(l=new b(t.x,i.y),h=new b((t.x+i.x)/2,i.y),90===n?(l.y=this.computeMidOrthoPosition(t.y,i.y,!0),h.x=i.x,h.y=l.y):180===n&&i.x<t.x||0===n&&i.x>=t.x?(l.y=t.y>s.bottom?this.computeMidOrthoPosition(t.y,s.bottom,!0):t.y>s.top&&(180===n&&t.x<s.left||0===n&&t.x>s.right)?this.computeMidOrthoPosition(t.y,i.y,!0):s.top,h.x=i.x,h.y=l.y):270===n&&t.y>s.bottom&&t.x>s.left&&t.x<s.right&&(l.x=t.x<i.x?Math.min(i.x,s.left):Math.max(i.x,s.right),l.y=t.y,h.x=l.x)):(l=new b(i.x,t.y),h=new b(i.x,(t.y+i.y)/2),(90===n||0===n&&i.x<a.left||180===n&&i.x>a.right)&&(90===n&&(s.Ha(t)||a.Ha(i))?l.x=this.computeMidOrthoPosition(t.x,i.x,!1):i.x<t.x&&(90===n||0===n)?l.x=this.computeMidOrthoPosition(a.left,Math.max(i.x,s.right),!1):i.x>t.x&&(90===n||180===n)&&(l.x=this.computeMidOrthoPosition(a.right,Math.min(i.x,s.left),!1)),h.x=l.x,h.y=i.y),l.x>a.left&&l.x<a.right&&(i.y<=a.bottom&&i.y>=t.y||t.y>=s.top&&t.y<=i.y?0!==n&&180!==n||(l=new b(t.x,Math.min((t.y+i.y)/2,t.y)),
h=new b(i.x,l.y)):(l.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,270===n?a.left:Math.min(a.left,s.left)):Math.max(i.x,270===n?a.right:Math.max(a.right,s.right)),h.x=l.x,h.y=i.y)));var u=l,c=h;if(this.sj){var f,d=this.g;if((f=null===d)||(d.Pa.kf?f=!1:(f=d.Za,f=!(f instanceof de)||(!f.zw||f.qI)),f=!f),f||a.Ha(i)&&!r.mi(o)||s.Ha(t)&&!o.mi(r)||o===r||this.layer.Kc)e=!1;else{var p=to(d,!0,this.Ka,null);if(p.$l(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&p.$l(Math.min(u.x,c.x),Math.min(u.y,c.y),Math.abs(u.x-c.x),Math.abs(u.y-c.y))&&p.$l(Math.min(c.x,i.x),Math.min(c.y,i.y),Math.abs(c.x-i.x),Math.abs(c.y-i.y)))e=!1;else{o=t,r=i;var g=f=null;if(d.BA){d=p.cb.copy(),d.xf(-p.mn,-p.ln);var y=_h.K();ys(p,t.x,t.y)||(st(d.x,d.y,d.x+d.width,d.y+d.height,t.x,t.y,u.x,u.y,y)?(f=t=y.copy(),e=y.Rb(u)):st(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,c.x,c.y,y)?(f=t=y.copy(),e=y.Rb(c)):st(d.x,d.y,d.x+d.width,d.y+d.height,c.x,c.y,i.x,i.y,y)&&(f=t=y.copy(),e=y.Rb(i))),ys(p,i.x,i.y)||(st(d.x,d.y,d.x+d.width,d.y+d.height,i.x,i.y,c.x,c.y,y)?(g=i=y.copy(),n=c.Rb(y)):st(d.x,d.y,d.x+d.width,d.y+d.height,c.x,c.y,u.x,u.y,y)?(g=i=y.copy(),n=u.Rb(y)):st(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,t.x,t.y,y)&&(g=i=y.copy(),n=t.Rb(y))),_h.v(y)}a=a.copy().Gh(s),a.xf(2*p.mn,2*p.ln),Ss(p,t,e,i,n,a),s=ms(p,i.x,i.y),!p.abort&&999999<=s&&(bs(p),s=p.iG,a.xf(p.mn*s,p.ln*s),Ss(p,t,e,i,n,a),s=ms(p,i.x,i.y)),!p.abort&&999999<=s&&(bs(p),s=p.uF,a.xf(p.mn*s,p.ln*s),Ss(p,t,e,i,n,a),s=ms(p,i.x,i.y)),!p.abort&&999999<=s&&p.zG&&(bs(p),Ss(p,t,e,i,n,p.cb),s=ms(p,i.x,i.y)),!p.abort&&999999>s&&0!==ms(p,i.x,i.y)?(es(this,p,i.x,i.y,n,!0),a=this.l(2),4>this.qa?(0===e||180===e?(a.x=t.x,a.y=i.y):(a.x=i.x,a.y=t.y),this.ea(2,a.x,a.y),this.w(3,a.x,a.y)):(i=this.l(3),0===e||180===e?K(a.x,i.x)?(a=0===e?Math.max(a.x,t.x):Math.min(a.x,t.x),this.ea(2,a,t.y),this.ea(3,a,i.y)):K(a.y,i.y)?(Math.abs(t.y-a.y)<=p.ln/2&&(this.ea(2,a.x,t.y),this.ea(3,i.x,t.y)),this.w(2,a.x,t.y)):this.ea(2,t.x,a.y):90!==e&&270!==e||(K(a.y,i.y)?(a=90===e?Math.max(a.y,t.y):Math.min(a.y,t.y),this.ea(2,t.x,a),this.ea(3,i.x,a)):K(a.x,i.x)?(Math.abs(t.x-a.x)<=p.mn/2&&(this.ea(2,t.x,a.y),this.ea(3,t.x,i.y)),this.w(2,t.x,a.y)):this.ea(2,a.x,t.y))),null!==f&&(t=this.l(1),i=this.l(2),t.x!==i.x&&t.y!==i.y?0===e||180===e?this.w(2,t.x,i.y):this.w(2,i.x,t.y):0===e||180===e?this.w(2,o.x,f.y):this.w(2,f.x,o.y)),null!==g&&(0===n||180===n?this.hj(r.x,g.y):this.hj(g.x,r.y)),e=!0):e=!1}}}else e=!1;e||(this.ii(l),this.ii(h))}},Ua.prototype.computeMidOrthoPosition=function(t,e){if(this.hasCurviness()){return(t+e)/2+this.computeCurviness()}return(t+e)/2},Ua.prototype.findClosestSegment=function(t){var e=t.x;t=t.y;for(var i=this.l(0),n=this.l(1),o=Yh(e,t,i.x,i.y,n.x,n.y),r=0,a=1;a<this.qa-1;a++){var i=this.l(a+1),s=Yh(e,t,n.x,n.y,i.x,i.y),n=i;s<o&&(r=a,o=s)}return r},Ua.prototype.Ke=function(){this.hb=null},_h.u(Ua,{vf:"geometry"},function(){return null===this.hb&&(this.co(),this.hb=this.makeGeometry()),this.hb}),Ua.prototype.ku=function(t){if(!t){if(!1===this.Zg)return;if(t=this.Jd(),null!==this.hb&&(null===t||null!==t.vf))return}if(this.hb=this.makeGeometry(),null!==(t=this.path)){t.hb=this.hb;for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];o!==t&&o.Vf&&o instanceof Tr&&(o.hb=this.hb)}}},Ua.prototype.makeGeometry=function(){var t=this.qa;if(2>t)return new mt(ic);var e=!1,i=this.g;null!==i&&ls(this)&&i.al.contains(this)&&null!==this.lw&&(e=!0);var n=i=0,o=this.l(0).copy(),r=o.copy(),i=this.bd.n,a=this.computeCurve();if(a===Wd&&3<=t&&!J(this.vq,0))if(3===t)var s=this.l(1),i=Math.min(o.x,s.x),n=Math.min(o.y,s.y),s=this.l(2),i=Math.min(i,s.x),n=Math.min(n,s.y);else{if(this.jc)for(s=0;s<t;s++)n=i[s],r.x=Math.min(n.x,r.x),r.y=Math.min(n.y,r.y);else for(s=3;s<t;s+=3)s+3>=t&&(s=t-1),i=this.l(s),r.x=Math.min(i.x,r.x),r.y=Math.min(i.y,r.y);i=r.x,n=r.y}else{for(s=0;s<t;s++)n=i[s],r.x=Math.min(n.x,r.x),r.y=Math.min(n.y,r.y);i=r.x,n=r.y}if(i-=this.Ez.x,n-=this.Ez.y,o.x-=i,o.y-=n,2!==t||ls(this)){var l=_h.s();if(0!==this.computeShortLength(!0)&&(o=ns(this,o,!0,r)),Xr(l,o.x,o.y,!1,!1),a===Wd&&3<=t&&!J(this.vq,0))if(3===t)s=this.l(1),t=s.x-i,e=s.y-n,s=this.l(2).copy(),s.x-=i,s.y-=n,0!==this.computeShortLength(!1)&&(s=ns(this,s,!1,r)),ta(l,t,e,t,e,s.x,s.y);else if(this.jc){for(var r=new b(i,n),o=this.l(1).copy(),a=new b(i,n),t=new b(i,n),e=this.l(0),h=null,u=this.vq/3,s=1;s<this.qa-1;s++){var h=this.l(s),c=e,f=h,d=this.l(os(this,h,s,!1));if(!(J(c.x,f.x)&&J(f.x,d.x)||J(c.y,f.y)&&J(f.y,d.y))){var p=u,g=a,y=t;isNaN(p)&&(p=this.vq/3);var m=c.x,c=c.y,v=f.x,f=f.y,x=d.x,d=d.y,w=p*is(m,c,v,f),p=p*is(v,f,x,d);J(c,f)&&J(v,x)&&(v>m?d>f?(g.x=v-w,g.y=f-w,y.x=v+p,y.y=f+p):(g.x=v-w,g.y=f+w,y.x=v+p,y.y=f-p):d>f?(g.x=v+w,g.y=f-w,y.x=v-p,y.y=f+p):(g.x=v+w,g.y=f+w,y.x=v-p,y.y=f-p)),J(m,v)&&J(f,d)&&(f>c?(x>v?(g.x=v-w,g.y=f-w,y.x=v+p):(g.x=v+w,g.y=f-w,y.x=v-p),y.y=f+p):(x>v?(g.x=v-w,g.y=f+w,y.x=v+p):(g.x=v+w,g.y=f+w,y.x=v-p),y.y=f-p)),(J(m,v)&&J(v,x)||J(c,f)&&J(f,d))&&(m=.5*(m+x),c=.5*(c+d),g.x=m,g.y=c,y.x=m,y.y=c),1===s?(o.x=.5*(e.x+h.x),o.y=.5*(e.y+h.y)):2===s&&J(e.x,this.l(0).x)&&J(e.y,this.l(0).y)&&(o.x=.5*(e.x+h.x),o.y=.5*(e.y+h.y)),ta(l,o.x-i,o.y-n,a.x-i,a.y-n,h.x-i,h.y-n),r.set(a),o.set(t),e=h}}s=e.x,e=e.y,r=this.l(this.qa-1),0!==this.computeShortLength(!1)&&(r=ns(this,r.copy(),!1,Eu)),s=.5*(s+r.x),e=.5*(e+r.y),ta(l,t.x-i,t.y-n,s-i,e-n,r.x-i,r.y-n)}else for(s=3;s<t;s+=3)e=this.l(s-2),s+3>=t&&(s=t-1),r=this.l(s-1),o=this.l(s),s===t-1&&0!==this.computeShortLength(!1)&&(o=ns(this,o.copy(),!1,Eu)),ta(l,e.x-i,e.y-n,r.x-i,r.y-n,o.x-i,o.y-n);else{for(r=_h.K(),r.assign(this.l(0)),s=1;s<t;){if(s=os(this,r,s,1<s),g=this.l(s),s>=t-1){r!==g&&(0!==this.computeShortLength(!1)&&(g=ns(this,g.copy(),!1,Eu)),rs(this,l,-i,-n,r,g,e));break}s=os(this,g,s+1,s<t-3),o=l,a=-i,h=-n,u=r,y=this.l(s),m=r,c=e,K(u.y,g.y)&&K(g.x,y.x)?(p=this.computeCorner(),p=Math.min(p,Math.abs(g.x-u.x)/2),p=v=Math.min(p,Math.abs(y.y-g.y)/2),K(p,0)?(rs(this,o,a,h,u,g,c),m.assign(g)):(f=g.x,x=g.y,d=f,w=x,f=g.x>u.x?g.x-p:g.x+p,w=y.y>g.y?g.y+v:g.y-v,rs(this,o,a,h,u,new b(f,x),c),ea(o,g.x+a,g.y+h,d+a,w+h),m.m(d,w))):K(u.x,g.x)&&K(g.y,y.y)?(p=this.computeCorner(),v=Math.min(p,Math.abs(g.y-u.y)/2),v=p=Math.min(v,Math.abs(y.x-g.x)/2),K(p,0)?(rs(this,o,a,h,u,g,c),m.assign(g)):(f=g.x,w=x=g.y,x=g.y>u.y?g.y-v:g.y+v,d=y.x>g.x?g.x+p:g.x-p,rs(this,o,a,h,u,new b(f,x),c),ea(o,g.x+a,g.y+h,d+a,w+h),m.m(d,w))):(rs(this,o,a,h,u,g,c),m.assign(g))}_h.v(r)}i=l.o,_h.q(l)}else l=this.l(1).copy(),l.x-=i,l.y-=n,0!==this.computeShortLength(!0)&&(o=ns(this,o,!0,r)),0!==this.computeShortLength(!1)&&(l=ns(this,l,!1,r)),i=new mt(ic),i.ia=o.x,i.ga=o.y,i.D=l.x,i.F=l.y;return i},_h.u(Ua,{Nt:"firstPickIndex"},function(){var t;return 2>=this.qa?t=0:((t=this.jc)||(t=this.computeSpot(!0)!==tu),t=t?1:0),t}),_h.u(Ua,{Bx:"lastPickIndex"},function(){var t=this.qa;if(0===t)t=0;else if(2>=t)t-=1;else{var e;(e=this.jc)||(e=this.computeSpot(!1)!==tu),t=e?t-2:t-1}return t}),Ua.prototype.usesSamePort=function(t){var e=this.qa,i=t.qa;if(0<e&&0<i){var n=this.l(0),o=t.l(0);if(n.Ic(o))return!0;if(e=this.l(e-1),t=t.l(i-1),e.Ic(t)||n.Ic(t)||e.Ic(o))return!0}else if(this.Y===t.Y||this.$===t.$||this.Y===t.$||this.$===t.Y)return!0;return!1},Ua.prototype.isVisible=function(){if(!sa.prototype.isVisible.call(this))return!1;var t=this.Ka,e=!0,i=this.g;null!==i&&(e=i.Pd);var n=this.Y;if(null!==n){if(this.Lc&&e&&!n.gd)return!1;if(n===t)return!0;for(i=n;null!==i;){if(i.Mc===this)return!0;i=i.Ka}if(null===(i=n.findVisibleNode())||i===t)return!1}if(null!==(n=this.$)){if(this.Lc&&!e&&!n.gd)return!1;if(n===t)return!0;for(i=n;null!==i;){if(i.Mc===this)return!0;i=i.Ka}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},Ua.prototype.vd=function(t){if(sa.prototype.vd.call(this,t),null!==this.ti&&this.ti.$p(),null!==this.rf)for(var e=this.rf.i;e.next();)e.value.vd(t)},_h.defineProperty(Ua,{wt:"adjusting"},function(){return this.Fq},function(t){var e=this.Fq;e!==t&&(this.Fq=t,this.h("adjusting",e,t))}),_h.defineProperty(Ua,{$z:"corner"},function(){return this.$q},function(t){var e=this.$q;e!==t&&(this.$q=t,this.Ke(),this.h("corner",e,t))}),_h.defineProperty(Ua,{Ye:"curve"},function(){return this.cr},function(t){var e=this.cr;e!==t&&(this.cr=t,this.Yb(),this.Ke(),hs(this,e===Hd||e===Vd||t===Hd||t===Vd),this.h("curve",e,t))}),_h.defineProperty(Ua,{Ww:"curviness"},function(){return this.dr},function(t){var e=this.dr;e!==t&&(this.dr=t,this.Yb(),this.Ke(),this.h("curviness",e,t))}),_h.defineProperty(Ua,{Yx:"routing"},function(){return this.Um},function(t){var e=this.Um;e!==t&&(this.Um=t,this.Gi=null,this.Yb(),hs(this,2==(2&e.value)||2==(2&t.value)),this.h("routing",e,t))}),_h.defineProperty(Ua,{vq:"smoothness"},function(){return this.at},function(t){var e=this.at;e!==t&&(this.at=t,this.Ke(),this.h("smoothness",e,t))}),ps.prototype.$p=function(){if(!this.Jv){var t=this.links;0<t.length&&null!==(t=t[0].g)&&t.IC.add(this)}this.Jv=!0},ps.prototype.yB=function(){if(this.Jv){this.Jv=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.g;e.arrangeBundledLinks(t,null===i||i.Hn),1===t.length&&(e.ti=null,t.length=0)}0===t.length&&(t=this.hq,null!==this&&null!==t.Hh&&t.Hh.remove(this),t=this.pu,null!==this&&null!==t.Hh&&t.Hh.remove(this))}},_h.$d(ps,{hq:!0,Nx:!0,pu:!0,Ox:!0,links:!0,spacing:!0}),_h.$d(gs,{group:!0,mB:!0,Xt:!0,abort:!0,zG:!0,iG:!0,uF:!0}),gs.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.xg=Math.floor((t.x-this.ze)/this.ze)*this.ze,this.yg=Math.floor((e-this.Ae)/this.Ae)*this.Ae,this.$r=Math.ceil((i+2*this.ze)/this.ze)*this.ze,this.as=Math.ceil((n+2*this.Ae)/this.Ae)*this.Ae,t=1+(0|Math.ceil((this.$r-this.xg)/this.ze)),e=1+(0|Math.ceil((this.as-this.yg)/this.Ae)),null===this.md||this.Bp<t-1||this.Cp<e-1){for(i=[],n=0;n<=t;n++)i[n]=[];this.md=i,this.Bp=t-1,this.Cp=e-1}if(null!==this.md)for(t=0;t<=this.Bp;t++)for(e=0;e<=this.Cp;e++)this.md[t][e]=1e6}},_h.u(gs,{cb:null},function(){return new S(this.xg,this.yg,this.$r-this.xg,this.as-this.yg)}),_h.defineProperty(gs,{mn:null},function(){return this.ze},function(t){0<t&&t!==this.ze&&(this.ze=t,this.initialize(this.cb))}),_h.defineProperty(gs,{ln:null},function(){return this.Ae},function(t){0<t&&t!==this.Ae&&(this.Ae=t,this.initialize(this.cb))}),gs.prototype.$l=function(t,e,i,n){if(t>this.$r||t+i<this.xg||e>this.as||e+n<this.yg)return!0;t=(t-this.xg)/this.ze|0,e=(e-this.yg)/this.Ae|0,i=Math.max(0,i)/this.ze+1|0;var o=Math.max(0,n)/this.Ae+1|0;if(0>t&&(i+=t,t=0),0>e&&(o+=e,e=0),0>i||0>o)return!0;for(n=0|Math.min(t+i-1,this.Bp),i=0|Math.min(e+o-1,this.Cp);t<=n;t++)for(o=e;o<=i;o++)if(0===this.md[t][o])return!1;return!0},_h.$d(Ms,{Oc:!0,port:!0,bg:!0,gq:!0}),Ms.prototype.toString=function(){for(var t=this.bg,e=this.Oc.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];null!==n&&(e+="\n  "+n.toString())}return e},Ms.prototype.$p=function(){this.bg.length=0},Ms.prototype.$I=function(t,e){return t===e?0:null===t?-1:null===e?1:t.xe<e.xe?-1:t.xe>e.xe?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Ms.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.Oc,this.port,tu,e.Jc===this.port),n=t.Yp;if(0>n)return i;var o=t.tn;if(1>=o||!e.jc)return i;var e=t.Lx,r=t.eq;return t.xe!==_h.Rc&&t.xe!==_h.Zc||(n=o-1-n),((t=t.xe===_h.Rc||t.xe===_h.$c)?e.y<r.y:e.x<r.x)?i+8*n:(t?e.y===r.y:e.x===r.x)?i:i+8*(o-1-n)},_h.$d(Ls,{link:!0,angle:!0,xe:!0,Lx:!0,Yp:!0,tn:!0,eq:!0,ax:!0}),Ls.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.xe.toString()+":"+this.Yp.toString()+"/"+this.tn.toString()+" "+this.eq.toString()+" "+this.ax.toString()+" "+this.Lx.toString()},Ns.prototype.copy=function(){var t=new Ns;return t.Sj=this.Sj.S(),t.pk=this.pk.S(),t.Qj=this.Qj,t.nk=this.nk,t.Pj=this.Pj,t.mk=this.mk,t.Rj=this.Rj,t.ok=this.ok,t.ur=this.ur,t.kt=this.kt,t.vr=this.vr,t.lt=this.lt,t},_h.La(Cs,Ba),_h.fa("Group",Cs),Cs.prototype.cloneProtected=function(t){Ba.prototype.cloneProtected.call(this,t),this.ya&=-32769,t.bs=this.bs,t.ds=this.ds,t.ql=this.ql,t.et=this.et;var e=t.Jt(function(t){return t instanceof js});t.Kb=e instanceof js?e:null,null!==this.ie?(t.ie=this.ie.copy(),t.ie.group=t):(null!==t.ie&&(t.ie.group=null),t.ie=null)},Cs.prototype.ki=function(t){Ba.prototype.ki.call(this,t);var e=t.Up();for(t=t.Nc;t.next();){var i=t.value;if(i.I(),i.J(8),i.Bt(),i instanceof Ba)i.Uf(e);else if(i instanceof Ua)for(i=i.Wf;i.next();)i.value.Uf(e)}},Cs.prototype.Vn=function(t,e,i,n,o,r,a){if(t===yc&&"elements"===e)if(o instanceof js){var s=o;null===this.Kb?this.Kb=s:this.Kb!==s&&_h.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else o instanceof Zo&&(s=o.Jt(function(t){return t instanceof js}))instanceof js&&(null===this.Kb?this.Kb=s:this.Kb!==s&&_h.k("Cannot insert a second Placeholder into the visual tree of a Group."));else t===mc&&"elements"===e&&null!==this.Kb&&(n===this.Kb?this.Kb=null:n instanceof Zo&&this.Kb.Xl(n)&&(this.Kb=null));Ba.prototype.Vn.call(this,t,e,i,n,o,r,a)},Cs.prototype.ij=function(t,e,i,n){this.pl=this.Kb,Zo.prototype.ij.call(this,t,e,i,n)},Cs.prototype.Yl=function(){if(!Ba.prototype.Yl.call(this))return!1;for(var t=this.Nc;t.next();){var e=t.value;if(e instanceof Ba){if(e.isVisible()&&Ko(e))return!1}else if(e instanceof Ua&&e.isVisible()&&Ko(e)&&e.Y!==this&&e.$!==this)return!1}return!0},_h.u(Cs,{placeholder:"placeholder"},function(){return this.Kb}),_h.defineProperty(Cs,{vH:"computesBoundsAfterDrag"},function(){return 0!=(2048&this.ya)},function(t){var e=0!=(2048&this.ya);e!==t&&(_h.j(t,"boolean",Cs,"computesBoundsAfterDrag"),this.ya^=2048,this.h("computesBoundsAfterDrag",e,t))}),_h.defineProperty(Cs,{Sw:"computesBoundsIncludingLinks"},function(){return 0!=(4096&this.ya)},function(t){_h.j(t,"boolean",Cs,"computesBoundsIncludingLinks");var e=0!=(4096&this.ya);e!==t&&(this.ya^=4096,this.h("computesBoundsIncludingLinks",e,t))}),_h.defineProperty(Cs,{wH:"computesBoundsIncludingLocation"},function(){return 0!=(8192&this.ya)},function(t){_h.j(t,"boolean",Cs,"computesBoundsIncludingLocation");var e=0!=(8192&this.ya);e!==t&&(this.ya^=8192,this.h("computesBoundsIncludingLocation",e,t))}),_h.defineProperty(Cs,{gI:"handlesDragDropForMembers"},function(){return 0!=(16384&this.ya)},function(t){_h.j(t,"boolean",Cs,"handlesDragDropForMembers");var e=0!=(16384&this.ya);e!==t&&(this.ya^=16384,this.h("handlesDragDropForMembers",e,t))}),_h.u(Cs,{Nc:"memberParts"},function(){return this.cs.i}),Cs.prototype.vn=function(){if(0<this.cs.count){var t=this.g;if(null!==t)for(var e=this.cs.copy().i;e.next();)t.remove(e.value)}Ba.prototype.vn.call(this)},_h.defineProperty(Cs,{Sb:"layout"},function(){return this.ie},function(t){var e=this.ie;e!==t&&(null!==t&&_h.G(t,Es,Cs,"layout"),null!==e&&(e.g=null,e.group=null),this.ie=t,null!==t&&(t.g=this.g,t.group=this),this.h("layout",e,t))}),_h.defineProperty(Cs,{RI:"memberAdded"},function(){return this.bs},function(t){var e=this.bs;e!==t&&(null!==t&&_h.j(t,"function",Cs,"memberAdded"),this.bs=t,this.h("memberAdded",e,t))}),_h.defineProperty(Cs,{SI:"memberRemoved"},function(){return this.ds},function(t){var e=this.ds;e!==t&&(null!==t&&_h.j(t,"function",Cs,"memberRemoved"),this.ds=t,this.h("memberRemoved",e,t))}),_h.defineProperty(Cs,{JA:"memberValidation"},function(){return this.ql},function(t){var e=this.ql;e!==t&&(null!==t&&_h.j(t,"function",Cs,"memberValidation"),this.ql=t,this.h("memberValidation",e,t))}),Cs.prototype.canAddMembers=function(t){var e=this.g;if(null===e)return!1;for(e=e.ob,t=ue(t).i;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},Cs.prototype.addMembers=function(t,e){var i=this.g;if(null===i)return!1;for(var i=i.ob,n=!0,o=ue(t).i;o.next();){var r=o.value;!e||i.isValidMember(this,r)?r.Ka=this:n=!1}return n},_h.defineProperty(Cs,{RJ:"ungroupable"},function(){return 0!=(256&this.ya)},function(t){var e=0!=(256&this.ya);e!==t&&(_h.j(t,"boolean",Cs,"ungroupable"),this.ya^=256,this.h("ungroupable",e,t))}),Cs.prototype.canUngroup=function(){if(!this.RJ)return!1;var t=this.layer;return!(null!==t&&!t.Ow)&&!(null!==(t=t.g)&&!t.Ow)},Cs.prototype.Uf=function(t){void 0===t&&(t=null);var e=0!=(65536&this.ya);if(Ba.prototype.Uf.call(this,t),!e)for(0!=(65536&this.ya)!=!0&&(this.ya^=65536),e=this.HE();e.next();){var i=e.value;if(null===t||!t.contains(i)){var n=i.Y;null!==n&&n!==this&&n.mi(this)&&!n.isVisible()?i.Yb():null!==(n=i.$)&&n!==this&&n.mi(this)&&!n.isVisible()&&i.Yb()}}},Cs.prototype.findExternalLinksConnected=Cs.prototype.HE=function(){var t=this.Up();t.add(this);for(var e=new f(Ua),i=t.i;i.next();){var n=i.value;if(n instanceof Ba)for(n=n.fe;n.next();){var o=n.value;t.contains(o)||e.add(o)}}return e.i},Cs.prototype.findExternalNodesConnected=function(){var t=this.Up();t.add(this);for(var e=new f(Ba),i=t.i;i.next();){var n=i.value;if(n instanceof Ba)for(n=n.fe;n.next();){var o=n.value,r=o.Y;t.contains(r)&&r!==this||e.add(r),o=o.$,t.contains(o)&&o!==this||e.add(o)}}return e.i},Cs.prototype.findContainingGroupChain=function(){function t(e,i){null!==e&&(i.add(e),t(e.Ka,i))}var e=new f(Cs);return t(this,e),e},Cs.prototype.findSubGraphParts=Cs.prototype.Up=function(){var t=new f(sa);return le(t,this,!0,0,!0),t.remove(this),t},Cs.prototype.vd=function(t){Ba.prototype.vd.call(this,t);for(var e=this.Nc;e.next();)e.value.vd(t)},Cs.prototype.collapseSubGraph=Cs.prototype.collapseSubGraph=function(){var t=this.g;if(null!==t&&!t.wh){t.wh=!0;Ds(this,this.Up(),t.Pa,this),t.wh=!1}},Cs.prototype.expandSubGraph=Cs.prototype.expandSubGraph=function(){var t=this.g;if(null!==t&&!t.wh){t.wh=!0;Fs(this,this.Up(),t.Pa,this),t.wh=!1}},_h.defineProperty(Cs,{we:"isSubGraphExpanded"},function(){return 0!=(512&this.ya)},function(t){var e=0!=(512&this.ya);if(e!==t){_h.j(t,"boolean",Cs,"isSubGraphExpanded"),this.ya^=512;var i=this.g;if(this.h("isSubGraphExpanded",e,t),null!==(e=this.GJ)){var n=!0;null!==i&&(n=i.Ua,i.Ua=!0),e(this),null!==i&&(i.Ua=n)}null!==i&&i.oa.gb?null!==this.Kb&&this.Kb.I():t?this.expandSubGraph():this.collapseSubGraph()}}),_h.defineProperty(Cs,{AB:"wasSubGraphExpanded"},function(){return 0!=(1024&this.ya)},function(t){var e=0!=(1024&this.ya);e!==t&&(_h.j(t,"boolean",Cs,"wasSubGraphExpanded"),this.ya^=1024,this.h("wasSubGraphExpanded",e,t))}),_h.defineProperty(Cs,{GJ:"subGraphExpandedChanged"},function(){return this.et},function(t){var e=this.et;e!==t&&(null!==t&&_h.j(t,"function",Cs,"subGraphExpandedChanged"),this.et=t,this.h("subGraphExpandedChanged",e,t))}),Cs.prototype.move=function(t){var e=this.position,i=e.x;isNaN(i)&&(i=0),e=e.y,isNaN(e)&&(e=0);var i=t.x-i,e=t.y-e,n=_h.xb(i,e);for(Ba.prototype.move.call(this,t),t=this.Up().i;t.next();){var o=t.value;if(!(o instanceof Ua||o instanceof Ba&&o.lf)){var r=o.position,a=o.location;r.H()?(n.x=r.x+i,n.y=r.y+e,o.position=n):a.H()&&(n.x=a.x+i,n.y=a.y+e,o.location=n)}}for(t.reset();t.next();)(o=t.value)instanceof Ua&&(r=o.position,n.x=r.x+i,n.y=r.y+e,o.move(n));_h.v(n)},_h.defineProperty(Cs,{Sn:null},function(){return 0!=(32768&this.ya)},function(t){0!=(32768&this.ya)!==t&&(this.ya^=32768)}),_h.La(js,Mo),_h.fa("Placeholder",js),js.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.ff=this.ff.S(),t.Ps=this.Ps.copy()},js.prototype.vk=function(t){if(null===this.background&&null===this.jn)return!1;var e=this.Ia;return Qh(0,0,e.width,e.height,t.x,t.y)},js.prototype.Nn=function(){var t=this.U;if(null!==t&&(t instanceof Cs||t instanceof Aa)||_h.k("Placeholder is not inside a Group or Adornment."),t instanceof Cs){var e=this.computeBorder(this.Ps),i=this.Tc;M(i,e.width||0,e.height||0),No(this,0,0,i.width,i.height);for(var i=t.Nc,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}!n||isNaN(e.x)||isNaN(e.y)||(i=new b,i.Xn(e,t.Af),t.location=new b(i.x,i.y))}else{var e=this.Ba,i=this.Tc,n=this.padding,o=n.left+n.right,r=n.top+n.bottom;if(e.H())M(i,e.width+o||0,e.height+r||0),No(this,-n.left,-n.top,i.width,i.height);else{var a=t.rb,s=a.Wa(iu,_h.K()),e=_h.hg(s.x,s.y,0,0);e.ri(a.Wa(uu,s)),e.ri(a.Wa(ou,s)),e.ri(a.Wa(lu,s)),t.Ri.m(e.x,e.y),M(i,e.width+o||0,e.height+r||0),No(this,-n.left,-n.top,i.width,i.height),_h.v(s),_h.Db(e)}}},js.prototype.ij=function(t,e,i,n){var o=this.W;o.x=t,o.y=e,o.width=i,o.height=n},js.prototype.computeBorder=function(t){var e=this.U;if(e instanceof Cs){var i=e;if(i.vH&&this.Ps.H()){var n=i.g;if(null!==n&&(n=n.Za)instanceof de&&!n.or&&null!==n.Xb&&!n.Xb.contains(i))return t.assign(this.Ps),t}}var i=_h.Ef(),n=this.computeMemberBounds(i),o=this.padding;return t.m(n.x-o.left,n.y-o.top,Math.max(n.width+o.left+o.right,0),Math.max(n.height+o.top+o.bottom,0)),_h.Db(i),e instanceof Cs&&(i=e,i.wH&&i.location.H()&&t.ri(i.location)),t},js.prototype.computeMemberBounds=function(t){if(!(this.U instanceof Cs))return t.m(0,0,0,0),t;for(var e=this.U,i=Infinity,n=Infinity,o=-Infinity,r=-Infinity,a=e.Nc;a.next();){var s=a.value;if(s.isVisible()){if(s instanceof Ua){var l=s;if(!e.Sw)continue;if(Uo(l))continue;if(l.Y===e||l.$===e)continue}s=s.W,s.left<i&&(i=s.left),s.top<n&&(n=s.top),s.right>o&&(o=s.right),s.bottom>r&&(r=s.bottom)}}return isFinite(i)&&isFinite(n)?t.m(i,n,o-i,r-n):(e=e.location,i=this.padding,t.m(e.x+i.left,e.y+i.top,0,0)),t},_h.defineProperty(js,{padding:"padding"},function(){return this.ff},function(t){"number"==typeof t?t=new A(t):_h.G(t,A,js,"padding");var e=this.ff;e.L(t)||(this.ff=t=t.S(),this.h("padding",e,t))}),_h.fa("Layout",Es),Es.prototype.cloneProtected=function(t){t.Jr=this.Jr,t.Xj=this.Xj,t.Pr=this.Pr,t.Jq.assign(this.Jq),t.Mr=this.Mr,t.Lr=this.Lr,t.vC=this.vC,this.Xj||(t.Uo=!0)},Es.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Es.prototype.gc=function(t){_h.Fj(this,t)},Es.prototype.toString=function(){var t=_h.hf(Object.getPrototypeOf(this)),t=t+"(";return null!==this.group&&(t+=" in "+this.group),null!==this.g&&(t+=" for "+this.g),t+")"},_h.defineProperty(Es,{g:"diagram"},function(){return this.Z},function(t){null!==t&&_h.G(t,Ii,Es,"diagram"),this.Z=t}),_h.defineProperty(Es,{group:"group"},function(){return this.bz},function(t){this.bz!==t&&(null!==t&&_h.G(t,Cs,Es,"group"),this.bz=t,null!==t&&(this.Z=t.g))}),_h.defineProperty(Es,{wI:"isOngoing"},function(){return this.Jr},function(t){this.Jr!==t&&(_h.j(t,"boolean",Es,"isOngoing"),this.Jr=t)}),_h.defineProperty(Es,{nF:"isInitial"},function(){return this.Xj},function(t){_h.j(t,"boolean",Es,"isInitial"),this.Xj=t,t||(this.Uo=!0)}),_h.defineProperty(Es,{zx:"isViewportSized"},function(){return this.Pr},function(t){this.Pr!==t&&(_h.j(t,"boolean",Es,"isViewportSized"),(this.Pr=t)&&this.J())}),_h.defineProperty(Es,{du:"isRouting"},function(){return this.Mr},function(t){this.Mr!==t&&(_h.j(t,"boolean",Es,"isRouting"),this.Mr=t)}),_h.defineProperty(Es,{qF:"isRealtime"},function(){return this.Lr},function(t){this.Lr!==t&&(_h.j(t,"boolean",Es,"isRealtime"),this.Lr=t)}),_h.defineProperty(Es,{zf:"isValidLayout"},function(){return this.Uo},function(t){this.Uo!==t&&(_h.j(t,"boolean",Es,"isValidLayout"),this.Uo=t,t||null!==(t=this.g)&&(t.av=!0))}),Es.prototype.invalidateLayout=Es.prototype.J=function(){if(this.Uo){var t=this.g;if(null!==t&&!t.oa.gb){var e=t.Pa;!e.To&&(e.kf&&e.pi(),this.wI&&t.Hn||this.nF&&!t.Hn)&&(this.zf=!1,t.Le())}}},_h.defineProperty(Es,{network:"network"},function(){return this.oz},function(t){var e=this.oz;e!==t&&(null!==t&&_h.G(t,zs,Es,"network"),null!==e&&(e.Sb=null),this.oz=t,null!==t&&(t.Sb=this))}),Es.prototype.createNetwork=function(){return new zs},Es.prototype.makeNetwork=function(t){var e=this.createNetwork();return e.Sb=this,t instanceof Ii?(e.sk(t.eg,!0),e.sk(t.links,!0)):t instanceof Cs?e.sk(t.Nc):e.sk(t.i),e},Es.prototype.updateParts=function(){var t=this.g;if(null===t&&null!==this.network)for(var e=this.network.vertexes.i;e.next();){var i=e.value.Oc;if(null!==i&&null!==(t=i.g))break}this.zf=!0;try{null!==t&&t.Ub("Layout"),this.commitLayout()}finally{null!==t&&t.Gd("Layout")}},Es.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.du)for(t=this.network.edges.i;t.next();)t.value.commit()},Es.prototype.doLayout=function(t){null===t&&_h.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var e=new f(sa);t instanceof Ii?(Is(this,e,t.eg,!0,this.Sn,!0,!1,!0),Is(this,e,t.Jk,!0,this.Sn,!0,!1,!0)):t instanceof Cs?Is(this,e,t.Nc,!1,this.Sn,!0,!1,!0):e.Hc(t.i);var i=e.count;if(0<i){t=this.g,null!==t&&t.Ub("Layout");for(var i=Math.ceil(Math.sqrt(i)),n=this.oe.x,o=n,r=this.oe.y,a=0,s=0,e=e.i;e.next();){var l=e.value;l.Ze();var h=l.za,u=h.width,h=h.height;l.moveTo(o,r),l instanceof Cs&&(l.Sn=!1),o+=Math.max(u,50)+20,s=Math.max(s,Math.max(h,50)),a>=i-1?(a=0,o=n,r+=s+20,s=0):a++}null!==t&&t.Gd("Layout")}this.zf=!0},Es.prototype.Sn=function(t){return!(t.location.H()&&!(t instanceof Cs&&t.Sn))},Es.prototype.collectParts=Es.prototype.pH=function(t){var e=new f(sa);return t instanceof Ii?(Is(this,e,t.eg,!0,null,!0,!0,!0),Is(this,e,t.links,!0,null,!0,!0,!0),Is(this,e,t.Jk,!0,null,!0,!0,!0)):t instanceof Cs?Is(this,e,t.Nc,!1,null,!0,!0,!0):Is(this,e,t.i,!1,null,!0,!0,!0),e},_h.defineProperty(Es,{oe:"arrangementOrigin"},function(){return this.Jq},function(t){_h.G(t,b,Es,"arrangementOrigin"),this.Jq.L(t)||(this.Jq.assign(t),this.J())}),Es.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),e=e.placeholder,null!==e&&(i=e.Wa(iu),(isNaN(i.x)||isNaN(i.y))&&i.set(t),i.x+=e.padding.left,i.y+=e.padding.top),i}return t},_h.fa("LayoutNetwork",zs),zs.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var e=t.value;e.clear(),e.network=null}if(this.edges)for(t=this.edges.i;t.next();)e=t.value,e.clear(),e.network=null;this.vertexes=new f(Hs),this.edges=new f(Vs),this.Ix=new v(Ba,Hs),this.Ex=new v(Ua,Vs)},zs.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.Sb?"("+this.Sb.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,1<t){for(var i=this.vertexes.i;i.next();)e+="\n    "+i.value.toString(t-1);for(i=this.edges.i;i.next();)e+="\n    "+i.value.toString(t-1)}return e},_h.defineProperty(zs,{Sb:"layout"},function(){return this.ie},function(t){this.ie=t}),zs.prototype.createVertex=function(){return new Hs},zs.prototype.createEdge=function(){return new Vs},zs.prototype.addParts=zs.prototype.sk=function(t,e,i){if(null!==t){for(void 0===e&&(e=!1),_h.j(e,"boolean",zs,"addParts:toplevelonly"),void 0===i&&(i=null),null===i&&(i=function(t){if(t instanceof Ba)return!t.lf;if(t instanceof Ua){var e=t.Y;return null!==e&&!e.lf&&(null!==(t=t.$)&&!t.lf)}return!1}),t=t.i;t.next();){var n=t.value;if(n instanceof Ba&&(!e||n.bq)&&n.canLayout()&&i(n))if(n instanceof Cs&&null===n.Sb)this.sk(n.Nc,!1);else if(null===this.yn(n)){var o=this.createVertex();o.Oc=n,this.Dl(o)}}for(t.reset();t.next();)if((n=t.value)instanceof Ua&&(!e||n.bq)&&n.canLayout()&&i(n)&&null===this.ex(n)){var r=n.Y,o=n.$;null!==r&&null!==o&&r!==o&&(r=this.findGroupVertex(r),o=this.findGroupVertex(o),null!==r&&null!==o&&this.fq(r,o,n))}}},zs.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.yn(e)))return t;for(e=e.Ka;null!==e;){if(null!==(t=this.yn(e)))return t;e=e.Ka}return null},zs.prototype.addVertex=zs.prototype.Dl=function(t){if(null!==t){this.vertexes.add(t);var e=t.Oc;null!==e&&this.Ix.add(e,t),t.network=this}};zs.prototype.addNode=zs.prototype.vt=function(t){if(null===t)return null;var e=this.yn(t);return null===e&&(e=this.createVertex(),e.Oc=t,this.Dl(e)),e},zs.prototype.deleteVertex=zs.prototype.BE=function(t){if(null!==t&&Gs(this,t)){for(var e=t.Oe,i=e.count-1;0<=i;i--){var n=e.da(i);this.Pp(n)}for(e=t.He,i=e.count-1;0<=i;i--)n=e.da(i),this.Pp(n)}},zs.prototype.deleteNode=function(t){null!==t&&null!==(t=this.yn(t))&&this.BE(t)},zs.prototype.findVertex=zs.prototype.yn=function(t){return null===t?null:this.Ix.ja(t)},zs.prototype.addEdge=zs.prototype.Ep=function(t){if(null!==t){this.edges.add(t);var e=t.link;null!==e&&null===this.ex(e)&&this.Ex.add(e,t),e=t.toVertex,null!==e&&e.gE(t),e=t.fromVertex,null!==e&&e.eE(t),t.network=this}},zs.prototype.addLink=function(t){if(null===t)return null;var e=t.Y,i=t.$,n=this.ex(t);return null===n?(n=this.createEdge(),n.link=t,null!==e&&(n.fromVertex=this.vt(e)),null!==i&&(n.toVertex=this.vt(i)),this.Ep(n)):(n.fromVertex=null!==e?this.vt(e):null,n.toVertex=null!==i?this.vt(i):null),n},zs.prototype.deleteEdge=zs.prototype.Pp=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.AE(t),e=t.fromVertex,null!==e&&e.zE(t),Rs(this,t)}},zs.prototype.deleteLink=function(t){null!==t&&null!==(t=this.ex(t))&&this.Pp(t)},zs.prototype.findEdge=zs.prototype.ex=function(t){return null===t?null:this.Ex.ja(t)},zs.prototype.linkVertexes=zs.prototype.fq=function(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Ep(n),n}return null},zs.prototype.reverseEdge=zs.prototype.Xx=function(t){if(null!==t){var e=t.fromVertex,i=t.toVertex;null!==e&&null!==i&&(e.zE(t),i.AE(t),t.Xx(),e.gE(t),i.eE(t))}},zs.prototype.deleteSelfEdges=zs.prototype.Yw=function(){for(var t=_h.lb(),e=this.edges.i;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Pp(t[i]);_h.wa(t)},zs.prototype.deleteArtificialVertexes=function(){for(var t=_h.lb(),e=this.vertexes.i;e.next();){var i=e.value;null===i.Oc&&t.push(i)}for(var i=t.length,n=0;n<i;n++)this.BE(t[n]);for(e=_h.lb(),i=this.edges.i;i.next();)n=i.value,null===n.link&&e.push(n);for(i=e.length,n=0;n<i;n++)this.Pp(e[n]);_h.wa(t),_h.wa(e)},zs.prototype.splitIntoSubNetworks=zs.prototype.FJ=function(){this.deleteArtificialVertexes(),qs(this),this.Yw();for(var t=new u(zs),e=!0;e;)for(var e=!1,i=this.vertexes.i;i.next();){var n=i.value;if(0<n.Oe.count||0<n.He.count){e=this.Sb.createNetwork(),t.add(e),Ws(this,e,n),e=!0;break}}return t.sort(function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count}),t},zs.prototype.findAllParts=function(){for(var t=new f(sa),e=this.vertexes.i;e.next();)t.add(e.value.Oc);for(e=this.edges.i;e.next();)t.add(e.value.link);return t},_h.fa("LayoutVertex",Hs),Hs.prototype.clear=function(){this.rd=this.Vd=null,this.Oe=new u(Vs),this.He=new u(Vs)},Hs.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+_h.Kd(this);if(0<t&&(e+=null!==this.Oc?"("+this.Oc.toString()+")":"",1<t)){t="";for(var i=!0,n=this.Oe.i;n.next();){var o=n.value;i?i=!1:t+=",",t+=o.toString(0)}for(o="",i=!0,n=this.He.i;n.next();){var r=n.value;i?i=!1:o+=",",o+=r.toString(0)}e+=" sources: "+t+" destinations: "+o}return e},_h.defineProperty(Hs,{data:"data"},function(){return this.Vd},function(t){if(this.Vd=t,null!==t){var e=t.bounds;t=e.x;var i=e.y,n=e.width,e=e.height;this.T.m(n/2,e/2),this.M.m(t,i,n,e)}}),_h.defineProperty(Hs,{Oc:"node"},function(){return this.rd},function(t){if(this.rd!==t){this.rd=t,t.Ze();var e=t.W,i=e.x,n=e.y,o=e.width,e=e.height;if(isNaN(i)&&(i=0),isNaN(n)&&(n=0),this.M.m(i,n,o,e),!(t instanceof Cs)&&(t=t.Yf.Wa(au),t.H()))return void this.T.m(t.x-i,t.y-n);this.T.m(o/2,e/2)}}),_h.defineProperty(Hs,{cb:"bounds"},function(){return this.M},function(t){this.M.L(t)||this.M.assign(t)}),_h.defineProperty(Hs,{focus:"focus"},function(){return this.T},function(t){this.T.L(t)||this.T.assign(t)}),_h.defineProperty(Hs,{ka:"centerX"},function(){return this.M.x+this.T.x},function(t){var e=this.M;e.x+this.T.x!==t&&(e.Ra(),e.x=t-this.T.x,e.freeze())}),_h.defineProperty(Hs,{ra:"centerY"},function(){return this.M.y+this.T.y},function(t){var e=this.M;e.y+this.T.y!==t&&(e.Ra(),e.y=t-this.T.y,e.freeze())}),_h.defineProperty(Hs,{Pt:"focusX"},function(){return this.T.x},function(t){var e=this.T;e.x!==t&&(e.Ra(),e.x=t,e.freeze())}),_h.defineProperty(Hs,{Qt:"focusY"},function(){return this.T.y},function(t){var e=this.T;e.y!==t&&(e.Ra(),e.y=t,e.freeze())}),_h.defineProperty(Hs,{x:"x"},function(){return this.M.x},function(t){var e=this.M;e.x!==t&&(e.Ra(),e.x=t,e.freeze())}),_h.defineProperty(Hs,{y:"y"},function(){return this.M.y},function(t){var e=this.M;e.y!==t&&(e.Ra(),e.y=t,e.freeze())}),_h.defineProperty(Hs,{width:"width"},function(){return this.M.width},function(t){var e=this.M;e.width!==t&&(e.Ra(),e.width=t,e.freeze())}),_h.defineProperty(Hs,{height:"height"},function(){return this.M.height},function(t){var e=this.M;e.height!==t&&(e.Ra(),e.height=t,e.freeze())}),Hs.prototype.commit=function(){var t=this.Vd;if(null!==t){var e=this.cb,i=t.bounds;_h.Qa(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.Oc)){if(e=this.cb,!(t instanceof Cs)){var i=t.W,n=t.Yf.Wa(au)
;if(i.H()&&n.H())return void t.moveTo(e.x+this.Pt-(n.x-i.x),e.y+this.Qt-(n.y-i.y))}t.moveTo(e.x,e.y)}},Hs.prototype.addSourceEdge=Hs.prototype.gE=function(t){null!==t&&(this.Oe.contains(t)||this.Oe.add(t))},Hs.prototype.deleteSourceEdge=Hs.prototype.AE=function(t){null!==t&&this.Oe.remove(t)},Hs.prototype.addDestinationEdge=Hs.prototype.eE=function(t){null!==t&&(this.He.contains(t)||this.He.add(t))},Hs.prototype.deleteDestinationEdge=Hs.prototype.zE=function(t){null!==t&&this.He.remove(t)},_h.u(Hs,{EJ:"sourceVertexes"},function(){for(var t=new f(Hs),e=this.lc;e.next();)t.add(e.value.fromVertex);return t.i}),_h.u(Hs,{JH:"destinationVertexes"},function(){for(var t=new f(Hs),e=this.ic;e.next();)t.add(e.value.toVertex);return t.i}),_h.u(Hs,{vertexes:"vertexes"},function(){for(var t=new f(Hs),e=this.lc;e.next();)t.add(e.value.fromVertex);for(e=this.ic;e.next();)t.add(e.value.toVertex);return t.i}),_h.u(Hs,{lc:"sourceEdges"},function(){return this.Oe.i}),_h.u(Hs,{ic:"destinationEdges"},function(){return this.He.i}),_h.u(Hs,{edges:"edges"},function(){for(var t=new u(Vs),e=this.lc;e.next();)t.add(e.value);for(e=this.ic;e.next();)t.add(e.value);return t.i}),_h.u(Hs,{OH:"edgesCount"},function(){return this.Oe.count+this.He.count});var ip;Hs.standardComparer=ip=function(t,e){var i=t.rd,n=e.rd;return i?n?(i=i.text,n=n.text,i<n?-1:i>n?1:0):1:null!==n?-1:0},Hs.smartComparer=function(t,e){if(null!==t){if(null!==e){var i=t.rd,n=e.rd;if(null!==i){if(null!==n){for(var i=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<i.length;o++)if(""!==n[o]&&void 0!==n[o]){var r=parseFloat(i[o]),a=parseFloat(n[o]);if(isNaN(r)){if(!isNaN(a))return 1;if(0!==i[o].localeCompare(n[o]))return i[o].localeCompare(n[o])}else{if(isNaN(a))return-1;if(0!=r-a)return r-a}}else if(""!==i[o])return 1;return""!==n[o]&&void 0!==n[o]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},_h.fa("LayoutEdge",Vs),Vs.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Vs.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+_h.Kd(this);return 0<t&&(e+=null!==this.link?"("+this.link.toString()+")":"",1<t&&(e+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --> "+(this.toVertex?this.toVertex.toString():"null"))),e},Vs.prototype.Xx=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Vs.prototype.commit=function(){},Vs.prototype.getOtherVertex=Vs.prototype.YH=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null},_h.La(Us,Es),_h.fa("GridLayout",Us),Us.prototype.cloneProtected=function(t){Es.prototype.cloneProtected.call(this,t),t.rt=this.rt,t.qt=this.qt,t.Kj.assign(this.Kj),t.ai.assign(this.ai),t.ge=this.ge,t.ld=this.ld,t.$h=this.$h,t.Jh=this.Jh},Us.prototype.gc=function(t){t.De===Us?t===up||t===cp||t===lp||t===hp?this.sorting=t:t===ap||t===sp?this.Pf=t:t===rp||t===op?this.alignment=t:_h.k("Unknown enum value: "+t):Es.prototype.gc.call(this,t)},Us.prototype.doLayout=function(t){null===t&&_h.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.oe=this.initialOrigin(this.oe);var e=this.g;t=this.pH(t);for(var i=t.copy().i;i.next();){var n=i.value;if(n instanceof Ua){var o=n;if(null!==o.Y||null!==o.$){t.remove(o);continue}}if(n.Ze(),n instanceof Cs)for(n=n.Nc;n.next();)t.remove(n.value)}if(o=t.ec(),0!==o.length){switch(this.sorting){case hp:o.reverse();break;case up:o.sort(this.comparer);break;case cp:o.sort(this.comparer),o.reverse()}var r=this.VJ;isNaN(r)&&(r=0);var a=this.BG,a=isNaN(a)&&null!==e?Math.max(e.pb.width-e.padding.left-e.padding.right,0):Math.max(this.BG,0);switch(0>=r&&0>=a&&(r=1),t=this.spacing.width,isFinite(t)||(t=0),i=this.spacing.height,isFinite(i)||(i=0),null!==e&&e.Ub("Layout"),n=[],this.alignment){case op:var s=t,l=i,h=Math.max(this.Hp.width,1);if(!isFinite(h))for(var u=h=0;u<o.length;u++)var c=o[u],f=c.za,h=Math.max(h,f.width);var h=Math.max(h+s,1),d=Math.max(this.Hp.height,1);if(!isFinite(d))for(u=d=0;u<o.length;u++)c=o[u],f=c.za,d=Math.max(d,f.height);for(var d=Math.max(d+l,1),p=this.Pf,g=this.oe.x,y=g,m=this.oe.y,v=0,x=0,u=0;u<o.length;u++){var c=o[u],f=c.za,w=Math.ceil((f.width+s)/h)*h,k=Math.ceil((f.height+l)/d)*d,M=0;switch(p){case sp:M=Math.abs(y-f.width);break;default:M=y+f.width}switch((0<r&&v>r-1||0<a&&0<v&&M>a)&&(n.push(new S(0,m,a+s,x)),v=0,y=g,m+=x,x=0),x=Math.max(x,k),k=0,p){case sp:k=-f.width;break;default:k=0}switch(c.moveTo(y+k,m),p){case sp:y-=w;break;default:y+=w}v++}n.push(new S(0,m,a+s,x));break;case rp:for(s=r,l=t,h=i,u=Math.max(this.Hp.width,1),c=m=w=0,f=_h.K(),r=0;r<o.length;r++)d=o[r],p=d.za,g=fa(d,d.Yf,d.Af,f),w=Math.max(w,g.x),m=Math.max(m,p.width-g.x),c=Math.max(c,g.y);switch(y=this.Pf){case sp:w+=l;break;default:m+=l}var u=isFinite(u)?Math.max(u+l,1):Math.max(w+m,1),P=m=this.oe.x,v=this.oe.y,x=0;a>=w&&(a-=w);for(var w=k=0,M=Math.max(this.Hp.height,1),T=c=0,L=!0,N=_h.K(),r=0;r<o.length;r++){if(d=o[r],p=d.za,g=fa(d,d.Yf,d.Af,f),0<x)switch(y){case sp:P=(P-m-(p.width-g.x))/u,P=J(Math.round(P),P)?Math.round(P):Math.floor(P),P=P*u+m;break;default:P=(P-m+g.x)/u,P=J(Math.round(P),P)?Math.round(P):Math.ceil(P),P=P*u+m}else switch(y){case sp:k=P+g.x+p.width;break;default:k=P-g.x}var C=0;switch(y){case sp:C=-(P+g.x)+k;break;default:C=P+p.width-g.x-k}if(0<s&&x>s-1||0<a&&0<x&&C>a){for(n.push(new S(0,L?v-c:v,a+l,T+c+h)),P=0;P<x&&r!==x;P++){var C=o[r-x+P],A=fa(C,C.Yf,C.Af,N);C.moveTo(C.position.x,C.position.y+c-A.y)}T+=h,v=L?v+T:v+(T+c),x=T=c=0,P=m,L=!1}switch(P===m&&(w=y===sp?Math.max(w,p.width-g.x):Math.min(w,-g.x)),c=Math.max(c,g.y),T=Math.max(T,p.height-g.y),isFinite(M)&&(T=Math.max(T,Math.max(p.height,M)-g.y)),L?d.moveTo(P-g.x,v-g.y):d.moveTo(P-g.x,v),y){case sp:P-=g.x+l;break;default:P+=p.width-g.x+l}x++}for(n.push(new S(0,v,a+l,(L?T:T+c)+h)),P=0;P<x&&r!==x;P++)C=o[r-x+P],A=fa(C,C.Yf,C.Af,f),C.moveTo(C.position.x,C.position.y+c-A.y);if(_h.v(f),_h.v(N),y===sp)for(r=0;r<n.length;r++)o=n[r],o.width+=w,o.x-=w;else for(r=0;r<n.length;r++)o=n[r],o.x>w&&(o.width+=o.x-w,o.x=w)}for(s=r=a=o=0;s<n.length;s++)l=n[s],o=Math.min(o,l.x),a=Math.min(a,l.y),r=Math.max(r,l.x+l.width);this.Pf===sp?this.commitLayers(n,new b(o+t/2-(r+o),a-i/2)):this.commitLayers(n,new b(o-t/2,a-i/2)),null!==e&&e.Gd("Layout"),this.zf=!0}},Us.prototype.commitLayers=function(){},_h.defineProperty(Us,{BG:"wrappingWidth"},function(){return this.rt},function(t){this.rt!==t&&(_h.j(t,"number",Us,"wrappingWidth"),0<t||isNaN(t))&&(this.rt=t,this.zx=isNaN(t),this.J())}),_h.defineProperty(Us,{VJ:"wrappingColumn"},function(){return this.qt},function(t){this.qt!==t&&(_h.j(t,"number",Us,"wrappingColumn"),0<t||isNaN(t))&&(this.qt=t,this.J())}),_h.defineProperty(Us,{Hp:"cellSize"},function(){return this.Kj},function(t){_h.G(t,k,Us,"cellSize"),this.Kj.L(t)||(this.Kj.assign(t),this.J())}),_h.defineProperty(Us,{spacing:"spacing"},function(){return this.ai},function(t){_h.G(t,k,Us,"spacing"),this.ai.L(t)||(this.ai.assign(t),this.J())}),_h.defineProperty(Us,{alignment:"alignment"},function(){return this.ge},function(t){this.ge!==t&&(_h.mb(t,Us,Us,"alignment"),t===rp||t===op)&&(this.ge=t,this.J())}),_h.defineProperty(Us,{Pf:"arrangement"},function(){return this.ld},function(t){this.ld!==t&&(_h.mb(t,Us,Us,"arrangement"),t===ap||t===sp)&&(this.ld=t,this.J())}),_h.defineProperty(Us,{sorting:"sorting"},function(){return this.$h},function(t){this.$h!==t&&(_h.mb(t,Us,Us,"sorting"),t===lp||t===hp||t===up||t===cp)&&(this.$h=t,this.J())}),_h.defineProperty(Us,{comparer:"comparer"},function(){return this.Jh},function(t){this.Jh!==t&&(_h.j(t,"function",Us,"comparer"),this.Jh=t,this.J())});var np;Us.standardComparer=np=function(t,e){var i=t.text,n=e.text;return i<n?-1:i>n?1:0},Us.smartComparer=function(t,e){if(null!==t){if(null!==e){for(var i=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<i.length;o++)if(""!==n[o]&&void 0!==n[o]){var r=parseFloat(i[o]),a=parseFloat(n[o]);if(isNaN(r)){if(!isNaN(a))return 1;if(0!==i[o].localeCompare(n[o]))return i[o].localeCompare(n[o])}else{if(isNaN(a))return-1;if(0!=r-a)return r-a}}else if(""!==i[o])return 1;return""!==n[o]&&void 0!==n[o]?-1:0}return 1}return null!==e?-1:0};var op;Us.Position=op=_h.p(Us,"Position",0);var rp;Us.Location=rp=_h.p(Us,"Location",1);var ap;Us.LeftToRight=ap=_h.p(Us,"LeftToRight",2);var sp;Us.RightToLeft=sp=_h.p(Us,"RightToLeft",3);var lp;Us.Forward=lp=_h.p(Us,"Forward",4);var hp;Us.Reverse=hp=_h.p(Us,"Reverse",5);var up;Us.Ascending=up=_h.p(Us,"Ascending",6);var cp;Us.Descending=cp=_h.p(Us,"Descending",7),_h.La(_s,Es),_h.fa("CircularLayout",_s),_s.prototype.cloneProtected=function(t){Es.prototype.cloneProtected.call(this,t),t.Ds=this.Ds,t.Lq=this.Lq,t.dt=this.dt,t.ft=this.ft,t.ld=this.ld,t.aa=this.aa,t.$h=this.$h,t.Jh=this.Jh,t.ai=this.ai,t.rs=this.rs},_s.prototype.gc=function(t){t.De===_s?t===kp||t===Sp||t===xp||t===wp||t===Mp?this.sorting=t:t===vp||t===bp||t===yp||t===mp?this.direction=t:t===pp||t===dp||t===fp||t===gp?this.Pf=t:t!==Tp&&t!==Pp||(this.Hx=t):Es.prototype.gc.call(this,t)},_s.prototype.createNetwork=function(){return new rl},_s.prototype.doLayout=function(t){if(null===t&&_h.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.network.vertexes,1>=t.count)1===t.count&&(t=t.first(),t.ka=0,t.ra=0);else{var e=new u(al);e.Hc(t.i),t=new u(al);var i,n=new u(al);i=this.sort(e);var o=this.Sy,r=this.BC,a=this.Wd,s=this.Fo,l=this.Ty,h=this.pr,e=this.bl,c=this.SD,f=this.Gg,d=this.hv,o=this.Pf,r=this.Hx,a=this.fJ;if((!isFinite(a)||0>=a)&&(a=NaN),s=this.iH,(!isFinite(s)||0>=s)&&(s=1),l=this.ye,isFinite(l)||(l=0),h=this.of,(!isFinite(h)||360<h||1>h)&&(h=360),e=this.spacing,isFinite(e)||(e=NaN),o===gp&&r===Tp?o=fp:o===gp&&r!==Tp&&(r=Tp,o=this.Pf),(this.direction===vp||this.direction===bp)&&this.sorting!==Mp){for(var p=0;!(p>=i.length)&&(t.add(i.da(p)),!(p+1>=i.length));p+=2)n.add(i.da(p+1));this.direction===vp?(this.Pf===gp&&t.reverse(),i=new u(al),i.Hc(t),i.Hc(n)):(this.Pf===gp&&n.reverse(),i=new u(al),i.Hc(n),i.Hc(t))}for(var g=i.length,y=c=0,p=0;p<i.length;p++){var f=l+h*y*(this.direction===yp?1:-1)/g,m=i.da(p).diameter;isNaN(m)&&(m=sl(i.da(p),f)),360>h&&(0===p||p===i.length-1)&&(m/=2),c+=m,y++}if(isNaN(a)||o===gp){if(isNaN(e)&&(e=6),o!==fp&&o!==gp){for(m=-Infinity,p=0;p<g;p++){var d=i.da(p),v=i.da(p===g-1?0:p+1);isNaN(d.diameter)&&sl(d,0),isNaN(v.diameter)&&sl(v,0),m=Math.max(m,(d.diameter+v.diameter)/2)}d=m+e,o===pp?(f=2*Math.PI/g,a=(m+e)/f):a=il(this,d*(360<=h?g:g-1),s,l*Math.PI/180,h*Math.PI/180)}else a=il(this,c+(360<=h?g:g-1)*(o!==gp?e:1.6*e),s,l*Math.PI/180,h*Math.PI/180);f=a*s}else if(f=a*s,y=el(this,a,f,l*Math.PI/180,h*Math.PI/180),isNaN(e))o!==fp&&o!==gp||(e=(y-c)/(360<=h?g:g-1));else if(o===fp||o===gp)p=(y-c)/(360<=h?g:g-1),p<e?(a=il(this,c+e*(360<=h?g:g-1),s,l*Math.PI/180,h*Math.PI/180),f=a*s):e=p;else{for(m=-Infinity,p=0;p<g;p++)d=i.da(p),v=i.da(p===g-1?0:p+1),isNaN(d.diameter)&&sl(d,0),isNaN(v.diameter)&&sl(v,0),m=Math.max(m,(d.diameter+v.diameter)/2);d=m+e,p=il(this,d*(360<=h?g:g-1),s,l*Math.PI/180,h*Math.PI/180),p>a?(a=p,f=a*s):d=y/(360<=h?g:g-1)}if(this.Sy=o,this.BC=r,this.Wd=a,this.Fo=s,this.Ty=l,this.pr=h,this.bl=e,this.SD=c,this.Gg=f,this.hv=d,e=i,i=this.Sy,o=this.Wd,r=this.Ty,s=this.pr,l=this.bl,h=this.Gg,c=this.hv,this.direction!==vp&&this.direction!==bp||i!==gp)if(this.direction===vp||this.direction===bp){switch(a=0,i){case dp:a=180*nl(this,o,h,r,c)/Math.PI;break;case fp:c=e=0,a=t.first(),null!==a&&(e=sl(a,Math.PI/2)),a=n.first(),null!==a&&(c=sl(a,Math.PI/2)),a=180*nl(this,o,h,r,l+(e+c)/2)/Math.PI;break;case pp:a=s/e.length}if(this.direction===vp){switch(i){case dp:Ys(this,t,r,mp);break;case fp:Js(this,t,r,mp);break;case pp:Ks(this,t,s/2,r,mp)}switch(i){case dp:Ys(this,n,r+a,yp);break;case fp:Js(this,n,r+a,yp);break;case pp:Ks(this,n,s/2,r+a,yp)}}else{switch(i){case dp:Ys(this,n,r,mp);break;case fp:Js(this,n,r,mp);break;case pp:Ks(this,n,s/2,r,mp)}switch(i){case dp:Ys(this,t,r+a,yp);break;case fp:Js(this,t,r+a,yp);break;case pp:Ks(this,t,s/2,r+a,yp)}}}else switch(i){case dp:Ys(this,e,r,this.direction);break;case fp:Js(this,e,r,this.direction);break;case pp:Ks(this,e,s,r,this.direction);break;case gp:$s(this,e,s,r,this.direction)}else $s(this,e,s,r-s/2,yp)}this.updateParts(),this.network=null,this.zf=!0},_s.prototype.commitLayout=function(){this.commitNodes(),this.du&&this.commitLinks()},_s.prototype.commitNodes=function(){for(var t=this.YG,e=this.network.vertexes.i;e.next();){var i=e.value;i.x+=t.x,i.y+=t.y,i.commit()}},_s.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},_s.prototype.sort=function(t){switch(this.sorting){case xp:break;case wp:t.reverse();break;case kp:t.sort(this.comparer);break;case Sp:t.sort(this.comparer),t.reverse();break;case Mp:for(var e=[],i=0;i<t.length;i++)e.push(0);for(var n=new u(al),i=0;i<t.length;i++){var o=-1,r=-1;if(0===i)for(var a=0;a<t.length;a++){var s=t.da(a).OH;s>o&&(o=s,r=a)}else for(a=0;a<t.length;a++)(s=e[a])>o&&(o=s,r=a);for(n.add(t.da(r)),e[r]=-1,r=t.da(r),o=0,a=r.lc;a.next();)0>(o=t.indexOf(a.value.fromVertex))||0<=e[o]&&e[o]++;for(r=r.ic;r.next();)0>(o=t.indexOf(r.value.toVertex))||0<=e[o]&&e[o]++}for(t=[],r=0;r<n.length;r++){e=n.da(r),t[r]=[];for(var l=0,i=e.ic;i.next();)(l=n.indexOf(i.value.toVertex))!==r&&0>t[r].indexOf(l)&&t[r].push(l);for(e=e.lc;e.next();)(l=n.indexOf(e.value.fromVertex))!==r&&0>t[r].indexOf(l)&&t[r].push(l)}for(a=[],r=0;r<t.length;r++)a[r]=0;for(var e=[],s=[],h=[],i=[],o=new u(al),c=0,r=0;r<t.length;r++){var f=t[r].length;if(1===f)i.push(r);else if(0===f)o.add(n.da(r));else{if(0===c)e.push(r);else{for(var d=Infinity,p=Infinity,g=-1,y=[],f=0;f<e.length;f++)0>t[e[f]].indexOf(e[f===e.length-1?0:f+1])&&y.push(f===e.length-1?0:f+1);if(0===y.length)for(f=0;f<e.length;f++)y.push(f);for(f=0;f<y.length;f++){var m,v=y[f],l=t[r];m=s;for(var b=h,x=a,w=v,k=e,S=0,M=0;M<m.length;M++){var P=x[m[M]],T=x[b[M]],L=0,N=0;if(P<T?(L=P,N=T):(L=T,N=P),L<w&&w<=N)for(P=0;P<l.length;P++)T=l[P],0>k.indexOf(T)||L<x[T]&&x[T]<N||L===x[T]||N===x[T]||S++;else for(P=0;P<l.length;P++)T=l[P],0>k.indexOf(T)||L<x[T]&&x[T]<N&&L!==x[T]&&N!==x[T]&&S++}for(m=S,x=b=0;x<t[r].length;x++)0<=(l=e.indexOf(t[r][x]))&&(l=Math.abs(v-(l>=v?l+1:l)),b+=l<e.length+1-l?l:e.length+1-l);for(x=0;x<s.length;x++)l=a[s[x]],w=a[h[x]],l>=v&&l++,w>=v&&w++,l>w&&(k=w,w=l,l=k),w-l<(e.length+2)/2==(l<v&&v<=w)&&b++;(m<d||m===d&&b<p)&&(d=m,p=b,g=v)}for(e.splice(g,0,r),f=0;f<e.length;f++)a[e[f]]=f;for(f=0;f<t[r].length;f++)d=t[r][f],0<=e.indexOf(d)&&(s.push(r),h.push(d))}c++}}for(r=!1,a=e.length;;){for(r=!0,s=0;s<i.length;s++)if(h=i[s],c=t[h][0],0<=(l=e.indexOf(c))){for(p=f=0;p<t[c].length;p++)d=t[c][p],0>(d=e.indexOf(d))||d===l||(g=d>l?d-l:l-d,f+=d<l!=g>a-g?1:-1);e.splice(0>f?l:l+1,0,h),i.splice(s,1),s--}else r=!1;if(r)break;e.push(i[0]),i.splice(0,1)}for(r=0;r<e.length;r++)o.add(n.da(e[r]));return o;default:_h.k("Invalid sorting type.")}return t},_h.defineProperty(_s,{fJ:"radius"},function(){return this.Ds},function(t){this.Ds!==t&&(_h.j(t,"number",_s,"radius"),0<t||isNaN(t))&&(this.Ds=t,this.J())}),_h.defineProperty(_s,{iH:"aspectRatio"},function(){return this.Lq},function(t){this.Lq!==t&&(_h.j(t,"number",_s,"aspectRatio"),0<t&&(this.Lq=t,this.J()))}),_h.defineProperty(_s,{ye:"startAngle"},function(){return this.dt},function(t){this.dt!==t&&(_h.j(t,"number",_s,"startAngle"),this.dt=t,this.J())}),_h.defineProperty(_s,{of:"sweepAngle"},function(){return this.ft},function(t){this.ft!==t&&(_h.j(t,"number",_s,"sweepAngle"),this.ft=0<t&&360>=t?t:360,this.J())}),_h.defineProperty(_s,{Pf:"arrangement"},function(){return this.ld},function(t){this.ld!==t&&(_h.mb(t,_s,_s,"arrangement"),t===gp||t===fp||t===dp||t===pp)&&(this.ld=t,this.J())}),_h.defineProperty(_s,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(_h.mb(t,_s,_s,"direction"),t===yp||t===mp||t===vp||t===bp)&&(this.aa=t,this.J())}),_h.defineProperty(_s,{sorting:"sorting"},function(){return this.$h},function(t){this.$h!==t&&(_h.mb(t,_s,_s,"sorting"),t===xp||t===wp||t===kp||Sp||t===Mp)&&(this.$h=t,this.J())}),_h.defineProperty(_s,{comparer:"comparer"},function(){return this.Jh},function(t){this.Jh!==t&&(_h.j(t,"function",_s,"comparer"),this.Jh=t,this.J())}),_h.defineProperty(_s,{spacing:"spacing"},function(){return this.ai},function(t){this.ai!==t&&(_h.j(t,"number",_s,"spacing"),this.ai=t,this.J())}),_h.defineProperty(_s,{Hx:"nodeDiameterFormula"},function(){return this.rs},function(t){this.rs!==t&&(_h.mb(t,_s,_s,"nodeDiameterFormula"),t===Pp||t===Tp)&&(this.rs=t,this.J())}),_h.u(_s,{ZG:"actualXRadius"},function(){return this.Wd}),_h.u(_s,{$G:"actualYRadius"},function(){return this.Gg}),_h.u(_s,{XJ:"actualSpacing"},function(){return this.bl}),_h.u(_s,{YG:"actualCenter"},function(){return isNaN(this.oe.x)||isNaN(this.oe.y)?new b(0,0):new b(this.oe.x+this.ZG,this.oe.y+this.$G)});var fp;_s.ConstantSpacing=fp=_h.p(_s,"ConstantSpacing",0);var dp;_s.ConstantDistance=dp=_h.p(_s,"ConstantDistance",1);var pp;_s.ConstantAngle=pp=_h.p(_s,"ConstantAngle",2);var gp;_s.Packed=gp=_h.p(_s,"Packed",3);var yp;_s.Clockwise=yp=_h.p(_s,"Clockwise",4);var mp;_s.Counterclockwise=mp=_h.p(_s,"Counterclockwise",5);var vp;_s.BidirectionalLeft=vp=_h.p(_s,"BidirectionalLeft",6);var bp;_s.BidirectionalRight=bp=_h.p(_s,"BidirectionalRight",7);var xp;_s.Forwards=xp=_h.p(_s,"Forwards",8);var wp;_s.Reverse=wp=_h.p(_s,"Reverse",9);var kp;_s.Ascending=kp=_h.p(_s,"Ascending",10);var Sp;_s.Descending=Sp=_h.p(_s,"Descending",11);var Mp;_s.Optimized=Mp=_h.p(_s,"Optimized",12);var Pp;_s.Pythagorean=Pp=_h.p(_s,"Pythagorean",13);var Tp;_s.Circular=Tp=_h.p(_s,"Circular",14),ol.prototype.compare=function(t,e){if(0<t&&0>this.Vp||Math.abs(t)<Math.abs(this.Vp)&&!(0>t&&0<this.Vp)){this.Vp=t,this.fo=[],this.zq=[];for(var i=0;i<e.length;i++)this.fo[i]=e[i].cb.x,this.zq[i]=e[i].cb.y}},ol.prototype.commit=function(t){if(null!==this.fo&&null!==this.zq)for(var e=0;e<this.fo.length;e++){var i=t.da(e);i.x=this.fo[e],i.y=this.zq[e]}},_h.La(rl,zs),_h.fa("CircularNetwork",rl),rl.prototype.createVertex=function(){return new al},rl.prototype.createEdge=function(){return new ll},_h.La(al,Hs),_h.fa("CircularVertex",al),_h.La(ll,Vs),_h.fa("CircularEdge",ll),_h.La(hl,Es),_h.fa("ForceDirectedLayout",hl),hl.prototype.cloneProtected=function(t){Es.prototype.cloneProtected.call(this,t),t.jg.assign(this.jg),t.Kq=this.Kq,t.Zh=this.Zh,t.Ih=this.Ih,t.cp=this.cp,t.sr=this.sr,t.Oh=this.Oh,t.Es=this.Es,t.Bo=this.Bo,t.Ao=this.Ao,t.yo=this.yo,t.zo=this.zo,t.hr=this.hr,t.gr=this.gr},hl.prototype.createNetwork=function(){return new xl},hl.prototype.doLayout=function(t){if(null===t&&_h.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.IA,0<this.network.vertexes.count){this.network.Yw();for(var e=this.network.vertexes.i;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.i;e.next();)i=e.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Pz(),this.Rr=0,this.needsClusterLayout()){for(e=this.network,i=e.FJ().i;i.next();){this.network=i.value;for(var n=this.network.vertexes.i;n.next();){var o=n.value;o.fg=o.vertexes.count,o.Ik=1,o.pn=null,o.Dh=null}ul(this,0,t)}this.network=e,i.reset();for(var n=this.lE,r=i.count,a=!0,s=o=0,l=_h.lb(),h=0;h<r+e.vertexes.count+2;h++)l[h]=null;r=0,i.reset();for(var u=_h.Ef();i.next();)if(h=i.value,this.sh(h,u),a)a=!1,o=u.x+u.width/2,s=u.y+u.height/2,l[0]=new b(u.x+u.width+n.width,u.y),l[1]=new b(u.x,u.y+u.height+n.height),r=2;else{var c=gl(l,r,o,s,u.width,u.height,n),f=l[c],d=new b(f.x+u.width+n.width,f.y),p=new b(f.x,f.y+u.height+n.height);for(c+1<r&&l.splice(c+1,0,null),l[c]=d,l[c+1]=p,r++,c=f.x-u.x,f=f.y-u.y,h=h.vertexes.i;h.next();)d=h.value,d.ka+=c,d.ra+=f}for(_h.Db(u),h=e.vertexes.i;h.next();)a=h.value,u=a.cb,2>r?(o=u.x+u.width/2,s=u.y+u.height/2,l[0]=new b(u.x+u.width+n.width,u.y),l[1]=new b(u.x,u.y+u.height+n.height),r=2):(c=gl(l,r,o,s,u.width,u.height,n),f=l[c],d=new b(f.x+u.width+n.width,f.y),p=new b(f.x,f.y+u.height+n.height),c+1<r&&l.splice(c+1,0,null),l[c]=d,l[c+1]=p,r++,a.ka=f.x+a.width/2,a.ra=f.y+a.height/2);for(_h.wa(l),i.reset();i.next();){for(n=i.value,o=n.vertexes.i;o.next();)e.Dl(o.value);for(n=n.edges.i;n.next();)e.Ep(n.value)}}ml(this,t),this.updateParts()}this.cp=t,this.network=null,this.zf=!0},hl.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().cb,n=this.network.vertexes.i;n.next();){if(n.value.cb.Tf(i)&&2<++t)return!0;if(10<e)break;e++}return!1},hl.prototype.sh=function(t,e){for(var i=!0,n=t.vertexes.i;n.next();){var o=n.value;i?(i=!1,e.set(o.cb)):e.Gh(o.cb)}return e},hl.prototype.Pz=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},hl.prototype.addComments=function(t){var e=t.Oc;if(null!==e)for(e=e.JE();e.next();){var i=e.value;if("Comment"===i.td&&i.isVisible()){var n=this.network.yn(i);null===n&&(n=this.network.vt(i)),n.charge=this.EH;for(var i=null,o=n.ic;o.next();){var r=o.value;if(r.toVertex===t){i=r;break}}if(null===i)for(o=n.lc;o.next();)if(r=o.value,r.fromVertex===t){i=r;break}null===i&&(i=this.network.fq(t,n,null)),i.length=this.FH}}},hl.prototype.moveFixedVertex=function(){},hl.prototype.commitLayout=function(){this.gB(),this.commitNodes(),this.du&&this.commitLinks()},hl.prototype.gB=function(){if(this.tq)for(var t=this.network.edges.i;t.next();){var e=t.value.link;null!==e&&(e.Ab=eu,e.Bb=eu)}},hl.prototype.commitNodes=function(){var t=0,e=0;if(this.hH){var i=_h.Ef();this.sh(this.network,i),e=this.oe,t=e.x-i.x,e=e.y-i.y,_h.Db(i)}for(var i=_h.Ef(),n=this.network.vertexes.i;n.next();){var o=n.value;0===t&&0===e||(i.assign(o.cb),i.x+=t,i.y+=e,o.cb=i),o.commit()}_h.Db(i)},hl.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},hl.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Bo:t},hl.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Ao:t},hl.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.yo:t},hl.prototype.electricalFieldX=function(){return 0},hl.prototype.electricalFieldY=function(){return 0},hl.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.zo:t},hl.prototype.gravitationalFieldX=function(){return 0},hl.prototype.gravitationalFieldY=function(){return 0},hl.prototype.isFixed=function(t){return t.isFixed},_h.u(hl,{BK:"currentIteration"},function(){return this.Rr}),_h.defineProperty(hl,{lE:"arrangementSpacing"},function(){return this.jg},function(t){_h.G(t,k,hl,"arrangementSpacing"),this.jg.L(t)||(this.jg.assign(t),this.J())}),_h.defineProperty(hl,{hH:"arrangesToOrigin"},function(){return this.Kq},function(t){this.Kq!==t&&(_h.j(t,"boolean",hl,"arrangesToOrigin"),this.Kq=t,this.J())}),_h.defineProperty(hl,{tq:"setsPortSpots"},function(){return this.Zh},function(t){this.Zh!==t&&(_h.j(t,"boolean",hl,"setsPortSpots"),this.Zh=t,this.J())}),_h.defineProperty(hl,{comments:"comments"},function(){return this.Ih},function(t){this.Ih!==t&&(_h.j(t,"boolean",hl,"comments"),this.Ih=t,this.J())}),_h.defineProperty(hl,{IA:"maxIterations"},function(){return this.cp},function(t){this.cp!==t&&(_h.j(t,"number",hl,"maxIterations"),0<=t&&(this.cp=t,this.J()))}),_h.defineProperty(hl,{GE:"epsilonDistance"},function(){return this.sr},function(t){this.sr!==t&&(_h.j(t,"number",hl,"epsilonDistance"),0<t&&(this.sr=t,this.J()))}),_h.defineProperty(hl,{UK:"infinityDistance"},function(){return this.Oh},function(t){this.Oh!==t&&(_h.j(t,"number",hl,"infinityDistance"),1<t&&(this.Oh=t,this.J()))}),_h.defineProperty(hl,{Qx:"randomNumberGenerator"},function(){return this.Es},function(t){this.Es!==t&&(null!==t&&"function"!=typeof t.random&&_h.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Es=t)}),_h.defineProperty(hl,{NK:"defaultSpringStiffness"},function(){return this.Bo},function(t){this.Bo!==t&&(_h.j(t,"number",hl,"defaultSpringStiffness"),this.Bo=t,this.J())}),_h.defineProperty(hl,{MK:"defaultSpringLength"},function(){return this.Ao},function(t){this.Ao!==t&&(_h.j(t,"number",hl,"defaultSpringLength"),this.Ao=t,this.J())}),_h.defineProperty(hl,{GK:"defaultElectricalCharge"},function(){return this.yo},function(t){this.yo!==t&&(_h.j(t,"number",hl,"defaultElectricalCharge"),this.yo=t,this.J())}),_h.defineProperty(hl,{HK:"defaultGravitationalMass"},function(){return this.zo},function(t){this.zo!==t&&(_h.j(t,"number",hl,"defaultGravitationalMass"),this.zo=t,this.J())}),_h.defineProperty(hl,{FH:"defaultCommentSpringLength"},function(){return this.hr},function(t){this.hr!==t&&(_h.j(t,"number",hl,"defaultCommentSpringLength"),this.hr=t,this.J())}),_h.defineProperty(hl,{EH:"defaultCommentElectricalCharge"},function(){return this.gr},function(t){this.gr!==t&&(_h.j(t,"number",hl,"defaultCommentElectricalCharge"),this.gr=t,this.J())}),_h.La(xl,zs),_h.fa("ForceDirectedNetwork",xl),xl.prototype.createVertex=function(){return new wl},xl.prototype.createEdge=function(){return new kl},_h.La(wl,Hs),_h.fa("ForceDirectedVertex",wl),_h.La(kl,Vs),_h.fa("ForceDirectedEdge",kl),_h.La(Sl,Es),_h.fa("LayeredDigraphLayout",Sl),Sl.prototype.cloneProtected=function(t){Es.prototype.cloneProtected.call(this,t),t.Hm=this.Hm,t.Ud=this.Ud,t.aa=this.aa,t.xo=this.xo,t.Zo=this.Zo,t.Oo=this.Oo,t.Fm=this.Fm,t.ko=this.ko,t.Yi=this.Yi,t.Zh=this.Zh,t.Wr=this.Wr},Sl.prototype.gc=function(t){t.De===Sl?0===t.name.indexOf("Aggressive")?this.fH=t:0===t.name.indexOf("Cycle")?this.DH=t:0===t.name.indexOf("Init")?this.pI=t:0===t.name.indexOf("Layer")?this.CI=t:_h.k("Unknown enum value: "+t):Es.prototype.gc.call(this,t)},Sl.prototype.createNetwork=function(){return new oh},Sl.prototype.doLayout=function(t){for(null===t&&_h.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.oe=this.initialOrigin(this.oe),this.Vv=-1,this.Lf=this.es=0,this.os=this.ms=this.Mm=null,t=0;t<this.hh.length;t++)this.hh[t]=null;if(0<this.network.vertexes.count){for(this.network.Yw(),t=this.network.edges.i;t.next();)t.value.rev=!1;switch(this.xo){default:case Np:t=this.network;var e=0,i=t.vertexes.count-1,n=[];n.length=i+1;for(var o=t.vertexes.i;o.next();)o.value.valid=!0;for(;null!==Fl(t);){for(o=jl(t);null!==o;)n[i]=o,i--,o.valid=!1,o=jl(t);for(o=El(t);null!==o;)n[e]=o,e++,o.valid=!1,o=El(t);for(var o=null,r=0,a=this.network.vertexes.i;a.next();){var s=a.value;if(s.valid){for(var l=0,h=s.ic;h.next();)h.value.toVertex.valid&&l++;for(var h=0,u=s.lc;u.next();)u.value.fromVertex.valid&&h++;(null===o||r<l-h)&&(o=s,r=l-h)}}null!==o&&(n[e]=o,e++,o.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.i;n.next();)e=n.value,e.fromVertex.index>e.toVertex.index&&(t.Xx(e),e.rev=!0);break;case Lp:for(n=this.network.vertexes.i;n.next();)t=n.value,t.Qp=-1,t.finish=-1;for(t=this.network.edges.i;t.next();)t.value.forest=!1;for(this.ns=0,n.reset();n.next();)e=n.value,0===e.lc.count&&Il(this,e);for(n.reset();n.next();)e=n.value,-1===e.Qp&&Il(this,e);for(t.reset();t.next();)n=t.value,n.forest||(e=n.fromVertex,i=e.finish,o=n.toVertex,r=o.finish,o.Qp<e.Qp&&i<r&&(this.network.Xx(n),n.rev=!0))}for(t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.qb=-1,this.assignLayers(),t.reset();t.next();)this.qb=Math.max(this.qb,t.value.layer);for(t=this.network,n=[],i=t.edges.i;i.next();)e=i.value,e.valid=!1,n.push(e);for(i=0;i<n.length;i++)if(e=n[i],r=e.fromVertex,o=e.toVertex,!e.valid&&(null!==r.rd&&null!==o.rd||r.layer!==o.layer)){if(h=s=l=a=0,null!==e.link){if(null===(l=e.link))continue;var c=r.rd,a=o.rd;if(null===c||null===a)continue;var f=l.Y,s=l.$,d=l.Jc,h=l.jd;e.rev&&(l=f,u=d,f=s,d=h,s=l,h=u);var p=r.T,l=o.T,g=e.rev?o.M:r.M,u=_h.K();g.H()?(fa(f,d,au,u),u.H()||u.assign(p)):u.assign(p),c!==f&&g.H()&&f.isVisible()&&(c=r.M,c.H()&&(u.x+=g.x-c.x,u.y+=g.y-c.y)),f=e.rev?r.M:o.M,c=_h.K(),f.H()?(fa(s,h,au,c),c.H()||c.assign(l)):c.assign(l),a!==s&&f.H()&&s.isVisible()&&(a=o.M,a.H()&&(c.x+=f.x-a.x,c.y+=f.y-a.y)),90===this.aa||270===this.aa?(a=Math.round((u.x-p.x)/this.Ud),s=u.x,l=Math.round((c.x-l.x)/this.Ud),h=c.x):(a=Math.round((u.y-p.y)/this.Ud),s=u.y,l=Math.round((c.y-l.y)/this.Ud),h=c.y),_h.v(u),_h.v(c),e.portFromColOffset=a,e.portFromPos=s,e.portToColOffset=l,e.portToPos=h}else e.portFromColOffset=0,e.portFromPos=0,e.portToColOffset=0,e.portToPos=0;u=r.layer,p=o.layer;t:if(c=e,f=0,null!==(g=c.link)){var y=g.Jc,m=g.jd;if(null!==y&&null!==m){var v=g.Y,d=g.$;if(null!==v&&null!==d){var b=y.Ab,x=m.Bb;this.tq||(g.Ab.Vc()||(b=g.Ab),g.Bb.Vc()||(x=g.Bb));var w=g.jc,k=Zl(this,!0);(b.Vc()||b===tu)&&(b=k);var S=Zl(this,!1);if((x.Vc()||x===tu)&&(x=S),b.uj()&&b.rj(S)&&x.uj()&&x.rj(k)){f=0;break t}k=g.getLinkPoint(v,y,b,!0,w,d,m,_h.K()),b=g.getLinkDirection(v,y,k,b,!0,w,d,m),_h.v(k),b===ql(this,c,!0)?f+=1:this.tq&&null!==v&&1===v.ports.count&&c.rev&&(f+=1),b=g.getLinkPoint(d,m,x,!1,w,v,y,_h.K()),g=g.getLinkDirection(d,m,b,x,!1,w,v,y),_h.v(b),g===ql(this,c,!1)?f+=2:this.tq&&null!==d&&1===d.ports.count&&c.rev&&(f+=2)}}}if(c=1===f||3===f,(f=2===f||3===f)&&(d=t.createVertex(),d.rd=null,d.kn=1,d.layer=u,d.near=r,t.Dl(d),r=t.fq(r,d,e.link),r.valid=!1,r.rev=e.rev,r.portFromColOffset=a,r.portToColOffset=0,r.portFromPos=s,r.portToPos=0,r=d),g=1,c&&g--,u-p>g&&0<u){for(e.valid=!1,d=t.createVertex(),d.rd=null,d.kn=2,d.layer=u-1,t.Dl(d),r=t.fq(r,d,e.link),r.valid=!0,r.rev=e.rev,r.portFromColOffset=f?0:a,r.portToColOffset=0,r.portFromPos=f?0:s,r.portToPos=0,r=d,u--;u-p>g&&0<u;)d=t.createVertex(),d.rd=null,d.kn=3,d.layer=u-1,t.Dl(d),r=t.fq(r,d,e.link),r.valid=!0,r.rev=e.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=d,u--;r=t.fq(d,o,e.link),r.valid=!c,c&&(d.near=o),r.rev=e.rev,r.portFromColOffset=0,r.portToColOffset=l,r.portFromPos=0,r.portToPos=h}else e.valid=!0}for(n=this.he=[],e=0;e<=this.qb;e++)n[e]=0;for(t=this.network.vertexes.i;t.next();)t.value.index=-1;for(this.initializeIndices(),this.Vv=-1,e=this.Lf=this.es=0;e<=this.qb;e++)n[e]>n[this.Lf]&&(this.Vv=n[e]-1,this.Lf=e),n[e]<n[this.es]&&(this.es=e);for(this.os=[],e=0;e<n.length;e++)this.os[e]=[];for(t.reset();t.next();)n=t.value,this.os[n.layer][n.index]=n;for(this.Jb=-1,t=0;t<=this.qb;t++){for(n=eh(this,t),e=0,i=this.he[t],o=0;o<i;o++)r=n[o],e+=this.nodeMinColumnSpace(r,!0),r.column=e,e+=1,e+=this.nodeMinColumnSpace(r,!1);this.Jb=Math.max(this.Jb,e-1),ih(this,t,n)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.zf=!0},Sl.prototype.linkMinLength=function(){return 1},Sl.prototype.nodeMinLayerSpace=function(t,e){return null===t.rd?0:90===this.aa||270===this.aa?e?t.T.y+10:t.M.height-t.T.y+10:e?t.T.x+10:t.M.width-t.T.x+10},Sl.prototype.nodeMinColumnSpace=function(t,e){if(null===t.rd)return 0;var i=e?t.PA:t.OA;return null!==i?i:(i=this.aa,90===i||270===i?e?t.PA=t.T.x/this.Ud+1|0:t.OA=(t.M.width-t.T.x)/this.Ud+1|0:e?t.PA=t.T.y/this.Ud+1|0:t.OA=(t.M.height-t.T.y)/this.Ud+1|0)},Sl.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.qb;e++)for(var i=Ll(this,e,1),n=this.he[e],o=0;o<n;o++)for(var r=o;r<n;r++)t+=i[o*n+r];return t},Sl.prototype.normalize=function(){var t=Infinity;this.Jb=-1;for(var e=this.network.vertexes.i;e.next();){var i=e.value,t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0));this.Jb=Math.max(this.Jb,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Jb-=t},Sl.prototype.assignLayers=function(){switch(this.Zo){case Ap:Ol(this);break;case Bp:for(var t=0,e=this.network.vertexes.i;e.next();)t=Gl(this,e.value),this.qb=Math.max(t,this.qb);for(e.reset();e.next();)t=e.value,t.layer=this.qb-t.layer;break;default:case Cp:for(Ol(this),e=this.network.vertexes.i;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,0===t.lc.count&&Rl(this,t);for(t=Infinity,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.qb=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.qb=Math.max(this.qb,i.layer)}}},Sl.prototype.initializeIndices=function(){switch(this.Oo){default:case jp:for(var t=this.network.vertexes.i;t.next();){var e=t.value,i=e.layer;e.index=this.he[i],this.he[i]++}break;case Dp:for(t=this.network.vertexes.i,e=this.qb;0<=e;e--)for(t.reset();t.next();)i=t.value,i.layer===e&&-1===i.index&&Wl(this,i);break;case Fp:for(t=this.network.vertexes.i,
e=0;e<=this.qb;e++)for(t.reset();t.next();)i=t.value,i.layer===e&&-1===i.index&&Hl(this,i)}},Sl.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),e=Pl(this),i=0,n=0,o=0,i=0;i<this.Fm;i++){for(n=0;n<=this.qb;n++)Vl(this,n,1),Ul(this,n,1);for(o=this.countCrossings(),o<t&&(t=o,e=Pl(this)),n=this.qb;0<=n;n--)Vl(this,n,-1),Ul(this,n,-1);o=this.countCrossings(),o<t&&(t=o,e=Pl(this))}for(Tl(this,e),i=0;i<this.Fm;i++){for(n=0;n<=this.qb;n++)Vl(this,n,0),Ul(this,n,0);for(o=this.countCrossings(),o<t&&(t=o,e=Pl(this)),n=this.qb;0<=n;n--)Vl(this,n,0),Ul(this,n,0);o=this.countCrossings(),o<t&&(t=o,e=Pl(this))}Tl(this,e);var r=!1,a=i=0,s=0,n=0;switch(this.ko){case Ep:break;case Op:for(s=t+1;(n=this.countCrossings())<s;)for(s=n,i=this.qb;0<=i;i--)for(a=0;a<=i;a++){for(r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Ul(this,n,-1)||r;for(o=this.countCrossings(),o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Ul(this,n,1)||r;for(o=this.countCrossings(),o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Ul(this,n,1)||r;for(o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Ul(this,n,-1)||r;for(o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Ul(this,n,0)||r;for(o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Ul(this,n,0)||r;o>=t?Tl(this,e):(t=o,e=Pl(this))}break;default:case Ip:for(i=this.qb,a=0,s=t+1;(n=this.countCrossings())<s;){for(s=n,r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Ul(this,n,-1)||r;for(o=this.countCrossings(),o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Ul(this,n,1)||r;for(o=this.countCrossings(),o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Ul(this,n,1)||r;for(o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Ul(this,n,-1)||r;for(o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Ul(this,n,0)||r;for(o>=t?Tl(this,e):(t=o,e=Pl(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Ul(this,n,0)||r;o>=t?Tl(this,e):(t=o,e=Pl(this))}}Tl(this,e)},Sl.prototype.straightenAndPack=function(){var t=0,e=!1,i=0!=(this.Yi&zp),t=this.Yi===qp;if(1e3<this.network.edges.count&&!t&&(i=!1),i){for(e=[],t=t=0;t<=this.qb;t++)e[t]=0;for(var n=0,o=this.network.vertexes.i;o.next();){var r=o.value,t=r.layer,n=r.column,r=this.nodeMinColumnSpace(r,!1);e[t]=Math.max(e[t],n+r)}for(o.reset();o.next();)r=o.value,t=r.layer,n=r.column,r.column=(8*(this.Jb-e[t])>>1)+8*n;this.Jb*=8}if(0!=(this.Yi&Gp))for(e=!0;e;){for(e=!1,t=this.Lf+1;t<=this.qb;t++)e=_l(this,t,1)||e;for(t=this.Lf-1;0<=t;t--)e=_l(this,t,-1)||e;e=_l(this,this.Lf,0)||e}if(0!=(this.Yi&Rp)){for(t=this.Lf+1;t<=this.qb;t++)Jl(this,t,1);for(t=this.Lf-1;0<=t;t--)Jl(this,t,-1);Jl(this,this.Lf,0)}if(i&&(Xl(this,-1),Xl(this,1)),0!=(this.Yi&Gp))for(e=!0;e;){for(e=!1,e=_l(this,this.Lf,0)||e,t=this.Lf+1;t<=this.qb;t++)e=_l(this,t,0)||e;for(t=this.Lf-1;0<=t;t--)e=_l(this,t,0)||e}},Sl.prototype.commitLayout=function(){if(this.tq)for(var t=Zl(this,!0),e=Zl(this,!1),i=this.network.edges.i;i.next();){var n=i.value.link;null!==n&&(n.Ab=t,n.Bb=e)}this.commitNodes(),this.Uz(),this.du&&this.commitLinks()},Sl.prototype.commitNodes=function(){this.vg=[],this.Kf=[],this.Jf=[],this.Nb=[];for(var t=0;t<=this.qb;t++)this.vg[t]=0,this.Kf[t]=0,this.Jf[t]=0,this.Nb[t]=0;for(t=this.network.vertexes.i;t.next();){var e=t.value,i=e.layer;this.vg[i]=Math.max(this.vg[i],this.nodeMinLayerSpace(e,!0)),this.Kf[i]=Math.max(this.Kf[i],this.nodeMinLayerSpace(e,!1))}for(var e=0,n=this.Hm,i=0;i<=this.qb;i++){var o=n;0>=this.vg[i]+this.Kf[i]&&(o=0),0<i&&(e+=o/2),90===this.aa||0===this.aa?(e+=this.Kf[i],this.Jf[i]=e,e+=this.vg[i]):(e+=this.vg[i],this.Jf[i]=e,e+=this.Kf[i]),i<this.qb&&(e+=o/2),this.Nb[i]=e}for(n=e,e=this.oe,i=0;i<=this.qb;i++)270===this.aa?this.Jf[i]=e.y+this.Jf[i]:90===this.aa?(this.Jf[i]=e.y+n-this.Jf[i],this.Nb[i]=n-this.Nb[i]):180===this.aa?this.Jf[i]=e.x+this.Jf[i]:(this.Jf[i]=e.x+n-this.Jf[i],this.Nb[i]=n-this.Nb[i]);for(t.reset(),n=o=Infinity;t.next();){var i=t.value,r=i.layer,a=0|i.column,s=0,l=0;270===this.aa||90===this.aa?(s=e.x+this.Ud*a,l=this.Jf[r]):(s=this.Jf[r],l=e.y+this.Ud*a),i.ka=s,i.ra=l,o=Math.min(i.x,o),n=Math.min(i.y,n)}for(o=e.x-o,e=e.y-n,this.SB=new b(o,e),t.reset();t.next();)i=t.value,i.x+=o,i.y+=e,i.commit()},Sl.prototype.Uz=function(){for(var t=0,e=this.Hm,i=0;i<=this.qb;i++)t+=this.vg[i],t+=this.Kf[i];for(var t=t+this.qb*e,e=[],i=this.Ud*this.Jb,n=this.LI;0<=n;n--)270===this.aa?0===n?e.push(new S(0,0,i,Math.abs(this.Nb[0]))):e.push(new S(0,this.Nb[n-1],i,Math.abs(this.Nb[n-1]-this.Nb[n]))):90===this.aa?0===n?e.push(new S(0,this.Nb[0],i,Math.abs(this.Nb[0]-t))):e.push(new S(0,this.Nb[n],i,Math.abs(this.Nb[n-1]-this.Nb[n]))):180===this.aa?0===n?e.push(new S(0,0,Math.abs(this.Nb[0]),i)):e.push(new S(this.Nb[n-1],0,Math.abs(this.Nb[n-1]-this.Nb[n]),i)):0===n?e.push(new S(this.Nb[0],0,Math.abs(this.Nb[0]-t),i)):e.push(new S(this.Nb[n],0,Math.abs(this.Nb[n-1]-this.Nb[n]),i));this.commitLayers(e,this.SB)},Sl.prototype.commitLayers=function(){},Sl.prototype.commitLinks=function(){for(var t,e=this.network.edges.i;e.next();)null!==(t=e.value.link)&&(t.em(),t.Ip(),t.jj());for(e.reset();e.next();)null!==(t=e.value.link)&&t.co();for(e.reset();e.next();){var i=e.value;if(null!==(t=i.link)){t.em();var n=t,o=n.Y,r=n.$,a=n.Jc,s=n.jd,l=i.fromVertex,h=i.toVertex;if(i.valid){if(t.Ye===Wd&&4===t.qa){if(i.rev)var c=o,o=r,r=c,f=a,a=s,s=f;if(l.column===h.column){var d=t.getLinkPoint(o,a,t.computeSpot(!0),!0,!1,r,s),p=t.getLinkPoint(r,s,t.computeSpot(!1),!1,!1,o,a);d.H()||d.set(o.W.Hl),p.H()||p.set(r.W.Hl),t.Ip(),t.hj(d.x,d.y),t.hj((2*d.x+p.x)/3,(2*d.y+p.y)/3),t.hj((d.x+2*p.x)/3,(d.y+2*p.y)/3),t.hj(p.x,p.y)}else{var g=!1,y=!1;if(null!==a&&t.computeSpot(!0)===tu&&(g=!0),null!==s&&t.computeSpot(!1)===tu&&(y=!0),g||y){var m=t.l(0).x,v=t.l(0).y,b=t.l(1).x,x=t.l(1).y,w=t.l(2).x,k=t.l(2).y,S=t.l(3).x,M=t.l(3).y;if(g){90===this.aa||270===this.aa?(b=m,x=(v+M)/2):(b=(m+S)/2,x=v),t.ea(1,b,x);var P=t.getLinkPoint(o,a,t.computeSpot(!0),!0,!1,r,s);P.H()||P.set(o.W.Hl),t.ea(0,P.x,P.y)}y&&(90===this.aa||270===this.aa?(w=S,k=(v+M)/2):(w=(m+S)/2,k=M),t.ea(2,w,k),P=t.getLinkPoint(r,s,t.computeSpot(!1),!1,!1,o,a),P.H()||P.set(r.W.Hl),t.ea(3,P.x,P.y))}}}t.jj()}else if(l.layer===h.layer)t.jj();else{var T=!1,L=!1,N=0,C=t.Nt+1;if(t.jc)L=!0,4<(N=t.qa)&&t.points.removeRange(2,N-3);else if(t.Ye===Wd)T=!0,N=t.qa,4<N&&t.points.removeRange(2,N-3),C=2;else{var N=t.qa,A=t.computeSpot(!0)===tu,B=t.computeSpot(!1)===tu;2<N&&A&&B?t.points.removeRange(1,N-2):3<N&&A&&!B?t.points.removeRange(1,N-3):3<N&&!A&&B?t.points.removeRange(2,N-2):4<N&&!A&&!B&&t.points.removeRange(2,N-3)}var D,F;if(i.rev){for(var j=0;null!==h&&l!==h;){F=D=null;for(var E=h.lc.i;E.next();){var I=E.value;if(I.link===i.link&&(D=I.fromVertex,F=I.toVertex,null===D.rd))break}if(D!==l)if(W=t.l(C-1).x,H=t.l(C-1).y,V=D.ka,U=D.ra,L)180===this.aa||0===this.aa?2===C?(t.w(C++,W,H),t.w(C++,W,U)):(Y=null!==F?F.ra:H)!==U&&(_=this.Nb[D.layer-1],t.w(C++,_,H),t.w(C++,_,U)):2===C?(t.w(C++,W,H),t.w(C++,V,H)):($=null!==F?F.ka:W)!==V&&(_=this.Nb[D.layer-1],t.w(C++,W,_),t.w(C++,V,_));else if(2===C)if(K=Math.max(10,this.vg[h.layer]),J=Math.max(10,this.Kf[h.layer]),T)180===this.aa?V<=h.M.x?(j=h.M.x,t.w(C++,j-K,U),t.w(C++,j,U),t.w(C++,j+J,U)):(t.w(C++,V-K,U),t.w(C++,V,U),t.w(C++,V+J,U)):90===this.aa?U>=h.M.bottom?(j=h.M.y+h.M.height,t.w(C++,V,j+J),t.w(C++,V,j),t.w(C++,V,j-K)):(t.w(C++,V,U+J),t.w(C++,V,U),t.w(C++,V,U-K)):270===this.aa?U<=h.M.y?(j=h.M.y,t.w(C++,V,j-K),t.w(C++,V,j),t.w(C++,V,j+J)):(t.w(C++,V,U-K),t.w(C++,V,U),t.w(C++,V,U+J)):0===this.aa&&(V>=h.M.right?(j=h.M.x+h.M.width,t.w(C++,j+J,U),t.w(C++,j,U),t.w(C++,j-K,U)):(t.w(C++,V+J,U),t.w(C++,V,U),t.w(C++,V-K,U)));else{t.w(C++,W,H);var O=0;180===this.aa||0===this.aa?((180===this.aa?V>=h.M.right:V<=h.M.x)&&(O=(0===this.aa?-K:J)/2),t.w(C++,W+O,U)):((270===this.aa?U>=h.M.bottom:U<=h.M.y)&&(O=(90===this.aa?-K:J)/2),t.w(C++,V,H+O)),t.w(C++,V,U)}else K=Math.max(10,this.vg[D.layer]),J=Math.max(10,this.Kf[D.layer]),180===this.aa?(T&&t.w(C++,V-K,U),t.w(C++,V,U),T&&t.w(C++,V+J,U)):90===this.aa?(T&&t.w(C++,V,U+J),t.w(C++,V,U),T&&t.w(C++,V,U-K)):270===this.aa?(T&&t.w(C++,V,U-K),t.w(C++,V,U),T&&t.w(C++,V,U+J)):(T&&t.w(C++,V+J,U),t.w(C++,V,U),T&&t.w(C++,V-K,U));h=D}if(null===s||t.computeSpot(!1)!==tu||L)if(W=t.l(C-1).x,H=t.l(C-1).y,V=t.l(C).x,U=t.l(C).y,L){var z=this.Kf[l.layer],G=0;180===this.aa||0===this.aa?(G=H,G>=l.M.y&&G<=l.M.bottom&&(180===this.aa?V>=l.M.x:V<=l.M.right)&&(j=l.ka+(180===this.aa?-z:z),G=G<l.M.y+l.M.height/2?l.M.y-this.Ud/2:l.M.bottom+this.Ud/2,t.w(C++,j,H),t.w(C++,j,G)),t.w(C++,V,G)):(G=W,G>=l.M.x&&G<=l.M.right&&(270===this.aa?U>=l.M.y:U<=l.M.bottom)&&(j=l.ra+(270===this.aa?-z:z),G=G<l.M.x+l.M.width/2?l.M.x-this.Ud/2:l.M.right+this.Ud/2,t.w(C++,W,j),t.w(C++,G,j)),t.w(C++,G,U)),t.w(C++,V,U)}else T?(K=Math.max(10,this.vg[l.layer]),J=Math.max(10,this.Kf[l.layer]),180===this.aa&&V>=l.M.x?(j=l.M.x+l.M.width,t.ea(C-2,j,H),t.ea(C-1,j+J,H)):90===this.aa&&U<=l.M.bottom?(j=l.M.y,t.ea(C-2,W,j),t.ea(C-1,W,j-K)):270===this.aa&&U>=l.M.y?(j=l.M.y+l.M.height,t.ea(C-2,W,j),t.ea(C-1,W,j+J)):0===this.aa&&V<=l.M.right&&(j=l.M.x,t.ea(C-2,j,H),t.ea(C-1,j-K,H))):(K=Math.max(10,this.vg[l.layer]),J=Math.max(10,this.Kf[l.layer]),O=0,180===this.aa||0===this.aa?((180===this.aa?V<=l.M.x:V>=l.M.right)&&(O=(0===this.aa?J:-K)/2),t.w(C++,V+O,H)):((270===this.aa?U<=l.M.y:U>=l.M.bottom)&&(O=(90===this.aa?J:-K)/2),t.w(C++,W,U+O)),t.w(C++,V,U))}else{for(;null!==l&&l!==h;){F=D=null;for(var R=l.ic.i;R.next();){var q=R.value;if(q.link===i.link&&(D=q.toVertex,F=q.fromVertex,null!==F.rd&&(F=null),null===D.rd))break}var W=0,H=0,V=0,U=0,_=0,K=0,J=0;if(D!==h)if(W=t.l(C-1).x,H=t.l(C-1).y,V=D.ka,U=D.ra,L)if(180===this.aa||0===this.aa){var Y=null!==F?F.ra:H;Y!==U&&(_=this.Nb[D.layer],2===C&&(_=0===this.aa?Math.max(_,W):Math.min(_,W)),t.w(C++,_,H),t.w(C++,_,U))}else{var $=null!==F?F.ka:W;$!==V&&(_=this.Nb[D.layer],2===C&&(_=90===this.aa?Math.max(_,H):Math.min(_,H)),t.w(C++,W,_),t.w(C++,V,_))}else K=Math.max(10,this.vg[D.layer]),J=Math.max(10,this.Kf[D.layer]),180===this.aa?(t.w(C++,V+J,U),T&&t.w(C++,V,U),t.w(C++,V-K,U)):90===this.aa?(t.w(C++,V,U-K),T&&t.w(C++,V,U),t.w(C++,V,U+J)):270===this.aa?(t.w(C++,V,U+J),T&&t.w(C++,V,U),t.w(C++,V,U-K)):(t.w(C++,V-K,U),T&&t.w(C++,V,U),t.w(C++,V+J,U));l=D}L&&(W=t.l(C-1).x,H=t.l(C-1).y,V=t.l(C).x,U=t.l(C).y,180===this.aa||0===this.aa?H!==U&&(_=0===this.aa?Math.min(Math.max((V+W)/2,this.Nb[h.layer]),V):Math.max(Math.min((V+W)/2,this.Nb[h.layer]),V),t.w(C++,_,H),t.w(C++,_,U)):W!==V&&(_=90===this.aa?Math.min(Math.max((U+H)/2,this.Nb[h.layer]),U):Math.max(Math.min((U+H)/2,this.Nb[h.layer]),U),t.w(C++,W,_),t.w(C++,V,_)))}if(null!==n&&T){if(null!==a){if(t.computeSpot(!0)===tu){var X=t.l(0),Q=t.l(2);X.L(Q)||t.ea(1,(X.x+Q.x)/2,(X.y+Q.y)/2)}P=t.getLinkPoint(o,a,tu,!0,!1,r,s),P.H()||P.set(o.W.Hl),t.ea(0,P.x,P.y)}null!==s&&(t.computeSpot(!1)===tu&&(X=t.l(t.qa-1),Q=t.l(t.qa-3),X.L(Q)||t.ea(t.qa-2,(X.x+Q.x)/2,(X.y+Q.y)/2)),P=t.getLinkPoint(r,s,tu,!1,!1,o,a),P.H()||P.set(r.W.Hl),t.ea(t.qa-1,P.x,P.y))}t.jj(),i.commit()}}}for(var Z=new u(Ua),tt=this.network.edges.i;tt.next();){var et=tt.value.link;null!==et&&et.jc&&!Z.contains(et)&&Z.add(et)}if(0<Z.count)if(90===this.aa||270===this.aa){for(var it,nt,ot=0,rt=new u(nh),at=Z.i;at.next();){var st=at.value;if(null!==st&&st.jc)for(var lt=2;lt<st.qa-3;lt++)if(it=st.l(lt),nt=st.l(lt+1),th(it.y,nt.y)&&!th(it.x,nt.x)){var ht=new nh;ht.layer=Math.floor(it.y/2);var ut=st.l(0),ct=st.l(st.qa-1);if(ht.first=ut.x*ut.x+ut.y,ht.ee=ct.x*ct.x+ct.y,ht.We=Math.min(it.x,nt.x),ht.pe=Math.max(it.x,nt.x),ht.index=lt,ht.link=st,lt+2<st.qa){var ft=st.l(lt-1),dt=st.l(lt+2),pt=0;ft.y<it.y?pt=dt.y<it.y?3:it.x<nt.x?2:1:ft.y>it.y&&(pt=dt.y>it.y?0:nt.x<it.x?2:1),ht.qi=pt}rt.add(ht)}}if(1<rt.count){rt.sort(this.bG);for(var gt=0;gt<rt.count;){for(var yt=rt.n[gt].layer,mt=gt+1;mt<rt.count&&rt.n[mt].layer===yt;)mt++;if(1<mt-gt)for(var vt=gt;vt<mt;){for(var bt=rt.n[vt].pe,xt=gt+1;xt<mt&&rt.n[xt].We<bt;)bt=Math.max(bt,rt.n[xt].pe),xt++;var wt=xt-vt;if(1<wt){rt.wq(this.Zx,vt,vt+wt);for(var kt=1,St=rt.n[vt].ee,lt=vt;lt<xt;lt++){var Mt=rt.n[lt];Mt.ee!==St&&(kt++,St=Mt.ee)}rt.wq(this.aG,vt,vt+wt);for(var Pt=1,St=rt.n[vt].first,lt=vt;lt<xt;lt++)Mt=rt.n[lt],Mt.first!==St&&(Pt++,St=Mt.first);var Tt=!0,Lt=Pt;kt<Pt?(Tt=!1,Lt=kt,St=rt.n[vt].ee,rt.wq(this.Zx,vt,vt+wt)):St=rt.n[vt].first;for(var Nt=0,lt=vt;lt<xt;lt++){Mt=rt.n[lt],(Tt?Mt.first:Mt.ee)!==St&&(Nt++,St=Tt?Mt.first:Mt.ee),st=Mt.link,it=st.l(Mt.index),nt=st.l(Mt.index+1);var Ct=this.vF*(Nt-(Lt-1)/2);ot++,st.em(),st.ea(Mt.index,it.x,it.y+Ct),st.ea(Mt.index+1,nt.x,nt.y+Ct),st.jj()}}vt=xt}gt=mt}}}else{for(var At,Bt,Dt=0,Ft=new u(nh),jt=Z.i;jt.next();){var Et=jt.value;if(null!==Et&&Et.jc)for(var It=2;It<Et.qa-3;It++)if(At=Et.l(It),Bt=Et.l(It+1),th(At.x,Bt.x)&&!th(At.y,Bt.y)){var Ot=new nh;Ot.layer=Math.floor(At.x/2);var zt=Et.l(0),Gt=Et.l(Et.qa-1);if(Ot.first=zt.x+zt.y*zt.y,Ot.ee=Gt.x+Gt.y*Gt.y,Ot.We=Math.min(At.y,Bt.y),Ot.pe=Math.max(At.y,Bt.y),Ot.index=It,Ot.link=Et,It+2<Et.qa){var Rt=Et.l(It-1),qt=Et.l(It+2),Wt=0;Rt.x<At.x?Wt=qt.x<At.x?3:At.y<Bt.y?2:1:Rt.x>At.x&&(Wt=qt.x>At.x?0:Bt.y<At.y?2:1),Ot.qi=Wt}Ft.add(Ot)}}if(1<Ft.count){Ft.sort(this.bG);for(var Ht=0;Ht<Ft.count;){for(var Vt=Ft.n[Ht].layer,Ut=Ht+1;Ut<Ft.count&&Ft.n[Ut].layer===Vt;)Ut++;if(1<Ut-Ht)for(var _t=Ht;_t<Ut;){for(var Kt=Ft.n[_t].pe,Jt=Ht+1;Jt<Ut&&Ft.n[Jt].We<Kt;)Kt=Math.max(Kt,Ft.n[Jt].pe),Jt++;var Yt=Jt-_t;if(1<Yt){Ft.wq(this.Zx,_t,_t+Yt);for(var $t=1,Xt=Ft.n[_t].ee,It=_t;It<Jt;It++){var Qt=Ft.n[It];Qt.ee!==Xt&&($t++,Xt=Qt.ee)}Ft.wq(this.aG,_t,_t+Yt);for(var Zt=1,Xt=Ft.n[_t].first,It=_t;It<Jt;It++)Qt=Ft.n[It],Qt.first!==Xt&&(Zt++,Xt=Qt.first);var te=!0,ee=Zt;$t<Zt?(te=!1,ee=$t,Xt=Ft.n[_t].ee,Ft.wq(this.Zx,_t,_t+Yt)):Xt=Ft.n[_t].first;for(var ie=0,It=_t;It<Jt;It++){Qt=Ft.n[It],(te?Qt.first:Qt.ee)!==Xt&&(ie++,Xt=te?Qt.first:Qt.ee),Et=Qt.link,At=Et.l(Qt.index),Bt=Et.l(Qt.index+1);var ne=this.vF*(ie-(ee-1)/2);Dt++,Et.em(),Et.ea(Qt.index,At.x+ne,At.y),Et.ea(Qt.index+1,Bt.x+ne,Bt.y),Et.jj()}}_t=Jt}Ht=Ut}}}},Sl.prototype.bG=function(t,e){return t instanceof nh&&e instanceof nh&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.We<e.We?-1:t.We>e.We?1:t.pe<e.pe?-1:t.pe>e.pe?1:0:0},Sl.prototype.aG=function(t,e){return t instanceof nh&&e instanceof nh&&t!==e?t.first<e.first?-1:t.first>e.first||t.qi<e.qi?1:t.qi>e.qi||t.We<e.We?-1:t.We>e.We?1:t.pe<e.pe?-1:t.pe>e.pe?1:0:0},Sl.prototype.Zx=function(t,e){return t instanceof nh&&e instanceof nh&&t!==e?t.ee<e.ee?-1:t.ee>e.ee||t.qi<e.qi?1:t.qi>e.qi||t.We<e.We?-1:t.We>e.We?1:t.pe<e.pe?-1:t.pe>e.pe?1:0:0},_h.defineProperty(Sl,{layerSpacing:"layerSpacing"},function(){return this.Hm},function(t){this.Hm!==t&&(_h.j(t,"number",Sl,"layerSpacing"),0<=t&&(this.Hm=t,this.J()))}),_h.defineProperty(Sl,{yK:"columnSpacing"},function(){return this.Ud},function(t){this.Ud!==t&&(_h.j(t,"number",Sl,"columnSpacing"),0<t&&(this.Ud=t,this.J()))}),_h.defineProperty(Sl,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(_h.j(t,"number",Sl,"direction"),0===t||90===t||180===t||270===t?(this.aa=t,this.J()):_h.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}),_h.defineProperty(Sl,{angle:"angle"},function(){return this.direction},function(t){this.direction=t}),_h.defineProperty(Sl,{DH:"cycleRemoveOption"},function(){return this.xo},function(t){this.xo!==t&&(_h.mb(t,Sl,Sl,"cycleRemoveOption"),t===Np||t===Lp)&&(this.xo=t,this.J())}),_h.defineProperty(Sl,{CI:"layeringOption"},function(){return this.Zo},function(t){this.Zo!==t&&(_h.mb(t,Sl,Sl,"layeringOption"),t===Cp||t===Ap||t===Bp)&&(this.Zo=t,this.J())}),_h.defineProperty(Sl,{pI:"initializeOption"},function(){return this.Oo},function(t){this.Oo!==t&&(_h.mb(t,Sl,Sl,"initializeOption"),t===Dp||t===Fp||t===jp)&&(this.Oo=t,this.J())}),_h.defineProperty(Sl,{cL:"iterations"},function(){return this.Fm},function(t){this.Fm!==t&&(_h.Fd(t,oh,"iterations"),0<=t&&(this.Fm=t,this.J()))}),_h.defineProperty(Sl,{fH:"aggressiveOption"},function(){return this.ko},function(t){this.ko!==t&&(_h.mb(t,Sl,Sl,"aggressiveOption"),t===Ep||t===Ip||t===Op)&&(this.ko=t,this.J())}),_h.defineProperty(Sl,{xL:"packOption"},function(){return this.Yi},function(t){this.Yi!==t&&(_h.j(t,"number",Sl,"packOption"),0<=t&&8>t&&(this.Yi=t,this.J()))}),_h.defineProperty(Sl,{tq:"setsPortSpots"},function(){return this.Zh},function(t){this.Zh!==t&&(_h.j(t,"boolean",Sl,"setsPortSpots"),this.Zh=t,this.J())}),_h.defineProperty(Sl,{vF:"linkSpacing"},function(){return this.Wr},function(t){this.Wr!==t&&(_h.j(t,"number",Sl,"linkSpacing"),0<=t&&(this.Wr=t,this.J()))}),_h.u(Sl,{LI:"maxLayer"},function(){return this.qb}),_h.u(Sl,{iL:"maxIndex"},function(){return this.Vv}),_h.u(Sl,{hL:"maxColumn"},function(){return this.Jb}),_h.u(Sl,{nL:"minIndexLayer"},function(){return this.es}),_h.u(Sl,{jL:"maxIndexLayer"},function(){return this.Lf});var Lp;Sl.CycleDepthFirst=Lp=_h.p(Sl,"CycleDepthFirst",0);var Np;Sl.CycleGreedy=Np=_h.p(Sl,"CycleGreedy",1);var Cp;Sl.LayerOptimalLinkLength=Cp=_h.p(Sl,"LayerOptimalLinkLength",0);var Ap;Sl.LayerLongestPathSink=Ap=_h.p(Sl,"LayerLongestPathSink",1);var Bp;Sl.LayerLongestPathSource=Bp=_h.p(Sl,"LayerLongestPathSource",2);var Dp;Sl.InitDepthFirstOut=Dp=_h.p(Sl,"InitDepthFirstOut",0);var Fp;Sl.InitDepthFirstIn=Fp=_h.p(Sl,"InitDepthFirstIn",1);var jp;Sl.InitNaive=jp=_h.p(Sl,"InitNaive",2);var Ep;Sl.AggressiveNone=Ep=_h.p(Sl,"AggressiveNone",0);var Ip;Sl.AggressiveLess=Ip=_h.p(Sl,"AggressiveLess",1);var Op;Sl.AggressiveMore=Op=_h.p(Sl,"AggressiveMore",2),Sl.PackNone=0;var zp;Sl.PackExpand=zp=1;var Gp;Sl.PackStraighten=Gp=2;var Rp;Sl.PackMedian=Rp=4;var qp;Sl.PackAll=qp=7,_h.$d(nh,{layer:!0,first:!0,ee:!0,We:!0,pe:!0,index:!0,link:!0,qi:!0}),_h.La(oh,zs),_h.fa("LayeredDigraphNetwork",oh),oh.prototype.createVertex=function(){return new rh},oh.prototype.createEdge=function(){return new ah},_h.La(rh,Hs),_h.fa("LayeredDigraphVertex",rh),_h.La(ah,Vs),_h.fa("LayeredDigraphEdge",ah),_h.La(sh,Es),_h.fa("TreeLayout",sh),sh.prototype.cloneProtected=function(t){Es.prototype.cloneProtected.call(this,t),t.ys=this.ys,t.ot=this.ot,t.Sv=this.Sv,t.Ih=this.Ih,t.ld=this.ld,t.jg.assign(this.jg),t.ua.copyInheritedPropertiesFrom(this.ua),t.va.copyInheritedPropertiesFrom(this.va)},sh.prototype.gc=function(t){t.De===sh?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.Pf=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.QJ=t:_h.k("Unknown enum value: "+t):Es.prototype.gc.call(this,t)},sh.prototype.createNetwork=function(){return new Rh},sh.prototype.makeNetwork=function(t){function e(t){if(t instanceof Ba)return!t.lf&&"Comment"!==t.td;if(t instanceof Ua){var e=t.Y;return null!==e&&!e.lf&&"Comment"!==e.td&&(null!==(t=t.$)&&!t.lf&&"Comment"!==t.td)}return!1}var i=this.createNetwork();return i.Sb=this,t instanceof Ii?(i.sk(t.eg,!0,e),i.sk(t.links,!0,e)):t instanceof Cs?i.sk(t.Nc,!1,e):i.sk(t.i,!1,e),i},sh.prototype.doLayout=function(t){null===t&&_h.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Pf!==cg&&(this.oe=this.initialOrigin(this.oe));var e=this.g;if(null===e&&t instanceof Ii&&(e=t),this.If=this.path===Wp&&null!==e?e.Pd?Hp:Vp:this.path===Wp?Hp:this.path,0<this.network.vertexes.count){for(this.network.Yw(),t=this.network.vertexes.i;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.sd.count){for(t=new f(qh),e=this.sd.i;e.next();){var i=e.value;i instanceof Ba?null!==(i=this.network.yn(i))&&t.add(i):i instanceof qh&&t.add(i)}this.sd=t}for(0===this.sd.count&&this.findRoots(),t=this.sd.copy().i;t.next();)e=t.value,e.initialized||(e.initialized=!0,uh(this,e));for(e=this.network.vertexes,t=null;t=lh(e),0<t.count;)e=hh(this,t),null!==e&&this.sd.add(e),e.initialized=!0,uh(this,e),e=t;for(t=this.sd.i;t.next();)(e=t.value)instanceof qh&&fh(this,e);for(t=this.sd.i;t.next();)(e=t.value)instanceof qh&&ph(this,e);for(t=this.sd.i;t.next();)(e=t.value)instanceof qh&&gh(this,e);if(this.Pz(),this.CA===pg){for(i=[],t=this.network.vertexes.i;t.next();){var n=t.value,e=n.parent;null===e&&(e=n);var e=0===e.angle||180===e.angle,o=i[n.level];void 0===o&&(o=0),i[n.level]=Math.max(o,e?n.width:n.height)}for(n=0;n<i.length;n++)void 0===i[n]&&(i[n]=0);for(this.NB=i,t=this.network.vertexes.i;t.next();)n=t.value,e=n.parent,null===e&&(e=n),0===e.angle||180===e.angle?(180===e.angle&&(n.Pt+=i[n.level]-n.width),n.width=i[n.level]):(270===e.angle&&(n.Qt+=i[n.level]-n.height),n.height=i[n.level])}else if(this.CA===dg)for(t=this.network.vertexes.i;t.next();){for(i=t.value,e=0===i.angle||180===i.angle,o=-1,n=0;n<i.children.length;n++)var r=i.children[n],o=Math.max(o,e?r.width:r.height);if(0<=o)for(n=0;n<i.children.length;n++)r=i.children[n],e?(180===i.angle&&(r.Pt+=o-r.width),r.width=o):(270===i.angle&&(r.Qt+=o-r.height),r.height=o)}for(t=this.sd.i;t.next();)(e=t.value)instanceof qh&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.sd=new f(Object),this.zf=!0},sh.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.i;e.next();){var i=e.value;switch(this.If){case Hp:0===i.lc.count&&this.sd.add(i);break;case Vp:0===i.ic.count&&this.sd.add(i);break;default:_h.k("Unhandled path value "+this.If.toString())}}0===this.sd.count&&null!==(t=hh(this,t))&&this.sd.add(t)},sh.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var i=t.children,n=0,o=0;o<i.length;o++)i[o]===e&&n++;if(0<n){for(var n=Array(i.length-n),r=0,o=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}},sh.prototype.initializeTreeVertexValues=function(t){var e=dh(this,t);if(t.copyInheritedPropertiesFrom(e),null!==t.parent&&t.parent.alignment===tg){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;0==n%2?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},sh.prototype.assignTreeVertexValues=function(){},sh.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Up:break;case _p:t.children.reverse();break;case Kp:t.children.sort(t.comparer);break;case Jp:t.children.sort(t.comparer),t.children.reverse();break;default:_h.k("Unhandled sorting value "+t.sorting.toString())}},sh.prototype.Pz=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},sh.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,o=$p,o=!1;null!==i&&(n=i.angle,o=i.alignment,o=yh(o));var e=90===e||270===e,n=90===n||270===n,i=0===t.on,r=0,a=0,s=0,l=t.commentSpacing;if(null!==t.Oc)for(var h=t.Oc.JE();h.next();){var u=h.value;"Comment"===u.td&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.Ze(),u=u.za,e&&!i||!o&&!n&&i||o&&n&&i?(r=Math.max(r,u.width),a+=u.height+Math.abs(s)):(r+=u.width+Math.abs(s),a=Math.max(a,u.height)),s=l)}null!==t.comments&&(e&&!i||!o&&!n&&i||o&&n&&i?(r+=Math.abs(t.commentMargin),a=Math.max(0,a-t.height)):(a+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=_h.hg(0,0,t.M.width+r,t.M.height+a),t.cb=o,_h.Db(o))},sh.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.Oc.za,i=t.parent,n=t.angle,o=0,r=$p,r=!1;null!==i&&(o=i.angle,r=i.alignment,r=yh(r));for(var i=90===n||270===n,n=90===o||270===o,a=0===t.on,s=vh(t),l=0,h=t.comments,u=h.length,c=_h.K(),f=0;f<u;f++){var d=h[f],p=d.za;if(i&&!a||!r&&!n&&a||r&&n&&a){if(135<o&&!r||n&&s)if(0<=t.commentMargin)for(c.m(t.M.x-t.commentMargin-p.width,t.M.y+l),d.move(c),d=d.Kg();d.next();){var g=d.value;g.Ab=fu,g.Bb=du}else for(c.m(t.M.x+2*t.T.x-t.commentMargin,t.M.y+l),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=du,g.Bb=fu;else if(0<=t.commentMargin)for(c.m(t.M.x+2*t.T.x+t.commentMargin,t.M.y+l),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=du,g.Bb=fu;else for(c.m(t.M.x+t.commentMargin-p.width,t.M.y+l),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=fu,g.Bb=du;l=0<=t.commentSpacing?l+(p.height+t.commentSpacing):l+(t.commentSpacing-p.height)}else{if(135<o&&!r||!n&&s)if(0<=t.commentMargin)for(c.m(t.M.x+l,t.M.y-t.commentMargin-p.height),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=cu,g.Bb=pu;else for(c.m(t.M.x+l,t.M.y+2*t.T.y-t.commentMargin),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=pu,g.Bb=cu;else if(0<=t.commentMargin)for(c.m(t.M.x+l,t.M.y+2*t.T.y+t.commentMargin),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=pu,g.Bb=cu;else for(c.m(t.M.x+l,t.M.y+t.commentMargin-p.height),d.move(c),d=d.Kg();d.next();)g=d.value,g.Ab=cu,g.Bb=pu;l=0<=t.commentSpacing?l+(p.width+t.commentSpacing):l+(t.commentSpacing-p.width)}}if(_h.v(c),e=l-t.commentSpacing-(i?e.height:e.width),this.If===Hp)for(o=t.ic;o.next();)null===(t=o.value.link)||t.sj||(t.Sl=0<e?e:NaN);else for(o=t.lc;o.next();)null===(t=o.value.link)||t.sj||(t.jm=0<e?e:NaN)}},sh.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case ng:bh(this,t);break;case og:if(t.alignment===tg)bh(this,t);else if(0===t.on){var n=t.parent,e=!1,i=0,o=$p;null!==n&&(i=n.angle,o=n.alignment,e=yh(o)),n=vh(t),t.pa.m(0,0),t.jb.m(t.width,t.height),null===t.parent||null===t.comments||(180!==i&&270!==i||e)&&!n?t.Oa.m(0,0):180===i&&!e||(90===i||270===i)&&n?t.Oa.m(t.width-2*t.T.x,0):t.Oa.m(0,t.height-2*t.T.y),t.fu=null,t.Au=null}else{for(var r=Oh(t),e=90===r||270===r,a=0,s=t.children,l=s.length,h=0;h<l;h++)var u=s[h],a=Math.max(a,e?u.jb.width:u.jb.height);var c=t.alignment,n=c===Xp,f=c===Qp,d=yh(c),p=Math.max(0,t.breadthLimit),i=zh(t),g=t.nodeSpacing,y=Gh(t),m=t.rowSpacing,v=0;(n||f||t.nq||t.oq&&1===t.maxGenerationCount)&&(v=Math.max(0,t.rowIndent));var n=t.width,o=t.height,b=0,x=0,w=0,k=null,S=null,M=0,P=0,T=0,L=0,N=0,C=0,A=0,B=0,u=0;if(d&&!mh(c)&&135<r&&s.reverse(),mh(c))if(1<l)for(h=0;h<l;h++)0==h%2&&h!==l-1?B=Math.max(B,e?s[h].jb.width:s[h].jb.height):0!=h%2&&(u=Math.max(u,e?s[h].jb.width:s[h].jb.height));else 1===l&&(B=e?s[0].jb.width:s[0].jb.height);if(d){switch(c){case Zp:x=135>r?xh(t,s,B,b,x):wh(t,s,B,b,x),B=x.x,b=x.width,x=x.height;break;case eg:for(h=0;h<l;h++){var u=s[h],D=u.jb,k=0===C?0:m;e?(u.pa.m(a-D.width,L+k),b=Math.max(b,D.width),x=Math.max(x,L+k+D.height),L+=k+D.height):(u.pa.m(T+k,a-D.height),b=Math.max(b,T+k+D.width),x=Math.max(x,D.height),T+=k+D.width),C++}break;case ig:for(h=0;h<l;h++)u=s[h],D=u.jb,k=0===C?0:m,e?(u.pa.m(g/2+t.T.x,L+k),b=Math.max(b,D.width),x=Math.max(x,L+k+D.height),L+=k+D.height):(u.pa.m(T+k,g/2+t.T.y),b=Math.max(b,T+k+D.width),x=Math.max(x,D.height),T+=k+D.width),C++}k=Fh(this,2),S=Fh(this,2),e?(k[0].m(0,0),k[1].m(0,x),S[0].m(b,0)):(k[0].m(0,0),k[1].m(b,0),S[0].m(0,x)),S[1].m(b,x)}else for(h=0;h<l;h++){if(u=s[h],D=u.jb,e){0<p&&0<C&&T+g+D.width>p&&(T<a&&Nh(t,c,a-T,0,A,h-1),N++,C=0,A=h,w=x,T=0,L=135<r?-x-m:x+m),Ah(this,u,0,L);var F=0;if(0===C)k=u.fu,S=u.Au,M=D.width,P=D.height,(null===k||null===S||r!==Oh(u))&&(k=Fh(this,2),S=Fh(this,2),k[0].m(0,0),k[1].m(0,P),S[0].m(M,0),S[1].m(M,P));else{var j=_h.lb(),P=Dh(this,t,u,k,S,M,P,j),F=P.x,k=j[0],S=j[1],M=P.width,P=P.height;_h.wa(j),T<D.width&&0>F&&(Ch(t,-F,0,A,h-1),Bh(k,-F,0),Bh(S,-F,0),F=0)}u.pa.m(F,L),b=Math.max(b,M),x=Math.max(x,w+(0===N?0:m)+D.height),T=M}else 0<p&&0<C&&L+g+D.height>p&&(L<a&&Nh(t,c,0,a-L,A,h-1),N++,C=0,A=h,w=b,L=0,T=135<r?-b-m:b+m),Ah(this,u,T,0),F=0,0===C?(k=u.fu,S=u.Au,M=D.width,P=D.height,(null===k||null===S||r!==Oh(u))&&(k=Fh(this,2),S=Fh(this,2),k[0].m(0,0),k[1].m(M,0),S[0].m(0,P),S[1].m(M,P))):(j=_h.lb(),P=Dh(this,t,u,k,S,M,P,j),F=P.x,k=j[0],S=j[1],M=P.width,P=P.height,_h.wa(j),L<D.height&&0>F&&(Ch(t,0,-F,A,h-1),Bh(k,0,-F),Bh(S,0,-F),F=0)),u.pa.m(T,F),x=Math.max(x,P),b=Math.max(b,w+(0===N?0:m)+D.width),L=P;C++}switch(0<N&&(e?(x+=Math.max(0,i),T<b&&Nh(t,c,b-T,0,A,l-1),0<v&&(f||Ch(t,v,0,0,l-1),b+=v)):(b+=Math.max(0,i),L<x&&Nh(t,c,0,x-L,A,l-1),0<v&&(f||Ch(t,0,v,0,l-1),x+=v))),v=f=0,c){case Yp:e?f+=b/2-t.T.x-y/2:v+=x/2-t.T.y-y/2;break;case $p:0<N?e?f+=b/2-t.T.x-y/2:v+=x/2-t.T.y-y/2:e?(B=s[0].pa.x+s[0].Oa.x,h=s[l-1].pa.x+s[l-1].Oa.x+2*s[l-1].T.x,f+=B+(h-B)/2-t.T.x-y/2):(B=s[0].pa.y+s[0].Oa.y,h=s[l-1].pa.y+s[l-1].Oa.y+2*s[l-1].T.y,v+=B+(h-B)/2-t.T.y-y/2);break;case Xp:e?(f-=y,b+=y):(v-=y,x+=y);break;case Qp:e?(f+=b-t.width+y,b+=y):(v+=x-t.height+y,x+=y);break;case Zp:e?f=1<l?f+(B+g/2-t.T.x):f+(s[0].T.x-t.T.x+s[0].Oa.x):v=1<l?v+(B+g/2-t.T.y):v+(s[0].T.y-t.T.y+s[0].Oa.y);break;case eg:e?f+=b+g/2-t.T.x:v+=x+g/2-t.T.y;break;case ig:break;default:_h.k("Unhandled alignment value "+c.toString())}for(h=0;h<l;h++)u=s[h],e?u.pa.m(u.pa.x+u.Oa.x-f,u.pa.y+(135<r?(d?-x:-u.jb.height)+u.Oa.y-i:o+i+u.Oa.y)):u.pa.m(u.pa.x+(135<r?(d?-b:-u.jb.width)+u.Oa.x-i:n+i+u.Oa.x),u.pa.y+u.Oa.y-v);if(l=s=0,d?e?(b=Ph(t,b,f),0>f&&(f=0),135<r&&(v+=x+i),x+=o+i,c===ig&&(s+=g/2+t.T.x),l+=o+i):(135<r&&(f+=b+i),b+=n+i,x=Th(t,x,v),0>v&&(v=0),c===ig&&(l+=g/2+t.T.y),s+=n+i):e?(null===t.comments?n>b&&(c=Lh(c,n-b,0),s=c.x,l=c.y,b=n,f=0):b=Ph(t,b,f),0>f&&(s-=f,f=0),135<r&&(v+=x+i),x=Math.max(Math.max(x,o),x+o+i),l+=o+i):(135<r&&(f+=b+i),b=Math.max(Math.max(b,n),b+n+i),null===t.comments?o>x&&(c=Lh(c,0,o-x),s=c.x,l=c.y,x=o,v=0):x=Th(t,x,v),0>v&&(l-=v,v=0),s+=n+i),0<N)r=Fh(this,4),c=Fh(this,4),e?(r[2].m(0,o+i),r[3].m(r[2].x,x),c[2].m(b,r[2].y),c[3].m(c[2].x,r[3].y)):(r[2].m(n+i,0),r[3].m(b,r[2].y),c[2].m(r[2].x,x),c[3].m(r[3].x,c[2].y));else{for(r=Fh(this,k.length+2),c=Fh(this,S.length+2),h=0;h<k.length;h++)d=k[h],r[h+2].m(d.x+s,d.y+l);for(h=0;h<S.length;h++)d=S[h],c[h+2].m(d.x+s,d.y+l)}e?(r[0].m(f,0),r[1].m(r[0].x,o),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),c[0].m(f+n,0),c[1].m(c[0].x,o),c[2].y<c[1].y&&(c[2].x<c[0].x?c[2].assign(c[1]):c[1].assign(c[2])),c[3].y<c[2].y&&(c[3].x<c[0].x?c[3].assign(c[2]):c[2].assign(c[3])),r[2].y-=i/2,c[2].y-=i/2):(r[0].m(0,v),r[1].m(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),c[0].m(0,v+o),c[1].m(n,c[0].y),c[2].x<c[1].x&&(c[2].y<c[0].y?c[2].assign(c[1]):c[1].assign(c[2])),c[3].x<c[2].x&&(c[3].y<c[0].y?c[3].assign(c[2]):c[2].assign(c[3])),r[2].x-=i/2,c[2].x-=i/2),jh(this,k),jh(this,S),t.fu=r,t.Au=c,t.Oa.m(f,v),t.jb.m(b,x)}break;default:_h.k("Unhandled compaction value "+t.compaction.toString())}}},sh.prototype.arrangeTrees=function(){if(this.ld===cg)for(var t=this.sd.i;t.next();){var e=t.value;if(e instanceof qh){var i=e.Oc;if(null!==i){var n=i.position,i=n.x,n=n.y;isFinite(i)||(i=0),isFinite(n)||(n=0),Eh(this,e,i,n)}}}else{for(i=[],t=this.sd.i;t.next();)(e=t.value)instanceof qh&&i.push(e);switch(this.sorting){case Up:break;case _p:i.reverse();break;case Kp:i.sort(this.comparer);break;case Jp:i.sort(this.comparer),i.reverse();break;default:_h.k("Unhandled sorting value "+this.sorting.toString())}for(e=this.oe,t=e.x,e=e.y,n=0;n<i.length;n++){var o=i[n];switch(Eh(this,o,t+o.Oa.x,e+o.Oa.y),this.ld){case hg:e+=o.jb.height+this.jg.height;break;case ug:t+=o.jb.width+this.jg.width;break;default:_h.k("Unhandled arrangement value "+this.ld.toString())}}}},sh.prototype.commitLayout=function(){this.gB(),this.commitNodes(),this.Uz(),this.du&&this.commitLinks()},sh.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},sh.prototype.Uz=function(){if(this.CA===pg){for(var t=this.NB,e=[],i=null,n=this.network.vertexes.i;n.next();){var o=n.value;null===i?i=o.cb.copy():i.Gh(o.cb);var r=e[o.level],r=void 0===r?zh(o):Math.max(r,zh(o));e[o.level]=r}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);90===this.angle||270===this.angle?(i.xf(this.nodeSpacing/2,this.layerSpacing),o=new b(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.xf(this.layerSpacing,this.nodeSpacing/2),o=new b(-this.layerSpacing/2,-this.nodeSpacing/2));var r=[],i=90===this.angle||270===this.angle?i.width:i.height,a=0;if(180===this.angle||270===this.angle)for(n=0;n<t.length;n++)a+=t[n]+e[n];for(n=0;n<t.length;n++){var s=t[n]+e[n];270===this.angle?(a-=s,r.push(new S(0,a,i,s))):90===this.angle?(r.push(new S(0,a,i,s)),a+=s):180===this.angle?(a-=s,r.push(new S(a,0,s,i))):(r.push(new S(a,0,s,i)),a+=s)}this.commitLayers(r,o)}},sh.prototype.commitLayers=function(){},sh.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},sh.prototype.gB=function(){for(var t=this.sd.i;t.next();){var e=t.value;e instanceof qh&&Ih(this,e)}},sh.prototype.setPortSpots=function(t){var e=t.alignment;if(yh(e)){var i,n=this.If===Hp,o=Oh(t);switch(o){case 0:i=du;break;case 90:i=pu;break;case 180:i=fu;break;default:i=cu}var r=t.children,a=r.length;switch(e){case Zp:case tg:for(e=0;e<a;e++){var s=r[e],s=(n?s.lc:s.ic).first();if(null!==s&&null!==(s=s.link)){var l=90===o||270===o?fu:cu;if(1===a||e===a-1&&1==a%2)switch(o){
case 0:l=fu;break;case 90:l=cu;break;case 180:l=du;break;default:l=pu}else 0==e%2&&(l=90===o||270===o?du:pu);n?(t.setsPortSpot&&(s.Ab=i),t.setsChildPortSpot&&(s.Bb=l)):(t.setsPortSpot&&(s.Ab=l),t.setsChildPortSpot&&(s.Bb=i))}}break;case eg:for(l=90===o||270===o?du:pu,o=n?t.ic:t.lc;o.next();)null!==(s=o.value.link)&&(n?(t.setsPortSpot&&(s.Ab=i),t.setsChildPortSpot&&(s.Bb=l)):(t.setsPortSpot&&(s.Ab=l),t.setsChildPortSpot&&(s.Bb=i)));break;case ig:for(l=90===o||270===o?fu:cu,o=n?t.ic:t.lc;o.next();)null!==(s=o.value.link)&&(n?(t.setsPortSpot&&(s.Ab=i),t.setsChildPortSpot&&(s.Bb=l)):(t.setsPortSpot&&(s.Ab=l),t.setsChildPortSpot&&(s.Bb=i)))}}else if(n=Oh(t),this.If===Hp){for(i=t.ic;i.next();)if(null!==(o=i.value.link)){if(t.setsPortSpot)if(t.portSpot.Vc())switch(n){case 0:o.Ab=du;break;case 90:o.Ab=pu;break;case 180:o.Ab=fu;break;default:o.Ab=cu}else o.Ab=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Vc())switch(n){case 0:o.Bb=fu;break;case 90:o.Bb=cu;break;case 180:o.Bb=du;break;default:o.Bb=pu}else o.Bb=t.childPortSpot}}else for(i=t.lc;i.next();)if(null!==(o=i.value.link)){if(t.setsPortSpot)if(t.portSpot.Vc())switch(n){case 0:o.Bb=du;break;case 90:o.Bb=pu;break;case 180:o.Bb=fu;break;default:o.Bb=cu}else o.Bb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Vc())switch(n){case 0:o.Ab=fu;break;case 90:o.Ab=cu;break;case 180:o.Ab=du;break;default:o.Ab=pu}else o.Ab=t.childPortSpot}},_h.defineProperty(sh,{EL:"roots"},function(){return this.sd},function(t){this.sd!==t&&(_h.G(t,f,sh,"roots"),this.sd=t,this.J())}),_h.defineProperty(sh,{path:"path"},function(){return this.ys},function(t){this.ys!==t&&(_h.mb(t,sh,sh,"path"),this.ys=t,this.J())}),_h.defineProperty(sh,{QJ:"treeStyle"},function(){return this.ot},function(t){this.ld!==t&&(_h.mb(t,sh,sh,"treeStyle"),t===rg||t===sg||t===ag||t===lg)&&(this.ot=t,this.J())}),_h.defineProperty(sh,{CA:"layerStyle"},function(){return this.Sv},function(t){this.ld!==t&&(_h.mb(t,sh,sh,"layerStyle"),t===fg||t===dg||t===pg)&&(this.Sv=t,this.J())}),_h.defineProperty(sh,{comments:"comments"},function(){return this.Ih},function(t){this.Ih!==t&&(_h.j(t,"boolean",sh,"comments"),this.Ih=t,this.J())}),_h.defineProperty(sh,{Pf:"arrangement"},function(){return this.ld},function(t){this.ld!==t&&(_h.mb(t,sh,sh,"arrangement"),t===hg||t===ug||t===cg)&&(this.ld=t,this.J())}),_h.defineProperty(sh,{lE:"arrangementSpacing"},function(){return this.jg},function(t){_h.G(t,k,sh,"arrangementSpacing"),this.jg.L(t)||(this.jg.assign(t),this.J())}),_h.defineProperty(sh,{DL:"rootDefaults"},function(){return this.ua},function(t){this.ua!==t&&(_h.G(t,qh,sh,"rootDefaults"),this.ua=t,this.J())}),_h.defineProperty(sh,{gK:"alternateDefaults"},function(){return this.va},function(t){this.va!==t&&(_h.G(t,qh,sh,"alternateDefaults"),this.va=t,this.J())}),_h.defineProperty(sh,{sorting:"sorting"},function(){return this.ua.sorting},function(t){this.ua.sorting!==t&&(_h.mb(t,sh,sh,"sorting"),t===Up||t===_p||t===Kp||Jp)&&(this.ua.sorting=t,this.J())}),_h.defineProperty(sh,{comparer:"comparer"},function(){return this.ua.comparer},function(t){this.ua.comparer!==t&&(_h.j(t,"function",sh,"comparer"),this.ua.comparer=t,this.J())}),_h.defineProperty(sh,{angle:"angle"},function(){return this.ua.angle},function(t){this.ua.angle!==t&&(_h.j(t,"number",sh,"angle"),0===t||90===t||180===t||270===t?(this.ua.angle=t,this.J()):_h.k("TreeLayout.angle must be 0, 90, 180, or 270"))}),_h.defineProperty(sh,{alignment:"alignment"},function(){return this.ua.alignment},function(t){this.ua.alignment!==t&&(_h.mb(t,sh,sh,"alignment"),this.ua.alignment=t,this.J())}),_h.defineProperty(sh,{nodeIndent:"nodeIndent"},function(){return this.ua.nodeIndent},function(t){this.ua.nodeIndent!==t&&(_h.j(t,"number",sh,"nodeIndent"),0<=t&&(this.ua.nodeIndent=t,this.J()))}),_h.defineProperty(sh,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ua.nodeIndentPastParent},function(t){this.ua.nodeIndentPastParent!==t&&(_h.j(t,"number",sh,"nodeIndentPastParent"),0<=t&&1>=t&&(this.ua.nodeIndentPastParent=t,this.J()))}),_h.defineProperty(sh,{nodeSpacing:"nodeSpacing"},function(){return this.ua.nodeSpacing},function(t){this.ua.nodeSpacing!==t&&(_h.j(t,"number",sh,"nodeSpacing"),this.ua.nodeSpacing=t,this.J())}),_h.defineProperty(sh,{layerSpacing:"layerSpacing"},function(){return this.ua.layerSpacing},function(t){this.ua.layerSpacing!==t&&(_h.j(t,"number",sh,"layerSpacing"),this.ua.layerSpacing=t,this.J())}),_h.defineProperty(sh,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ua.layerSpacingParentOverlap},function(t){this.ua.layerSpacingParentOverlap!==t&&(_h.j(t,"number",sh,"layerSpacingParentOverlap"),0<=t&&1>=t&&(this.ua.layerSpacingParentOverlap=t,this.J()))}),_h.defineProperty(sh,{compaction:"compaction"},function(){return this.ua.compaction},function(t){this.ua.compaction!==t&&(_h.mb(t,sh,sh,"compaction"),t===ng||t===og)&&(this.ua.compaction=t,this.J())}),_h.defineProperty(sh,{breadthLimit:"breadthLimit"},function(){return this.ua.breadthLimit},function(t){this.ua.breadthLimit!==t&&(_h.j(t,"number",sh,"breadthLimit"),0<=t&&(this.ua.breadthLimit=t,this.J()))}),_h.defineProperty(sh,{rowSpacing:"rowSpacing"},function(){return this.ua.rowSpacing},function(t){this.ua.rowSpacing!==t&&(_h.j(t,"number",sh,"rowSpacing"),this.ua.rowSpacing=t,this.J())}),_h.defineProperty(sh,{rowIndent:"rowIndent"},function(){return this.ua.rowIndent},function(t){this.ua.rowIndent!==t&&(_h.j(t,"number",sh,"rowIndent"),0<=t&&(this.ua.rowIndent=t,this.J()))}),_h.defineProperty(sh,{commentSpacing:"commentSpacing"},function(){return this.ua.commentSpacing},function(t){this.ua.commentSpacing!==t&&(_h.j(t,"number",sh,"commentSpacing"),this.ua.commentSpacing=t,this.J())}),_h.defineProperty(sh,{commentMargin:"commentMargin"},function(){return this.ua.commentMargin},function(t){this.ua.commentMargin!==t&&(_h.j(t,"number",sh,"commentMargin"),this.ua.commentMargin=t,this.J())}),_h.defineProperty(sh,{setsPortSpot:"setsPortSpot"},function(){return this.ua.setsPortSpot},function(t){this.ua.setsPortSpot!==t&&(_h.j(t,"boolean",sh,"setsPortSpot"),this.ua.setsPortSpot=t,this.J())}),_h.defineProperty(sh,{portSpot:"portSpot"},function(){return this.ua.portSpot},function(t){_h.G(t,D,sh,"portSpot"),this.ua.portSpot.L(t)||(this.ua.portSpot=t,this.J())}),_h.defineProperty(sh,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ua.setsChildPortSpot},function(t){this.ua.setsChildPortSpot!==t&&(_h.j(t,"boolean",sh,"setsChildPortSpot"),this.ua.setsChildPortSpot=t,this.J())}),_h.defineProperty(sh,{childPortSpot:"childPortSpot"},function(){return this.ua.childPortSpot},function(t){_h.G(t,D,sh,"childPortSpot"),this.ua.childPortSpot.L(t)||(this.ua.childPortSpot=t,this.J())}),_h.defineProperty(sh,{rK:"alternateSorting"},function(){return this.va.sorting},function(t){this.va.sorting!==t&&(_h.mb(t,sh,sh,"alternateSorting"),t===Up||t===_p||t===Kp||Jp)&&(this.va.sorting=t,this.J())}),_h.defineProperty(sh,{fK:"alternateComparer"},function(){return this.va.comparer},function(t){this.va.comparer!==t&&(_h.j(t,"function",sh,"alternateComparer"),this.va.comparer=t,this.J())}),_h.defineProperty(sh,{$J:"alternateAngle"},function(){return this.va.angle},function(t){this.va.angle!==t&&(_h.j(t,"number",sh,"alternateAngle"),0===t||90===t||180===t||270===t)&&(this.va.angle=t,this.J())}),_h.defineProperty(sh,{ZJ:"alternateAlignment"},function(){return this.va.alignment},function(t){this.va.alignment!==t&&(_h.mb(t,sh,sh,"alternateAlignment"),this.va.alignment=t,this.J())}),_h.defineProperty(sh,{jK:"alternateNodeIndent"},function(){return this.va.nodeIndent},function(t){this.va.nodeIndent!==t&&(_h.j(t,"number",sh,"alternateNodeIndent"),0<=t&&(this.va.nodeIndent=t,this.J()))}),_h.defineProperty(sh,{kK:"alternateNodeIndentPastParent"},function(){return this.va.nodeIndentPastParent},function(t){this.va.nodeIndentPastParent!==t&&(_h.j(t,"number",sh,"alternateNodeIndentPastParent"),0<=t&&1>=t&&(this.va.nodeIndentPastParent=t,this.J()))}),_h.defineProperty(sh,{lK:"alternateNodeSpacing"},function(){return this.va.nodeSpacing},function(t){this.va.nodeSpacing!==t&&(_h.j(t,"number",sh,"alternateNodeSpacing"),this.va.nodeSpacing=t,this.J())}),_h.defineProperty(sh,{hK:"alternateLayerSpacing"},function(){return this.va.layerSpacing},function(t){this.va.layerSpacing!==t&&(_h.j(t,"number",sh,"alternateLayerSpacing"),this.va.layerSpacing=t,this.J())}),_h.defineProperty(sh,{iK:"alternateLayerSpacingParentOverlap"},function(){return this.va.layerSpacingParentOverlap},function(t){this.va.layerSpacingParentOverlap!==t&&(_h.j(t,"number",sh,"alternateLayerSpacingParentOverlap"),0<=t&&1>=t&&(this.va.layerSpacingParentOverlap=t,this.J()))}),_h.defineProperty(sh,{eK:"alternateCompaction"},function(){return this.va.compaction},function(t){this.va.compaction!==t&&(_h.mb(t,sh,sh,"alternateCompaction"),t===ng||t===og)&&(this.va.compaction=t,this.J())}),_h.defineProperty(sh,{aK:"alternateBreadthLimit"},function(){return this.va.breadthLimit},function(t){this.va.breadthLimit!==t&&(_h.j(t,"number",sh,"alternateBreadthLimit"),0<=t&&(this.va.breadthLimit=t,this.J()))}),_h.defineProperty(sh,{oK:"alternateRowSpacing"},function(){return this.va.rowSpacing},function(t){this.va.rowSpacing!==t&&(_h.j(t,"number",sh,"alternateRowSpacing"),this.va.rowSpacing=t,this.J())}),_h.defineProperty(sh,{nK:"alternateRowIndent"},function(){return this.va.rowIndent},function(t){this.va.rowIndent!==t&&(_h.j(t,"number",sh,"alternateRowIndent"),0<=t&&(this.va.rowIndent=t,this.J()))}),_h.defineProperty(sh,{dK:"alternateCommentSpacing"},function(){return this.va.commentSpacing},function(t){this.va.commentSpacing!==t&&(_h.j(t,"number",sh,"alternateCommentSpacing"),this.va.commentSpacing=t,this.J())}),_h.defineProperty(sh,{cK:"alternateCommentMargin"},function(){return this.va.commentMargin},function(t){this.va.commentMargin!==t&&(_h.j(t,"number",sh,"alternateCommentMargin"),this.va.commentMargin=t,this.J())}),_h.defineProperty(sh,{qK:"alternateSetsPortSpot"},function(){return this.va.setsPortSpot},function(t){this.va.setsPortSpot!==t&&(_h.j(t,"boolean",sh,"alternateSetsPortSpot"),this.va.setsPortSpot=t,this.J())}),_h.defineProperty(sh,{mK:"alternatePortSpot"},function(){return this.va.portSpot},function(t){_h.G(t,D,sh,"alternatePortSpot"),this.va.portSpot.L(t)||(this.va.portSpot=t,this.J())}),_h.defineProperty(sh,{pK:"alternateSetsChildPortSpot"},function(){return this.va.setsChildPortSpot},function(t){this.va.setsChildPortSpot!==t&&(_h.j(t,"boolean",sh,"alternateSetsChildPortSpot"),this.va.setsChildPortSpot=t,this.J())}),_h.defineProperty(sh,{bK:"alternateChildPortSpot"},function(){return this.va.childPortSpot},function(t){_h.G(t,D,sh,"alternateChildPortSpot"),this.va.childPortSpot.L(t)||(this.va.childPortSpot=t,this.J())});var Wp;sh.PathDefault=Wp=_h.p(sh,"PathDefault",-1);var Hp;sh.PathDestination=Hp=_h.p(sh,"PathDestination",0);var Vp;sh.PathSource=Vp=_h.p(sh,"PathSource",1);var Up;sh.SortingForwards=Up=_h.p(sh,"SortingForwards",10);var _p;sh.SortingReverse=_p=_h.p(sh,"SortingReverse",11);var Kp;sh.SortingAscending=Kp=_h.p(sh,"SortingAscending",12);var Jp;sh.SortingDescending=Jp=_h.p(sh,"SortingDescending",13);var Yp;sh.AlignmentCenterSubtrees=Yp=_h.p(sh,"AlignmentCenterSubtrees",20);var $p;sh.AlignmentCenterChildren=$p=_h.p(sh,"AlignmentCenterChildren",21);var Xp;sh.AlignmentStart=Xp=_h.p(sh,"AlignmentStart",22);var Qp;sh.AlignmentEnd=Qp=_h.p(sh,"AlignmentEnd",23);var Zp;sh.AlignmentBus=Zp=_h.p(sh,"AlignmentBus",24);var tg;sh.AlignmentBusBranching=tg=_h.p(sh,"AlignmentBusBranching",25);var eg;sh.AlignmentTopLeftBus=eg=_h.p(sh,"AlignmentTopLeftBus",26);var ig;sh.AlignmentBottomRightBus=ig=_h.p(sh,"AlignmentBottomRightBus",27);var ng;sh.CompactionNone=ng=_h.p(sh,"CompactionNone",30);var og;sh.CompactionBlock=og=_h.p(sh,"CompactionBlock",31);var rg;sh.StyleLayered=rg=_h.p(sh,"StyleLayered",40);var ag;sh.StyleLastParents=ag=_h.p(sh,"StyleLastParents",41);var sg;sh.StyleAlternating=sg=_h.p(sh,"StyleAlternating",42);var lg;sh.StyleRootOnly=lg=_h.p(sh,"StyleRootOnly",43);var hg;sh.ArrangementVertical=hg=_h.p(sh,"ArrangementVertical",50);var ug;sh.ArrangementHorizontal=ug=_h.p(sh,"ArrangementHorizontal",51);var cg;sh.ArrangementFixedRoots=cg=_h.p(sh,"ArrangementFixedRoots",52);var fg;sh.LayerIndividual=fg=_h.p(sh,"LayerIndividual",60);var dg;sh.LayerSiblings=dg=_h.p(sh,"LayerSiblings",61);var pg;sh.LayerUniform=pg=_h.p(sh,"LayerUniform",62),_h.La(Rh,zs),_h.fa("TreeNetwork",Rh),Rh.prototype.createVertex=function(){return new qh},Rh.prototype.createEdge=function(){return new Wh},_h.La(qh,Hs),_h.fa("TreeVertex",qh),qh.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},_h.u(qh,{on:"childrenCount"},function(){return this.children.length}),_h.defineProperty(qh,{CL:"relativePosition"},function(){return this.pa},function(t){this.pa.set(t)}),_h.defineProperty(qh,{PL:"subtreeSize"},function(){return this.jb},function(t){this.jb.set(t)}),_h.defineProperty(qh,{OL:"subtreeOffset"},function(){return this.Oa},function(t){this.Oa.set(t)}),_h.La(Wh,Vs),_h.fa("TreeEdge",Wh),Wh.prototype.commit=function(){var t=this.link;if(null!==t&&!t.sj){var e=this.network.Sb,i=null,n=null;switch(e.If){case Hp:i=this.fromVertex,n=this.toVertex;break;case Vp:i=this.toVertex,n=this.fromVertex;break;default:_h.k("Unhandled path value "+e.If.toString())}if(null!==i&&null!==n)if(e=this.Fs,0!==e.x||0!==e.y||i.tJ){var n=i.cb,o=Oh(i),r=zh(i),a=i.rowSpacing;t.co();var s,l,h=t.Ye===Wd,u=t.jc,c=0;if(t.em(),u||h){for(c=2;4<t.qa;)t.QF(2);s=t.l(1),l=t.l(2)}else{for(c=1;3<t.qa;)t.QF(1);s=t.l(0),l=t.l(t.qa-1)}var f=t.l(t.qa-1),d=0;0===o?(i.alignment===Qp?(d=n.bottom+e.y,0===e.y&&s.y>f.y+i.rowIndent&&(d=Math.min(d,Math.max(s.y,d-Gh(i))))):i.alignment===Xp?(d=n.top+e.y,0===e.y&&s.y<f.y-i.rowIndent&&(d=Math.max(d,Math.min(s.y,d+Gh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?n.top-i.Oa.y+e.y:n.y+n.height/2+e.y,h?(t.w(c,s.x,d),c++,t.w(c,n.right+r,d),c++,t.w(c,n.right+r+(e.x-a)/3,d),c++,t.w(c,n.right+r+2*(e.x-a)/3,d),c++,t.w(c,n.right+r+(e.x-a),d),c++,t.w(c,l.x,d)):(u&&(t.w(c,n.right+r/2,s.y),c++),t.w(c,n.right+r/2,d),c++,t.w(c,n.right+r+e.x-(u?a/2:a),d),c++,u&&t.w(c,t.l(c-1).x,l.y))):90===o?(i.alignment===Qp?(d=n.right+e.x,0===e.x&&s.x>f.x+i.rowIndent&&(d=Math.min(d,Math.max(s.x,d-Gh(i))))):i.alignment===Xp?(d=n.left+e.x,0===e.x&&s.x<f.x-i.rowIndent&&(d=Math.max(d,Math.min(s.x,d+Gh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?n.left-i.Oa.x+e.x:n.x+n.width/2+e.x,h?(t.w(c,d,s.y),c++,t.w(c,d,n.bottom+r),c++,t.w(c,d,n.bottom+r+(e.y-a)/3),c++,t.w(c,d,n.bottom+r+2*(e.y-a)/3),c++,t.w(c,d,n.bottom+r+(e.y-a)),c++,t.w(c,d,l.y)):(u&&(t.w(c,s.x,n.bottom+r/2),c++),t.w(c,d,n.bottom+r/2),c++,t.w(c,d,n.bottom+r+e.y-(u?a/2:a)),c++,u&&t.w(c,l.x,t.l(c-1).y))):180===o?(i.alignment===Qp?(d=n.bottom+e.y,0===e.y&&s.y>f.y+i.rowIndent&&(d=Math.min(d,Math.max(s.y,d-Gh(i))))):i.alignment===Xp?(d=n.top+e.y,0===e.y&&s.y<f.y-i.rowIndent&&(d=Math.max(d,Math.min(s.y,d+Gh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?n.top-i.Oa.y+e.y:n.y+n.height/2+e.y,h?(t.w(c,s.x,d),c++,t.w(c,n.left-r,d),c++,t.w(c,n.left-r+(e.x+a)/3,d),c++,t.w(c,n.left-r+2*(e.x+a)/3,d),c++,t.w(c,n.left-r+(e.x+a),d),c++,t.w(c,l.x,d)):(u&&(t.w(c,n.left-r/2,s.y),c++),t.w(c,n.left-r/2,d),c++,t.w(c,n.left-r+e.x+(u?a/2:a),d),c++,u&&t.w(c,t.l(c-1).x,l.y))):270===o?(i.alignment===Qp?(d=n.right+e.x,0===e.x&&s.x>f.x+i.rowIndent&&(d=Math.min(d,Math.max(s.x,d-Gh(i))))):i.alignment===Xp?(d=n.left+e.x,0===e.x&&s.x<f.x-i.rowIndent&&(d=Math.max(d,Math.min(s.x,d+Gh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?n.left-i.Oa.x+e.x:n.x+n.width/2+e.x,h?(t.w(c,d,s.y),c++,t.w(c,d,n.top-r),c++,t.w(c,d,n.top-r+(e.y+a)/3),c++,t.w(c,d,n.top-r+2*(e.y+a)/3),c++,t.w(c,d,n.top-r+(e.y+a)),c++,t.w(c,d,l.y)):(u&&(t.w(c,s.x,n.top-r/2),c++),t.w(c,d,n.top-r/2),c++,t.w(c,d,n.top-r+e.y+(u?a/2:a)),c++,u&&t.w(c,l.x,t.l(c-1).y))):_h.k("Invalid angle "+o),t.jj()}else o=i,r=n,t=this.link,(i=Oh(o))!==Oh(r)&&(e=zh(o),n=o.cb,o=r.cb,0===i&&o.left-n.right<e+1||90===i&&o.top-n.bottom<e+1||180===i&&n.left-o.right<e+1||270===i&&n.top-o.bottom<e+1||(t.co(),o=t.Ye===Wd,r=t.jc,a=yh(this.fromVertex.alignment),t.em(),0===i?(i=n.right+e/2,o?4===t.qa&&(e=t.l(3).y,t.ea(1,i-20,t.l(1).y),t.w(2,i-20,e),t.w(3,i,e),t.w(4,i+20,e),t.ea(5,t.l(5).x,e)):r?a?t.ea(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ea(2,i,t.l(2).y),t.ea(3,i,t.l(3).y)):4===t.qa?t.w(2,i,t.l(2).y):3===t.qa?t.ea(1,i,t.l(2).y):2===t.qa&&t.w(1,i,t.l(1).y)):90===i?(e=n.bottom+e/2,o?4===t.qa&&(i=t.l(3).x,t.ea(1,t.l(1).x,e-20),t.w(2,i,e-20),t.w(3,i,e),t.w(4,i,e+20),t.ea(5,i,t.l(5).y)):r?a?t.ea(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ea(2,t.l(2).x,e),t.ea(3,t.l(3).x,e)):4===t.qa?t.w(2,t.l(2).x,e):3===t.qa?t.ea(1,t.l(2).x,e):2===t.qa&&t.w(1,t.l(1).x,e)):180===i?(i=n.left-e/2,o?4===t.qa&&(e=t.l(3).y,t.ea(1,i+20,t.l(1).y),t.w(2,i+20,e),t.w(3,i,e),t.w(4,i-20,e),t.ea(5,t.l(5).x,e)):r?a?t.ea(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ea(2,i,t.l(2).y),t.ea(3,i,t.l(3).y)):4===t.qa?t.w(2,i,t.l(2).y):3===t.qa?t.ea(1,i,t.l(2).y):2===t.qa&&t.w(1,i,t.l(1).y)):270===i&&(e=n.top-e/2,o?4===t.qa&&(i=t.l(3).x,t.ea(1,t.l(1).x,e+20),t.w(2,i,e+20),t.w(3,i,e),t.w(4,i,e-20),t.ea(5,i,t.l(5).y)):r?a?t.ea(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ea(2,t.l(2).x,e),t.ea(3,t.l(3).x,e)):4===t.qa?t.w(2,t.l(2).x,e):3===t.qa?t.ea(1,t.l(2).x,e):2===t.qa&&t.w(1,t.l(1).x,e)),t.jj()))}},_h.defineProperty(Wh,{BL:"relativePoint"},function(){return this.Fs},function(t){this.Fs.set(t)}),_h.La(Hh,Mo),Hh.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.element=this.Se.cloneNode(!0)},Hh.prototype.toString=function(){return"HTMLHost("+this.Se.toString()+")#"+_h.Kd(this)},Hh.prototype.yk=function(t,e){var i=this.Se;if(null!==i){var n=this.Wa(au);n.x-=this.W.width/2,n.y-=this.W.height/2,n.x-=this.W.x,n.y-=this.W.y;var n=e.uG(n),o=e.mj;null===o||o.contains(i)||o.appendChild(i),o=this.transform,i.style.transform="matrix("+o.m11+","+o.m12+","+o.m21+","+o.m22+","+o.dx+","+o.dy+")",i.style.transformOrigin="0 0",o=n.y,i.style.left=n.x+"px",i.style.top=o+"px"}},Hh.prototype.Nn=function(t,e,i,n){var o=this.Ba;isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height);var o=this.Bf,r=this.zh;i=Math.max(i,r.width),n=Math.max(n,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(i,t),e=Math.max(n,e),i=this.Se,null!==i&&(e=i.getBoundingClientRect(),t=e.width,e=e.height),M(this.Tc,t,e),No(this,0,0,t,e)},Hh.prototype.ij=function(t,e,i,n){Bo(this,t,e,i,n)},_h.u(Hh,{Ia:"naturalBounds"},function(){return this.Tc}),_h.defineProperty(Hh,{element:"element"},function(){return this.Se},function(t){var e=this.Se;e!==t&&(t instanceof HTMLElement||_h.k("HTMLHost.element must be an instance of Element."),this.Se=t,t.className="HTMLHost",this.h("element",e,t),this.na())}),Uh.version="1.7.8",t&&(t.module&&"object"==typeof t.module&&"object"==typeof t.module.exports?t.module.exports=Uh:t.define&&"function"==typeof t.define&&t.define.amd?(t.go=Uh,t.define(Uh)):t.go=Uh),"undefined"!=typeof module&&"object"==typeof module.exports&&(module.exports=Uh)}(window),go.Diagram.inherit(WallBuildingTool,go.Tool),Object.defineProperty(WallBuildingTool.prototype,"startPoint",{get:function(){return this._startPoint},set:function(t){this._startPoint=t}}),Object.defineProperty(WallBuildingTool.prototype,"endPoint",{get:function(){return this._endPoint},set:function(t){this._endPoint=t}}),Object.defineProperty(WallBuildingTool.prototype,"wallReshapingTool",{get:function(){return this._wallReshapingTool},set:function(t){this._wallReshapingTool=t}}),WallBuildingTool.prototype.canStart=function(){var t=this.diagram;return!(null===t||t.isReadOnly||!this.isEnabled)},WallBuildingTool.prototype.doActivate=function(){this.endPoint=null,this.startTransaction(this.name),this.isMouseCaptured=!0;var t=this.diagram,e=document.getElementById("wallWidthInput");e&&((isNaN(e.value)||null===e.value||""===e.value||e.value===undefined)&&(e.value=t.convertPixelsToUnits(5)),t.model.setDataProperty(t.model.modelData,"wallWidth",t.convertUnitsToPixels(parseFloat(e.value))));var i=this.diagram.lastInput.documentPoint,n=t.model.modelData.gridSize;this.diagram.toolManager.draggingTool.isGridSnapEnabled||(n=1);var o=n*Math.round(i.x/n),r=n*Math.round(i.y/n),a=new go.Point(o,r);this.startPoint=a,this.wallReshapingTool=this.diagram.toolManager.mouseDownTools.elt(3),this.isActive=!0},WallBuildingTool.prototype.doMouseDown=function(){var t=this.diagram;this.diagram.currentCursor="crosshair";var e={key:"wall",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:this.startPoint,endpoint:this.startPoint,strokeWidth:parseFloat(t.model.modelData.wallWidth),isGroup:!0,notes:""};this.diagram.model.addNodeData(e);var i=t.findPartForKey(e.key);t.updateWall(i);var n=t.findPartForData(e);this.transactionResult=this.name,t.raiseDiagramEvent("PartCreated",n),this.wallReshapingTool.isEnabled=!0,t.select(n),this.wallReshapingTool.isBuilding=!0,this.wallReshapingTool.adornedShape=n.findObject("SHAPE"),this.wallReshapingTool.doActivate()},WallBuildingTool.prototype.doKeyDown=function(){var t=this.diagram;if("Esc"===t.lastInput.key){var e=t.selection.first();t.remove(e),t.pointNodes.iterator.each(function(e){t.remove(e)}),t.dimensionLinks.iterator.each(function(e){t.remove(e)}),t.pointNodes.clear(),t.dimensionLinks.clear(),this.doDeactivate()}go.Tool.prototype.doKeyDown.call(this)},WallBuildingTool.prototype.doMouseMove=function(){this.wallReshapingTool.doMouseMove()},WallBuildingTool.prototype.doDeactivate=function(){var t=this.diagram;this.diagram.currentCursor="",this.diagram.isMouseCaptured=!1,this.wallReshapingTool.isEnabled=!1,this.wallReshapingTool.adornedShape=null,this.wallReshapingTool.doDeactivate(),this.wallReshapingTool.isBuilding=!1,t.updateWallDimensions(),this.stopTransaction(this.name),this.isActive=!1},go.Diagram.inherit(WallReshapingTool,go.Tool),Object.defineProperty(WallReshapingTool.prototype,"handleArchetype",{get:function(){return this._handleArchetype}}),Object.defineProperty(WallReshapingTool.prototype,"handle",{get:function(){return this._handle},set:function(t){this._handle=t}}),Object.defineProperty(WallReshapingTool.prototype,"adornedShape",{get:function(){return this._adornedShape},set:function(t){this._adornedShape=t}}),Object.defineProperty(WallReshapingTool.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t}}),Object.defineProperty(WallReshapingTool.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t}}),Object.defineProperty(WallReshapingTool.prototype,"reshapeObjectName",{get:function(){return this._reshapeObjectName},set:function(t){this._reshapeObjectName=t}}),Object.defineProperty(WallReshapingTool.prototype,"isBuilding",{get:function(){return this._isBuilding},set:function(t){this._isBuilding=t}}),Object.defineProperty(WallReshapingTool.prototype,"returnData",{get:function(){return this._returnData},set:function(t){this._returnData=t}}),Object.defineProperty(WallReshapingTool.prototype,"returnPoint",{get:function(){return this._returnPoint},set:function(t){this._returnPoint=t}}),WallReshapingTool.prototype.updateAdornments=function(t){if(!(null===t||t instanceof go.Link)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.findObject(this.reshapeObjectName);if(e&&"WallGroup"===e.part.data.category){var i=t.findAdornment(this.name);if(null===i&&(i=this.makeAdornment(e)),null!==i&&null!=e.geometry){var n=e.geometry,o=n.bounds;return i.findObject("BODY").desiredSize=o.size,i.elements.each(function(t){if(t.name!==undefined){var e=0,i=0;switch(t.name){case"sPt":e=n.startX,i=n.startY;break;case"ePt":e=n.endX,i=n.endY}var r=Math.min((e-o.x)/o.width,1),a=Math.min((i-o.y)/o.height,1);r<0&&(r=0),a<0&&(a=0),r>1&&(r=1),a>1&&(a=1),isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.alignment=new go.Spot(Math.max(0,r),Math.max(0,a))}}),t.addAdornment(this.name,i),i.location=e.getDocumentPoint(go.Spot.Center),void(i.angle=e.getDocumentAngle())}}}t.removeAdornment(this.name)}},WallReshapingTool.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return null!==t&&!t.isReadOnly&&(!!t.allowReshape&&(!!t.lastInput.left&&(null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)||this.isBuilding)))},WallReshapingTool.prototype.doActivate=function(){var t=this.diagram;if(null!==t){if(this.isBuilding){var e=this.adornedShape.part;this.handle=this.findToolHandleAt(e.data.endpoint,this.name)}else{if(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return;var i=this.handle.part.adornedObject,e=i.part;if(!i)return;this.adornedShape=i,this.returnPoint=this.snapPointToGrid(t.firstInput.documentPoint);var n=e.memberParts;if(0!=n.count){var o=new go.Map("string",go.Point);n.iterator.each(function(t){o.add(t.data.key,t.location)}),this.returnData=o}}t.isMouseCaptured=!0,this.startTransaction(this.name),this.isActive=!0}},WallReshapingTool.prototype.doMouseMove=function(){var t=this.diagram,e=this;this.handle.part.adornedPart;if(this.isActive&&null!==t){var i=t.lastInput.documentPoint;e.calcAngleAndLengthFromHandle(i);var n=t.lastInput.documentPoint;t.floorplanUI&&t.floorplanUI.setSelectionInfo(this.adornedShape.part,t),this.reshape(n)}t.updateWallAngles()},WallReshapingTool.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive&&null!==t){var e=t.lastInput.documentPoint;this.reshape(e),this.transactionResult=this.name}this.stopTool()},WallReshapingTool.prototype.doDeactivate=function(){var t=this.diagram,e=(this.returnData,this.handle.part.adornedPart),i=e.data.startpoint,n=e.data.endpoint;if(Math.sqrt(i.distanceSquared(n.x,n.y))<1){t.remove(e),e.memberParts.iterator.each(function(e){t.remove(e)});var o=[];t.pointNodes.iterator.each(function(t){t.data.key.includes(e.data.key)&&o.push(t)}),t.remove(o[0]),t.remove(o[1])}"Esc"!==t.lastInput.key||this.isBuilding||(t.skipsUndoManager=!0,t.startTransaction("reset to old data"),"sPt"===this.handle.name?e.data.startpoint=this.returnPoint:e.data.endpoint=this.returnPoint,t.updateWall(e),this.returnData&&this.returnData.iterator.each(function(i){var n=i.key,o=i.value,r=t.findPartForKey(n);r.location=o,r.rotateObject.angle=e.rotateObject.angle}),t.commitTransaction("reset to old data"),t.skipsUndoManager=!1);var r=this.diagram.findNodesByExample({category:"GLPointNode"});t.removeParts(r,!0),t.updateWallDimensions(),t.commitTransaction(this.name),this.isActive=!1},WallReshapingTool.prototype.makeAdornment=function(t){var e=new go.Adornment;e.type=go.Panel.Spot,e.locationObjectName="BODY",e.locationSpot=go.Spot.Center;var i=new go.Shape;return i.name="BODY",i.fill=null,i.stroke=null,i.strokeWidth=0,e.add(i),i=this.makeHandle(),i.name="sPt",e.add(i),i=this.makeHandle(),i.name="ePt",e.add(i),e.category=this.name,e.adornedObject=t,e},WallReshapingTool.prototype.makeHandle=function(){return this.handleArchetype.copy()},WallReshapingTool.prototype.calcAngleAndLengthFromHandle=function(t){var e,i,n=this,o=(this.diagram,this.handle),r=this.adornedShape.part,a=r.adornments.iterator;a.each(function(t){t.category===n.name&&(i=t)}),i.elements.each(function(t){t.name!=undefined&&t.name!=o.name&&(e=t)});var s=e.getDocumentPoint(go.Spot.Center);deltaY=t.y-s.y,deltaX=t.x-s.x;var l=Math.atan2(deltaY,deltaX)*(180/Math.PI);l<0&&(l+=360),n.angle=l;var h=Math.sqrt(t.distanceSquared(s.x,s.y));n.length=h},WallReshapingTool.prototype.snapPointToGrid=function(t){var e=this.diagram,i=e.model.modelData.gridSize*Math.round(t.x/e.model.modelData.gridSize),n=e.model.modelData.gridSize*Math.round(t.y/e.model.modelData.gridSize);return new go.Point(i,n)},WallReshapingTool.prototype.reshape=function(t){var e=this.diagram,i=this,n=this.adornedShape,o=n.part;if(this.diagram.lastInput.shift){var r;r="sPt"===i.handle.name?o.data.endpoint:o.data.startpoint;var a=e.model.modelData.gridSize,s=e.model.modelData.gridSize;this.diagram.toolManager.draggingTool.isGridSnapEnabled||(s=1);var l=i.angle,h=i.length;if(l>67.5&&l<112.5){var u=r.y+h;u=s*Math.round(u/s),t=new go.Point(r.x,u)}if(l>112.5&&l<202.5){var c=r.x-h;c=s*Math.round(c/s),t=new go.Point(c,r.y)}if(l>247.5&&l<292.5){var u=r.y-h;u=s*Math.round(u/s),t=new go.Point(r.x,u)}if(l>337.5||l<22.5){var c=r.x+h;c=s*Math.round(c/s),t=new go.Point(c,r.y)}if(l>22.5&&l<67.5){var c=Math.sin(.785)*h;c=s*Math.round(c/s)+r.x;var u=Math.cos(.785)*h;u=s*Math.round(u/s)+r.y,t=new go.Point(c,u)}if(l>112.5&&l<157.5){var c=Math.sin(.785)*h;c=r.x-s*Math.round(c/s);var u=Math.cos(.785)*h;u=s*Math.round(u/s)+r.y,t=new go.Point(c,u)}if(l>202.5&&l<247.5){var c=Math.sin(.785)*h;c=r.x-s*Math.round(c/s);var u=Math.cos(.785)*h;u=r.y-s*Math.round(u/s),t=new go.Point(c,u)}if(l>292.5&&l<337.5){var c=Math.sin(.785)*h;c=r.x+s*Math.round(c/s);var u=Math.cos(.785)*h;u=r.y-s*Math.round(u/s),t=new go.Point(c,u)}s=a}t=this.diagram.toolManager.draggingTool.isGridSnapEnabled?this.snapPointToGrid(t):new go.Point(t.x,t.y);var f=this.handle.name;if(f!==undefined){switch(f){case"sPt":reshapeWall(o,o.data.endpoint,o.data.startpoint,t,e,i);break;case"ePt":reshapeWall(o,o.data.startpoint,o.data.endpoint,t,e,i)}this.updateAdornments(n.part),this.showMatches(),e.updateWallDimensions()}},WallReshapingTool.prototype.showMatches=function(){var t=this.diagram;if(t.model.modelData.preferences.showWallGuidelines){var e,i=this,n=this.adornedShape.part;e="sPt"===this.handle.name?n.data.startpoint:n.data.endpoint;var o=this.adornedShape.part,r=t.findNodesByExample({category:"GLPointNode"});t.removeParts(r,!0);this.diagram.findNodesByExample({category:"WallGroup"}).iterator.each(function(t){if(t.data.key!=o.data.key){var n=t.findObject("SHAPE"),r=(n.geometry,t.data.startpoint),a=t.data.endpoint;i.checkPtLinedUp(r,e.x,r.x,e),i.checkPtLinedUp(r,e.y,r.y,e),i.checkPtLinedUp(a,e.x,a.x,e),i.checkPtLinedUp(a,e.y,a.y,e)}})}},WallReshapingTool.prototype.checkPtLinedUp=function(t,e,i,n){function o(){var t=go.GraphObject.make;return t(go.Node,"Spot",{locationSpot:go.Spot.TopLeft,locationObjectName:"SHAPE",desiredSize:new go.Size(1,1)},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),t(go.Shape,{stroke:null,strokeWidth:1,name:"SHAPE",fill:"black"}))}function r(){var t=go.GraphObject.make;return t(go.Link,t(go.Shape,{stroke:"black",strokeWidth:2,name:"SHAPE"},new go.Binding("strokeWidth","width"),new go.Binding("stroke","stroke")))}var a=this.diagram;if(Math.abs(e-i)<2){var s={category:"GLPointNode",loc:go.Point.stringify(t)},l={key:"movingPt",category:"GLPointNode",loc:go.Point.stringify(n)},h={key:"guideline",category:"guideLine",from:"movingPt",to:s.key,stroke:"blue"},u=o(),c=o(),f=r();a.add(u),a.add(c),a.add(f),u.data=s,c.data=l,f.data=h,f.fromNode=u,f.toNode=c}},go.Diagram.inherit(GoTools,go.Diagram),Object.defineProperty(GoTools.prototype,"goToolsFilesSystem",{get:function(){return this._goToolsFilesSystem},set:function(t){this._goToolsFilesSystem=t instanceof GoToolsFilesSystem?t:null}}),Object.defineProperty(GoTools.prototype,"goToolsUI",{get:function(){return this._goToolsUI},set:function(t){this._goToolsUI=t instanceof GoToolsUI?t:null}}),Object.defineProperty(GoTools.prototype,"palettes",{get:function(){return this._palettes}}),Object.defineProperty(GoTools.prototype,"pointNodes",{get:function(){return this._pointNodes},set:function(t){this._pointNodes=t}}),Object.defineProperty(GoTools.prototype,"dimensionLinks",{get:function(){return this._dimensionLinks},set:function(){this._dimensionLinks=val}}),Object.defineProperty(GoTools.prototype,"angleNodes",{get:function(){return this._angleNodes},set:function(){this._angleNodes=val}}),GoTools.prototype.convertPixelsToUnits=function(t){var e=this.model.modelData.units;return"meters"===e?t/100*2:"feet"===e?t/30.48*2:"inches"===e?t/2.54*2:2*t},GoTools.prototype.convertUnitsToPixels=function(t){var e=this.model.modelData.units;return"meters"===e?100*t/2:"feet"===e?30.48*t/2:"inches"===e?2.54*t/2:t/2},GoTools.prototype.updateWall=function(t){var e=t.findObject("SHAPE"),i=new go.Geometry(go.Geometry.Line),n=t.data.startpoint,o=t.data.endpoint,r=new go.Point((n.x+o.x)/2,(n.y+o.y)/2);i.startX=0,i.startY=0,i.endX=Math.sqrt(n.distanceSquaredPoint(o)),i.endY=0,e.geometry=i,t.location=r
;var a=n.directionPoint(o);t.rotateObject.angle=a,this.updateWallDimensions()},GoTools.prototype.updateWallDimensions=function(){var t=this;if(t.skipsUndoManager=!0,t.startTransaction("update wall dimensions"),t.model.modelData.preferences&&!t.model.modelData.preferences.showWallLengths)return t.pointNodes.iterator.each(function(e){t.remove(e)}),t.dimensionLinks.iterator.each(function(e){t.remove(e)}),t.pointNodes.clear(),t.dimensionLinks.clear(),t.commitTransaction("update wall dimensions"),void(t.skipsUndoManager=!1);t.dimensionLinks.iterator.each(function(t){t.visible=!0});var e=t.selection,i=new go.Set(go.Group);e.iterator.each(function(e){if("WindowNode"!==e.category&&"DoorNode"!==e.category||null===e.containingGroup||i.add(e.containingGroup),"WallGroup"===e.category&&null!==e.data){var n=null;if(t.dimensionLinks.iterator.each(function(t){t.data.soloWallFlag&&t.data.wall===e.data.key&&(n=t)}),null!==n){var o=null,r=null;t.pointNodes.iterator.each(function(t){t.data.key===e.data.key+"PointNode1"&&(o=t),t.data.key===e.data.key+"PointNode2"&&(r=t)});var a=e.data.startpoint,s=e.data.endpoint,l=a.x+a.y<=s.x+s.y?a:s,h=a.x+a.y>s.x+s.y?a:s,u=getAdjustedPoint(l.copy(),e,e.rotateObject.angle,10),c=getAdjustedPoint(h.copy(),e,e.rotateObject.angle,10);o.data.loc=go.Point.stringify(u),r.data.loc=go.Point.stringify(c),n.data.angle=e.rotateObject.angle,o.updateTargetBindings(),r.updateTargetBindings(),n.updateTargetBindings()}else{var a=e.data.startpoint,s=e.data.endpoint,l=a.x+a.y<=s.x+s.y?a:s,h=a.x+a.y>s.x+s.y?a:s;buildDimensionLink(e,1,l.copy(),h.copy(),e.rotateObject.angle,10,!0,t)}}}),i.iterator.each(function(e){var i=e.data.startpoint,n=e.data.endpoint,o=i.x+i.y<=n.x+n.y?i:n,r=i.x+i.y>n.x+n.y?i:n,a=[];e.memberParts.iterator.each(function(t){if(t.isSelected){var e=getWallPartEndpoints(t);a.push(e[0]),a.push(e[1])}}),a.sort(function(t,e){return t.x+t.y>e.x+e.y?1:t.x+t.y<e.x+e.y?-1:0}),a.unshift(o),a.push(r);for(var s=e.rotateObject.angle,l=1,h=0;h<a.length-1;h++){var u=null;if(p=null,t.pointNodes.iterator.each(function(t){t.data.key===e.data.key+"PointNode"+l&&(u=t),t.data.key===e.data.key+"PointNode"+(l+1)&&(p=t)}),null!==u){var c=getAdjustedPoint(a[h].copy(),e,s,5),f=getAdjustedPoint(a[h+1].copy(),e,s,5);u.data.loc=go.Point.stringify(c),p.data.loc=go.Point.stringify(f),u.updateTargetBindings(),p.updateTargetBindings()}else buildDimensionLink(e,l,a[h].copy(),a[h+1].copy(),s,5,!1,t);l+=2}var d=null;if(t.dimensionLinks.iterator.each(function(t){t.fromNode.data.key===e.data.key+"PointNode"+l&&t.toNode.data.key===e.data.key+"PointNode"+(l+1)&&(d=t)}),null!==d){var u=null,p=null;t.pointNodes.iterator.each(function(t){t.data.key===e.data.key+"PointNode"+l&&(u=t),t.data.key===e.data.key+"PointNode"+(l+1)&&(p=t)});var c=getAdjustedPoint(a[0].copy(),e,s,25),f=getAdjustedPoint(a[a.length-1].copy(),e,s,25);u.data.loc=go.Point.stringify(c),p.data.loc=go.Point.stringify(f),u.updateTargetBindings(),p.updateTargetBindings()}else buildDimensionLink(e,l,a[0].copy(),a[a.length-1].copy(),s,25,!1,t)}),t.dimensionLinks.iterator.each(function(e){var i=!1;if(t.pointNodes.iterator.each(function(t){t.data.key==e.data.to&&(i=!0)}),i){Math.sqrt(e.toNode.location.distanceSquaredPoint(e.fromNode.location))<1&&!e.data.soloWallFlag&&(e.visible=!1)}else t.remove(e)}),t.commitTransaction("update wall dimensions"),t.skipsUndoManager=!1};var getWallsIntersection=function(t,e){if(null===t||null===e)return null;var i=t.data.endpoint.y-t.data.startpoint.y,n=t.data.startpoint.x-t.data.endpoint.x,o=i*t.data.startpoint.x+n*t.data.startpoint.y,r=e.data.endpoint.y-e.data.startpoint.y,a=e.data.startpoint.x-e.data.endpoint.x,s=r*e.data.startpoint.x+a*e.data.startpoint.y,l=i*a-r*n,h=null,u=null;if(0===l)return t.data.startpoint.equals(e.data.startpoint)||t.data.startpoint.equals(e.data.endpoint)?t.data.startpoint:t.data.endpoint.equals(e.data.startpoint)||t.data.endpoint.equals(e.data.endpoint)?t.data.endpoint:null;h=(a*o-n*s)/l,u=(i*s-r*o)/l;var c=Math.min(t.data.startpoint.x,t.data.endpoint.x)<=h&&Math.max(t.data.startpoint.x,t.data.endpoint.x)>=h&&Math.min(t.data.startpoint.y,t.data.endpoint.y)<=u&&Math.max(t.data.startpoint.y,t.data.endpoint.y)>=u,f=Math.min(e.data.startpoint.x,e.data.endpoint.x)<=h&&Math.max(e.data.startpoint.x,e.data.endpoint.x)>=h&&Math.min(e.data.startpoint.y,e.data.endpoint.y)<=u&&Math.max(e.data.startpoint.y,e.data.endpoint.y)>=u;return c&&f?new go.Point(h,u):null};GoTools.prototype.updateWallAngles=function(){var t=this;if(t.skipsUndoManager=!0,t.startTransaction("display angles"),t.model.modelData.preferences&&t.model.modelData.preferences.showWallAngles){t.angleNodes.iterator.each(function(t){t.visible=!0});var e=[];t.selection.iterator.each(function(t){"WallGroup"===t.category&&e.push(t)});for(var i=0;i<e.length;i++){var n=new go.Set("string"),o=e[i];t.findNodesByExample({category:"WallGroup"}).iterator.each(function(e){if(null!==e.data&&null!==o.data&&!n.contains(e.data.key)&&e.data.key!==o.data.key&&null!==getWallsIntersection(o,e)&&!n.contains(e.data.key)){n.add(e.data.key);var i=getWallsIntersection(o,e),r=t.findObjectsNear(i,1,function(t){if(null!==t.part)return t.part},function(t){return"WallGroup"===t.category},!1),a=[];r.iterator.each(function(e){var n=t.model.modelData.gridSize>=10?t.model.modelData.gridSize:10;Math.sqrt(e.data.startpoint.distanceSquaredPoint(i))>n&&a.push({point:e.data.startpoint,wall:e.data.key}),Math.sqrt(e.data.endpoint.distanceSquaredPoint(i))>n&&a.push({point:e.data.endpoint,wall:e.data.key})});for(var s=30,l=0;l<a.length;l++){var h=Math.sqrt(a[l].point.distanceSquaredPoint(i));h<s&&(s=h)}a.sort(function(t,e){if(t=t.point,e=e.point,t.x-i.x>=0&&e.x-i.x<0)return!0;if(t.x-i.x<0&&e.x-i.x>=0)return!1;if(t.x-i.x==0&&e.x-i.x==0)return t.y-i.y>=0||e.y-i.y>=0?t.y>e.y:e.y>t.y;var n=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y);return n<0||!(n>0)&&(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)>(e.x-i.x)*(e.x-i.x)+(e.y-i.y)*(e.y-i.y)});for(var l=0;l<a.length;l++){var u=a[l];if(null!=a[l+1])var c=a[l+1];else var c=a[0];var f=i.directionPoint(u.point),d=i.directionPoint(c.point),p=Math.abs(d-f+360)%360,g=f,y=[];r.iterator.each(function(t){y.push(t)}),y.sort(function(t,e){var i=t.data.key.match(/\d+/g),n=e.data.key.match(/\d+/g);return!!isNaN(i)||!isNaN(n)&&i>n});for(var m="",v=0;v<y.length;v++)m+=y[v].data.key;m+="angle"+l;var b=null;if(t.angleNodes.iterator.each(function(t){t.data.key===m&&(b=t)}),null!==b)b.data.angle=g,b.data.sweep=p,b.data.loc=go.Point.stringify(i),b.data.maxRadius=s,b.updateTargetBindings();else{var x={key:m,category:"AngleNode",loc:go.Point.stringify(i),stroke:"dodgerblue",angle:g,sweep:p,maxRadius:s},w=$$(go.Node,"Spot",{locationSpot:go.Spot.Center,locationObjectName:"SHAPE",selectionAdorned:!1},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),$$(go.Shape,"Circle",{name:"SHAPE",fill:"red",height:0,width:0}),$$(go.Shape,{stroke:"green",strokeWidth:1.5,fill:null},new go.Binding("geometry","",function(t){var e=t.data.angle,i=t.data.sweep,n=Math.min(30,t.data.maxRadius);if("number"==typeof i&&i>0){var o=new go.Point(n,0).rotate(e);return(new go.Geometry).add(new go.PathFigure(o.x+n,o.y+n).add(new go.PathSegment(go.PathSegment.Arc,e,i,n,n,n,n))).add(new go.PathFigure(0,0)).add(new go.PathFigure(2*n,2*n))}return(new go.Geometry).add(new go.PathFigure(0,0)).add(new go.PathFigure(2*n,2*n))}).ofObject(),new go.Binding("stroke","sweep",function(t){return t%45<1||t%45>44?"dodgerblue":"lightblue"})),$$(go.Panel,"Auto",{name:"ARCLABEL"},new go.Binding("alignment","sweep",function(t,e){var i=Math.min(30,e.part.data.maxRadius),n=e.part.data.angle,o=new go.Point(i,0).rotate(n+t/2);return new go.Spot(.5,.5,o.x,o.y)}),$$(go.Shape,{stroke:"black",fill:"white"},new go.Binding("stroke","sweep",function(t){return t%45<1||t%45>44?"dodgerblue":"lightblue"})),$$(go.TextBlock,{font:"7pt sans-serif",margin:new go.Margin(2,2,2,2)},new go.Binding("text","sweep",function(t){return t.toFixed(2)+String.fromCharCode(176)}),new go.Binding("stroke","color"))));w.data=x,t.add(w),w.updateTargetBindings(),t.angleNodes.add(w)}}}})}var r=[];t.angleNodes.iterator.each(function(e){for(var i=e.data.key.match(/\d+/g),n=(e.data.key.match(/wall/g)||[]).length,o=[],a=0;a<i.length-1;a++)o.push("wall"+i[a]);n!==i.length-1&&o.push("wall");for(var a=0;a<o.length-1;a++){var s=t.findPartForKey(o[a]),l=t.findPartForKey(o[a+1]);null===getWallsIntersection(s,l)&&r.push(e)}var h=new go.Set(go.Node),u=e.data.key.slice(0,e.data.key.indexOf("angle"));t.angleNodes.iterator.each(function(t){t.data.key.includes(u)&&h.add(t)}),h.iterator.each(function(t){t.data.loc!==e.data.loc&&r.push(t)}),0===e.data.sweep&&r.push(e)});for(var i=0;i<r.length;i++)t.remove(r[i]),t.angleNodes.remove(r[i])}t.model.modelData.preferences&&t.model.modelData.preferences.showOnlySmallWallAngles&&t.angleNodes.iterator.each(function(t){t.data.sweep>=180&&(t.visible=!1)}),t.model.modelData.preferences&&!t.model.modelData.preferences.showWallAngles&&t.angleNodes.iterator.each(function(t){t.visible=!1}),t.commitTransaction("display angles"),t.skipsUndoManager=!1};var $$=go.GraphObject.make,demo={};demo.color_box=function(){for(var t=[],e=0;e<1e3;e++)t.push({color:go.Brush.randomColor(),category:"color_box"});goTools.layout=$$(go.Layout),goTools.model=new go.Model(t)},demo.circuit=function(){var t=function(){setTimeout(function(){e(),t()},250)},e=function(){var t=goTools.skipsUndoManager;goTools.skipsUndoManager=!0,goTools.nodes.each(function(t){"input"===t.category&&o(t)}),goTools.nodes.each(function(t){switch(t.category){case"circuit.and":r(t);break;case"circuit.or":l(t);break;case"circuit.xor":u(t);break;case"circuit.not":s(t);break;case"circuit.nand":a(t);break;case"circuit.nor":h(t);break;case"circuit.xnor":c(t);break;case"circuit.output":f(t)}}),goTools.skipsUndoManager=t},i=function(t){return"forestgreen"===t.findObject("SHAPE").stroke},n=function(t,e){t.findLinksOutOf().each(function(t){t.findObject("SHAPE").stroke=e})},o=function(t){n(t,t.findObject("NODESHAPE").fill)},r=function(t){var e=t.findLinksInto().all(i)?"forestgreen":"orangered";n(t,e)},a=function(t){var e=t.findLinksInto().all(i)?"orangered":"forestgreen";n(t,e)},s=function(t){var e=t.findLinksInto().all(i)?"orangered":"forestgreen";n(t,e)},l=function(t){var e=t.findLinksInto().any(i)?"forestgreen":"orangered";n(t,e)},h=function(t){var e=t.findLinksInto().any(i)?"orangered":"forestgreen";n(t,e)},u=function(t){var e=0;t.findLinksInto().each(function(t){i(t)&&e++}),n(t,e%2==0?"forestgreen":"orangered")},c=function(t){var e=0;t.findLinksInto().each(function(t){i(t)&&e++}),n(t,e%2!=0?"forestgreen":"orangered")},f=function(t){t.linksConnected.each(function(e){t.findObject("NODESHAPE").fill=e.findObject("SHAPE").stroke})};goTools.linkTemplate=goTools.linkTemplateMap.getValue("circuit"),goTools.layout=$$(go.Layout),goTools.model=go.Model.fromJson({"class":"go.GraphLinksModel",linkFromPortIdProperty:"fromPort",linkToPortIdProperty:"toPort",nodeDataArray:[{category:"circuit.input",key:"input1",loc:"-150 -80"},{category:"circuit.or",key:"or1",loc:"-70 0"},{category:"circuit.not",key:"not1",loc:"10 0"},{category:"circuit.xor",key:"xor1",loc:"100 0"},{category:"circuit.or",key:"or2",loc:"200 0"},{category:"circuit.output",key:"output1",loc:"200 -100"}],linkDataArray:[{from:"input1",fromPort:"out",to:"or1",toPort:"in1",category:"circuit"},{from:"or1",fromPort:"out",to:"not1",toPort:"in",category:"circuit"},{from:"not1",fromPort:"out",to:"or1",toPort:"in2",category:"circuit"},{from:"not1",fromPort:"out",to:"xor1",toPort:"in1",category:"circuit"},{from:"xor1",fromPort:"out",to:"or2",toPort:"in1",category:"circuit"},{from:"or2",fromPort:"out",to:"xor1",toPort:"in2",category:"circuit"},{from:"xor1",fromPort:"out",to:"output1",toPort:"",category:"circuit"}]}),t()},demo.flowchart=function(){goTools.layout=$$(go.Layout),goTools.model=go.Model.fromJson({"class":"go.GraphLinksModel",linkFromPortIdProperty:"fromPort",linkToPortIdProperty:"toPort",nodeDataArray:[{category:"flowchart.comment",loc:"360 -10",text:"Kookie Brittle",key:-13},{key:"A comment",text:"comment\nabout Alpha",category:"comment"},{key:-1,category:"flowchart.start",loc:"175 0",text:"Start"},{key:0,category:"flowchart.normal",loc:"0 77",text:"Preheat oven to 375 F"},{key:1,category:"flowchart.normal",loc:"175 100",text:"In a bowl, blend: 1 cup margarine, 1.5 teaspoon vanilla, 1 teaspoon salt"},{key:2,category:"flowchart.normal",loc:"175 190",text:"Gradually beat in 1 cup sugar and 2 cups sifted flour"},{key:3,category:"flowchart.normal",loc:"175 270",text:"Mix in 6 oz (1 cup) Nestle's Semi-Sweet Chocolate Morsels"},{key:4,category:"flowchart.normal",loc:"175 370",text:"Press evenly into ungreased 15x10x1 pan"},{key:5,category:"flowchart.normal",loc:"352 85",text:"Finely chop 1/2 cup of your choice of nuts"},{key:6,category:"flowchart.normal",loc:"175 440",text:"Sprinkle nuts on top"},{key:7,category:"flowchart.normal",loc:"175 500",text:"Bake for 25 minutes and let cool"},{key:8,category:"flowchart.normal",loc:"175 570",text:"Cut into rectangular grid"},{key:-2,category:"flowchart.end",loc:"175 640",text:"Enjoy!"}],linkDataArray:[{from:"A comment",to:1,category:"comment"},{from:1,to:2,category:"flowchart",fromPort:"B",toPort:"T"},{from:2,to:3,category:"flowchart",fromPort:"B",toPort:"T"},{from:3,to:4,category:"flowchart",fromPort:"B",toPort:"T"},{from:4,to:6,category:"flowchart",fromPort:"B",toPort:"T"},{from:6,to:7,category:"flowchart",fromPort:"B",toPort:"T"},{from:7,to:8,category:"flowchart",fromPort:"B",toPort:"T"},{from:8,to:-2,category:"flowchart",fromPort:"B",toPort:"T"},{from:-1,to:0,category:"flowchart",fromPort:"B",toPort:"T"},{from:-1,to:1,category:"flowchart",fromPort:"B",toPort:"T"},{from:-1,to:5,category:"flowchart",fromPort:"B",toPort:"T"},{from:5,to:4,category:"flowchart",fromPort:"B",toPort:"T"},{from:0,to:4,category:"flowchart",fromPort:"B",toPort:"T"}]})},demo.class_hierarchy=function(){var t=[];for(k in go){var e=go[k];if(e){var i=e.prototype;if(i){i.constructor.className=k;var n=Object.getPrototypeOf(i).constructor;n===Object?t.push({key:k,category:"class_hierarchy"}):t.push({key:k,category:"class_hierarchy",parent:n.className})}}}goTools.linkTemplate=goTools.linkTemplateMap.getValue("class_hierarchy"),goTools.layout=$$(go.TreeLayout,{nodeSpacing:3}),goTools.model=new go.TreeModel(t);var o=[];goTools.nodes.each(function(t){0===t.linksConnected.count&&o.push(t.data)}),goTools.model.removeNodeDataCollection(o)},demo.dom_tree=function(){function t(i,n,o){if(n===undefined&&(n=null),o===undefined&&(o=[]),i instanceof Element&&"navindex"!==i.id&&"navtop"!==i.id){var r=e(i),a={key:r,name:r,category:"dom"};o.push(a),null!==n&&(a.parent=n);for(var s=i.childNodes.length,l=0;l<s;l++)t(i.childNodes[l],r,o);return o}}function e(t){var e=t.nodeName;t.id&&(e=e+" ("+t.id+")");for(var i=e,n=1;window.dom_names[i]!==undefined;)i=e+n,n++;return window.dom_names[i]=t,i}window.dom_names={},goTools.layout=$$(go.TreeLayout,{nodeSpacing:5,layerSpacing:30}),goTools.model=$$(go.TreeModel,{isReadOnly:!0,nodeDataArray:t(document.activeElement)})},demo.icon=function(){goTools.layout=$$(go.TreeLayout),goTools.model=new go.GraphLinksModel([{key:1,category:"icon",geo:"file",color:"#00B5CB"},{key:2,category:"icon",geo:"alarm",color:"#F47321"},{key:3,category:"icon",geo:"lab",color:"#00B5CB"},{key:4,category:"icon",geo:"earth",color:"#00B5CB"},{key:5,category:"icon",geo:"heart",color:"#C8DA2B"},{key:6,category:"icon",geo:"arrow-up-right",color:"#00B5CB"},{key:7,category:"icon",geo:"html5",color:"#F47321"},{key:8,category:"icon",geo:"twitter",color:"#F47321"}],[{from:1,to:2},{from:1,to:3},{from:3,to:4},{from:4,to:5},{from:4,to:6},{from:3,to:7},{from:3,to:8}])},demo.entity_relationship=function(){var t=[{key:"Products",category:"entity_relationship",items:[{name:"ProductID",iskey:!0,figure:"Decision",color:goTools.brushes.yellowgrad},{name:"ProductName",iskey:!1,figure:"Cube1",color:goTools.brushes.bluegrad},{name:"SupplierID",iskey:!1,figure:"Decision",color:"purple"},{name:"CategoryID",iskey:!1,figure:"Decision",color:"purple"}]},{key:"Suppliers",category:"entity_relationship",items:[{name:"SupplierID",iskey:!0,figure:"Decision",color:goTools.brushes.yellowgrad},{name:"CompanyName",iskey:!1,figure:"Cube1",color:goTools.brushes.bluegrad},{name:"ContactName",iskey:!1,figure:"Cube1",color:goTools.brushes.bluegrad},{name:"Address",iskey:!1,figure:"Cube1",color:goTools.brushes.bluegrad}]},{key:"Categories",category:"entity_relationship",items:[{name:"CategoryID",iskey:!0,figure:"Decision",color:goTools.brushes.yellowgrad},{name:"CategoryName",iskey:!1,figure:"Cube1",color:goTools.brushes.bluegrad},{name:"Description",iskey:!1,figure:"Cube1",color:goTools.brushes.bluegrad},{name:"Picture",iskey:!1,figure:"TriangleUp",color:goTools.brushes.redgrad}]},{key:"Order Details",category:"entity_relationship",items:[{name:"OrderID",iskey:!0,figure:"Decision",color:goTools.brushes.yellowgrad},{name:"ProductID",iskey:!0,figure:"Decision",color:goTools.brushes.yellowgrad},{name:"UnitPrice",iskey:!1,figure:"MagneticData",color:goTools.brushes.greengrad},{name:"Quantity",iskey:!1,figure:"MagneticData",color:goTools.brushes.greengrad},{name:"Discount",iskey:!1,figure:"MagneticData",color:goTools.brushes.greengrad}]}],e=[{category:"entity_relationship",from:"Products",to:"Suppliers",text:"0..N",toText:"1"},{category:"entity_relationship",from:"Products",to:"Categories",text:"0..N",toText:"1"},{category:"entity_relationship",from:"Order Details",to:"Products",text:"0..N",toText:"1"}];goTools.layout=$$(go.ForceDirectedLayout),goTools.model=new go.GraphLinksModel(t,e)},demo.gantt=function(){goTools.layout=$$(go.Layout),goTools.model=new go.GraphLinksModel([{key:"a",category:"gantt",color:"coral",width:120,loc:new go.Point(0,40)},{key:"b",category:"gantt",color:"turquoise",width:160,loc:new go.Point(0,60)},{key:"c",category:"gantt",color:"coral",width:150,loc:new go.Point(120,80)},{key:"d",category:"gantt",color:"turquoise",width:190,loc:new go.Point(120,100)},{key:"e",category:"gantt",color:"coral",width:150,loc:new go.Point(270,120)},{key:"f",category:"gantt",color:"turquoise",width:130,loc:new go.Point(310,140)},{key:"g",category:"gantt",color:"coral",width:155,loc:new go.Point(420,160)},{key:"begin",category:"gantt_start",loc:new go.Point(-15,20)},{key:"end",category:"gantt_end",loc:new go.Point(575,180)},{key:"23Jul",category:"gantt_date",loc:new go.Point(0,0)},{key:"30Jul",category:"gantt_date",loc:new go.Point(150,0)},{key:"6Aug",category:"gantt_date",loc:new go.Point(300,0)},{key:"13Aug",category:"gantt_date",loc:new go.Point(450,0)}],[{category:"gantt",from:"begin",to:"a"},{category:"gantt",from:"begin",to:"b"},{category:"gantt",from:"a",to:"c"},{category:"gantt",from:"a",to:"d"},{category:"gantt",from:"b",to:"e"},{category:"gantt",from:"c",to:"e"},{category:"gantt",from:"d",to:"f"},{category:"gantt",from:"e",to:"g"},{category:"gantt",from:"f",to:"end"},{category:"gantt",from:"g",to:"end"}])},demo.uml=function(){var t=[{key:1,category:"uml",name:"BankAccount",properties:[{name:"owner",type:"String",visibility:"public"},{name:"balance",type:"Currency",visibility:"public","default":"0"}],methods:[{name:"deposit",parameters:[{name:"amount",type:"Currency"}],visibility:"public"},{name:"withdraw",parameters:[{name:"amount",type:"Currency"}],visibility:"public"}]},{key:11,category:"uml",name:"Person",properties:[{name:"name",type:"String",visibility:"public"},{name:"birth",type:"Date",visibility:"protected"}],methods:[{name:"getCurrentAge",type:"int",visibility:"public"}]},{key:12,category:"uml",name:"Student",properties:[{name:"classes",type:"List",visibility:"public"}],methods:[{name:"attend",parameters:[{name:"class",type:"Course"}],visibility:"private"},{name:"sleep",visibility:"private"}]},{key:13,category:"uml",name:"Professor",properties:[{name:"classes",type:"List",visibility:"public"}],methods:[{name:"teach",parameters:[{name:"class",type:"Course"}],visibility:"private"}]},{key:14,category:"uml",name:"Course",properties:[{name:"name",type:"String",visibility:"public"},{name:"description",type:"String",visibility:"public"},{name:"professor",type:"Professor",visibility:"public"},{name:"location",type:"String",visibility:"public"},{name:"times",type:"List",visibility:"public"},{name:"prerequisites",type:"List",visibility:"public"},{name:"students",type:"List",visibility:"public"}]}],e=[{category:"uml",from:12,to:11,relationship:"generalization"},{category:"uml",from:13,to:11,relationship:"generalization"},{category:"uml",from:14,to:13,relationship:"aggregation"}];goTools.layout=$$(go.TreeLayout,{angle:90,path:go.TreeLayout.PathSource,setsPortSpot:!1,setsChildPortSpot:!1,arrangement:go.TreeLayout.ArrangementHorizontal}),goTools.model=$$(go.GraphLinksModel,{copiesArrays:!0,copiesArrayObjects:!0,nodeDataArray:t,linkDataArray:e})},demo.process_flow=function(){function t(){setTimeout(function(){var e=goTools.skipsUndoManager;goTools.skipsUndoManager=!0,goTools.links.each(function(t){var e=t.findObject("PIPE"),i=e.strokeDashOffset-2;console.log(e),e.strokeDashOffset=i<=0?20:i}),goTools.skipsUndoManager=e,t()},100)}goTools.layout=$$(go.Layout),goTools.model=go.Model.fromJson({"class":"go.GraphLinksModel",nodeDataArray:[{key:"P1",category:"process_flow",pos:"150 120",text:"Process"},{key:"P2",category:"process_flow",pos:"330 320",text:"Tank"},{key:"V1",category:"process_flow_value",pos:"270 120",text:"V1"},{key:"P3",category:"process_flow",pos:"150 420",text:"Pump"},{key:"V2",category:"process_flow_value",pos:"150 280",text:"VM",angle:270},{key:"V3",category:"process_flow_value",pos:"270 420",text:"V2",angle:180},{key:"P4",category:"process_flow",pos:"450 140",text:"Reserve Tank"},{key:"V4",category:"process_flow_value",pos:"390 60",text:"VA"},{key:"V5",category:"process_flow_value",pos:"450 260",text:"VB",angle:90}],linkDataArray:[{category:"process_flow",from:"P1",to:"V1"},{category:"process_flow",from:"P3",to:"V2"},{category:"process_flow",from:"V2",to:"P1"},{category:"process_flow",from:"P2",to:"V3"},{category:"process_flow",from:"V3",to:"P3"},{category:"process_flow",from:"V1",to:"V4"},{category:"process_flow",from:"V4",to:"P4"},{category:"process_flow",from:"V1",to:"P2"},{category:"process_flow",from:"P4",to:"V5"},{category:"process_flow",from:"V5",to:"P2"}]}),t()},demo.state_chart=function(){goTools.layout=$$(go.Layout),goTools.model=go.Model.fromJson({nodeKeyProperty:"id",nodeDataArray:[{category:"state_chart",id:0,loc:"120 120",text:"Initial"},{category:"state_chart",id:1,loc:"330 120",text:"First down"},{category:"state_chart",id:2,loc:"226 376",text:"First up"},{category:"state_chart",id:3,loc:"60 276",text:"Second down"},{category:"state_chart",id:4,loc:"226 226",text:"Wait"}],linkDataArray:[{category:"state_chart",from:0,to:0,text:"up or timer",curviness:-20},{category:"state_chart",from:0,to:1,text:"down",curviness:20},{category:"state_chart",from:1,to:0,text:"up (moved)\nPOST",curviness:20},{category:"state_chart",from:1,to:1,text:"down",curviness:-20},{category:"state_chart",from:1,to:2,text:"up (no move)"},{category:"state_chart",from:1,to:4,text:"timer"},{category:"state_chart",from:2,to:0,text:"timer\nPOST"},{category:"state_chart",from:2,to:3,text:"down"},{category:"state_chart",from:3,to:0,text:"up\nPOST\n(dblclick\nif no move)"},{category:"state_chart",from:3,to:3,text:"down or timer",curviness:20},{category:"state_chart",from:4,to:0,text:"up\nPOST"},{category:"state_chart",from:4,to:4,text:"down"}]})},demo.freehand_drawing=function(){goTools.layout=$$(go.Layout),goTools.model=go.Model.fromJson({"class":"go.GraphLinksModel",nodeDataArray:[{loc:"301 143",category:"FreehandDrawing",geo:"M0 70 L1 70 L2 70 L3 70 L5 70 L7 70 L8 70 L11 70 L13 70 L18 69 L21 69 L25 68 L29 67 L34 67 L38 67 L42 67 L47 66 L50 66 L53 66 L55 66 L57 66 L60 66 L63 66 L64 66 L66 66 L68 66 L70 66 L72 66 L74 66 L76 66 L78 65 L81 65 L83 65 L85 65 L88 65 L90 65 L92 65 L95 65 L98 65 L100 65 L102 65 L104 65 L106 65 L109 65 L110 65 L111 65 L112 65 L113 65 L114 65 L115 65 L116 65 L118 65 L119 65 L120 65 L121 65 L122 65 L123 65 L124 65 L125 65 L126 65 L127 65 L128 65 L129 65 L131 65 L131 64 L132 64 L133 64 L134 64 L135 64 L137 64 L138 64 L139 64 L140 64 L141 64 L140 64 L139 64 L138 64 L137 64 L135 65 L134 65 L132 66 L130 67 L129 67 L126 68 L123 70 L121 71 L119 72 L116 73 L114 74 L111 76 L109 77 L106 78 L104 79 L99 81 L96 84 L94 84 L90 87 L89 87 L87 88 L86 89 L84 89 L83 90 L81 91 L80 92 L79 92 L77 93 L76 94 L74 94 L74 95 L73 96 L71 96 L70 97 L68 98 L67 98 L66 99 L64 99 L64 100 L62 100 L61 101 L60 102 L59 102 L58 103 L57 103 L57 104 L56 104 L56 105 L54 105 L54 107 L53 107 L52 108 L51 108 L51 109 L49 110 L48 111 L47 112 L47 113 L46 113 L45 114 L44 114 L44 115 L44 116 L43 116 L43 117 L42 117 L42 119 L41 119 L41 120 L40 120 L40 121 L39 122 L39 123 L38 124 L37 125 L36 126 L36 127 L35 128 L34 128 L34 129 L33 130 L33 131 L32 131 L32 130 L32 129 L33 128 L34 125 L35 122 L37 119 L39 115 L41 111 L41 106 L43 103 L45 98 L47 93 L48 90 L49 86 L51 83 L52 81 L54 78 L55 74 L55 71 L56 68 L57 65 L58 62 L58 59 L58 55 L58 53 L58 51 L58 49 L58 48 L59 45 L60 44 L60 42 L61 40 L61 38 L62 36 L64 32 L64 30 L65 29 L66 27 L66 26 L66 25 L66 24 L67 23 L67 22 L67 21 L67 20 L67 19 L68 19 L68 18 L68 17 L69 16 L69 15 L69 14 L69 12 L69 11 L69 10 L70 9 L70 8 L70 7 L70 6 L71 5 L71 4 L71 3 L71 2 L71 1 L71 0 L71 1 L71 2 L71 5 L71 6 L71 8 L71 9 L71 12 L71 14 L72 16 L72 18 L73 20 L73 23 L74 25 L74 27 L75 29 L76 32 L77 34 L78 35 L79 38 L79 39 L81 42 L81 43 L82 45 L83 46 L83 47 L83 49 L85 50 L86 52 L86 55 L86 58 L88 60 L89 62 L89 64 L90 66 L91 67 L91 69 L92 70 L92 71 L93 72 L94 73 L94 74 L94 75 L95 76 L96 77 L96 79 L97 81 L98 82 L98 83 L98 84 L99 85 L99 86 L100 87 L100 90 L101 91 L102 92 L102 93 L103 95 L103 96 L103 97 L104 98 L104 100 L104 101 L105 102 L106 103 L106 104 L107 106 L108 108 L109 110 L110 111 L111 113 L112 114 L113 115 L113 117 L115 119 L116 121 L116 123 L118 124 L119 126 L120 127 L121 129 L121 130 L122 131 L123 131 L123 132 L124 132 L124 133 L125 134 L125 135 L126 135 L127 136 L128 137 L129 138 L130 139 L131 140 L130 139 L129 138 L128 138 L126 136 L124 136 L123 134 L121 133 L118 131 L116 130 L114 128 L111 127 L107 123 L105 122 L102 120 L100 119 L98 117 L95 116 L93 114 L90 113 L88 111 L85 110 L83 108 L81 106 L78 105 L77 104 L75 103 L72 102 L71 101 L70 100 L68 99 L67 98 L65 98 L64 97 L62 96 L60 96 L58 95 L57 94 L54 93 L53 93 L51 92 L49 91 L48 91 L47 91 L45 90 L44 90 L43 89 L42 89 L41 89 L40 88 L39 87 L37 87 L36 86 L35 85 L33 85 L32 84 L31 84 L30 83 L29 83 L28 82 L26 81 L25 81 L24 80 L22 80 L21 79 L21 78 L20 78 L19 78 L18 77 L17 77 L16 76 L15 76 L15 75 L14 75 L13 75 L12 74 L11 74 L10 74 L9 74 L7 73 L5 72 L4 72 L3 72 L2 71",key:-1}],linkDataArray:[]})},demo.sankey=function(){goTools.layout=$$(SankeyLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.LayerOptimalLinkLength,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackMedian,layerSpacing:150,columnSpacing:1}),goTools.model=go.Model.fromJson({"class":"go.GraphLinksModel",nodeDataArray:[{category:"sankey",key:"Coal reserves",text:"Coal reserves",color:"#9d75c2"},{category:"sankey",key:"Coal imports",text:"Coal imports",color:"#9d75c2"},{category:"sankey",key:"Oil reserves",text:"Oil\nreserves",color:"#9d75c2"},{category:"sankey",key:"Oil imports",text:"Oil imports",color:"#9d75c2"},{category:"sankey",key:"Gas reserves",text:"Gas reserves",color:"#a1e194"},{category:"sankey",key:"Gas imports",text:"Gas imports",color:"#a1e194"},{category:"sankey",key:"UK land based bioenergy",text:"UK land based bioenergy",color:"#f6bcd5"},{category:"sankey",key:"Marine algae",text:"Marine algae",color:"#681313"},{category:"sankey",key:"Agricultural 'waste'",text:"Agricultural 'waste'",color:"#3483ba"},{category:"sankey",key:"Other waste",text:"Other waste",color:"#c9b7d8"},{category:"sankey",key:"Biomass imports",text:"Biomass imports",color:"#fea19f"},{category:"sankey",key:"Biofuel imports",text:"Biofuel imports",color:"#d93c3c"},{category:"sankey",key:"Coal",text:"Coal",color:"#9d75c2"},{category:"sankey",key:"Oil",text:"Oil",color:"#9d75c2"},{category:"sankey",key:"Natural gas",text:"Natural\ngas",color:"#a6dce6"},{category:"sankey",key:"Solar",text:"Solar",color:"#c9a59d"},{category:"sankey",key:"Solar PV",text:"Solar PV",color:"#c9a59d"},{category:"sankey",key:"Bio-conversion",text:"Bio-conversion",color:"#b5cbe9"},{category:"sankey",key:"Solid",text:"Solid",color:"#40a840"},{category:"sankey",key:"Liquid",text:"Liquid",color:"#fe8b25"},{category:"sankey",key:"Gas",text:"Gas",color:"#a1e194"},{category:"sankey",key:"Nuclear",text:"Nuclear",color:"#fea19f"},{category:"sankey",key:"Thermal generation",text:"Thermal\ngeneration",color:"#3483ba"},{category:"sankey",key:"CHP",text:"CHP",color:"yellow"},{category:"sankey",key:"Electricity imports",text:"Electricity imports",color:"yellow"},{category:"sankey",key:"Wind",text:"Wind",color:"#cbcbcb"},{category:"sankey",key:"Tidal",text:"Tidal",color:"#6f3a5f"},{category:"sankey",key:"Wave",text:"Wave",color:"#8b8b8b"},{category:"sankey",key:"Geothermal",text:"Geothermal",color:"#556171"},{category:"sankey",key:"Hydro",text:"Hydro",color:"#7c3e06"},{category:"sankey",key:"Electricity grid",text:"Electricity grid",color:"#e483c7"},{category:"sankey",key:"H2 conversion",text:"H2 conversion",color:"#868686"},{category:"sankey",key:"Solar Thermal",text:"Solar Thermal",color:"#c9a59d"},{category:"sankey",key:"H2",text:"H2",color:"#868686"},{category:"sankey",key:"Pumped heat",text:"Pumped heat",color:"#96665c"},{category:"sankey",key:"District heating",text:"District heating",color:"#c9b7d8"},{category:"sankey",key:"Losses",ltext:"Losses",color:"#fec184"},{category:"sankey",key:"Over generation / exports",ltext:"Over generation / exports",color:"#f6bcd5"},{category:"sankey",key:"Heating and cooling - homes",ltext:"Heating and cooling - homes",color:"#c7a39b"},{category:"sankey",key:"Road transport",ltext:"Road transport",color:"#cbcbcb"},{category:"sankey",key:"Heating and cooling - commercial",ltext:"Heating and cooling - commercial",color:"#c9a59d"},{category:"sankey",key:"Industry",ltext:"Industry",color:"#96665c"},{category:"sankey",key:"Lighting & appliances - homes",ltext:"Lighting & appliances - homes",color:"#2dc3d2"},{category:"sankey",key:"Lighting & appliances - commercial",ltext:"Lighting & appliances - commercial",color:"#2dc3d2"},{category:"sankey",key:"Agriculture",ltext:"Agriculture",color:"#5c5c10"},{category:"sankey",key:"Rail transport",ltext:"Rail transport",color:"#6b6b45"},{category:"sankey",key:"Domestic aviation",ltext:"Domestic aviation",color:"#40a840"},{category:"sankey",key:"National navigation",ltext:"National navigation",color:"#a1e194"},{category:"sankey",key:"International aviation",ltext:"International aviation",color:"#fec184"},{category:"sankey",key:"International shipping",ltext:"International shipping",color:"#fec184"},{category:"sankey",key:"Geosequestration",ltext:"Geosequestration",color:"#fec184"}],linkDataArray:[{category:"sankey",from:"Coal reserves",to:"Coal",width:31},{category:"sankey",from:"Coal imports",to:"Coal",width:86},{category:"sankey",from:"Oil reserves",to:"Oil",width:244},{category:"sankey",from:"Oil imports",to:"Oil",width:1},{category:"sankey",from:"Gas reserves",to:"Natural gas",width:182},{category:"sankey",from:"Gas imports",to:"Natural gas",width:61},{category:"sankey",from:"UK land based bioenergy",to:"Bio-conversion",width:1},{category:"sankey",from:"Marine algae",to:"Bio-conversion",width:1},{category:"sankey",from:"Agricultural 'waste'",to:"Bio-conversion",width:1},{category:"sankey",from:"Other waste",to:"Bio-conversion",width:8},{category:"sankey",from:"Other waste",to:"Solid",width:1},{category:"sankey",from:"Biomass imports",to:"Solid",width:1},{category:"sankey",from:"Biofuel imports",to:"Liquid",width:1},{category:"sankey",from:"Coal",to:"Solid",width:117},{category:"sankey",from:"Oil",to:"Liquid",width:244},{category:"sankey",from:"Natural gas",to:"Gas",width:244},{category:"sankey",from:"Solar",to:"Solar PV",width:1},{category:"sankey",from:"Solar PV",to:"Electricity grid",width:1},{category:"sankey",from:"Solar",to:"Solar Thermal",width:1},{category:"sankey",from:"Bio-conversion",to:"Solid",width:3},{category:"sankey",from:"Bio-conversion",to:"Liquid",width:1},{category:"sankey",from:"Bio-conversion",to:"Gas",width:5},{category:"sankey",from:"Bio-conversion",to:"Losses",width:1},{category:"sankey",from:"Solid",to:"Over generation / exports",width:1},{category:"sankey",from:"Liquid",to:"Over generation / exports",width:18},{category:"sankey",from:"Gas",to:"Over generation / exports",width:1},{category:"sankey",from:"Solid",to:"Thermal generation",width:106},{
category:"sankey",from:"Liquid",to:"Thermal generation",width:2},{category:"sankey",from:"Gas",to:"Thermal generation",width:87},{category:"sankey",from:"Nuclear",to:"Thermal generation",width:41},{category:"sankey",from:"Thermal generation",to:"District heating",width:2},{category:"sankey",from:"Thermal generation",to:"Electricity grid",width:92},{category:"sankey",from:"Thermal generation",to:"Losses",width:142},{category:"sankey",from:"Solid",to:"CHP",width:1},{category:"sankey",from:"Liquid",to:"CHP",width:1},{category:"sankey",from:"Gas",to:"CHP",width:1},{category:"sankey",from:"CHP",to:"Electricity grid",width:1},{category:"sankey",from:"CHP",to:"Losses",width:1},{category:"sankey",from:"Electricity imports",to:"Electricity grid",width:1},{category:"sankey",from:"Wind",to:"Electricity grid",width:1},{category:"sankey",from:"Tidal",to:"Electricity grid",width:1},{category:"sankey",from:"Wave",to:"Electricity grid",width:1},{category:"sankey",from:"Geothermal",to:"Electricity grid",width:1},{category:"sankey",from:"Hydro",to:"Electricity grid",width:1},{category:"sankey",from:"Electricity grid",to:"H2 conversion",width:1},{category:"sankey",from:"Electricity grid",to:"Over generation / exports",width:1},{category:"sankey",from:"Electricity grid",to:"Losses",width:6},{category:"sankey",from:"Gas",to:"H2 conversion",width:1},{category:"sankey",from:"H2 conversion",to:"H2",width:1},{category:"sankey",from:"H2 conversion",to:"Losses",width:1},{category:"sankey",from:"Solar Thermal",to:"Heating and cooling - homes",width:1},{category:"sankey",from:"H2",to:"Road transport",width:1},{category:"sankey",from:"Pumped heat",to:"Heating and cooling - homes",width:1},{category:"sankey",from:"Pumped heat",to:"Heating and cooling - commercial",width:1},{category:"sankey",from:"CHP",to:"Heating and cooling - homes",width:1},{category:"sankey",from:"CHP",to:"Heating and cooling - commercial",width:1},{category:"sankey",from:"District heating",to:"Heating and cooling - homes",width:1},{category:"sankey",from:"District heating",to:"Heating and cooling - commercial",width:1},{category:"sankey",from:"District heating",to:"Industry",width:2},{category:"sankey",from:"Electricity grid",to:"Heating and cooling - homes",width:7},{category:"sankey",from:"Solid",to:"Heating and cooling - homes",width:3},{category:"sankey",from:"Liquid",to:"Heating and cooling - homes",width:3},{category:"sankey",from:"Gas",to:"Heating and cooling - homes",width:81},{category:"sankey",from:"Electricity grid",to:"Heating and cooling - commercial",width:7},{category:"sankey",from:"Solid",to:"Heating and cooling - commercial",width:1},{category:"sankey",from:"Liquid",to:"Heating and cooling - commercial",width:2},{category:"sankey",from:"Gas",to:"Heating and cooling - commercial",width:19},{category:"sankey",from:"Electricity grid",to:"Lighting & appliances - homes",width:21},{category:"sankey",from:"Gas",to:"Lighting & appliances - homes",width:2},{category:"sankey",from:"Electricity grid",to:"Lighting & appliances - commercial",width:18},{category:"sankey",from:"Gas",to:"Lighting & appliances - commercial",width:2},{category:"sankey",from:"Electricity grid",to:"Industry",width:30},{category:"sankey",from:"Solid",to:"Industry",width:13},{category:"sankey",from:"Liquid",to:"Industry",width:34},{category:"sankey",from:"Gas",to:"Industry",width:54},{category:"sankey",from:"Electricity grid",to:"Agriculture",width:1},{category:"sankey",from:"Solid",to:"Agriculture",width:1},{category:"sankey",from:"Liquid",to:"Agriculture",width:1},{category:"sankey",from:"Gas",to:"Agriculture",width:1},{category:"sankey",from:"Electricity grid",to:"Road transport",width:1},{category:"sankey",from:"Liquid",to:"Road transport",width:122},{category:"sankey",from:"Electricity grid",to:"Rail transport",width:2},{category:"sankey",from:"Liquid",to:"Rail transport",width:1},{category:"sankey",from:"Liquid",to:"Domestic aviation",width:2},{category:"sankey",from:"Liquid",to:"National navigation",width:4},{category:"sankey",from:"Liquid",to:"International aviation",width:38},{category:"sankey",from:"Liquid",to:"International shipping",width:13},{category:"sankey",from:"Electricity grid",to:"Geosequestration",width:1},{category:"sankey",from:"Gas",to:"Losses",width:2}]})},demo.pert=function(){var t=[{category:"pert",key:1,text:"Start",length:0,earlyStart:0,lateFinish:0,critical:!0},{category:"pert",key:2,text:"a",length:4,earlyStart:0,lateFinish:4,critical:!0},{category:"pert",key:3,text:"b",length:5.33,earlyStart:0,lateFinish:9.17,critical:!1},{category:"pert",key:4,text:"c",length:5.17,earlyStart:4,lateFinish:9.17,critical:!0},{category:"pert",key:5,text:"d",length:6.33,earlyStart:4,lateFinish:15.01,critical:!1},{category:"pert",key:6,text:"e",length:5.17,earlyStart:9.17,lateFinish:14.34,critical:!0},{category:"pert",key:7,text:"f",length:4.5,earlyStart:10.33,lateFinish:19.51,critical:!1},{category:"pert",key:8,text:"g",length:5.17,earlyStart:14.34,lateFinish:19.51,critical:!0},{category:"pert",key:9,text:"Finish",length:0,earlyStart:19.51,lateFinish:19.51,critical:!0}],e=[{category:"pert",from:1,to:2},{category:"pert",from:1,to:3},{category:"pert",from:2,to:4},{category:"pert",from:2,to:5},{category:"pert",from:3,to:6},{category:"pert",from:4,to:6},{category:"pert",from:5,to:7},{category:"pert",from:6,to:8},{category:"pert",from:7,to:9},{category:"pert",from:8,to:9}];goTools.layout=$$(go.LayeredDigraphLayout),goTools.model=new go.GraphLinksModel(t,e),goTools.add($$(go.Node,"Auto",$$(go.Shape,"Rectangle",{fill:"#B3E5FC"}),$$(go.Panel,"Table",$$(go.RowColumnDefinition,{column:1,separatorStroke:"black"}),$$(go.RowColumnDefinition,{column:2,separatorStroke:"black"}),$$(go.RowColumnDefinition,{row:1,separatorStroke:"black",background:"#B3E5FC",coversSeparators:!0}),$$(go.RowColumnDefinition,{row:2,separatorStroke:"black"}),$$(go.TextBlock,"Early Start",{row:0,column:0,margin:5,textAlign:"center"}),$$(go.TextBlock,"Length",{row:0,column:1,margin:5,textAlign:"center"}),$$(go.TextBlock,"Early Finish",{row:0,column:2,margin:5,textAlign:"center"}),$$(go.TextBlock,"Activity Name",{row:1,column:0,columnSpan:3,margin:5,textAlign:"center",font:"bold 14px sans-serif"}),$$(go.TextBlock,"Late Start",{row:2,column:0,margin:5,textAlign:"center"}),$$(go.TextBlock,"Slack",{row:2,column:1,margin:5,textAlign:"center"}),$$(go.TextBlock,"Late Finish",{row:2,column:2,margin:5,textAlign:"center"}))))},demo.floor_planner=function(){goTools.goToolsFilesSystem.loadGoToolsFromModel({"class":"go.GraphLinksModel",modelData:{units:"centimeters",unitsAbbreviation:"cm",gridSize:10,wallWidth:5,preferences:{showWallGuidelines:!0,showWallLengths:!0,showWallAngles:!0,showOnlySmallWallAngles:!0,showGrid:!0,gridSnap:!0}},nodeDataArray:[{key:"wall",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-430,y:240},endpoint:{"class":"go.Point",x:-430,y:-240},strokeWidth:10,isGroup:!0,notes:""},{key:"wall3",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-430,y:-240},endpoint:{"class":"go.Point",x:260,y:-240},strokeWidth:10,isGroup:!0,notes:""},{key:"wall4",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:260,y:-240},endpoint:{"class":"go.Point",x:260,y:240},strokeWidth:5,isGroup:!0,notes:""},{key:"wall5",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:260,y:140},endpoint:{"class":"go.Point",x:550,y:140},strokeWidth:5,isGroup:!0,notes:""},{key:"wall6",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:260,y:240},endpoint:{"class":"go.Point",x:390,y:240},strokeWidth:5,isGroup:!0,notes:""},{key:"wall7",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:550,y:140},endpoint:{"class":"go.Point",x:550,y:400},strokeWidth:5,isGroup:!0,notes:""},{key:"wall8",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:390,y:240},endpoint:{"class":"go.Point",x:390,y:400},strokeWidth:5,isGroup:!0,notes:""},{key:"wall9",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:390,y:400},endpoint:{"class":"go.Point",x:550,y:400},strokeWidth:5,isGroup:!0,notes:""},{key:"staircase",category:"FurnitureNode",color:"#ffffff",stroke:"#000000",caption:"Staircase",type:"Staircase",geo:"F1 M0 0 L 0 100 250 100 250 0 0 0 M25 100 L 25 0 M 50 100 L 50 0 M 75 100 L 75 0 M 100 100 L 100 0 M 125 100 L 125 0 M 150 100 L 150 0 M 175 100 L 175 0 M 200 100 L 200 0 M 225 100 L 225 0",width:125,height:50,notes:"",loc:"430 330",angle:270},{key:"staircase2",category:"FurnitureNode",color:"#ffffff",stroke:"#000000",caption:"Staircase",type:"Staircase",geo:"F1 M0 0 L 0 100 250 100 250 0 0 0 M25 100 L 25 0 M 50 100 L 50 0 M 75 100 L 75 0 M 100 100 L 100 0 M 125 100 L 125 0 M 150 100 L 150 0 M 175 100 L 175 0 M 200 100 L 200 0 M 225 100 L 225 0",width:125,height:50,notes:"",loc:"500 330",angle:270},{key:"wall10",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-230,y:-130},endpoint:{"class":"go.Point",x:70,y:-130},strokeWidth:5,isGroup:!0,notes:""},{key:"wall11",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:70,y:-130},endpoint:{"class":"go.Point",x:130,y:-70},strokeWidth:5,isGroup:!0,notes:""},{key:"wall12",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:130,y:-70},endpoint:{"class":"go.Point",x:130,y:40},strokeWidth:5,isGroup:!0,notes:""},{key:"wall13",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:130,y:40},endpoint:{"class":"go.Point",x:70,y:100},strokeWidth:5,isGroup:!0,notes:""},{key:"wall14",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:70,y:100},endpoint:{"class":"go.Point",x:-230,y:100},strokeWidth:5,isGroup:!0,notes:""},{key:"wall15",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-230,y:-130},endpoint:{"class":"go.Point",x:-290,y:-70},strokeWidth:5,isGroup:!0,notes:""},{key:"wall16",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-290,y:-70},endpoint:{"class":"go.Point",x:-290,y:40},strokeWidth:5,isGroup:!0,notes:""},{key:"wall17",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-290,y:40},endpoint:{"class":"go.Point",x:-230,y:100},strokeWidth:5,isGroup:!0,notes:""},{key:"door",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:56,doorOpeningHeight:5,swing:"left",notes:"",loc:"260 188.20000076293945",group:"wall4",angle:90},{key:"diningTable",category:"FurnitureNode",color:"#704332",stroke:"#8FBCCD",caption:"Dining Table",type:"Dining Table",geo:"F1 M 0 0 L 0 100 200 100 200 0 0 0 M 25 0 L 25 -10 75 -10 75 0 M 125 0 L 125 -10 175 -10 175 0 M 200 25 L 210 25 210 75 200 75 M 125 100 L 125 110 L 175 110 L 175 100 M 25 100 L 25 110 75 110 75 100 M 0 75 -10 75 -10 25 0 25",width:205,height:70.5,notes:"",loc:"-80 -20"},{key:"wall18",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:550,y:-240},endpoint:{"class":"go.Point",x:550,y:140},strokeWidth:5,isGroup:!0,notes:""},{key:"wall19",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:260,y:-240},endpoint:{"class":"go.Point",x:310,y:-310},strokeWidth:5,isGroup:!0,notes:""},{key:"wall20",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:310,y:-310},endpoint:{"class":"go.Point",x:500,y:-310},strokeWidth:5,isGroup:!0,notes:""},{key:"wall21",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:500,y:-310},endpoint:{"class":"go.Point",x:550,y:-240},strokeWidth:5,isGroup:!0,notes:""},{key:"door2",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"left",notes:"",loc:"-290 5.200000762939453",group:"wall16",angle:90},{category:"WindowNode",key:"window",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:5,width:230,notes:"",loc:"-80.80000019073492 -130.00000000000006",group:"wall10"},{category:"WindowNode",key:"window2",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:5,width:230,notes:"",loc:"-80.80000019073492 100.00000000000003",group:"wall14",angle:180},{category:"WindowNode",key:"window3",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"-400 -240",group:"wall3"},{category:"WindowNode",key:"window32",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"-234.80000019073486 -240",group:"wall3"},{category:"WindowNode",key:"window4",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"-89.80000019073486 -240",group:"wall3"},{category:"WindowNode",key:"window5",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"80.19999980926514 -240",group:"wall3"},{category:"WindowNode",key:"window6",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"201.19999980926514 -240",group:"wall3"},{category:"WindowNode",key:"window7",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:175,notes:"",loc:"-430 -152.5",group:"wall",angle:90},{category:"WindowNode",key:"window8",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:233,notes:"",loc:"-430 123.49999999999999",group:"wall",angle:270},{key:"wall32",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-430,y:240},endpoint:{"class":"go.Point",x:260,y:240},strokeWidth:10,isGroup:!0,notes:""},{category:"WindowNode",key:"window33",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"-400 240",group:"wall32"},{category:"WindowNode",key:"window322",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"-234.80000019073486 240",group:"wall32"},{category:"WindowNode",key:"window42",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"-89.80000019073486 240",group:"wall32"},{category:"WindowNode",key:"window52",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"80.19999980926514 240",group:"wall32"},{category:"WindowNode",key:"window62",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:"",loc:"201.19999980926514 240",group:"wall32"},{key:"wall2",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:260,y:0},endpoint:{"class":"go.Point",x:380,y:0},strokeWidth:5,isGroup:!0,notes:""},{key:"door5",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"right",notes:"",loc:"-290 -34.79999923706055",angle:90,group:"wall16"},{key:"door52",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"left",notes:"",loc:"130 -37.79999923706055",angle:270,group:"wall12"},{key:"door22",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"right",notes:"",loc:"130 2.200000762939453",group:"wall12",angle:270},{key:"sink",category:"FurnitureNode",color:"#c0c0c0",stroke:"#3F3F3F",caption:"Sink",type:"Sink",geo:"F1 M0 0 L40 0 40 40 0 40 0 0z M5 7.5 L18.5 7.5 M 21.5 7.5 L35 7.5 35 35 5 35 5 7.5 M 15 21.25 A 5 5 180 1 0 15 21.24 M23 3.75 A 3 3 180 1 1 23 3.74 M21.5 6.25 L 21.5 12.5 18.5 12.5 18.5 6.25 M15 3.75 A 1 1 180 1 1 15 3.74 M 10 4.25 L 10 3.25 13 3.25 M 13 4.25 L 10 4.25 M27 3.75 A 1 1 180 1 1 27 3.74 M 26.85 3.25 L 30 3.25 30 4.25 M 26.85 4.25 L 30 4.25",width:27,height:27,notes:"",loc:"361.5 110",angle:180,group:-52},{key:"shower",category:"FurnitureNode",color:"#b9cece",stroke:"#463131",caption:"Shower/Tub",type:"Shower/Tub",geo:"F1 M0 0 L40 0 40 60 0 60 0 0 M35 15 L35 55 5 55 5 15 Q5 5 20 5 Q35 5 35 15 M22.5 20 A2.5 2.5 180 1 1 22.5 19.99",width:57,height:109,notes:"",loc:"296 67",group:-52},{key:"toilet",category:"FurnitureNode",color:"#f7f9e3",stroke:"#08061C",caption:"Toilet",type:"Toilet",geo:"F1 M0 0 L25 0 25 10 0 10 0 0 M20 10 L20 15 5 15 5 10 20 10 M5 15 Q0 15 0 25 Q0 40 12.5 40 Q25 40 25 25 Q25 15 20 15",width:25,height:35,notes:"",loc:"350 30",group:-52},{key:"wall22",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:380,y:0},endpoint:{"class":"go.Point",x:380,y:140},strokeWidth:5,isGroup:!0,notes:""},{key:"door3",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:36,doorOpeningHeight:5,swing:"left",notes:"",loc:"380 65.20000076293945",group:"wall22",angle:270},{key:"wall23",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:430,y:0},endpoint:{"class":"go.Point",x:550,y:0},strokeWidth:5,isGroup:!0,notes:""},{key:"wall24",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:430,y:0},endpoint:{"class":"go.Point",x:430,y:140},strokeWidth:5,isGroup:!0,notes:""},{isGroup:!0,category:"FloorPlannerDefault",key:-52,caption:"Group",notes:""},{isGroup:!0,category:"FloorPlannerDefault",key:-53,caption:"Group",notes:""},{key:"shower2",category:"FurnitureNode",color:"#b9cece",stroke:"#463131",caption:"Shower/Tub",type:"Shower/Tub",geo:"F1 M0 0 L40 0 40 60 0 60 0 0 M35 15 L35 55 5 55 5 15 Q5 5 20 5 Q35 5 35 15 M22.5 20 A2.5 2.5 180 1 1 22.5 19.99",width:57,height:109,notes:"",loc:"510 70",group:-53},{key:"toilet2",category:"FurnitureNode",color:"#f7f9e3",stroke:"#08061C",caption:"Toilet",type:"Toilet",geo:"F1 M0 0 L25 0 25 10 0 10 0 0 M20 10 L20 15 5 15 5 10 20 10 M5 15 Q0 15 0 25 Q0 40 12.5 40 Q25 40 25 25 Q25 15 20 15",width:25,height:35,notes:"",loc:"460 30",group:-53},{key:"sink2",category:"FurnitureNode",color:"#c0c0c0",stroke:"#3F3F3F",caption:"Sink",type:"Sink",geo:"F1 M0 0 L40 0 40 40 0 40 0 0z M5 7.5 L18.5 7.5 M 21.5 7.5 L35 7.5 35 35 5 35 5 7.5 M 15 21.25 A 5 5 180 1 0 15 21.24 M23 3.75 A 3 3 180 1 1 23 3.74 M21.5 6.25 L 21.5 12.5 18.5 12.5 18.5 6.25 M15 3.75 A 1 1 180 1 1 15 3.74 M 10 4.25 L 10 3.25 13 3.25 M 13 4.25 L 10 4.25 M27 3.75 A 1 1 180 1 1 27 3.74 M 26.85 3.25 L 30 3.25 30 4.25 M 26.85 4.25 L 30 4.25",width:27,height:27,notes:"",loc:"460 112",angle:180,group:-53},{key:"door32",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:36,doorOpeningHeight:5,swing:"left",notes:"",loc:"430 69.20000076293945",group:"wall24",angle:90},{key:"sofaMedium",category:"FurnitureNode",color:"#c6a8c5",stroke:"#39573A",caption:"Sofa",type:"Sofa",geo:"F1 M0 0 L80 0 80 40 0 40 0 0 M10 35 L10 10 M0 0 Q8 0 10 10 M0 40 Q40 15 80 40 M70 10 Q72 0 80 0 M70 10 L70 35",height:45,width:90,notes:"",loc:"320 -40"},{key:"sofaMedium2",category:"FurnitureNode",color:"#c6a8c5",stroke:"#39573A",caption:"Sofa",type:"Sofa",geo:"F1 M0 0 L80 0 80 40 0 40 0 0 M10 35 L10 10 M0 0 Q8 0 10 10 M0 40 Q40 15 80 40 M70 10 Q72 0 80 0 M70 10 L70 35",height:45,width:90,notes:"",loc:"490 -40"},{key:"roundTable",category:"FurnitureNode",color:"#dadada",stroke:"#252525",caption:"Round Table",type:"Round Table",shape:"Ellipse",width:61,height:61,notes:"",loc:"410 -170",group:-74},{category:"MultiPurposeNode",key:"MultiPurposeNode",caption:"Multi Purpose Node",color:"#ffffff",stroke:"#000000",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Fridge",width:55,height:40,notes:"",loc:"342.5 -287.5"},{key:"doubleSink",category:"FurnitureNode",color:"#d9d9d9",stroke:"#262626",caption:"Double Sink",type:"Double Sink",geo:"F1 M0 0 L75 0 75 40 0 40 0 0 M5 7.5 L35 7.5 35 35 5 35 5 7.5 M44 7.5 L70 7.5 70 35 40 35 40 9 M15 21.25 A5 5 180 1 0 15 21.24 M50 21.25 A 5 5 180 1 0 50 21.24 M40.5 3.75 A3 3 180 1 1 40.5 3.74 M40.5 3.75 L50.5 13.75 47.5 16.5 37.5 6.75 M32.5 3.75 A 1 1 180 1 1 32.5 3.74 M 27.5 4.25 L 27.5 3.25 30.5 3.25 M 30.5 4.25 L 27.5 4.25 M44.5 3.75 A 1 1 180 1 1 44.5 3.74 M 44.35 3.25 L 47.5 3.25 47.5 4.25 M 44.35 4.25 L 47.5 4.25",height:27,width:52,notes:"",loc:"510 -260",angle:53.07333893129521},{category:"WindowNode",key:"window9",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:5,width:60,notes:"",loc:"284.9054049801182 -274.8675669721655",group:"wall19",angle:305.5376777919744},{category:"WindowNode",key:"window10",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:5,width:60,notes:"",loc:"522.9324327288447 -277.8945941796174",group:"wall21",angle:234.46232220802563},{category:"MultiPurposeNode",key:"MultiPurposeNode3",caption:"Multi Purpose Node",color:"#f7f9e3",stroke:"#08061C",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Fridge",width:55,height:40,notes:"",loc:"342.5 -287.5"},{category:"MultiPurposeNode",key:"MultiPurposeNode32",caption:"Multi Purpose Node",color:"#f7f9e3",stroke:"#08061C",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Counter",width:55,height:40,notes:"",loc:"395 -287"},{category:"WindowNode",key:"window11",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:5,width:60,notes:"",loc:"397.19999980926514 -310",group:"wall20"},{key:"door4",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:56,doorOpeningHeight:5,swing:"left",notes:"",loc:"260 -179.79999923706055",group:"wall4",angle:90},{key:"stove",category:"FurnitureNode",color:"#f7f9e3",stroke:"#08061C",caption:"Stove",type:"Stove",geo:"F1 M 0 0 L 0 100 100 100 100 0 0 0 M 30 15 A 15 15 180 1 0 30.01 15 M 70 15 A 15 15 180 1 0 70.01 15M 30 55 A 15 15 180 1 0 30.01 55 M 70 55 A 15 15 180 1 0 70.01 55",width:55,height:40,notes:"",loc:"450.22782650708155 -288"},{key:"armChair",category:"FurnitureNode",color:"#c0c0c0",stroke:"#3F3F3F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:32.865,height:32,notes:"",loc:"410 -120",group:-74},{key:"armChair2",category:"FurnitureNode",color:"#c0c0c0",stroke:"#3F3F3F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:32.865,height:32,notes:"",loc:"460 -170",angle:270,group:-74},{key:"armChair22",category:"FurnitureNode",color:"#c0c0c0",stroke:"#3F3F3F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:32.865,height:32,notes:"",loc:"410 -220",angle:180,group:-74},{key:"armChair222",category:"FurnitureNode",color:"#c0c0c0",stroke:"#3F3F3F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:32.865,height:32,notes:"",loc:"360 -170",angle:90,group:-74},{isGroup:!0,category:"FloorPlannerDefault",key:-74,caption:"Group",notes:""},{key:"wall25",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-300,y:-240},endpoint:{"class":"go.Point",x:-300,y:-180},strokeWidth:5,isGroup:!0,notes:""},{key:"wall252",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-160,y:-240},endpoint:{"class":"go.Point",x:-160,y:-180},strokeWidth:5,isGroup:!0,notes:""},{key:"wall2522",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:0,y:-240},endpoint:{"class":"go.Point",x:0,y:-180},strokeWidth:5,isGroup:!0,notes:""},{key:"wall25222",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:140,y:-240},endpoint:{"class":"go.Point",x:140,y:-180},strokeWidth:5,isGroup:!0,notes:""},{key:"wall253",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-300,y:180},endpoint:{"class":"go.Point",x:-300,y:240},strokeWidth:5,isGroup:!0,notes:""},{key:"wall2523",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-160,y:180},endpoint:{"class":"go.Point",x:-160,y:240},strokeWidth:5,isGroup:!0,notes:""},{key:"wall25223",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:0,y:180},endpoint:{"class":"go.Point",x:0,y:240},strokeWidth:5,isGroup:!0,notes:""},{key:"wall252222",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:140,y:180},endpoint:{"class":"go.Point",x:140,y:240},strokeWidth:5,isGroup:!0,notes:""},{key:"armChair3",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"-231.93243243243245 -192.5"},{category:"MultiPurposeNode",key:"MultiPurposeNode2",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"-232 -220"},{category:"MultiPurposeNode",key:"MultiPurposeNode25",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"-230 221"},{key:"armChair35",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"-230 190",angle:180},{key:"armChair352",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"-80 190",angle:180},{category:"MultiPurposeNode",key:"MultiPurposeNode252",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"-80 220"},{key:"armChair353",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"70 190",angle:180},{category:"MultiPurposeNode",key:"MultiPurposeNode253",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"70 220"},{key:"armChair3532",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"200 190",angle:180},{category:"MultiPurposeNode",key:"MultiPurposeNode2532",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"200 220"},{key:"armChair32",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"-80 -190"},{category:"MultiPurposeNode",key:"MultiPurposeNode22",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"-80 -220"},{category:"MultiPurposeNode",key:"MultiPurposeNode222",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"70 -220"},{key:"armChair322",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"70 -190"},{key:"armChair3222",category:"FurnitureNode",color:"#e1ddd0",stroke:"#1E222F",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:29,height:27,notes:"",loc:"200 -190"},{category:"MultiPurposeNode",key:"MultiPurposeNode2222",caption:"Multi Purpose Node",color:"#e1ddd0",stroke:"#1E222F",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:116,height:14,notes:"",loc:"200 -220"},{key:"sofaMedium3",category:"FurnitureNode",color:"#b9fde0",stroke:"#46021F",caption:"Sofa",type:"Sofa",geo:"F1 M0 0 L80 0 80 40 0 40 0 0 M10 35 L10 10 M0 0 Q8 0 10 10 M0 40 Q40 15 80 40 M70 10 Q72 0 80 0 M70 10 L70 35",height:27,width:90,notes:"",loc:"-410 -30",angle:90},{key:"sofaMedium32",category:"FurnitureNode",color:"#b9fde0",stroke:"#46021F",caption:"Sofa",type:"Sofa",geo:"F1 M0 0 L80 0 80 40 0 40 0 0 M10 35 L10 10 M0 0 Q8 0 10 10 M0 40 Q40 15 80 40 M70 10 Q72 0 80 0 M70 10 L70 35",height:27,width:90,notes:"",loc:"240 -20",angle:270},{category:"MultiPurposeNode",key:"MultiPurposeNode4",caption:"Multi Purpose Node",color:"#d6b196",stroke:"#294E69",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:60,height:23,notes:"",loc:"-381.1676743184333 -190.94449856461264",angle:137.27258112448646},{key:"wall26",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-300,y:-180},endpoint:{"class":"go.Point",x:-380,y:-100},strokeWidth:5,isGroup:!0,notes:""},{key:"wall27",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-380,y:-100},endpoint:{"class":"go.Point",x:-430,y:-100},strokeWidth:5,isGroup:!0,notes:""},{key:"wall28",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-300,y:180},endpoint:{"class":"go.Point",x:-380,y:100},strokeWidth:5,isGroup:!0,notes:""},{key:"wall29",category:"WallGroup",caption:"Wall",type:"Wall",startpoint:{"class":"go.Point",x:-380,y:100},endpoint:{"class":"go.Point",x:-430,y:100},strokeWidth:5,isGroup:!0,notes:""},{key:"armChair4",category:"FurnitureNode",color:"#d6b196",stroke:"#294E69",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:21,height:21,notes:"",loc:"-400 -210",angle:135},{key:"roundTable2",category:"FurnitureNode",color:"#d6dfc8",stroke:"#292037",caption:"Plant",type:"Round Table",shape:"Ellipse",width:21,height:21,notes:"",loc:"-402.5 -116.5",text:"Plant"},{key:"armChair42",category:"FurnitureNode",color:"#d6b196",stroke:"#294E69",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:21,height:21,notes:"",loc:"-400 210",angle:45},{category:"MultiPurposeNode",key:"MultiPurposeNode42",caption:"Multi Purpose Node",color:"#d6b196",stroke:"#294E69",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Desk",width:60,height:23,notes:"",loc:"-380 190",angle:47.002533598871146},{key:"roundTable22",category:"FurnitureNode",color:"#d6dfc8",stroke:"#292037",caption:"Plant",type:"Round Table",shape:"Ellipse",width:21,height:21,notes:"",loc:"-400 120",text:"Plant"},{key:"roundTable222",category:"FurnitureNode",color:"#d6dfc8",stroke:"#292037",caption:"Plant",type:"Round Table",shape:"Ellipse",width:21,height:21,notes:"",loc:"-320 200",text:"Plant"},{key:"door6",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"left",notes:"",loc:"-334.00000047683716 -145.99999952316284",group:"wall26",angle:315},{key:"door7",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"left",notes:"",loc:"-343.7999997138977 136.2000002861023",group:"wall28",angle:225}],linkDataArray:[]})},demo.wheel=function(){for(var t=["Joshua","Daniel","Robert","Noah","Anthony","Elizabeth","Addison","Alexis","Ella","Samantha","Joseph","Scott","James","Ryan","Benjamin","Walter","Gabriel","Christian","Nathan","Simon","Isabella","Emma","Olivia","Sophia","Ava","Emily","Madison","Tina","Elena","Mia","Jacob","Ethan","Michael","Alexander","William","Natalie","Grace","Lily","Alyssa","Ashley","Sarah","Taylor","Hannah","Brianna","Hailey","Christopher","Aiden","Matthew","David","Andrew","Kaylee","Juliana","Leah","Anna","Allison","John","Samuel","Tyler","Dylan","Jonathan"],e=[],i=0;i<t.length;i++)e.push({category:"wheel",key:i,text:t[i],color:go.Brush.randomColor(128,240)});for(var n=[],o=e.length,i=0;i<2*o;i++){var r=Math.floor(Math.random()*o),a=Math.floor(Math.random()*o/4)+1;n.push({category:"wheel",from:r,
to:(r+a)%o,color:go.Brush.randomColor(0,127)})}goTools.layout=$$(WheelLayout,{arrangement:go.CircularLayout.ConstantDistance,nodeDiameterFormula:go.CircularLayout.Circular,spacing:10,aspectRatio:.7,sorting:go.CircularLayout.Optimized}),goTools.model=new go.GraphLinksModel(e,n)},demo.seating=function(){goTools.layout=$$(go.Layout),goTools.model=new go.GraphLinksModel([{key:1,category:"TableR3",name:"Head 1",guests:{},loc:"143.5 58"},{key:2,category:"TableR3",name:"Head 2",guests:{},loc:"324.5 58"},{key:3,category:"TableR8",name:"3",guests:{},loc:"121.5 203.5"},{key:4,category:"TableC8",name:"4",guests:{},loc:"364.5 223.5"}])},demo.timeline=function(){for(var t=[{key:"timeline",category:"timeline_line",lineSpacing:30,length:700,start:new Date("1 Jan 2016"),end:new Date("31 Dec 2016")},{category:"timeline",event:"New Year's Day",date:new Date("1 Jan 2016")},{category:"timeline",event:"MLK Jr. Day",date:new Date("18 Jan 2016")},{category:"timeline",event:"Presidents Day",date:new Date("15 Feb 2016")},{category:"timeline",event:"Memorial Day",date:new Date("30 May 2016")},{category:"timeline",event:"Independence Day",date:new Date("4 Jul 2016")},{category:"timeline",event:"Labor Day",date:new Date("5 Sep 2016")},{category:"timeline",event:"Columbus Day",date:new Date("10 Oct 2016")},{category:"timeline",event:"Veterans Day",date:new Date("11 Nov 2016")},{category:"timeline",event:"Thanksgiving",date:new Date("24 Nov 2016")},{category:"timeline",event:"Christmas",date:new Date("25 Dec 2016")}],e=0;e<t.length;e++){var i=t[e];"timeline"!==i.key&&(i.parent="timeline")}goTools.layout=$$(TimelineLayout),goTools.linkTemplate=goTools.linkTemplateMap.getValue("timeline"),goTools.model=$$(go.TreeModel,{nodeDataArray:t})},demo.sequence=function(){goTools.layout=$$(go.Layout),goTools.linkingTool=$$(MessagingTool),goTools.model=go.Model.fromJson({"class":"go.GraphLinksModel",nodeDataArray:[{category:"sequence",key:"Fred",text:"Fred: Patron",isGroup:!0,loc:"0 0",duration:9},{category:"sequence",key:"Bob",text:"Bob: Waiter",isGroup:!0,loc:"100 0",duration:9},{category:"sequence",key:"Hank",text:"Hank: Cook",isGroup:!0,loc:"200 0",duration:9},{category:"sequence",key:"Renee",text:"Renee: Cashier",isGroup:!0,loc:"300 0",duration:9},{category:"sequence",group:"Bob",start:1,duration:2},{category:"sequence",group:"Hank",start:2,duration:3},{category:"sequence",group:"Fred",start:3,duration:1},{category:"sequence",group:"Bob",start:5,duration:1},{category:"sequence",group:"Fred",start:6,duration:2},{category:"sequence",group:"Renee",start:8,duration:1}],linkDataArray:[{category:"sequence",from:"Fred",to:"Bob",text:"order",time:1},{category:"sequence",from:"Bob",to:"Hank",text:"order food",time:2},{category:"sequence",from:"Bob",to:"Fred",text:"serve drinks",time:3},{category:"sequence",from:"Hank",to:"Bob",text:"finish cooking",time:5},{category:"sequence",from:"Bob",to:"Fred",text:"serve food",time:6},{category:"sequence",from:"Fred",to:"Renee",text:"pay",time:8}]})},demo.euler=function(){var t=[{key:1,text:"Cognitive Procedural",loc:"300 300",category:"euler_center"},{key:2,text:"Cognitive Problem Solving",loc:"600 300",category:"euler_center",hicolor:"lightblue",hiwidth:7},{key:11,text:"Logical Reasoning",loc:"450 275",category:"euler"},{key:12,text:"Scaffolding",loc:"450 325",category:"euler"},{key:13,text:"Part Task Training",loc:"425 400",category:"euler"},{key:21,text:"Training Wheels",loc:"325 125",category:"euler"},{key:22,text:"Exploratory Learning",loc:"250 150",category:"euler"},{key:23,text:"Learner Control",loc:"650 150",category:"euler"},{key:31,text:"Overlearning",loc:"450 475",category:"euler"}],e=[{category:"euler",from:1,to:11,color:"gray"},{category:"euler",from:1,to:12,color:"gray",dash:[3,2]},{category:"euler",from:1,to:13,color:"olive",width:2},{category:"euler",from:1,to:21,color:"olive",width:3},{category:"euler",from:1,to:22,color:"olive",width:2},{category:"euler",from:1,to:23,color:"crimson",width:2},{category:"euler",from:1,to:31},{category:"euler",from:2,to:11,color:"gray"},{category:"euler",from:2,to:12,color:"olive",width:2},{category:"euler",from:2,to:13,color:"gray",dash:[3,2]},{category:"euler",from:2,to:21,color:"crimson",width:2},{category:"euler",from:2,to:22,color:"crimson",width:2},{category:"euler",from:2,to:23,color:"black",width:3},{category:"euler",from:2,to:31,color:"black",dash:[3,2]}];goTools.layout=$$(go.Layout),goTools.model=new go.GraphLinksModel(t,e)},demo.mindmap=function(){goTools.layout=$$(go.Layout),goTools.linkTemplate=goTools.linkTemplateMap.getValue("mindmap"),goTools.model=go.Model.fromJson({"class":"go.TreeModel",nodeDataArray:[{category:"mindmap",key:0,text:"Mind Map",loc:"0 0"},{category:"mindmap",key:1,parent:0,text:"Getting more time",brush:"skyblue",dir:"right",loc:"77 -22"},{category:"mindmap",key:11,parent:1,text:"Wake up early",brush:"skyblue",dir:"right",loc:"200 -48"},{category:"mindmap",key:12,parent:1,text:"Delegate",brush:"skyblue",dir:"right",loc:"200 -22"},{category:"mindmap",key:13,parent:1,text:"Simplify",brush:"skyblue",dir:"right",loc:"200 4"},{category:"mindmap",key:2,parent:0,text:"More effective use",brush:"darkseagreen",dir:"right",loc:"77 43"},{category:"mindmap",key:21,parent:2,text:"Planning",brush:"darkseagreen",dir:"right",loc:"203 30"},{category:"mindmap",key:211,parent:21,text:"Priorities",brush:"darkseagreen",dir:"right",loc:"274 17"},{category:"mindmap",key:212,parent:21,text:"Ways to focus",brush:"darkseagreen",dir:"right",loc:"274 43"},{category:"mindmap",key:22,parent:2,text:"Goals",brush:"darkseagreen",dir:"right",loc:"203 56"},{category:"mindmap",key:3,parent:0,text:"Time wasting",brush:"palevioletred",dir:"left",loc:"-20 -31.75"},{category:"mindmap",key:31,parent:3,text:"Too many meetings",brush:"palevioletred",dir:"left",loc:"-117 -64.25"},{category:"mindmap",key:32,parent:3,text:"Too much time spent on details",brush:"palevioletred",dir:"left",loc:"-117 -25.25"},{category:"mindmap",key:33,parent:3,text:"Message fatigue",brush:"palevioletred",dir:"left",loc:"-117 0.75"},{category:"mindmap",key:331,parent:31,text:"Check messages less",brush:"palevioletred",dir:"left",loc:"-251 -77.25"},{category:"mindmap",key:332,parent:31,text:"Message filters",brush:"palevioletred",dir:"left",loc:"-251 -51.25"},{category:"mindmap",key:4,parent:0,text:"Key issues",brush:"coral",dir:"left",loc:"-20 52.75"},{category:"mindmap",key:41,parent:4,text:"Methods",brush:"coral",dir:"left",loc:"-103 26.75"},{category:"mindmap",key:42,parent:4,text:"Deadlines",brush:"coral",dir:"left",loc:"-103 52.75"},{category:"mindmap",key:43,parent:4,text:"Checkpoints",brush:"coral",dir:"left",loc:"-103 78.75"}]})},demo.genogram=function(){function t(t,e,o){t.model=go.GraphObject.make(go.GraphLinksModel,{linkLabelKeysProperty:"labelKeys",nodeDataArray:e}),i(t),n(t);var r=t.findNodeForKey(o);null!==r&&t.select(r)}function e(t,e,i){var n=t.findNodeForKey(e),o=t.findNodeForKey(i);if(null!==n&&null!==o)for(var r=n.findLinksBetween(o);r.next();){var a=r.value;if(null!==a.data&&"genogram_marriage"===a.data.category)return a}return null}function i(t){for(var i=t.model,n=i.nodeDataArray,o=0;o<n.length;o++){var r=n[o],a=r.key,s=r.ux;if(s!==undefined){"number"==typeof s&&(s=[s]);for(var l=0;l<s.length;l++){var h=s[l];if(a!==h){var u=e(t,a,h);if(null===u){var c={category:"genogram_marriage_linklabel"};i.addNodeData(c);var f={from:a,to:h,labelKeys:[c.key],category:"genogram_marriage"};i.addLinkData(f)}}}}var d=r.vir;if(d!==undefined){"number"==typeof d&&(d=[d]);for(var l=0;l<d.length;l++){var p=d[l];if(a!==p){var u=e(t,a,p);if(null===u){var c={category:"genogram_marriage_linklabel"};i.addNodeData(c);var f={from:a,to:p,labelKeys:[c.key],category:"genogram_marriage"};i.addLinkData(f)}}}}}}function n(t){for(var i=t.model,n=i.nodeDataArray,o=0;o<n.length;o++){var r=n[o],a=r.key,s=r.m,l=r.f;if(s!==undefined&&l!==undefined){var h=e(t,s,l);if(null===h){window.console&&window.console.log("unknown marriage: "+s+" & "+l);continue}var u=h.data,c=u.labelKeys[0],f={from:c,to:a};goTools.model.addLinkData(f)}}}goTools.layout=$$(GenogramLayout,{direction:90,layerSpacing:30,columnSpacing:10}),goTools.linkTemplate=goTools.linkTemplateMap.getValue("genogram"),t(goTools,[{key:0,n:"Aaron",category:"genogram_male",m:-10,f:-11,ux:1,a:["C","F","K"]},{key:1,n:"Alice",category:"genogram_female",m:-12,f:-13,a:["B","H","K"]},{key:2,n:"Bob",category:"genogram_male",m:1,f:0,ux:3,a:["C","H","L"]},{key:3,n:"Barbara",category:"genogram_female",a:["C"]},{key:4,n:"Bill",category:"genogram_male",m:1,f:0,ux:5,a:["E","H"]},{key:5,n:"Brooke",category:"genogram_female",a:["B","H","L"]},{key:6,n:"Claire",category:"genogram_female",m:1,f:0,a:["C"]},{key:7,n:"Carol",category:"genogram_female",m:1,f:0,a:["C","I"]},{key:8,n:"Chloe",category:"genogram_female",m:1,f:0,vir:9,a:["E"]},{key:9,n:"Chris",category:"genogram_male",a:["B","H"]},{key:10,n:"Ellie",category:"genogram_female",m:3,f:2,a:["E","G"]},{key:11,n:"Dan",category:"genogram_male",m:3,f:2,a:["B","J"]},{key:12,n:"Elizabeth",category:"genogram_female",vir:13,a:["J"]},{key:13,n:"David",category:"genogram_male",m:5,f:4,a:["B","H"]},{key:14,n:"Emma",category:"genogram_female",m:5,f:4,a:["E","G"]},{key:15,n:"Evan",category:"genogram_male",m:8,f:9,a:["F","H"]},{key:16,n:"Ethan",category:"genogram_male",m:8,f:9,a:["D","K"]},{key:17,n:"Eve",category:"genogram_female",vir:16,a:["B","F","L"]},{key:18,n:"Emily",category:"genogram_female",m:8,f:9},{key:19,n:"Fred",category:"genogram_male",m:17,f:16,a:["B"]},{key:20,n:"Faith",category:"genogram_female",m:17,f:16,a:["L"]},{key:21,n:"Felicia",category:"genogram_female",m:12,f:13,a:["H"]},{key:22,n:"Frank",category:"genogram_male",m:12,f:13,a:["B","H"]},{key:-10,n:"Paternal Grandfather",category:"genogram_male",m:-33,f:-32,ux:-11,a:["A","S"]},{key:-11,n:"Paternal Grandmother",category:"genogram_female",a:["E","S"]},{key:-32,n:"Paternal Great",category:"genogram_male",ux:-33,a:["F","H","S"]},{key:-33,n:"Paternal Great",category:"genogram_female",a:["S"]},{key:-40,n:"Great Uncle",category:"genogram_male",m:-33,f:-32,a:["F","H","S"]},{key:-41,n:"Great Aunt",category:"genogram_female",m:-33,f:-32,a:["B","I","S"]},{key:-20,n:"Uncle",category:"genogram_male",m:-11,f:-10,a:["A","S"]},{key:-12,n:"Maternal Grandfather",category:"genogram_male",ux:-13,a:["D","L","S"]},{key:-13,n:"Maternal Grandmother",category:"genogram_female",m:-31,f:-30,a:["H","S"]},{key:-21,n:"Aunt",category:"genogram_female",m:-13,f:-12,a:["C","I"]},{key:-22,n:"Uncle",category:"genogram_male",ux:-21},{key:-23,n:"Cousin",category:"genogram_male",m:-21,f:-22},{key:-30,n:"Maternal Great",category:"genogram_male",ux:-31,a:["D","J","S"]},{key:-31,n:"Maternal Great",category:"genogram_female",m:-50,f:-51,a:["B","H","L","S"]},{key:-42,n:"Great Uncle",category:"genogram_male",m:-30,f:-31,a:["C","J","S"]},{key:-43,n:"Great Aunt",category:"genogram_female",m:-30,f:-31,a:["E","G","S"]},{key:-50,n:"Maternal Great Great",category:"genogram_female",ux:-51,a:["D","I","S"]},{key:-51,n:"Maternal Great Great",category:"genogram_male",a:["B","H","S"]}],4)},demo.force_directed=function(){fetch("/calllists/export",{method:"GET"}).then(function(t){t.text()}).then(function(t){console.log("responseData",t)})["catch"](function(t){alert("\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),console.error("error",t)}),goTools.layout=$$(go.ForceDirectedLayout),goTools.startTransaction("generateTree");var t=[];t.push({category:"force_directed",key:"18002282071",text:"18002282071",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282072",text:"18002282072",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282073",text:"18002282073",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282074",text:"18002282074",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282075",text:"18002282075",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282076",text:"18002282076",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282077",text:"18002282077",fill:go.Brush.randomColor()}),t.push({category:"force_directed",key:"18002282078",text:"18002282078",fill:go.Brush.randomColor()}),goTools.model.nodeDataArray=t;var e=[];e.push({category:"force_directed",from:"18002282071",to:"18002282072"}),e.push({category:"force_directed",from:"18002282071",to:"18002282073"}),e.push({category:"force_directed",from:"18002282071",to:"18002282074"}),e.push({category:"force_directed",from:"18002282071",to:"18002282075"}),e.push({category:"force_directed",from:"18002282071",to:"18002282076"}),e.push({category:"force_directed",from:"18002282071",to:"18002282077"}),e.push({category:"force_directed",from:"18002282071",to:"18002282078"}),e.push({category:"force_directed",from:"18002282072",to:"18002282073"}),e.push({category:"force_directed",from:"18002282072",to:"18002282074"}),e.push({category:"force_directed",from:"18002282072",to:"18002282075"}),e.push({category:"force_directed",from:"18002282072",to:"18002282076"}),e.push({category:"force_directed",from:"18002282072",to:"18002282077"}),e.push({category:"force_directed",from:"18002282072",to:"18002282078"}),goTools.model.linkDataArray=e,goTools.commitTransaction("generateTree")},Object.defineProperty(GoToolsFilesSystem.prototype,"goTools",{get:function(){return this._goTools}}),Object.defineProperty(GoToolsFilesSystem.prototype,"UNSAVED_FILENAME",{get:function(){return this._UNSAVED_FILENAME}}),Object.defineProperty(GoToolsFilesSystem.prototype,"DEFAULT_MODELDATA",{get:function(){return this._DEFAULT_MODELDATA}}),Object.defineProperty(GoToolsFilesSystem.prototype,"state",{get:function(){return this._state}}),GoToolsFilesSystem.prototype.newGoTools=function(){var t=this.goTools;if(t.isModified){confirm("Would you like to save changes to "+this.getCurrentFileName()+"?")&&this.saveGoTools()}this.setCurrentFileName(this.UNSAVED_FILENAME);var e=new go.GraphLinksModel;e.modelData=this.DEFAULT_MODELDATA,t.model=e,t.undoManager.isEnabled=!0,t.isModified=!1,t.goToolsUI&&t.goToolsUI.updateUI()},GoToolsFilesSystem.prototype.saveGoTools=function(){if(checkLocalStorage()){var t=this.getCurrentFileName();t===this.UNSAVED_FILENAME?this.saveGoToolsAs():(window.localStorage.setItem(t,this.goTools.model.toJson()),this.goTools.isModified=!1)}},GoToolsFilesSystem.prototype.saveGoToolsAs=function(){if(checkLocalStorage()){var t=prompt("Save file as...",this.getCurrentFileName());if(t&&t!==this.UNSAVED_FILENAME){var e=!0;null!==window.localStorage.getItem(t)&&(e=confirm("Do you want to overwrite "+t+"?")),e&&(this.setCurrentFileName(t),window.localStorage.setItem(t,this.goTools.model.toJson()),this.goTools.isModified=!1)}}},GoToolsFilesSystem.prototype.loadGoTools=function(){for(var t=this.goTools,e=document.getElementById(this.state.filesToOpenListId),i=undefined,n=0;n<e.options.length;n++)e.options[n].selected&&(i=e.options[n].text);if(i!==undefined){var o=window.localStorage.getItem(i);this.loadGoToolsFromModel(o),t.isModified=!1,this.setCurrentFileName(i)}t.goToolsUI&&t.goToolsUI.closeElement(this.state.openWindowId)},GoToolsFilesSystem.prototype.loadGoToolsFromModel=function(t){var e=this.goTools;e.layout=go.GraphObject.make(go.Layout),e.model=go.Model.fromJson(t),e.skipsUndoManager=!0,e.startTransaction("generate walls"),e.nodes.each(function(t){"WallGroup"===t.category&&e.updateWall(t)}),e.goToolsUI&&e.goToolsUI.updateUI(),e.commitTransaction("generate walls"),e.undoManager.isEnabled=!0},GoToolsFilesSystem.prototype.removeGoTools=function(){for(var t=this.goTools,e=document.getElementById(this.state.filesToRemoveListId),i=undefined,n=0;n<e.options.length;n++)e.options[n].selected&&(i=e.options[n].text);i!==undefined&&window.localStorage.removeItem(i),t.goToolsUI&&t.goToolsUI.closeElement(this.state.removeWindowId)},GoToolsFilesSystem.prototype.showOpenWindow=function(){if(checkLocalStorage()){if(this.goTools.isModified){confirm("Would you like to save changes to "+this.getCurrentFileName()+"?")&&this.saveGoTools()}openWindow(this.state.openWindowId,this.state.filesToOpenListId)}},GoToolsFilesSystem.prototype.showRemoveWindow=function(){checkLocalStorage()&&openWindow(this.state.removeWindowId,this.state.filesToRemoveListId)},GoToolsFilesSystem.prototype.setCurrentFileName=function(t){var e=document.getElementById(this.state.currentFileId);this.goTools.isModified&&(t+="*"),e.textContent=t},GoToolsFilesSystem.prototype.getCurrentFileName=function(){var t=document.getElementById(this.state.currentFileId),e=t.textContent;return"*"===e[e.length-1]?e.substr(0,e.length-1):e},GoTools.prototype.makeGroupTemplateMap=function(){function t(t,e){var i=[],n=t.data.startpoint.copy(),o=t.data.endpoint.copy(),r=n.x+n.y<=o.x+o.y?n:o,a=n.x+n.y>o.x+o.y?n:o,s=[];t.memberParts.iterator.each(function(t){var e=getWallPartEndpoints(t);s.push(e[0]),s.push(e[1])}),s.sort(function(t,e){return t.x+t.y>e.x+e.y?1:t.x+t.y<e.x+e.y?-1:0}),i.push(r),i=i.concat(s),i.push(a);for(var l=[],h=0;h<i.length;h+=2){var u=i[h],c=i[h+1];Math.sqrt(u.distanceSquaredPoint(c))>=e.data.width&&l.push({pt1:u,pt2:c})}for(var f=Number.MAX_VALUE,d=null,h=0;h<l.length;h++){var p=l[h],g=p.pt1,y=p.pt2,m=Math.sqrt(g.distanceSquaredPoint(e.location)),v=Math.sqrt(y.distanceSquaredPoint(e.location));m<f&&(f=m,d=p),v<f&&(f=v,d=p)}if(null===d)return null;var b=Math.sqrt(d.pt1.distanceSquaredPoint(d.pt2)),x=e.data.width/2,u=new go.Point(d.pt1.x+x/b*(d.pt2.x-d.pt1.x),d.pt1.y+x/b*(d.pt2.y-d.pt1.y)),c=new go.Point(d.pt2.x+x/b*(d.pt1.x-d.pt2.x),d.pt2.y+x/b*(d.pt1.y-d.pt2.y));return e.location.copy().projectOntoLineSegmentPoint(u,c)}var e=go.GraphObject.make;this.groupTemplateMap.add("FloorPlannerDefault",e(go.Group,"Vertical",{contextMenu:makeContextMenu(),doubleClick:function(t){t.diagram.floorplanUI&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")},toolTip:e(go.Adornment,"Auto",e(go.Shape,{fill:"#FFFFCC"}),e(go.TextBlock,{margin:4},new go.Binding("text","",function(t,e){var i=e.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===e.part.adornedObject.category?i.text:i.caption)+"\nNotes: "+i.notes+"\nMembers: "+e.part.adornedObject.memberParts.count}).ofObject()))},new go.Binding("location","loc"),e(go.Panel,"Auto",e(go.Shape,"RoundedRectangle",{fill:"rgba(128,128,128,0.15)",stroke:"rgba(128, 128, 128, .05)",name:"SHAPE",strokeCap:"square"},new go.Binding("fill","isSelected",function(t){return t?"rgba(128, 128, 128, .15)":"rgba(128, 128, 128, 0.10)"}).ofObject()),e(go.Placeholder,{padding:5})))),this.groupTemplateMap.add("WallGroup",e(go.Group,"Spot",{contextMenu:makeContextMenu(),toolTip:e(go.Adornment,"Auto",e(go.Shape,{fill:"#FFFFCC"}),e(go.TextBlock,{margin:4},new go.Binding("text","",function(t,e){var i=e.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===e.part.adornedObject.category?i.text:i.caption)+"\nNotes: "+i.notes+"\nMembers: "+e.part.adornedObject.memberParts.count}).ofObject())),selectionObjectName:"SHAPE",rotateObjectName:"SHAPE",locationSpot:go.Spot.Center,reshapable:!0,minSize:new go.Size(1,1),dragComputation:function(t,e){var i=t.diagram;i.updateWallDimensions(),i.updateWallAngles();var n=t.diagram.grid,o=t.data.startpoint.copy(),r=t.data.endpoint.copy(),a=e.x-t.location.x,s=e.y-t.location.y,l=o.offset(a,s),h=r.offset(a,s);return i.toolManager.draggingTool.isGridSnapEnabled&&(l=l.snapToGridPoint(n.gridOrigin,n.gridCellSize),h=h.snapToGridPoint(n.gridOrigin,n.gridCellSize)),i.model.setDataProperty(t.data,"startpoint",l),i.model.setDataProperty(t.data,"endpoint",h),new go.Point((l.x+h.x)/2,(l.y+h.y)/2)},selectionAdorned:!1,mouseDrop:function(e,i){var n=e.diagram,o=n.selection.first();if(o&&("WindowNode"===o.category||"DoorNode"===o.category)&&null===o.containingGroup){var r=t(i,o);if(null===r)return n.remove(o),void alert("There's not enough room on the wall!");i.findObject("SHAPE").stroke="black",n.model.setDataProperty(o.data,"group",i.data.key),o.location=r.projectOntoLineSegmentPoint(i.data.startpoint,i.data.endpoint),o.angle=i.rotateObject.angle,"WindowNode"===o.category&&n.model.setDataProperty(o.data,"height",i.data.strokeWidth),"DoorNode"===o.category&&n.model.setDataProperty(o.data,"doorOpeningHeight",i.data.strokeWidth)}n.floorplanUI&&n.floorplanUI.setSelectionInfo(n.selection.first(),n),n.updateWallDimensions()},mouseDragEnter:function(t,e){t.diagram.toolManager.draggingTool.draggingParts.iterator.each(function(t){"WindowNode"!==t.category&&"DoorNode"!==t.category||null!==t.containingGroup||(e.findObject("SHAPE").stroke="lightblue",t.angle=e.rotateObject.angle)})},mouseDragLeave:function(t,e){var i=t.diagram;e.findObject("SHAPE").stroke="black",i.toolManager.draggingTool.draggingParts.iterator.each(function(t){"WindowNode"!==t.category&&"DoorNode"!==t.category||null!==t.containingGroup||(t.angle=0)})},doubleClick:function(t){t.diagram.floorplanUI&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")}},e(go.Shape,{strokeWidth:1,name:"SHAPE",fill:"black",stroke:"red",geometry:new go.Geometry(go.Geometry.Line),isGeometryPositioned:!0},new go.Binding("strokeWidth","strokeWidth"),new go.Binding("stroke","isSelected",function(t,e){if(null!=e.part.containingGroup){var i=e.part.containingGroup;t&&(i.data.isSelected=!0)}return t?"dodgerblue":"black"}).ofObject()))),this.groupTemplateMap.add("sequence",e(go.Group,"Vertical",{locationSpot:go.Spot.Bottom,locationObjectName:"HEADER",minLocation:new go.Point(0,0),maxLocation:new go.Point(9999,0),selectionObjectName:"HEADER"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),e(go.Panel,"Auto",{name:"HEADER"},e(go.Shape,"Rectangle",{fill:e(go.Brush,"Linear",{0:"#bbdefb",1:go.Brush.darkenBy("#bbdefb",.1)}),stroke:null}),e(go.TextBlock,{margin:5,font:"400 10pt Source Sans Pro, sans-serif"},new go.Binding("text","text"))),e(go.Shape,{figure:"LineV",fill:null,stroke:"gray",strokeDashArray:[3,3],width:1,alignment:go.Spot.Center,portId:"",fromLinkable:!0,fromLinkableDuplicates:!0,toLinkable:!0,toLinkableDuplicates:!0,cursor:"pointer"},new go.Binding("height","duration",function(t){return LinePrefix+t*MessageSpacing+LineSuffix}))))},GoTools.prototype.changeLayout=function(t){var e=go.GraphObject.make;switch($("#tab_layout_link").tab("show"),t){case"grid":this.layout=e(go.GridLayout),$("#tab_layout_grid_link").tab("show");break;case"tree":this.layout=e(go.TreeLayout),$("#tab_layout_tree_link").tab("show");break;case"circular":this.layout=e(go.CircularLayout),$("#tab_layout_circular_link").tab("show");break;case"layeredDigraph":this.layout=e(go.LayeredDigraphLayout),$("#tab_layout_layeredDigraph_link").tab("show");break;case"forceDirected":this.layout=e(go.ForceDirectedLayout),$("#tab_layout_forceDirected_link").tab("show");break;case"default":this.layout=e(go.Layout)}},GoTools.prototype.triggerGridLayout=function(){this.startTransaction("change grid Layout");var t=this.layout,e=document.getElementById("layout_grid_wrappingColumn").value;t.wrappingColumn=parseFloat(e,10);var i=document.getElementById("layout_grid_wrappingWidth").value;t.wrappingWidth=parseFloat(i,10);var n=document.getElementById("layout_grid_cellSize").value;t.cellSize=go.Size.parse(n);var o=document.getElementById("layout_grid_spacing").value;t.spacing=go.Size.parse(o);var r=getRadioValue("layout_grid_alignment");t.alignment="Position"===r?go.GridLayout.Position:go.GridLayout.Location;var a=getRadioValue("layout_grid_arrangement");switch(t.arrangement="LeftToRight"===a?go.GridLayout.LeftToRight:go.GridLayout.RightToLeft,document.getElementById("layout_grid_sorting").value){default:case"Forward":t.sorting=go.GridLayout.Forward;break;case"Reverse":t.sorting=go.GridLayout.Reverse;break;case"Ascending":t.sorting=go.GridLayout.Ascending;break;case"Descending":t.sorting=go.GridLayout.Descending}this.commitTransaction("change grid Layout")},GoTools.prototype.triggerTreeLayout=function(){this.startTransaction("change tree Layout");var t=this.layout,e=document.getElementById("layout_tree_style").value;"Layered"===e?t.treeStyle=go.TreeLayout.StyleLayered:"Alternating"===e?t.treeStyle=go.TreeLayout.StyleAlternating:"LastParents"===e?t.treeStyle=go.TreeLayout.StyleLastParents:"RootOnly"===e&&(t.treeStyle=go.TreeLayout.StyleRootOnly);var i=document.getElementById("layout_tree_layerStyle").value;"Individual"===i?t.layerStyle=go.TreeLayout.LayerIndividual:"Siblings"===i?t.layerStyle=go.TreeLayout.LayerSiblings:"Uniform"===i&&(t.layerStyle=go.TreeLayout.LayerUniform);var n=getRadioValue("layout_tree_angle");n=parseFloat(n,10),t.angle=n;var o=document.getElementById("layout_tree_align").value;"CenterChildren"===o?t.alignment=go.TreeLayout.AlignmentCenterChildren:"CenterSubtrees"===o?t.alignment=go.TreeLayout.AlignmentCenterSubtrees:"Start"===o?t.alignment=go.TreeLayout.AlignmentStart:"End"===o?t.alignment=go.TreeLayout.AlignmentEnd:"Bus"===o?t.alignment=go.TreeLayout.AlignmentBus:"BusBranching"===o?t.alignment=go.TreeLayout.AlignmentBusBranching:"TopLeftBus"===o?t.alignment=go.TreeLayout.AlignmentTopLeftBus:"BottomRightBus"===o&&(t.alignment=go.TreeLayout.AlignmentBottomRightBus);var r=document.getElementById("layout_tree_nodeSpacing").value;r=parseFloat(r,10),t.nodeSpacing=r;var a=document.getElementById("layout_tree_nodeIndent").value;a=parseFloat(a,10),t.nodeIndent=a;var s=document.getElementById("layout_tree_nodeIndentPastParent").value;s=parseFloat(s,10),t.nodeIndentPastParent=s;var l=document.getElementById("layout_tree_layerSpacing").value;l=parseFloat(l,10),t.layerSpacing=l;var h=document.getElementById("layout_tree_layerSpacingParentOverlap").value;h=parseFloat(h,10),t.layerSpacingParentOverlap=h;var u=document.getElementById("layout_tree_sorting").value;"Forwards"===u?t.sorting=go.TreeLayout.SortingForwards:"Reverse"===u?t.sorting=go.TreeLayout.SortingReverse:"Ascending"===u?t.sorting=go.TreeLayout.SortingAscending:"Descending"===u&&(t.sorting=go.TreeLayout.SortingDescending);var c=getRadioValue("layout_tree_compaction");"Block"===c?t.compaction=go.TreeLayout.CompactionBlock:"None"===c&&(t.compaction=go.TreeLayout.CompactionNone);var f=document.getElementById("layout_tree_breadthLimit").value;f=parseFloat(f,10),t.breadthLimit=f;var d=document.getElementById("layout_tree_rowSpacing").value;d=parseFloat(d,10),t.rowSpacing=d;var p=document.getElementById("layout_tree_rowIndent").value;p=parseFloat(p,10),t.rowIndent=p;var g=document.getElementById("layout_tree_setsPortSpot").checked;t.setsPortSpot=g;var y=document.getElementById("layout_tree_setsChildPortSpot").checked;if(t.setsChildPortSpot=y,"Layered"!==e){var m=getRadioValue("layout_tree_altAngle");m=parseFloat(m,10),t.alternateAngle=m;var v=document.getElementById("layout_tree_altAlign").value;"CenterChildren"===v?t.alternateAlignment=go.TreeLayout.AlignmentCenterChildren:"CenterSubtrees"===v?t.alternateAlignment=go.TreeLayout.AlignmentCenterSubtrees:"Start"===v?t.alternateAlignment=go.TreeLayout.AlignmentStart:"End"===v?t.alternateAlignment=go.TreeLayout.AlignmentEnd:"Bus"===v?t.alternateAlignment=go.TreeLayout.AlignmentBus:"BusBranching"===v?t.alternateAlignment=go.TreeLayout.AlignmentBusBranching:"TopLeftBus"===v?t.alternateAlignment=go.TreeLayout.AlignmentTopLeftBus:"BottomRightBus"===v&&(t.alternateAlignment=go.TreeLayout.AlignmentBottomRightBus);var b=document.getElementById("layout_tree_altNodeSpacing").value;b=parseFloat(b,10),t.alternateNodeSpacing=b;var x=document.getElementById("layout_tree_altNodeIndent").value;x=parseFloat(x,10),t.alternateNodeIndent=x;var w=document.getElementById("layout_tree_altNodeIndentPastParent").value;w=parseFloat(w,10),t.alternateNodeIndentPastParent=w;var k=document.getElementById("layout_tree_altLayerSpacing").value;k=parseFloat(k,10),t.alternateLayerSpacing=k;var S=document.getElementById("layout_tree_altLayerSpacingParentOverlap").value;S=parseFloat(S,10),t.alternateLayerSpacingParentOverlap=S;var M=document.getElementById("layout_tree_altSorting").value;"Forwards"===M?t.alternateSorting=go.TreeLayout.SortingForwards:"Reverse"===M?t.alternateSorting=go.TreeLayout.SortingReverse:"Ascending"===M?t.alternateSorting=go.TreeLayout.SortingAscending:"Descending"===M&&(t.alternateSorting=go.TreeLayout.SortingDescending);var P=getRadioValue("layout_tree_altCompaction");"Block"===P?t.alternateCompaction=go.TreeLayout.CompactionBlock:"None"===P&&(t.alternateCompaction=go.TreeLayout.CompactionNone);var T=document.getElementById("layout_tree_altBreadthLimit").value;T=parseFloat(T,10),t.alternateBreadthLimit=T;var L=document.getElementById("layout_tree_altRowSpacing").value;L=parseFloat(L,10),t.alternateRowSpacing=L;var N=document.getElementById("layout_tree_altRowIndent").value;N=parseFloat(N,10),t.alternateRowIndent=N;var C=document.getElementById("layout_tree_altSetsPortSpot").checked;t.alternateSetsPortSpot=C;var A=document.getElementById("layout_tree_altSetsChildPortSpot").checked;t.alternateSetsChildPortSpot=A}this.commitTransaction("change tree Layout")},GoTools.prototype.triggerCircularLayout=function(){this.startTransaction("change circular Layout");var t=this.layout,e=document.getElementById("layout_circular_radius").value;e="NaN"!==e?parseFloat(e,10):NaN,t.radius=e;var i=document.getElementById("layout_circular_aspectRatio").value;i=parseFloat(i,10),t.aspectRatio=i;var n=document.getElementById("layout_circular_startAngle").value;n=parseFloat(n,10),t.startAngle=n;var o=document.getElementById("layout_circular_sweepAngle").value;o=parseFloat(o,10),t.sweepAngle=o;var r=document.getElementById("layout_circular_spacing").value;r=parseFloat(r,10),t.spacing=r;var a=document.getElementById("layout_circular_arrangement").value;"ConstantDistance"===a?t.arrangement=go.CircularLayout.ConstantDistance:"ConstantAngle"===a?t.arrangement=go.CircularLayout.ConstantAngle:"ConstantSpacing"===a?t.arrangement=go.CircularLayout.ConstantSpacing:"Packed"===a&&(t.arrangement=go.CircularLayout.Packed);var s=getRadioValue("layout_circular_diamFormula");"Pythagorean"===s?t.nodeDiameterFormula=go.CircularLayout.Pythagorean:"Circular"===s&&(t.nodeDiameterFormula=go.CircularLayout.Circular);var l=document.getElementById("layout_circular_direction").value;"Clockwise"===l?t.direction=go.CircularLayout.Clockwise:"Counterclockwise"===l?t.direction=go.CircularLayout.Counterclockwise:"BidirectionalLeft"===l?t.direction=go.CircularLayout.BidirectionalLeft:"BidirectionalRight"===l&&(t.direction=go.CircularLayout.BidirectionalRight);var h=document.getElementById("layout_circular_sorting").value;"Forwards"===h?t.sorting=go.CircularLayout.Forwards:"Reverse"===h?t.sorting=go.CircularLayout.Reverse:"Ascending"===h?t.sorting=go.CircularLayout.Ascending:"Descending"===h?t.sorting=go.CircularLayout.Descending:"Optimized"===h&&(t.sorting=go.CircularLayout.Optimized),this.commitTransaction("change circular Layout")},GoTools.prototype.triggerLayeredDigraphLayout=function(){this.startTransaction("change layeredDigraph Layout");var t=this.layout,e=getRadioValue("layout_layeredDigraph_direction");e=parseFloat(e,10),t.direction=e;var i=document.getElementById("layout_layeredDigraph_layerSpacing").value;i=parseFloat(i,10),t.layerSpacing=i;var n=document.getElementById("layout_layeredDigraph_columnSpacing").value;n=parseFloat(n,10),t.columnSpacing=n;var o=getRadioValue("layout_layeredDigraph_cycleRemove");"CycleDepthFirst"===o?t.cycleRemoveOption=go.LayeredDigraphLayout.CycleDepthFirst:"CycleGreedy"===o&&(t.cycleRemoveOption=go.LayeredDigraphLayout.CycleGreedy);var r=getRadioValue("layout_layeredDigraph_layering");"LayerOptimalLinkLength"===r?t.layeringOption=go.LayeredDigraphLayout.LayerOptimalLinkLength:"LayerLongestPathSource"===r?t.layeringOption=go.LayeredDigraphLayout.LayerLongestPathSource:"LayerLongestPathSink"===r&&(t.layeringOption=go.LayeredDigraphLayout.LayerLongestPathSink);var a=getRadioValue("layout_layeredDigraph_initialize");"InitDepthFirstOut"===a?t.initializeOption=go.LayeredDigraphLayout.InitDepthFirstOut:"InitDepthFirstIn"===a?t.initializeOption=go.LayeredDigraphLayout.InitDepthFirstIn:"InitNaive"===a&&(t.initializeOption=go.LayeredDigraphLayout.InitNaive);var s=getRadioValue("layout_layeredDigraph_aggressive");"AggressiveLess"===s?t.aggressiveOption=go.LayeredDigraphLayout.AggressiveLess:"AggressiveNone"===s?t.aggressiveOption=go.LayeredDigraphLayout.AggressiveNone:"AggressiveMore"===s&&(t.aggressiveOption=go.LayeredDigraphLayout.AggressiveMore);for(var l=document.getElementsByName("layout_layeredDigraph_pack"),h=0,u=0;u<l.length;u++)l[u].checked&&(h|=parseInt(l[u].value,10));t.packOption=h;var c=document.getElementById("layout_layeredDigraph_setsPortSpots");t.setsPortSpots=c.checked,this.commitTransaction("change layeredDigraph Layout")},GoTools.prototype.triggerForceDirectedLayout=function(){
this.startTransaction("changed forceDirected Layout");var t=this.layout,e=document.getElementById("layout_forceDirected_maxIter").value;e=parseInt(e,10),t.maxIterations=e;var i=document.getElementById("layout_forceDirected_epsilon").value;i=parseFloat(i,10),t.epsilon=i;var n=document.getElementById("layout_forceDirected_infinity").value;n=parseFloat(n,10),t.infinity=n;var o=document.getElementById("layout_forceDirected_arrangement").value,r=new go.Size;o=o.split(" ",2),r.width=parseFloat(o[0],10),r.height=parseFloat(o[1],10),t.arrangementSpacing=r;var a=document.getElementById("layout_forceDirected_charge").value;a=parseFloat(a,10),t.defaultElectricalCharge=a;var s=document.getElementById("layout_forceDirected_mass").value;s=parseFloat(s,10),t.defaultGravitationalMass=s;var l=document.getElementById("layout_forceDirected_stiffness").value;l=parseFloat(l,10),t.defaultSpringStiffness=l;var h=document.getElementById("layout_forceDirected_length").value;h=parseFloat(h,10),t.defaultSpringLength=h,this.commitTransaction("changed forceDirected Layout")},GoTools.prototype.makeLinkTemplateMap=function(){var t=go.GraphObject.make;this.linkTemplateMap.add("circuit",t(go.Link,{routing:go.Link.AvoidsNodes,curve:go.Link.JumpOver,corner:3,relinkableFrom:!0,relinkableTo:!0,selectionAdorned:!1,shadowOffset:new go.Point(0,0),shadowBlur:5,shadowColor:"blue"},new go.Binding("isShadowed","isSelected").ofObject(),t(go.Shape,{name:"SHAPE",strokeWidth:2,stroke:"orangered"}))),this.linkTemplateMap.add("flowchart",t(go.Link,{routing:go.Link.AvoidsNodes,curve:go.Link.JumpOver,corner:5,toShortLength:4,relinkableFrom:!0,relinkableTo:!0,reshapable:!0,resegmentable:!0,mouseEnter:function(t,e){var i=e.findObject("HIGHLIGHT");i&&(i.stroke="rgba(30,144,255,0.2)")},mouseLeave:function(t,e){var i=e.findObject("HIGHLIGHT");i&&(i.stroke="transparent")}},new go.Binding("points").makeTwoWay(),t(go.Shape,{isPanelMain:!0,strokeWidth:8,stroke:"transparent",name:"HIGHLIGHT"}),t(go.Shape,{isPanelMain:!0,stroke:"gray",strokeWidth:2}),t(go.Shape,{toArrow:"standard",stroke:null,fill:"gray"}),t(go.Panel,"Auto",{visible:!1,name:"LABEL",segmentIndex:2,segmentFraction:.5},new go.Binding("visible","visible").makeTwoWay(),t(go.Shape,"RoundedRectangle",{fill:"#F8F8F8",stroke:null}),t(go.TextBlock,"Yes",{textAlign:"center",font:"10pt helvetica, arial, sans-serif",stroke:"#333333",editable:!0},new go.Binding("text").makeTwoWay())))),this.linkTemplateMap.add("class_hierarchy",t(go.Link,{curve:go.Link.Bezier,toEndSegmentLength:30,fromEndSegmentLength:30},t(go.Shape,{strokeWidth:1.5}))),this.linkTemplateMap.add("dom",t(go.Link,{selectable:!1},t(go.Shape))),this.linkTemplateMap.add("entity_relationship",t(go.Link,{selectionAdorned:!0,layerName:"Foreground",reshapable:!0,routing:go.Link.AvoidsNodes,corner:5,curve:go.Link.JumpOver},t(go.Shape,{stroke:"#303B45",strokeWidth:2.5}),t(go.TextBlock,{textAlign:"center",font:"bold 14px sans-serif",stroke:"#1967B3",segmentIndex:0,segmentOffset:new go.Point(NaN,NaN),segmentOrientation:go.Link.OrientUpright},new go.Binding("text","text")),t(go.TextBlock,{textAlign:"center",font:"bold 14px sans-serif",stroke:"#1967B3",segmentIndex:-1,segmentOffset:new go.Point(NaN,NaN),segmentOrientation:go.Link.OrientUpright},new go.Binding("text","toText")))),this.linkTemplateMap.add("gantt",t(go.Link,{routing:go.Link.Orthogonal,corner:3,toShortLength:2,selectable:!1},t(go.Shape,{strokeWidth:2}),t(go.Shape,{toArrow:"OpenTriangle"}))),this.linkTemplateMap.add("uml",t(go.Link,{routing:go.Link.Orthogonal},new go.Binding("isLayoutPositioned","relationship",function(t){return"generalization"===t}),t(go.Shape),t(go.Shape,{scale:1.3,fill:"white"},new go.Binding("fromArrow","relationship",function(t){switch(t){case"generalization":default:return""}})),t(go.Shape,{scale:1.3,fill:"white"},new go.Binding("toArrow","relationship",function(t){switch(t){case"generalization":return"Triangle";case"aggregation":return"StretchedDiamond";default:return""}})))),this.linkTemplateMap.add("process_flow",t(go.Link,{routing:go.Link.AvoidsNodes,curve:go.Link.JumpGap,corner:10,reshapable:!0,toShortLength:7},new go.Binding("points").makeTwoWay(),t(go.Shape,{isPanelMain:!0,stroke:"black",strokeWidth:5}),t(go.Shape,{isPanelMain:!0,stroke:"gray",strokeWidth:3}),t(go.Shape,{isPanelMain:!0,stroke:"white",strokeWidth:1,name:"PIPE",strokeDashArray:[10,10]}),t(go.Shape,{toArrow:"Triangle",fill:"black",stroke:null}))),this.linkTemplateMap.add("state_chart",t(go.Link,{curve:go.Link.Bezier,adjusting:go.Link.Stretch,reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toShortLength:3},new go.Binding("points").makeTwoWay(),new go.Binding("curviness"),t(go.Shape,{strokeWidth:1.5}),t(go.Shape,{toArrow:"standard",stroke:null}),t(go.Panel,"Auto",t(go.Shape,{fill:t(go.Brush,"Radial",{0:"rgb(240, 240, 240)",.3:"rgb(240, 240, 240)",1:"rgba(240, 240, 240, 0)"}),stroke:null}),t(go.TextBlock,"transition",{textAlign:"center",font:"9pt helvetica, arial, sans-serif",margin:4,editable:!0},new go.Binding("text").makeTwoWay())))),this.linkTemplateMap.add("pipe",t(go.Link,{visible:!1})),this.linkTemplateMap.add("pipe_comment",t(go.Link,{curve:go.Link.Bezier},t(go.Shape,{stroke:"brown",strokeWidth:2}),t(go.Shape,{toArrow:"OpenTriangle",stroke:"brown"}))),this.linkTemplateMap.add("sankey",t(go.Link,go.Link.Bezier,{selectionAdornmentTemplate:t(go.Adornment,"Link",t(go.Shape,{isPanelMain:!0,fill:null,stroke:"rgba(0, 0, 255, 0.3)",strokeWidth:0})),layerName:"Background",fromEndSegmentLength:150,toEndSegmentLength:150,adjusting:go.Link.End},t(go.Shape,{strokeWidth:4,stroke:"rgba(173, 173, 173, 0.25)"},new go.Binding("stroke","",function(t){var e=goTools.model.findNodeDataForKey(t.from),i=e.color;if("#"==i.charAt(0)){var n=parseInt(i.substr(1,6),16),o=n>>16,r=n>>8&255,a=255&n,s=.4;t.width<=2&&(s=1);return"rgba("+o+","+r+","+a+", "+s+")"}return"rgba(173, 173, 173, 0.25)"}),new go.Binding("strokeWidth","width")))),this.linkTemplateMap.add("pert",t(go.Link,{toShortLength:6,toEndSegmentLength:20},t(go.Shape,{strokeWidth:4},new go.Binding("stroke","",function(t,e){var i=e.part;if(!i)return"#0288D1";var n=i.fromNode;if(!n||!n.data||!n.data.critical)return"#0288D1";var o=i.toNode;return o&&o.data&&o.data.critical?"#B71C1C":"#0288D1"})),t(go.Shape,{toArrow:"Triangle",stroke:null,scale:1.5},new go.Binding("fill","",function(t,e){var i=e.part;if(!i)return"#0288D1";var n=i.fromNode;if(!n||!n.data||!n.data.critical)return"#0288D1";var o=i.toNode;return o&&o.data&&o.data.critical?"#B71C1C":"#0288D1"})))),this.linkTemplateMap.add("wheel",t(go.Link,{routing:go.Link.Normal,curve:go.Link.Bezier,selectionAdorned:!1,mouseEnter:function(t,e){e.isHighlighted=!0,e.fromNode.isHighlighted=!0,e.toNode.isHighlighted=!0},mouseLeave:function(t,e){e.isHighlighted=!1,e.fromNode.isHighlighted=!1,e.toNode.isHighlighted=!1}},t(go.Shape,new go.Binding("stroke","isHighlighted",function(t,e){return t?"red":e.part.data.color}).ofObject(),new go.Binding("strokeWidth","isHighlighted",function(t){return t?2:1}).ofObject()))),this.linkTemplateMap.add("timeline",t(BarLink,{toShortLength:2,layerName:"Background"},t(go.Shape,{stroke:"#E37933",strokeWidth:2}))),this.linkTemplateMap.add("sequence",t(MessageLink,{selectionAdorned:!0,curviness:0},t(go.Shape,"Rectangle",{stroke:"black"}),t(go.Shape,{toArrow:"OpenTriangle",stroke:"black"}),t(go.TextBlock,{font:"400 9pt Source Sans Pro, sans-serif",segmentIndex:0,segmentOffset:new go.Point(NaN,NaN),isMultiline:!1,editable:!0},new go.Binding("text","text").makeTwoWay()))),this.linkTemplateMap.add("euler",t(go.Link,t(go.Shape,new go.Binding("stroke","color"),new go.Binding("strokeWidth","width"),new go.Binding("strokeDashArray","dash")))),this.linkTemplateMap.add("Dimensioning",t(DimensioningLink,new go.Binding("fromSpot","fromSpot",go.Spot.parse),new go.Binding("toSpot","toSpot",go.Spot.parse),new go.Binding("direction"),new go.Binding("extension"),new go.Binding("inset"),t(go.Shape,{stroke:"gray"},new go.Binding("stroke","color")),t(go.Shape,{fromArrow:"BackwardOpenTriangle",segmentIndex:2,stroke:"gray"},new go.Binding("stroke","color")),t(go.Shape,{toArrow:"OpenTriangle",segmentIndex:-3,stroke:"gray"},new go.Binding("stroke","color")),t(go.TextBlock,{segmentIndex:2,segmentFraction:.5,segmentOrientation:go.Link.OrientUpright,alignmentFocus:go.Spot.Bottom,stroke:"gray",font:"8pt sans-serif"},new go.Binding("text","",function(t){var e=t.pointsCount;if(e<2)return"";var i=t.getPoint(0),n=t.getPoint(e-1),o=t.direction;if(isNaN(o))return Math.floor(Math.sqrt(i.distanceSquaredPoint(n)))+"";var r=o*Math.PI/180;return Math.floor(Math.abs(Math.cos(r)*(i.x-n.x))+Math.abs(Math.sin(r)*(i.y-n.y)))+""}).ofObject(),new go.Binding("stroke","color")))),this.linkTemplateMap.add("comment",t("function"==typeof BalloonLink?BalloonLink:go.Link,t(go.Shape,{stroke:"brown",strokeWidth:1,fill:"lightyellow"}))),this.linkTemplateMap.add("mindmap",t(go.Link,{curve:go.Link.Bezier,fromShortLength:-2,toShortLength:-2,selectable:!1},t(go.Shape,{strokeWidth:3},new go.Binding("stroke","toNode",function(t){return t.data.brush?t.data.brush:"black"}).ofObject()))),this.linkTemplateMap.add("genogram",t(go.Link,{routing:go.Link.Orthogonal,curviness:15,layerName:"Background",selectable:!1,fromSpot:go.Spot.Bottom,toSpot:go.Spot.Top},t(go.Shape,{strokeWidth:2}))),this.linkTemplateMap.add("genogram_marriage",t(go.Link,{selectable:!1},t(go.Shape,{strokeWidth:2,stroke:"blue"}))),this.linkTemplateMap.add("force_directed",t(go.Link,{selectable:!1},t(go.Shape,{strokeWidth:3,stroke:"#333"})))},GoTools.prototype.makeNodeTemplateMap=function(){function t(t){if(t.includes("#")&&(t=t.substring(1)),6!=t.length)return console.error("Hex color must be six hex numbers in length."),!1;t=t.toUpperCase();var e=t.split(""),n="",o="FEDCBA9876".split(""),r=new Array;for(r.A="5",r.B="4",r.C="3",r.D="2",r.E="1",r.F="0",i=0;i<6;i++)if(isNaN(e[i])){if(!r[e[i]])return console.error("Hex colors must only include hex numbers 0-9, and A-F"),!1;n+=r[e[i]]}else n+=o[e[i]];return"#"+n}function e(){return[new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{locationSpot:go.Spot.Center,mouseEnter:function(t,e){var i=e.part.diagram;i&&!i.isReadOnly&&i.allowLink&&e.part.ports.each(function(t){t.stroke="white"})},mouseLeave:function(t,e){var i=e.part.diagram;i&&!i.isReadOnly&&i.allowLink&&e.part.ports.each(function(t){t.stroke=null})}}]}function n(t,e,i,n){return l(go.Shape,"Circle",{fill:"transparent",stroke:null,desiredSize:new go.Size(8,8),alignment:e,alignmentFocus:e,portId:t,fromSpot:e,toSpot:e,fromLinkable:i,toLinkable:n,cursor:"pointer"})}function o(t,e){var i=t.diagram.toolManager.draggingTool;t.diagram.startTransaction("rotate "+e.toString());var n=new go.Set(go.Node);n.add(t);var o=i.computeEffectiveCollection(n).toKeySet(),r=t.diagram.computePartsBounds(o),a=r.center;o.each(function(t){t.angle+=e,t.location=t.location.copy().subtract(a).rotate(e).add(a)}),t.diagram.commitTransaction("rotate "+e.toString())}function r(t,e,i){return"string"==typeof e&&(e=go.Spot.parse(e)),e&&e.isSpot()||(e=go.Spot.Right),"string"==typeof i&&(i=go.Spot.parse(i)),i&&i.isSpot()||(i=e.opposite()),l(go.Panel,"Spot",{name:t.toString(),alignment:e,alignmentFocus:i},l(go.Shape,"Circle",{name:"SEATSHAPE",desiredSize:new go.Size(40,40),fill:"burlywood",stroke:"white",strokeWidth:2},new go.Binding("fill")),l(go.TextBlock,t.toString(),{font:"10pt Verdana, sans-serif"},new go.Binding("angle","angle",function(t){return-t})))}function a(){return[{background:"transparent"},{layerName:"Background"},{locationSpot:go.Spot.Center,locationObjectName:"TABLESHAPE"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{rotatable:!0},new go.Binding("angle").makeTwoWay(),{mouseDragEnter:function(){},mouseDragLeave:function(){},mouseDrop:function(){}}]}function s(t){switch(t){case"A":return"green";case"B":return"orange";case"C":return"red";case"D":return"cyan";case"E":return"gold";case"F":return"pink";case"G":return"blue";case"H":return"brown";case"I":return"purple";case"J":return"chartreuse";case"K":return"lightgray";case"L":return"magenta";case"S":return"red";default:return"transparent"}}var l=go.GraphObject.make,h=function(t,e){if(null!==t.containingGroup&&"WallGroup"===t.containingGroup.category){var i=t.diagram,n=t.containingGroup,o=n.data.startpoint,r=n.data.endpoint;Math.sqrt(o.distanceSquaredPoint(t.location))+Math.sqrt(t.location.distanceSquaredPoint(r))!==Math.sqrt(o.distanceSquaredPoint(r))&&(t.location=t.location.copy().projectOntoLineSegmentPoint(o,r));var a=getWallPartStretch(t),s=a.point1,l=a.point2,h=Math.sqrt(s.distanceSquaredPoint(l)),u=t.data.width/2,c=new go.Point(s.x+u/h*(l.x-s.x),s.y+u/h*(l.y-s.y)),f=new go.Point(l.x+u/h*(s.x-l.x),l.y+u/h*(s.y-l.y));Math.abs((r.y-o.y)*e.x-(r.x-o.x)*e.y+r.x*o.y-r.y*o.x)/Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))>(20*n.data.strokeWidth<100?20*n.data.strokeWidth:100)&&(t.containingGroup=null,t.angle=0,allPointNodes.iterator.each(function(t){i.remove(t)}),allDimensionLinks.iterator.each(function(t){i.remove(t)}),allPointNodes.clear(),allDimensionLinks.clear(),i.updateWallDimensions()),e=e.copy().projectOntoLineSegmentPoint(c,f),i.skipsUndoManager=!0,i.startTransaction("set loc"),i.model.setDataProperty(t.data,"loc",go.Point.stringify(e)),i.commitTransaction("set loc"),i.skipsUndoManager=!1,i.updateWallDimensions()}return e};this.nodeTemplateMap.add("FurnitureNode",l(go.Node,"Spot",{resizable:!0,rotatable:!0,toolTip:function(){var t=go.GraphObject.make;return t(go.Adornment,"Auto",t(go.Shape,{fill:"#FFFFCC"}),t(go.TextBlock,{margin:4},new go.Binding("text","",function(t,e){var i=e.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===e.part.adornedObject.category?i.text:i.caption)+"\nNotes: "+i.notes}).ofObject()))}(),resizeAdornmentTemplate:function(){function t(t,i){return e(go.Shape,{alignment:t,cursor:i,figure:"Rectangle",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","color"),new go.Binding("stroke","stroke"))}var e=go.GraphObject.make;return e(go.Adornment,"Spot",{locationSpot:go.Spot.Center},e(go.Placeholder),t(go.Spot.Top,"n-resize"),t(go.Spot.TopRight,"n-resize"),t(go.Spot.BottomRight,"se-resize"),t(go.Spot.Right,"e-resize"),t(go.Spot.Bottom,"s-resize"),t(go.Spot.BottomLeft,"sw-resize"),t(go.Spot.Left,"w-resize"),t(go.Spot.TopLeft,"nw-resize"))}(),rotateAdornmentTemplate:function(){var t=go.GraphObject.make;return t(go.Adornment,{locationSpot:go.Spot.Center,locationObjectName:"CIRCLE"},t(go.Shape,"Circle",{name:"CIRCLE",cursor:"pointer",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","",function(t){return null===t.adornedPart?"#ffffff":t.adornedPart.data.color}).ofObject(),new go.Binding("stroke","",function(t){return null===t.adornedPart?"#000000":t.adornedPart.data.stroke}).ofObject()))}(),contextMenu:makeContextMenu(),locationObjectName:"SHAPE",resizeObjectName:"SHAPE",rotateObjectName:"SHAPE",minSize:new go.Size(5,5),locationSpot:go.Spot.Center,selectionAdorned:!1,doubleClick:function(t){t.diagram.floorplanUI&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")}},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("layerName","isSelected",function(t){return t?"Foreground":""}).ofObject(),l(go.Shape,{strokeWidth:1,name:"SHAPE",stroke:"#000000",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgba(128, 128, 128, 0.5)"},new go.Binding("geometryString","geo"),new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("figure","shape").makeTwoWay(),new go.Binding("stroke","isSelected",function(e,i){return e?go.Brush.lightenBy(i.stroke,.5):t(i.part.data.color)}).ofObject(),new go.Binding("fill","color")))),this.nodeTemplateMap.add("MultiPurposeNode",l(go.Node,"Spot",{contextMenu:makeContextMenu(),toolTip:function(){var t=go.GraphObject.make;return t(go.Adornment,"Auto",t(go.Shape,{fill:"#FFFFCC"}),t(go.TextBlock,{margin:4},new go.Binding("text","",function(t,e){var i=e.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===e.part.adornedObject.category?i.text:i.caption)+"\nNotes: "+i.notes}).ofObject()))}(),locationSpot:go.Spot.Center,resizeAdornmentTemplate:function(){function t(t,i){return e(go.Shape,{alignment:t,cursor:i,figure:"Rectangle",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","color"),new go.Binding("stroke","stroke"))}var e=go.GraphObject.make;return e(go.Adornment,"Spot",{locationSpot:go.Spot.Center},e(go.Placeholder),t(go.Spot.Top,"n-resize"),t(go.Spot.TopRight,"n-resize"),t(go.Spot.BottomRight,"se-resize"),t(go.Spot.Right,"e-resize"),t(go.Spot.Bottom,"s-resize"),t(go.Spot.BottomLeft,"sw-resize"),t(go.Spot.Left,"w-resize"),t(go.Spot.TopLeft,"nw-resize"))}(),rotateAdornmentTemplate:function(){var t=go.GraphObject.make;return t(go.Adornment,{locationSpot:go.Spot.Center,locationObjectName:"CIRCLE"},t(go.Shape,"Circle",{name:"CIRCLE",cursor:"pointer",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","",function(t){return null===t.adornedPart?"#ffffff":t.adornedPart.data.color}).ofObject(),new go.Binding("stroke","",function(t){return null===t.adornedPart?"#000000":t.adornedPart.data.stroke}).ofObject()))}(),locationObjectName:"SHAPE",resizable:!0,rotatable:!0,resizeObjectName:"SHAPE",rotateObjectName:"SHAPE",minSize:new go.Size(5,5),selectionAdorned:!1,doubleClick:function(t){t.diagram.floorplanUI&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")}},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("layerName","isSelected",function(t){return t?"Foreground":""}).ofObject(),l(go.Shape,{strokeWidth:1,name:"SHAPE",fill:"rgba(128, 128, 128, 0.5)"},new go.Binding("angle","angle").makeTwoWay(),new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("stroke","isSelected",function(e,i){return e?go.Brush.lightenBy(i.stroke,.5):t(i.part.data.color)}).ofObject(),new go.Binding("fill","color")),l(go.TextBlock,{margin:5,wrap:go.TextBlock.WrapFit,textAlign:"center",editable:!0,isMultiline:!1,stroke:"#454545",font:"10pt sans-serif"},new go.Binding("text").makeTwoWay(),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("font","height",function(t){return t>25?"10pt sans-serif":t<25&&t>15?"8pt sans-serif":"6pt sans-serif"}),new go.Binding("stroke","color",function(e){return t(e)})))),this.nodeTemplateMap.add("WindowNode",l(go.Node,"Spot",{contextMenu:makeContextMenu(),selectionObjectName:"SHAPE",selectionAdorned:!1,locationSpot:go.Spot.Center,name:"NODE",toolTip:function(){var t=go.GraphObject.make;return t(go.Adornment,"Auto",t(go.Shape,{fill:"#FFFFCC"}),t(go.TextBlock,{margin:4},new go.Binding("text","",function(t,e){var i=e.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===e.part.adornedObject.category?i.text:i.caption)+"\nNotes: "+i.notes}).ofObject()))}(),minSize:new go.Size(5,5),resizable:!0,resizeAdornmentTemplate:l(go.Adornment,"Spot",{name:"WallPartResizeAdornment",locationSpot:go.Spot.Center},l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Left,cursor:"w-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"}),l(go.Shape,{alignment:go.Spot.Right,cursor:"e-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"})),resizeObjectName:"SHAPE",rotatable:!1,doubleClick:function(t){t.diagram.floorplanUI&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")},dragComputation:h,layerName:"Foreground"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("angle","angle").makeTwoWay(),l(go.Shape,{name:"SHAPE",fill:"white",strokeWidth:0},new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject(),new go.Binding("fill","isSelected",function(t){return t?"lightgray":"white"}).ofObject()),l(go.Shape,{name:"LINESHAPE",fill:"darkgray",strokeWidth:0,height:10},new go.Binding("width","width",function(t){return t-10}),new go.Binding("height","height",function(t){return t/5}),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject()))),this.nodeTemplateMap.add("PaletteWallNode",l(go.Node,"Spot",{selectionAdorned:!1,locationSpot:go.Spot.Center},l(go.Shape,{name:"SHAPE",fill:"black",strokeWidth:0,height:10,figure:"Rectangle"},new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("fill","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject(),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject()))),this.nodeTemplateMap.add("DoorNode",l(go.Node,"Spot",{contextMenu:makeContextMenu(),selectionObjectName:"SHAPE",selectionAdornmentTemplate:l(go.Adornment,"Vertical",{name:"DoorSelectionAdornment"},l(go.Panel,"Auto",l(go.Shape,{fill:null,stroke:null}),l(go.Placeholder)),l(go.Panel,"Horizontal",{defaultStretch:go.GraphObject.Vertical},l("Button",l(go.Picture,{source:"/assets/gojs/tools/icons/flipDoorOpeningLeft.png",column:0,desiredSize:new go.Size(12,12)},new go.Binding("source","",function(t){return null===t.adornedPart?"/assets/gojs/tools/icons/flipDoorOpeningRight.png":"left"===t.adornedPart.data.swing?"/assets/gojs/tools/icons/flipDoorOpeningRight.png":"icons/flipDoorOpeningLeft.png"}).ofObject()),{click:function(t,e){var i=e.part.diagram;i.startTransaction("flip door");var n=e.part.adornedPart;"left"===n.data.swing?i.model.setDataProperty(n.data,"swing","right"):i.model.setDataProperty(n.data,"swing","left"),i.commitTransaction("flip door")},toolTip:l(go.Adornment,"Auto",l(go.Shape,{fill:"#FFFFCC"}),l(go.TextBlock,{margin:4,text:"Flip Door Opening"}))},new go.Binding("visible","",function(t){return null!==t.adornedPart&&null!==t.adornedPart.containingGroup}).ofObject()),l("Button",l(go.Picture,{source:"/assets/gojs/tools/icons/flipDoorSide.png",column:0,desiredSize:new go.Size(12,12)}),{click:function(t,e){var i=e.part.diagram;i.startTransaction("rotate door");var n=e.part.adornedPart;n.angle=(n.angle+180)%360,i.commitTransaction("rotate door")},toolTip:l(go.Adornment,"Auto",l(go.Shape,{fill:"#FFFFCC"}),l(go.TextBlock,{margin:4,text:"Flip Door Side"}))}),new go.Binding("visible","",function(t){return null!==t.adornedPart&&null!==t.adornedPart.containingGroup}).ofObject())),locationSpot:go.Spot.BottomCenter,resizable:!0,resizeObjectName:"OPENING_SHAPE",rotatable:!1,toolTip:function(){var t=go.GraphObject.make;return t(go.Adornment,"Auto",t(go.Shape,{fill:"#FFFFCC"}),t(go.TextBlock,{margin:4},new go.Binding("text","",function(t,e){var i=e.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===e.part.adornedObject.category?i.text:i.caption)+"\nNotes: "+i.notes}).ofObject()))}(),minSize:new go.Size(10,10),doubleClick:function(t){t.diagram.floorplanUI&&t.diagram.floorplanUI.hideShow("selectionInfoWindow")},dragComputation:h,resizeAdornmentTemplate:l(go.Adornment,"Spot",{name:"WallPartResizeAdornment",locationSpot:go.Spot.Center},l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Left,cursor:"w-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"}),l(go.Shape,{alignment:go.Spot.Right,cursor:"e-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"})),layerName:"Foreground"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("locationSpot","doorOpeningHeight",function(t){return new go.Spot(.5,1,0,-t/2)}),l(go.Shape,{name:"SHAPE",strokeWidth:1},new go.Binding("width","width"),new go.Binding("height","width").makeTwoWay(),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject(),new go.Binding("fill","color"),new go.Binding("geometryString","swing",function(t){return"left"===t?"F1 M0,0 v-150 a150,150 0 0,1 150,150 ":"F1 M275,175 v-150 a150,150 0 0,0 -150,150 "})),l(go.Shape,{name:"OPENING_SHAPE",fill:"white",strokeWidth:0,height:5,width:40,alignment:go.Spot.BottomCenter,alignmentFocus:go.Spot.Center},new go.Binding("height","doorOpeningHeight").makeTwoWay(),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject(),new go.Binding("fill","isSelected",function(t){return t?"lightgray":"white"}).ofObject(),new go.Binding("width","width").makeTwoWay()))),this.nodeTemplateMap.add("color_box",l(go.Node,"Auto",l(go.Shape,"Rectangle",{fill:"white"},new go.Binding("fill","color")),l(go.TextBlock,{margin:5},new go.Binding("text","key")))),this.nodeTemplateMap.add("floor",l(go.Node,"Spot",{locationObjectName:"SHAPE",locationSpot:go.Spot.Center,toolTip:l(go.Adornment,go.Panel.Auto,l(go.Shape,"RoundedRectangle",{fill:"whitesmoke",stroke:"gray"}),l(go.TextBlock,{margin:3,editable:!0},new go.Binding("text","",function(t){return t.item!=undefined?t.item:"(unnamed item)"}))),selectionAdorned:!1},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("layerName","isSelected",function(t){return t?"Foreground":""}).ofObject(),{resizable:!0,resizeObjectName:"SHAPE"},{rotatable:!0,rotateObjectName:"SHAPE"},l(go.Shape,{name:"SHAPE",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgb(130, 130, 256)"},new go.Binding("geometryString","geo"),new go.Binding("fill","color"),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject(),new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("angle","angle").makeTwoWay())));var u=function(){return[new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("isShadowed","isSelected").ofObject(),{selectionAdorned:!1,shadowOffset:new go.Point(0,0),shadowBlur:15,shadowColor:"blue"}]},c=function(){return{name:"NODESHAPE",fill:"lightgray",stroke:"darkslategray",desiredSize:new go.Size(40,40),strokeWidth:2}},f=function(t){return{desiredSize:new go.Size(6,6),fill:"black",fromSpot:go.Spot.Right,fromLinkable:!t,toSpot:go.Spot.Left,toLinkable:t,toMaxLinks:1,cursor:"pointer"}};this.nodeTemplateMap.add("circuit.input",l(go.Node,"Spot",u(),l(go.Shape,"Circle",c(),{fill:"orangered"}),l(go.Shape,"Rectangle",f(!1),{portId:"",alignment:new go.Spot(1,.5)}),{doubleClick:function(t,e){t.diagram.startTransaction("Toggle Input");var i=e.findObject("NODESHAPE");i.fill="forestgreen"===i.fill?"orangered":"forestgreen",updateStates(),t.diagram.commitTransaction("Toggle Input")}})),this.nodeTemplateMap.add("circuit.output",l(go.Node,"Spot",u(),l(go.Shape,"Rectangle",c(),{fill:"forestgreen"}),l(go.Shape,"Rectangle",f(!0),{portId:"",alignment:new go.Spot(0,.5)}))),this.nodeTemplateMap.add("circuit.and",l(go.Node,"Spot",u(),l(go.Shape,"AndGate",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in1",alignment:new go.Spot(0,.3)}),l(go.Shape,"Rectangle",f(!0),{portId:"in2",alignment:new go.Spot(0,.7)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.or",l(go.Node,"Spot",u(),l(go.Shape,"OrGate",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in1",alignment:new go.Spot(.16,.3)}),l(go.Shape,"Rectangle",f(!0),{portId:"in2",alignment:new go.Spot(.16,.7)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.xor",l(go.Node,"Spot",u(),l(go.Shape,"XorGate",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in1",alignment:new go.Spot(.26,.3)}),l(go.Shape,"Rectangle",f(!0),{portId:"in2",alignment:new go.Spot(.26,.7)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.nor",l(go.Node,"Spot",u(),l(go.Shape,"NorGate",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in1",alignment:new go.Spot(.16,.3)}),l(go.Shape,"Rectangle",f(!0),{portId:"in2",alignment:new go.Spot(.16,.7)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.xnor",l(go.Node,"Spot",u(),l(go.Shape,"XnorGate",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in1",alignment:new go.Spot(.26,.3)}),l(go.Shape,"Rectangle",f(!0),{portId:"in2",alignment:new go.Spot(.26,.7)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.nand",l(go.Node,"Spot",u(),l(go.Shape,"NandGate",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in1",alignment:new go.Spot(0,.3)}),l(go.Shape,"Rectangle",f(!0),{portId:"in2",alignment:new go.Spot(0,.7)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.not",l(go.Node,"Spot",u(),l(go.Shape,"Inverter",c()),l(go.Shape,"Rectangle",f(!0),{portId:"in",alignment:new go.Spot(0,.5)}),l(go.Shape,"Rectangle",f(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("flowchart.normal",l(go.Node,"Spot",e(),l(go.Panel,"Auto",l(go.Shape,"Rectangle",{fill:"#00A9C9",stroke:null},new go.Binding("figure","figure")),l(go.TextBlock,{font:"bold 11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke",margin:8,maxSize:new go.Size(160,NaN),wrap:go.TextBlock.WrapFit,editable:!0},new go.Binding("text").makeTwoWay())),n("T",go.Spot.Top,!1,!0),n("L",go.Spot.Left,!0,!0),n("R",go.Spot.Right,!0,!0),n("B",go.Spot.Bottom,!0,!1))),this.nodeTemplateMap.add("flowchart.start",l(go.Node,"Spot",e(),l(go.Panel,"Auto",l(go.Shape,"Circle",{minSize:new go.Size(40,40),fill:"#79C900",stroke:null}),l(go.TextBlock,"Start",{font:"bold 11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke"},new go.Binding("text"))),n("L",go.Spot.Left,!0,!1),n("R",go.Spot.Right,!0,!1),n("B",go.Spot.Bottom,!0,!1))),this.nodeTemplateMap.add("flowchart.end",l(go.Node,"Spot",e(),l(go.Panel,"Auto",l(go.Shape,"Circle",{minSize:new go.Size(40,40),fill:"#DC3C00",stroke:null}),l(go.TextBlock,"End",{font:"bold 11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke"},new go.Binding("text"))),n("T",go.Spot.Top,!1,!0),n("L",go.Spot.Left,!1,!0),n("R",go.Spot.Right,!1,!0))),this.nodeTemplateMap.add("flowchart.comment",l(go.Node,"Auto",e(),l(go.Shape,"File",{fill:"#EFFAB4",stroke:null}),l(go.TextBlock,{margin:5,maxSize:new go.Size(200,NaN),wrap:go.TextBlock.WrapFit,textAlign:"center",editable:!0,font:"bold 12pt Helvetica, Arial, sans-serif",stroke:"#454545"},new go.Binding("text").makeTwoWay()))),this.nodeTemplateMap.add("class_hierarchy",l(go.Node,l("HyperlinkText",function(t){return"../api/symbols/"+t.data.key+".html"},l(go.Panel,"Auto",l(go.Shape,{fill:"#1F4963",stroke:null}),l(go.TextBlock,{font:"bold 13px Helvetica, bold Arial, sans-serif",stroke:"white",margin:3},new go.Binding("text","key")))))),this.nodeTemplateMap.add("dom",l(go.Node,"Horizontal",{selectionChanged:function(t){t.isSelected?window.dom_names[t.data.name].style.backgroundColor="lightblue":window.dom_names[t.data.name].style.backgroundColor=""}},l(go.Panel,"Auto",l(go.Shape,{fill:"#1F4963",stroke:null}),l(go.TextBlock,{font:"bold 13px Helvetica, bold Arial, sans-serif",stroke:"white",margin:3},new go.Binding("text","key"))),l("TreeExpanderButton"))),this.nodeTemplateMap.add("shape",l(go.Node,"Vertical",{locationSpot:go.Spot.Center,locationObjectName:"SHAPE",selectionAdorned:!1,resizable:!0,resizeObjectName:"SHAPE",rotatable:!0,rotateObjectName:"SHAPE",layoutConditions:go.Part.LayoutStandard&~go.Part.LayoutNodeSized},new go.Binding("layerName","isHighlighted",function(t){return t?"Foreground":""}).ofObject(),l(go.Shape,{name:"SHAPE",width:40,height:40,stroke:"#C2185B",fill:"#F48FB1",strokeWidth:3},new go.Binding("figure","key")),l(go.TextBlock,{margin:4,font:"bold 18px sans-serif",background:"white"},new go.Binding("visible","isHighlighted").ofObject(),new go.Binding("text","key")))),this.nodeTemplateMap.add("icon",l(go.Node,"Auto",l(go.Shape,"Circle",{fill:"lightcoral",strokeWidth:4,stroke:"#888",width:40,height:40},new go.Binding("fill","color")),l(go.Shape,{margin:3,fill:"#F5F5F5",strokeWidth:0},new go.Binding("geometry","geo",function(t){var e=icons[t];return e===undefined&&(e="heart"),"string"==typeof e&&(e=icons[t]=go.Geometry.parse(e,!0).scale(.6,.6)),e})),{toolTip:l(go.Adornment,"Auto",l(go.Shape,{fill:"LightYellow",stroke:"#888",strokeWidth:2}),l(go.TextBlock,{margin:8,stroke:"#888",font:"bold 16px sans-serif"},new go.Binding("text","geo")))})),this.nodeTemplateMap.add("font-awesome",l(go.Node,"Auto",{rotatable:!0,locationSpot:go.Spot.Center,resizable:!0,width:32},l(go.TextBlock,{name:"TEXTBLOCK",stroke:"#000",margin:0,textAlign:"center",verticalAlignment:go.Spot.Center,font:"26px FontAwesome",editable:!1,isMultiline:!1
},new go.Binding("text"),new go.Binding("font","width",function(t){return Math.round(t/32*26)+"px FontAwesome"}).ofObject()))),this.nodeTemplateMap.add("glyphicons",l(go.Node,"Auto",{rotatable:!0,locationSpot:go.Spot.Center,resizable:!0,width:32},l(go.TextBlock,{name:"TEXTBLOCK",stroke:"#000",margin:0,textAlign:"center",verticalAlignment:go.Spot.Bottom,font:"26px Glyphicons Halflings",editable:!1,isMultiline:!1},new go.Binding("text"),new go.Binding("font","width",function(t){return Math.round(t/32*26)+"px Glyphicons Halflings"}).ofObject()))),this.nodeTemplateMap.add("entity_relationship",l(go.Node,"Auto",{selectionAdorned:!0,resizable:!0,layoutConditions:go.Part.LayoutStandard&~go.Part.LayoutNodeSized,fromSpot:go.Spot.AllSides,toSpot:go.Spot.AllSides,isShadowed:!0,shadowColor:"#C5C1AA"},new go.Binding("location","location").makeTwoWay(),new go.Binding("desiredSize","visible",function(){return new go.Size(NaN,NaN)}).ofObject("LIST"),l(go.Shape,"Rectangle",{fill:this.brushes.lightgrad,stroke:"#756875",strokeWidth:3}),l(go.Panel,"Table",{margin:8,stretch:go.GraphObject.Fill},l(go.RowColumnDefinition,{row:0,sizing:go.RowColumnDefinition.None}),l(go.TextBlock,{row:0,alignment:go.Spot.Center,margin:new go.Margin(0,14,0,2),font:"bold 16px sans-serif"},new go.Binding("text","key")),l("PanelExpanderButton","LIST",{row:0,alignment:go.Spot.TopRight}),l(go.Panel,"Vertical",{name:"LIST",row:1,padding:3,alignment:go.Spot.TopLeft,defaultAlignment:go.Spot.Left,stretch:go.GraphObject.Horizontal,itemTemplate:l(go.Panel,"Horizontal",l(go.Shape,{desiredSize:new go.Size(10,10)},new go.Binding("figure","figure"),new go.Binding("fill","color")),l(go.TextBlock,{stroke:"#333333",font:"bold 14px sans-serif"},new go.Binding("text","name")))},new go.Binding("itemArray","items"))))),this.nodeTemplateMap.add("gantt",l(go.Node,"Auto",{fromSpot:go.Spot.Right,toSpot:new go.Spot(.001,0,11,0)},l(go.Shape,"Rectangle",{height:15},new go.Binding("fill","color"),new go.Binding("width","width",function(t){return t})),l(go.TextBlock,{margin:2,alignment:go.Spot.Left},new go.Binding("text","key")),new go.Binding("location","loc",function(t){return new go.Point(t.x,t.y)}))),this.nodeTemplateMap.add("gantt_start",l(go.Node,{fromSpot:go.Spot.Right,toSpot:go.Spot.Top,selectable:!1},l(go.Shape,"Diamond",{height:15,width:15}),new go.Binding("location","loc"))),this.nodeTemplateMap.add("gantt_end",l(go.Node,{fromSpot:go.Spot.Right,toSpot:go.Spot.Top,selectable:!1},l(go.Shape,"Diamond",{height:15,width:15}),new go.Binding("location","loc",function(t){return t.x>=0?new go.Point(t.x,t.y):t}))),this.nodeTemplateMap.add("gantt_date",l(go.Part,{selectable:!1},new go.Binding("location","loc",function(t){return new go.Point(t.x,t.y)}),l(go.TextBlock,new go.Binding("text","key")))),this.nodeTemplateMap.add("uml",l(go.Node,"Auto",{locationSpot:go.Spot.Center,fromSpot:go.Spot.AllSides,toSpot:go.Spot.AllSides},l(go.Shape,{fill:"lightyellow"}),l(go.Panel,"Table",{defaultRowSeparatorStroke:"black"},l(go.TextBlock,{row:0,columnSpan:2,margin:3,alignment:go.Spot.Center,font:"bold 12pt sans-serif",isMultiline:!1,editable:!0},new go.Binding("text","name").makeTwoWay()),l(go.TextBlock,"Properties",{row:1,font:"italic 10pt sans-serif"},new go.Binding("visible","visible",function(t){return!t}).ofObject("PROPERTIES")),l(go.Panel,"Vertical",{name:"PROPERTIES"},new go.Binding("itemArray","properties"),{row:1,margin:3,stretch:go.GraphObject.Fill,defaultAlignment:go.Spot.Left,background:"lightyellow",itemTemplate:l(go.Panel,"Horizontal",l(go.TextBlock,{isMultiline:!1,editable:!1,width:12},new go.Binding("text","visibility",function(t){switch(t){case"public":return"+";case"private":return"-";case"protected":return"#";case"package":return"~";default:return t}})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","name").makeTwoWay(),new go.Binding("isUnderline","scope",function(t){return"c"===t[0]})),l(go.TextBlock,"",new go.Binding("text","type",function(t){return t?": ":""})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","type").makeTwoWay()),l(go.TextBlock,{isMultiline:!1,editable:!1},new go.Binding("text","default",function(t){return t?" = "+t:""})))}),l("PanelExpanderButton","PROPERTIES",{row:1,column:1,alignment:go.Spot.TopRight,visible:!1},new go.Binding("visible","properties",function(t){return t.length>0})),l(go.TextBlock,"Methods",{row:2,font:"italic 10pt sans-serif"},new go.Binding("visible","visible",function(t){return!t}).ofObject("METHODS")),l(go.Panel,"Vertical",{name:"METHODS"},new go.Binding("itemArray","methods"),{row:2,margin:3,stretch:go.GraphObject.Fill,defaultAlignment:go.Spot.Left,background:"lightyellow",itemTemplate:l(go.Panel,"Horizontal",l(go.TextBlock,{isMultiline:!1,editable:!1,width:12},new go.Binding("text","visibility",function(t){switch(t){case"public":return"+";case"private":return"-";case"protected":return"#";case"package":return"~";default:return t}})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","name").makeTwoWay(),new go.Binding("isUnderline","scope",function(t){return"c"===t[0]})),l(go.TextBlock,"()",new go.Binding("text","parameters",function(t){for(var e="(",i=0;i<t.length;i++){var n=t[i];i>0&&(e+=", "),e+=n.name+": "+n.type}return e+")"})),l(go.TextBlock,"",new go.Binding("text","type",function(t){return t?": ":""})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","type").makeTwoWay()))}),l("PanelExpanderButton","METHODS",{row:2,column:1,alignment:go.Spot.TopRight,visible:!1},new go.Binding("visible","methods",function(t){return t.length>0}))))),this.nodeTemplateMap.add("process_flow",l(go.Node,"Auto",{locationSpot:new go.Spot(.5,.5),locationObjectName:"SHAPE",resizable:!0,resizeObjectName:"SHAPE"},new go.Binding("location","pos",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.Shape,"Cylinder1",{name:"SHAPE",strokeWidth:2,fill:l(go.Brush,"Linear",{start:go.Spot.Left,end:go.Spot.Right,0:"gray",.5:"white",1:"gray"}),minSize:new go.Size(50,50),portId:"",fromSpot:go.Spot.AllSides,toSpot:go.Spot.AllSides},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify)),l(go.TextBlock,{alignment:go.Spot.Center,textAlign:"center",margin:5,editable:!0},new go.Binding("text").makeTwoWay()))),this.nodeTemplateMap.add("process_flow_value",l(go.Node,"Vertical",{locationSpot:new go.Spot(.5,1,0,-21),locationObjectName:"SHAPE",selectionObjectName:"SHAPE",rotatable:!0},new go.Binding("angle").makeTwoWay(),new go.Binding("location","pos",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.TextBlock,{alignment:go.Spot.Center,textAlign:"center",margin:5,editable:!0},new go.Binding("text").makeTwoWay(),new go.Binding("angle","angle",function(t){return 180===t?180:0}).ofObject()),l(go.Shape,{name:"SHAPE",geometryString:"F1 M0 0 L40 20 40 0 0 20z M20 10 L20 30 M12 30 L28 30",strokeWidth:2,fill:l(go.Brush,"Linear",{0:"gray",.35:"white",.7:"gray"}),portId:"",fromSpot:new go.Spot(1,.35),toSpot:new go.Spot(0,.35)}))),this.nodeTemplateMap.add("state_chart",l(go.Node,"Auto",new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.Shape,"RoundedRectangle",{parameter1:20,fill:l(go.Brush,"Linear",{0:"rgb(254, 201, 0)",1:"rgb(254, 162, 0)"}),stroke:null,portId:"",fromLinkable:!0,fromLinkableSelfNode:!0,fromLinkableDuplicates:!0,toLinkable:!0,toLinkableSelfNode:!0,toLinkableDuplicates:!0,cursor:"pointer"}),l(go.TextBlock,{font:"bold 11pt helvetica, bold arial, sans-serif",editable:!0},new go.Binding("text").makeTwoWay()),{selectionAdornmentTemplate:l(go.Adornment,"Spot",l(go.Panel,"Auto",l(go.Shape,{fill:null,stroke:"blue",strokeWidth:2}),l(go.Placeholder)),l("Button",{alignment:go.Spot.TopRight,click:function(t,e){var i=e.part,n=t.diagram;n.startTransaction("Add State");var o=i.adornedPart,r=o.data,a={category:"state_chart",text:"new"},s=o.location.copy();s.x+=200,a.loc=go.Point.stringify(s);var l=n.model;l.addNodeData(a);var h={from:l.getKeyForNodeData(r),to:l.getKeyForNodeData(a),text:"transition",category:"state_chart"};l.addLinkData(h);var u=n.findNodeForData(a);n.select(u),n.commitTransaction("Add State"),n.scrollToRect(u.actualBounds)}},l(go.Shape,"PlusLine",{width:6,height:6})))})),this.nodeTemplateMap.add("pipe_comment",l(go.Node,new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.TextBlock,{stroke:"brown",font:"9pt sans-serif"},new go.Binding("text")))),this.nodeTemplateMap.add("pipe",l(go.Node,"Spot",{locationObjectName:"SHAPE",locationSpot:go.Spot.Center,selectionAdorned:!1,itemTemplate:l(go.Panel,new go.Binding("portId","id"),new go.Binding("alignment","spot",go.Spot.parse),l(go.Shape,"XLine",{width:6,height:6,background:"transparent",fill:null,stroke:"gray"},new go.Binding("figure","id",function(t){return null===t||""===t?"XLine":"F"===t[0]?"CircleLine":"M"===t[0]?"PlusLine":"XLine"}),new go.Binding("angle","angle"))),linkConnected:function(t,e,i){""===e.category&&(i.visible=!1)},linkDisconnected:function(t,e,i){""===e.category&&(i.visible=!0)}},new go.Binding("itemArray","ports"),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("layerName","isSelected",function(t){return t?"Foreground":""}).ofObject(),l(go.Shape,{name:"SHAPE",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgba(128, 128, 128, 0.5)"},new go.Binding("geometryString","geo"),new go.Binding("stroke","isSelected",function(t){return t?"dodgerblue":"black"}).ofObject()),{contextMenu:l(go.Adornment,"Vertical",l("ContextMenuButton",l(go.TextBlock,"Rotate +45"),{click:function(t,e){o(e.part.adornedPart,45)}}),l("ContextMenuButton",l(go.TextBlock,"Rotate -45"),{click:function(t,e){o(e.part.adornedPart,-45)}}),l("ContextMenuButton",l(go.TextBlock,"Rotate 180"),{click:function(t,e){o(e.part.adornedPart,180)}}),l("ContextMenuButton",l(go.TextBlock,"Detach"),{click:function(t,e){e.diagram.startTransaction("detach");var i=new go.Set(go.Link);e.diagram.selection.each(function(t){t instanceof go.Node&&t.linksConnected.each(function(e){""===e.category&&(e.getOtherNode(t).isSelected||i.add(e))})}),e.diagram.removeParts(i,!1),e.diagram.commitTransaction("detach")}}),l("ContextMenuButton",l(go.TextBlock,"Delete"),{click:function(t){t.diagram.commandHandler.deleteSelection()}}))})),this.nodeTemplateMap.add("FreehandDrawing",l(go.Part,{locationSpot:go.Spot.Center,isLayoutPositioned:!1},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{selectionAdorned:!0,selectionObjectName:"SHAPE",selectionAdornmentTemplate:l(go.Adornment,"Auto",l(go.Shape,{stroke:"dodgerblue",fill:null}),l(go.Placeholder,{margin:-1}))},{resizable:!0,resizeObjectName:"SHAPE"},{rotatable:!0,rotateObjectName:"SHAPE"},{reshapable:!0},l(go.Shape,{name:"SHAPE",fill:null,strokeWidth:1.5},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("angle").makeTwoWay(),new go.Binding("geometryString","geo").makeTwoWay(),new go.Binding("fill"),new go.Binding("stroke"),new go.Binding("strokeWidth")))),this.nodeTemplateMap.add("sankey",l(go.Node,go.Panel.Horizontal,{locationObjectName:"SHAPE",locationSpot:go.Spot.MiddleLeft,portSpreading:go.Node.SpreadingPacked},l(go.TextBlock,{font:"bold 12pt Segoe UI, sans-serif",stroke:"black",margin:5},{name:"LTEXT"},new go.Binding("text","ltext")),l(go.Shape,{name:"SHAPE",figure:"Rectangle",fill:"#2E8DEF",stroke:null,strokeWidth:0,portId:"",fromSpot:go.Spot.RightSide,toSpot:go.Spot.LeftSide,height:50,width:20},new go.Binding("fill","color")),l(go.TextBlock,{font:"bold 12pt Segoe UI, sans-serif",stroke:"black",margin:5},{name:"TEXT"},new go.Binding("text")))),this.nodeTemplateMap.add("pert",l(go.Node,"Auto",l(go.Shape,"Rectangle",{fill:"white",strokeWidth:2},new go.Binding("fill","critical",function(t){return t?"#F8BBD0":"#B3E5FC"}),new go.Binding("stroke","critical",function(t){return t?"#B71C1C":"#0288D1"})),l(go.Panel,"Table",{padding:.5},l(go.RowColumnDefinition,{column:1,separatorStroke:"black"}),l(go.RowColumnDefinition,{column:2,separatorStroke:"black"}),l(go.RowColumnDefinition,{row:1,separatorStroke:"black",background:"white",coversSeparators:!0}),l(go.RowColumnDefinition,{row:2,separatorStroke:"black"}),l(go.TextBlock,new go.Binding("text","earlyStart"),{row:0,column:0,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","length"),{row:0,column:1,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","",function(t){return(t.earlyStart+t.length).toFixed(2)}),{row:0,column:2,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","text"),{row:1,column:0,columnSpan:3,margin:5,textAlign:"center",font:"bold 14px sans-serif"}),l(go.TextBlock,new go.Binding("text","",function(t){return(t.lateFinish-t.length).toFixed(2)}),{row:2,column:0,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","",function(t){return(t.lateFinish-(t.earlyStart+t.length)).toFixed(2)}),{row:2,column:1,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","lateFinish"),{row:2,column:2,margin:5,textAlign:"center"})))),this.nodeTemplateMap.add("wheel",l(go.Node,"Horizontal",{selectionAdorned:!1,locationSpot:go.Spot.Center,locationObjectName:"SHAPE",mouseEnter:function(t,e){e.diagram.clearHighlighteds(),e.linksConnected.each(function(t){t.isHighlighted=!0,t.fromNode.isHighlighted=!0,t.toNode.isHighlighted=!0}),e.isHighlighted=!0;var i=e.findObject("TEXTBLOCK");null!==i&&(i.stroke="red")},mouseLeave:function(t,e){e.diagram.clearHighlighteds();var i=e.findObject("TEXTBLOCK");null!==i&&(i.stroke="black")}},new go.Binding("text","text"),l(go.Shape,"Ellipse",{name:"SHAPE",fill:"lightgray",stroke:"transparent",strokeWidth:2,desiredSize:new go.Size(20,20),portId:""},new go.Binding("fill","color"),new go.Binding("stroke","isHighlighted",function(t){return t?"red":"transparent"}).ofObject()),l(go.TextBlock,{name:"TEXTBLOCK"},new go.Binding("text","text")))),this.nodeTemplateMap.add("seating_person",l(go.Node,"Auto",{background:"transparent"},new go.Binding("layerName","isSelected",function(t){return t?"Foreground":""}).ofObject(),{locationSpot:go.Spot.Center},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("text","key"),{mouseDragEnter:function(t,e){highlightSeats(e,e.diagram.selection,!0)},mouseDragLeave:function(t,e){highlightSeats(e,e.diagram.selection,!1)},mouseDrop:function(t,e){assignPeopleToSeats(e,e.diagram.selection,t.documentPoint)}},l(go.Shape,"Rectangle",{fill:"blanchedalmond",stroke:null}),l(go.Panel,"Viewbox",{desiredSize:new go.Size(50,38)},l(go.TextBlock,{margin:2,desiredSize:new go.Size(55,NaN),font:"8pt Verdana, sans-serif",textAlign:"center",stroke:"darkblue"},new go.Binding("text","",function(t){var e=t.key;return t.plus&&(e+=" +"+t.plus.toString()),e}))))),this.nodeTemplateMap.add("TableR8",l(go.Node,"Spot",a(),l(go.Panel,"Spot",l(go.Shape,"Rectangle",{name:"TABLESHAPE",desiredSize:new go.Size(160,80),fill:"burlywood",stroke:null},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("fill")),l(go.TextBlock,{editable:!0,font:"bold 11pt Verdana, sans-serif"},new go.Binding("text","name").makeTwoWay(),new go.Binding("angle","angle",function(t){return-t}))),r(1,"0.2 0","0.5 1"),r(2,"0.5 0","0.5 1"),r(3,"0.8 0","0.5 1"),r(4,"1 0.5","0 0.5"),r(5,"0.8 1","0.5 0"),r(6,"0.5 1","0.5 0"),r(7,"0.2 1","0.5 0"),r(8,"0 0.5","1 0.5"))),this.nodeTemplateMap.add("TableR3",l(go.Node,"Spot",a(),l(go.Panel,"Spot",l(go.Shape,"Rectangle",{name:"TABLESHAPE",desiredSize:new go.Size(160,60),fill:"burlywood",stroke:null},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("fill")),l(go.TextBlock,{editable:!0,font:"bold 11pt Verdana, sans-serif"},new go.Binding("text","name").makeTwoWay(),new go.Binding("angle","angle",function(t){return-t}))),r(1,"0.2 0","0.5 1"),r(2,"0.5 0","0.5 1"),r(3,"0.8 0","0.5 1"))),this.nodeTemplateMap.add("TableC8",l(go.Node,"Spot",a(),l(go.Panel,"Spot",l(go.Shape,"Circle",{name:"TABLESHAPE",desiredSize:new go.Size(120,120),fill:"burlywood",stroke:null},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("fill")),l(go.TextBlock,{editable:!0,font:"bold 11pt Verdana, sans-serif"},new go.Binding("text","name").makeTwoWay(),new go.Binding("angle","angle",function(t){return-t}))),r(1,"0.50 0","0.5 1"),r(2,"0.85 0.15","0.15 0.85"),r(3,"1 0.5","0 0.5"),r(4,"0.85 0.85","0.15 0.15"),r(5,"0.50 1","0.5 0"),r(6,"0.15 0.85","0.85 0.15"),r(7,"0 0.5","1 0.5"),r(8,"0.15 0.15","0.85 0.85"))),this.nodeTemplateMap.add("timeline",l(go.Node,"Table",{locationSpot:go.Spot.Center,movable:!1},l(go.Panel,"Auto",l(go.Shape,"RoundedRectangle",{fill:"#252526",stroke:"#519ABA",strokeWidth:3}),l(go.Panel,"Table",l(go.TextBlock,{row:0,stroke:"#CCCCCC",wrap:go.TextBlock.WrapFit,font:"bold 12pt sans-serif",textAlign:"center",margin:4},new go.Binding("text","event")),l(go.TextBlock,{row:1,stroke:"#A074C4",textAlign:"center",margin:4},new go.Binding("text","date",function(t){return t.toLocaleDateString()})))))),this.nodeTemplateMap.add("timeline_line",l(go.Node,"Graduated",{movable:!1,copyable:!1,resizable:!0,resizeObjectName:"MAIN",background:"transparent",graduatedMin:0,graduatedMax:365,graduatedTickUnit:1,resizeAdornmentTemplate:l(go.Adornment,"Spot",l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Right,cursor:"e-resize",desiredSize:new go.Size(4,16),fill:"lightblue",stroke:"deepskyblue"}))},new go.Binding("graduatedMax","",function(){function t(t){var e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function e(e,i){return(t(i)-t(e))/864e5}var i=goTools.model.findNodeDataForKey("timeline");return e(i.start,i.end)}),l(go.Shape,"LineH",{name:"MAIN",stroke:"#519ABA",height:1,strokeWidth:3},new go.Binding("width","length").makeTwoWay()),l(go.Shape,{geometryString:"M0 0 V10",interval:7,stroke:"#519ABA",strokeWidth:2}),l(go.TextBlock,{font:"10pt sans-serif",stroke:"#333333",interval:14,alignmentFocus:go.Spot.MiddleRight,segmentOrientation:go.Link.OrientMinus90,segmentOffset:new go.Point(0,12),graduatedFunction:function(t){var e=goTools.model.findNodeDataForKey("timeline"),i=e.start,n=i.getTime()+6e4*i.getTimezoneOffset();return new Date(n+864e5*t).toLocaleDateString()}},new go.Binding("interval","length",function(t){return t>=800?7:400<=t&&t<800?14:200<=t&&t<400?21:140<=t&&t<200?28:110<=t&&t<140?35:365})))),this.nodeTemplateMap.add("sequence",l(go.Node,{locationSpot:go.Spot.Top,locationObjectName:"SHAPE",minLocation:new go.Point(NaN,LinePrefix-ActivityStart),maxLocation:new go.Point(NaN,19999),selectionObjectName:"SHAPE",resizable:!0,resizeObjectName:"SHAPE",resizeAdornmentTemplate:l(go.Adornment,"Spot",l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Bottom,cursor:"col-resize",desiredSize:new go.Size(6,6),fill:"yellow"}))},new go.Binding("location","",function(t){var e=goTools.model.findNodeDataForKey(t.group);if(null===e)return new go.Point;var i=go.Point.parse(e.loc);return new go.Point(i.x,convertTimeToY(t.start)-ActivityStart)}).makeTwoWay(function(t,e){goTools.model.setDataProperty(e,"start",convertYToTime(t.y+ActivityStart))}),l(go.Shape,"Rectangle",{name:"SHAPE",fill:"white",stroke:"black",width:ActivityWidth,minSize:new go.Size(ActivityWidth,function(t){return ActivityStart+t*MessageSpacing+ActivityEnd}(.25))},new go.Binding("height","duration",function(t){return ActivityStart+t*MessageSpacing+ActivityEnd}).makeTwoWay(function(t){return(t-ActivityStart-ActivityEnd)/MessageSpacing})))),this.nodeTemplateMap.add("euler",l(go.Node,"Auto",{locationSpot:go.Spot.Center},new go.Binding("location","loc",go.Point.parse),l(go.Shape,"Ellipse",{fill:"transparent"},new go.Binding("stroke","color"),new go.Binding("strokeWidth","width"),new go.Binding("strokeDashArray","dash")),l("HyperlinkText",function(t){return"https://en.wikipedia.org/w/index.php?search="+encodeURIComponent(t.data.text)},function(t){return t.data.text},{margin:1,maxSize:new go.Size(80,80),textAlign:"center"}))),this.nodeTemplateMap.add("euler_center",l(go.Node,"Spot",{locationSpot:go.Spot.Center},new go.Binding("location","loc",go.Point.parse),l(go.Shape,"Circle",{fill:"rgba(128,128,128,0.1)",stroke:null,width:550,height:550}),l(go.Shape,"Circle",{fill:"rgba(128,128,128,0.05)",stroke:null,width:400,height:400}),l(go.Shape,"Circle",{fill:"rgba(128,128,128,0.033)",stroke:null,width:250,height:250}),l(go.Panel,"Spot",l(go.Shape,"Circle",{isPanelMain:!0,fill:"transparent",portId:""},new go.Binding("stroke","hicolor"),new go.Binding("strokeWidth","hiwidth")),l(go.Shape,"Circle",{isPanelMain:!0,fill:"transparent"},new go.Binding("stroke","color"),new go.Binding("strokeWidth","width"),new go.Binding("strokeDashArray","dash")),l("HyperlinkText",function(t){return"https://en.wikipedia.org/w/index.php?search="+encodeURIComponent(t.data.text)},function(t){return t.data.text},{margin:1,maxSize:new go.Size(80,80),textAlign:"center"})))),this.nodeTemplateMap.add("comment",l(go.Node,{background:"transparent"},l(go.TextBlock,{stroke:"brown",margin:3},new go.Binding("text")))),window.updateMindmapDirection=function(t,e){t.diagram.model.setDataProperty(t.data,"dir",e);for(var i=t.findTreeChildrenNodes();i.next();)updateMindmapDirection(i.value,e)},window.layoutMindMap=function(t){if(0===t.data.key){var e=t.diagram.findNodeForKey(0);if(null===e)return;t.diagram.startTransaction("Layout");var i=new go.Set(go.Part),n=new go.Set(go.Part);e.findLinksConnected().each(function(t){var o=t.toNode;"left"===o.data.dir?(n.add(e),n.add(t),n.addAll(o.findTreeParts())):(i.add(e),i.add(t),i.addAll(o.findTreeParts()))}),go.GraphObject.make(go.TreeLayout,{angle:0,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(i),go.GraphObject.make(go.TreeLayout,{angle:180,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(n),t.diagram.commitTransaction("Layout")}else go.GraphObject.make(go.TreeLayout,{angle:"left"===t.data.dir?180:0,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(t.findTreeParts())},this.nodeTemplateMap.add("mindmap",l(go.Node,"Vertical",{selectionObjectName:"TEXT"},l(go.TextBlock,{name:"TEXT",minSize:new go.Size(30,15),editable:!0},new go.Binding("text","text").makeTwoWay(),new go.Binding("scale","scale").makeTwoWay(),new go.Binding("font","font").makeTwoWay()),l(go.Shape,"LineH",{stretch:go.GraphObject.Horizontal,strokeWidth:3,height:3,portId:"",fromSpot:go.Spot.LeftRightSides,toSpot:go.Spot.LeftRightSides},new go.Binding("stroke","brush"),new go.Binding("fromSpot","dir",function(t){return"left"===t?go.Spot.Left:go.Spot.Right}),new go.Binding("toSpot","dir",function(t){return"left"===t?go.Spot.Right:go.Spot.Left})),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("locationSpot","dir",function(t){return"left"===t?go.Spot.Right:go.Spot.Left}),{selectionAdornmentTemplate:l(go.Adornment,"Spot",l(go.Panel,"Auto",l(go.Shape,{fill:null,stroke:"dodgerblue",strokeWidth:3}),l(go.Placeholder,{margin:new go.Margin(4,4,0,4)})),l("Button",{alignment:go.Spot.Right,alignmentFocus:go.Spot.Left,click:function(t,e){var i=e.part,n=i.diagram;n.startTransaction("Add Node");var o=i.adornedPart,r=o.data,a={category:"mindmap",text:"idea",brush:r.brush,dir:r.dir,parent:r.key};n.model.addNodeData(a),layoutMindMap(o),n.commitTransaction("Add Node")}},l(go.TextBlock,"+",{font:"bold 8pt sans-serif"}))),contextMenu:l(go.Adornment,"Vertical",l("ContextMenuButton",l(go.TextBlock,"Bigger"),{click:function(t,e){var i=e.part;i.diagram.startTransaction("Change Text Size"),i.adornedPart.findObject("TEXT").scale*=1.1,i.diagram.commitTransaction("Change Text Size")}}),l("ContextMenuButton",l(go.TextBlock,"Smaller"),{click:function(t,e){var i=e.part;i.diagram.startTransaction("Change Text Size"),i.adornedPart.findObject("TEXT").scale*=1/1.1,i.diagram.commitTransaction("Change Text Size")}}),l("ContextMenuButton",l(go.TextBlock,"Bold/Normal"),{click:function(t,e){var i=e.part;i.diagram.startTransaction("Change Text Weight");var n=i.adornedPart,o=n.findObject("TEXT"),r=o.font.indexOf("bold");o.font=r<0?"bold "+o.font:o.font.substr(r+5),i.diagram.commitTransaction("Change Text Weight")}}),l("ContextMenuButton",l(go.TextBlock,"Layout"),{click:function(t,e){var i=e.part;i.diagram.startTransaction("Subtree Layout"),layoutMindMap(i.adornedPart),i.diagram.commitTransaction("Subtree Layout")}}))}));var d=go.Geometry.parse("F M1 1 l19 0 0 19 -19 0z"),p=go.Geometry.parse("F M20 1 l19 0 0 19 -19 0z"),g=go.Geometry.parse("F M20 20 l19 0 0 19 -19 0z"),y=go.Geometry.parse("F M1 20 l19 0 0 19 -19 0z"),m=go.Geometry.parse("F M38 0 L40 0 40 2 2 40 0 40 0 38z"),v=go.Geometry.parse("F M20 20 B 180 90 20 20 19 19 z"),b=go.Geometry.parse("F M20 20 B 270 90 20 20 19 19 z"),x=go.Geometry.parse("F M20 20 B 0 90 20 20 19 19 z"),w=go.Geometry.parse("F M20 20 B 90 90 20 20 19 19 z"),k=l(go.Adornment,"Auto",{layerName:"Grid"},l(go.Shape,"Circle",{fill:"yellow",stroke:null}),l(go.Placeholder));this.nodeTemplateMap.add("genogram_male",l(go.Node,"Vertical",{locationSpot:go.Spot.Center,locationObjectName:"ICON"},l(go.Panel,{name:"ICON"},l(go.Shape,"Square",{width:40,height:40,strokeWidth:2,fill:"white",portId:""}),l(go.Panel,{itemTemplate:l(go.Panel,l(go.Shape,{stroke:null,strokeWidth:0},new go.Binding("fill","",s),new go.Binding("geometry","",function(t){switch(t){case"A":case"B":case"C":return d;case"D":case"E":case"F":return p;case"G":case"H":case"I":return g;case"J":case"K":case"L":return y;case"S":return m;default:return d}}))),margin:1},new go.Binding("itemArray","a"))),l(go.TextBlock,{textAlign:"center",maxSize:new go.Size(80,NaN)},new go.Binding("text","n")),{selectionAdornmentTemplate:k})),this.nodeTemplateMap.add("genogram_female",l(go.Node,"Vertical",{locationSpot:go.Spot.Center,locationObjectName:"ICON"},l(go.Panel,{name:"ICON"},l(go.Shape,"Circle",{width:40,height:40,strokeWidth:2,fill:"white",portId:""}),l(go.Panel,{itemTemplate:l(go.Panel,l(go.Shape,{stroke:null,strokeWidth:0},new go.Binding("fill","",s),new go.Binding("geometry","",function(t){switch(t){case"A":case"B":case"C":return v;case"D":case"E":case"F":return b;case"G":case"H":case"I":return x;case"J":case"K":case"L":return w;case"S":return m;default:return v}}))),margin:1},new go.Binding("itemArray","a"))),l(go.TextBlock,{textAlign:"center",maxSize:new go.Size(80,NaN)},new go.Binding("text","n")),{selectionAdornmentTemplate:k})),this.nodeTemplateMap.add("genogram_marriage_linklabel",l(go.Node,{selectable:!1,width:1,height:1,fromEndSegmentLength:20})),this.nodeTemplateMap.add("force_directed",l(go.Node,"Spot",{locationSpot:go.Spot.Center},new go.Binding("text","text"),l(go.Shape,"Ellipse",{fill:"lightgray",stroke:null,desiredSize:new go.Size(30,30)},new go.Binding("fill","fill")),l(go.TextBlock,new go.Binding("text","text"))))},go.Diagram.inherit(GoToolsPalette,go.Palette),GoToolsPalette.prototype.initial=function(){this.paletteMap.add("floor_planner",[{category:"MultiPurposeNode",key:"MultiPurposeNode",caption:"Multi Purpose Node",color:"#ffffff",stroke:"#000000",name:"Writable Node",type:"Writable Node",shape:"Rectangle",text:"Write here",width:60,height:60,notes:""},{category:"FurnitureNode",key:"roundTable",color:"#ffffff",stroke:"#000000",caption:"Round Table",type:"Round Table",shape:"Ellipse",width:61,height:61,notes:""},{category:"FurnitureNode",key:"armChair",color:"#ffffff",stroke:"#000000",caption:"Arm Chair",type:"Arm Chair",geo:"F1 M0 0 L40 0 40 40 0 40 0 0 M10 30 L10 10 M0 0 Q8 0 10 10 M0 40 Q20 15 40 40 M30 10 Q32 0 40 0 M30 10 L30 30",width:45,height:45,notes:""},{category:"FurnitureNode",key:"sofaMedium",color:"#ffffff",stroke:"#000000",caption:"Sofa",type:"Sofa",geo:"F1 M0 0 L80 0 80 40 0 40 0 0 M10 35 L10 10 M0 0 Q8 0 10 10 M0 40 Q40 15 80 40 M70 10 Q72 0 80 0 M70 10 L70 35",height:45,width:90,notes:""},{category:"FurnitureNode",key:"sink",color:"#ffffff",stroke:"#000000",caption:"Sink",type:"Sink",geo:"F1 M0 0 L40 0 40 40 0 40 0 0z M5 7.5 L18.5 7.5 M 21.5 7.5 L35 7.5 35 35 5 35 5 7.5 M 15 21.25 A 5 5 180 1 0 15 21.24 M23 3.75 A 3 3 180 1 1 23 3.74 M21.5 6.25 L 21.5 12.5 18.5 12.5 18.5 6.25 M15 3.75 A 1 1 180 1 1 15 3.74 M 10 4.25 L 10 3.25 13 3.25 M 13 4.25 L 10 4.25 M27 3.75 A 1 1 180 1 1 27 3.74 M 26.85 3.25 L 30 3.25 30 4.25 M 26.85 4.25 L 30 4.25",width:27,height:27,notes:""},{category:"FurnitureNode",key:"doubleSink",color:"#ffffff",stroke:"#000000",caption:"Double Sink",type:"Double Sink",geo:"F1 M0 0 L75 0 75 40 0 40 0 0 M5 7.5 L35 7.5 35 35 5 35 5 7.5 M44 7.5 L70 7.5 70 35 40 35 40 9 M15 21.25 A5 5 180 1 0 15 21.24 M50 21.25 A 5 5 180 1 0 50 21.24 M40.5 3.75 A3 3 180 1 1 40.5 3.74 M40.5 3.75 L50.5 13.75 47.5 16.5 37.5 6.75 M32.5 3.75 A 1 1 180 1 1 32.5 3.74 M 27.5 4.25 L 27.5 3.25 30.5 3.25 M 30.5 4.25 L 27.5 4.25 M44.5 3.75 A 1 1 180 1 1 44.5 3.74 M 44.35 3.25 L 47.5 3.25 47.5 4.25 M 44.35 4.25 L 47.5 4.25",height:27,width:52,notes:""},{category:"FurnitureNode",key:"toilet",color:"#ffffff",stroke:"#000000",caption:"Toilet",type:"Toilet",geo:"F1 M0 0 L25 0 25 10 0 10 0 0 M20 10 L20 15 5 15 5 10 20 10 M5 15 Q0 15 0 25 Q0 40 12.5 40 Q25 40 25 25 Q25 15 20 15",width:25,height:35,notes:""},{category:"FurnitureNode",key:"shower",color:"#ffffff",stroke:"#000000",caption:"Shower/Tub",type:"Shower/Tub",geo:"F1 M0 0 L40 0 40 60 0 60 0 0 M35 15 L35 55 5 55 5 15 Q5 5 20 5 Q35 5 35 15 M22.5 20 A2.5 2.5 180 1 1 22.5 19.99",width:45,height:75,notes:""},{category:"FurnitureNode",key:"bed",color:"#ffffff",stroke:"#000000",caption:"Bed",type:"Bed",geo:"F1 M0 0 L40 0 40 60 0 60 0 0 M 7.5 2.5 L32.5 2.5 32.5 17.5 7.5 17.5 7.5 2.5 M0 20 L40 20 M0 25 L40 25",width:76.2,height:101.6,notes:""},{category:"FurnitureNode",key:"staircase",color:"#ffffff",stroke:"#000000",caption:"Staircase",type:"Staircase",geo:"F1 M0 0 L 0 100 250 100 250 0 0 0 M25 100 L 25 0 M 50 100 L 50 0 M 75 100 L 75 0 M 100 100 L 100 0 M 125 100 L 125 0 M 150 100 L 150 0 M 175 100 L 175 0 M 200 100 L 200 0 M 225 100 L 225 0",width:125,height:50,notes:""},{category:"FurnitureNode",key:"stove",color:"#ffffff",stroke:"#000000",caption:"Stove",type:"Stove",geo:"F1 M 0 0 L 0 100 100 100 100 0 0 0 M 30 15 A 15 15 180 1 0 30.01 15 M 70 15 A 15 15 180 1 0 70.01 15M 30 55 A 15 15 180 1 0 30.01 55 M 70 55 A 15 15 180 1 0 70.01 55",width:75,height:75,notes:""},{category:"FurnitureNode",key:"diningTable",color:"#ffffff",stroke:"#000000",caption:"Dining Table",type:"Dining Table",geo:"F1 M 0 0 L 0 100 200 100 200 0 0 0 M 25 0 L 25 -10 75 -10 75 0 M 125 0 L 125 -10 175 -10 175 0 M 200 25 L 210 25 210 75 200 75 M 125 100 L 125 110 L 175 110 L 175 100 M 25 100 L 25 110 75 110 75 100 M 0 75 -10 75 -10 25 0 25",width:125,height:62.5,notes:""},{category:"PaletteWallNode",key:"wall",caption:"Wall",type:"Wall",color:"#000000",shape:"Rectangle",height:10,width:60,notes:""},{category:"WindowNode",key:"window",color:"white",caption:"Window",type:"Window",shape:"Rectangle",height:10,width:60,notes:""},{key:"door",category:"DoorNode",color:"rgba(0, 0, 0, 0)",caption:"Door",type:"Door",width:40,doorOpeningHeight:5,swing:"left",notes:""}]),this.paletteMap.add("circuit",[{category:"circuit.input"},{category:"circuit.output"},{category:"circuit.and"},{category:"circuit.or"},{category:"circuit.xor"},{category:"circuit.not"},{category:"circuit.nand"},{category:"circuit.nor"},{category:"circuit.xnor"}]),this.paletteMap.add("floor",[{key:1,geo:"F1 M0 0 L5,0 5,40 0,40 0,0z x M0,0 a40,40 0 0,0 -40,40 ",item:"left door",color:goTools.brushes.wall,category:"floor"},{key:2,geo:"F1 M0 0 L5,0 5,40 0,40 0,0z x M5,0 a40,40 0 0,1 40,40 ",item:"right door",color:goTools.brushes.wall,category:"floor"},{key:3,angle:90,geo:"F1 M0,0 L0,100 12,100 12,0 0,0z",item:"wall",color:goTools.brushes.wall,category:"floor"},{key:4,angle:90,geo:"F1 M0,0 L0,50 10,50 10,0 0,0 x M5,0 L5,50z",item:"window",color:"whitesmoke",category:"floor"},{key:5,geo:"F1 M0,0 L50,0 50,12 12,12 12,50 0,50 0,0 z",item:"corner",color:goTools.brushes.wall,category:"floor"},{key:6,geo:"F1 M0 0 L40 0 40 40 0 40 0 0 x M0 10 L40 10 x M 8 10 8 40 x M 32 10 32 40 z",item:"arm chair",color:goTools.brushes.blue,category:"floor"},{key:7,geo:"F1 M0 0 L80,0 80,40 0,40 0 0 x M0,10 L80,10 x M 7,10 7,40 x M 73,10 73,40 z",item:"couch",color:goTools.brushes.blue,category:"floor"},{key:8,geo:"F1 M0 0 L30 0 30 30 0 30 z",item:"Side Table",color:goTools.brushes.wood,category:"floor"},{key:9,geo:"F1 M0 0 L80,0 80,90 0,90 0,0 x M0,7 L80,7 x M 0,30 80,30 z",item:"queen bed",color:goTools.brushes.green,category:"floor"},{key:10,
geo:"F1 M5 5 L30,5 35,30 0,30 5,5 x F M0 0 L 35,0 35,5 0,5 0,0 z",item:"chair",color:goTools.brushes.wood,category:"floor"},{key:11,geo:"F1 M0 0 L50,0 50,90 0,90 0,0 x M0,7 L50,7 x M 0,30 50,30 z",item:"twin bed",color:goTools.brushes.green,category:"floor"},{key:12,geo:"F1 M0 0 L0 60 80 60 80 0z",item:"kitchen table",color:goTools.brushes.wood,category:"floor"},{key:13,geo:"F1 M 0,0 a35,35 0 1,0 1,-1 z",item:"round table",color:goTools.brushes.wood,category:"floor"},{key:14,geo:"F1 M 0,0 L35,0 35,30 0,30 0,0 x M 5,5 L 30, 5 30,25 5,25 5,5 x M 17,2 L 17,10 19,10 19,2 17,2 z",item:"kitchen sink",color:goTools.brushes.metal,category:"floor"},{key:15,geo:"F1 M0,0 L55,0, 55,50, 0,50 0,0 x M 40,7 a 7,7 0 1 0 0.00001 0z x M 40,10 a 4,4 0 1 0 0.00001 0z x M 38,27 a 7,7 0 1 0 0.00001 0z x M 38,30 a 4,4 0 1 0 0.00001 0z x M 16,27 a 7,7 0 1 0 0.00001 0z xM 16,30 a 4,4 0 1 0 0.00001 0z x M 14,7 a 7,7 0 1 0 0.00001 0z x M 14,10 a 4,4 0 1 0 0.00001 0z",item:"stove",color:goTools.brushes.metal,category:"floor"},{key:16,geo:"F1 M0,0 L55,0, 55,50, 0,50 0,0 x F1 M0,51 L55,51 55,60 0,60 0,51 x F1 M5,60 L10,60 10,63 5,63z",item:"refrigerator",color:goTools.brushes.metal,category:"floor"},{key:17,geo:"F1 M0,0 100,0 100,40 0,40z",item:"bookcase",color:goTools.brushes.wood,category:"floor"},{key:18,geo:"F1 M0,0 70,0 70,50 0,50 0,0 x F1 M15,58 55,58 55,62 15,62 x F1 M17,58 16,50 54,50 53,58z",item:"desk",color:goTools.brushes.wood,category:"floor"}]),this.paletteMap.add("flowchart",[{category:"flowchart.start",text:"Start"},{category:"flowchart.normal",text:"Step"},{category:"flowchart.normal",text:"???",figure:"Diamond"},{category:"flowchart.end",text:"End"},{category:"flowchart.comment",text:"Comment"}]),this.paletteMap.add("pipe",[{category:"pipe",key:1,geo:"F1 M0 0 L20 0 20 20 0 20z",ports:[{id:"U6",spot:"0.5 0 0 0.5"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:3,angle:90,geo:"F1 M0 0 L20 0 20 20 0 20z",ports:[{id:"U6",spot:"0.5 0 0 0.5"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:5,geo:"F1 M0 0 L20 0 20 60 0 60z",ports:[{id:"U6",spot:"0.5 0 0 0.5"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:7,angle:90,geo:"F1 M0 0 L20 0 20 60 0 60z",ports:[{id:"U6",spot:"0.5 0 0 0.5"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:11,geo:"F1 M0 40 L0 30 Q0 0 30 0 L40 0 40 20 30 20 Q20 20 20 30 L20 40z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U2",spot:"0.25 1 0.25 -0.5"}]},{category:"pipe",key:12,angle:90,geo:"F1 M0 40 L0 30 Q0 0 30 0 L40 0 40 20 30 20 Q20 20 20 30 L20 40z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U2",spot:"0.25 1 0.25 -0.5"}]},{category:"pipe",key:13,angle:180,geo:"F1 M0 40 L0 30 Q0 0 30 0 L40 0 40 20 30 20 Q20 20 20 30 L20 40z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U2",spot:"0.25 1 0.25 -0.5"}]},{category:"pipe",key:14,angle:270,geo:"F1 M0 40 L0 30 Q0 0 30 0 L40 0 40 20 30 20 Q20 20 20 30 L20 40z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U2",spot:"0.25 1 0.25 -0.5"}]},{category:"pipe",key:21,geo:"F1 M0 0 L60 0 60 20 50 20 Q40 20 40 30 L40 40 20 40 20 30 Q20 20 10 20 L0 20z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U4",spot:"0 0.25 0.5 0.25"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:22,angle:90,geo:"F1 M0 0 L60 0 60 20 50 20 Q40 20 40 30 L40 40 20 40 20 30 Q20 20 10 20 L0 20z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U4",spot:"0 0.25 0.5 0.25"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:23,angle:180,geo:"F1 M0 0 L60 0 60 20 50 20 Q40 20 40 30 L40 40 20 40 20 30 Q20 20 10 20 L0 20z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U4",spot:"0 0.25 0.5 0.25"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:24,angle:270,geo:"F1 M0 0 L60 0 60 20 50 20 Q40 20 40 30 L40 40 20 40 20 30 Q20 20 10 20 L0 20z",ports:[{id:"U0",spot:"1 0.25 -0.5 0.25"},{id:"U4",spot:"0 0.25 0.5 0.25"},{id:"U2",spot:"0.5 1 0 -0.5"}]},{category:"pipe",key:31,geo:"F1 M0 0 L20 0 20 10 Q20 14.142 22.929 17.071 L30 24.142 15.858 38.284 8.787 31.213 Q0 22.426 0 10z",ports:[{id:"U6",spot:"0 0 10.5 0.5"},{id:"U1",spot:"1 1 -7.571 -7.571",angle:45}]},{category:"pipe",key:32,angle:90,geo:"F1 M0 0 L20 0 20 10 Q20 14.142 22.929 17.071 L30 24.142 15.858 38.284 8.787 31.213 Q0 22.426 0 10z",ports:[{id:"U6",spot:"0 0 10.5 0.5"},{id:"U1",spot:"1 1 -7.571 -7.571",angle:45}]},{category:"pipe",key:33,angle:180,geo:"F1 M0 0 L20 0 20 10 Q20 14.142 22.929 17.071 L30 24.142 15.858 38.284 8.787 31.213 Q0 22.426 0 10z",ports:[{id:"U6",spot:"0 0 10.5 0.5"},{id:"U1",spot:"1 1 -7.571 -7.571",angle:45}]},{category:"pipe",key:34,angle:270,geo:"F1 M0 0 L20 0 20 10 Q20 14.142 22.929 17.071 L30 24.142 15.858 38.284 8.787 31.213 Q0 22.426 0 10z",ports:[{id:"U6",spot:"0 0 10.5 0.5"},{id:"U1",spot:"1 1 -7.571 -7.571",angle:45}]},{category:"pipe",key:41,geo:"F1 M14.142 0 L28.284 14.142 14.142 28.284 0 14.142z",ports:[{id:"U1",spot:"1 1 -7.321 -7.321"},{id:"U3",spot:"0 1 7.321 -7.321"},{id:"U5",spot:"0 0 7.321 7.321"},{id:"U7",spot:"1 0 -7.321 7.321"}]}]),this.paletteMap.add("seating",[{category:"seating_person",key:"Tyrion Lannister"},{category:"seating_person",key:"Daenerys Targaryen",plus:3},{category:"seating_person",key:"Jon Snow"},{category:"seating_person",key:"Stannis Baratheon"},{category:"seating_person",key:"Arya Stark"},{category:"seating_person",key:"Jorah Mormont"},{category:"seating_person",key:"Sandor Clegane"},{category:"seating_person",key:"Joffrey Baratheon"},{category:"seating_person",key:"Brienne of Tarth"},{category:"seating_person",key:"Hodor"}]);for(var t=go.Shape.getFigureGenerators().toArray(),e=0;e<t.length;e++)t[e].category="shape";this.paletteMap.add("shape",t);var i=[];for(var n in icons)i.push({geo:n,color:"#00B5CB",category:"icon"});this.paletteMap.add("icon",i),this.paletteMap.add("font-awesome",getFontAwesomeList()),this.paletteMap.add("glyphicons",getGlyphiconsList())},GoToolsPalette.prototype.getPaletteNodeData=function(t){var e=[];if(t)e=this.paletteMap.getValue(t);else for(var i=this.paletteMap.iterator;i.next();)e=e.concat(i.value);return e},GoToolsPalette.prototype.changePalette=function(t){$("#tab_palette").hasClass("active")||$("#tab_link_palette").tab("show"),this.model.nodeDataArray=this.getPaletteNodeData(t)},GoToolsPalette.prototype.initPalette=function(t){$("#tab_palette").hasClass("active")||$("#tab_link_palette").tab("show"),this.model.nodeDataArray=this.getPaletteNodeData(t)},Object.defineProperty(GoToolsUI.prototype,"goTools",{get:function(){return this._goTools}}),Object.defineProperty(GoToolsUI.prototype,"state",{get:function(){return this._state}}),Object.defineProperty(GoToolsUI.prototype,"name",{get:function(){return this._name}}),Object.defineProperty(GoToolsUI.prototype,"goToolsName",{get:function(){return this._goToolsName}}),Object.defineProperty(GoToolsUI.prototype,"furnitureData",{get:function(){return this._furnitureData},set:function(t){this._furnitureData=t}}),GoToolsUI.prototype.openElement=function(t,e){var i=document.getElementById(t);"hidden"===i.style.visibility&&(updateFileList(e),i.style.visibility="visible")},GoToolsUI.prototype.closeElement=function(t){var e=this.state.windows,i=this.state.menuButtons,n=document.getElementById(t);t===e.selectionInfoWindow.id&&(document.getElementById(i.selectionInfoWindowButtonId).innerHTML="Show Node Info Help <p class='shortcut'> (Ctrl + I)</p>"),t===e.palettesWindow.id&&(document.getElementById(i.palettesWindowButtonId).innerHTML="Show Palettes <p class='shortcut'> (Ctrl + P)</p>"),t===e.overviewWindow.id&&(document.getElementById(i.overviewWindowButtonId).innerHTML="Show Overview <p class='shortcut'> (Ctrl + E)</p>"),t===e.optionsWindow.id&&(document.getElementById(i.optionsWindowButtonId).innerHTML="Show Options <p class='shortcut'> (Ctrl + B)</p>"),t===e.statisticsWindow.id&&(document.getElementById(i.statisticsWindowButtonId).innerHTML="Show Statistics <p class='shortcut'> (Ctrl + G)</p>"),n.style.visibility="hidden"},GoToolsUI.prototype.hideShow=function(t){var e,i=document.getElementById(t),n=this.state.windows;switch(t){case n.selectionInfoWindow.id:e="Selection Help",char="I";break;case n.overviewWindow.id:e="Overview",char="E";break;case n.optionsWindow.id:e="Options",char="B";break;case n.statisticsWindow.id:e="Statistics",char="G";break;case n.palettesWindow.id:e="Palettes",char="P",furniturePalette.layoutDiagram(!0),wallPartsPalette.layoutDiagram(!0)}"visible"===i.style.visibility?(i.style.visibility="hidden",document.getElementById(t+"Button").innerHTML="Show "+e+"<p class='shortcut'> (Ctrl + "+char+" )</p>"):(i.style.visibility="visible",document.getElementById(t+"Button").innerHTML="Hide "+e+"<p class='shortcut'> (Ctrl + "+char+" )</p>")},GoToolsUI.prototype.adjustScale=function(t){var e=this.goTools;switch(e.startTransaction("Change Scale"),t){case"-":e.scale-=.1;break;case"+":e.scale+=.1}e.scale=parseFloat((.1*Math.round(e.scale/.1)).toFixed(2)),e.commitTransaction("Change Scale")},GoToolsUI.prototype.changeGridSize=function(){var t=this.goTools;t.skipsUndoManager=!0,t.startTransaction("change grid size");var e,i=document.getElementById(this.state.windows.optionsWindow.gridSizeInputId);isNaN(i.value)||null==i.value||""==i.value||i.value==undefined?(i.value=t.convertPixelsToUnits(10),e=parseFloat(i.value)):e=parseFloat(i.value),e=t.convertUnitsToPixels(e),t.grid.gridCellSize=new go.Size(e,e),t.toolManager.draggingTool.gridCellSize=new go.Size(e,e),t.model.setDataProperty(t.model.modelData,"gridSize",e),t.commitTransaction("change grid size"),t.skipsUndoManager=!1},GoToolsUI.prototype.searchFurniture=function(){for(var t=this,e=this.goTools,i=t.state.windows.palettesWindow.furniturePaletteId,n=document.getElementById(t.state.windows.palettesWindow.furnitureSearchInputId).value,o=null,r=0;r<e.palettes.length;r++){e.palettes[r].div.id==i&&(o=e.palettes[r])}null==t.furnitureData&&(t.furnitureData=o.model.nodeDataArray);var a=o.model.nodeDataArray.slice();if(null!==n&&n!==undefined&&""!==n){for(var r=0;r<a.length;r+=0){a[r].type.toLowerCase().includes(n.toLowerCase())?r++:a.splice(r,1)}o.model.nodeDataArray=a}else o.model.nodeDataArray=t.furnitureData;o.updateAllRelationshipsFromData()},GoToolsUI.prototype.checkboxChanged=function(t){var e=this.goTools,i=this.state.windows.optionsWindow.checkboxes;e.skipsUndoManager=!0,e.startTransaction("change preference");var n=document.getElementById(t);switch(t){case i.showGridCheckboxId:e.grid.visible=n.checked,e.model.modelData.preferences.showGrid=n.checked;break;case i.gridSnapCheckboxId:e.toolManager.draggingTool.isGridSnapEnabled=n.checked,e.model.modelData.preferences.gridSnap=n.checked;break;case i.wallGuidelinesCheckboxId:e.model.modelData.preferences.showWallGuidelines=n.checked;break;case i.wallLengthsCheckboxId:e.model.modelData.preferences.showWallLengths=n.checked,e.updateWallDimensions();break;case i.wallAnglesCheckboxId:e.model.modelData.preferences.showWallAngles=n.checked,e.updateWallAngles();break;case i.smallWallAnglesCheckboxId:e.model.modelData.preferences.showOnlySmallWallAngles=n.checked,e.updateWallAngles()}e.commitTransaction("change preference"),e.skipsUndoManager=!1},GoToolsUI.prototype.changeUnits=function(){return},GoToolsUI.prototype.setBehavior=function(t){var e=this.goTools,i=e.toolManager.mouseDownTools.elt(0),n=e.toolManager.mouseDownTools.elt(3);if("wallBuilding"===t){i.isEnabled=!0,n.isEnabled=!1,e.skipsUndoManager=!0,e.startTransaction("change wallWidth"),e.model.setDataProperty(e.model.modelData,"wallWidth",parseFloat(document.getElementById("wallWidthInput").value));var o=e.model.modelData.wallWidth;if(isNaN(o))e.model.setDataProperty(e.model.modelData,"wallWidth",5);else{var r=e.convertUnitsToPixels(o);e.model.setDataProperty(e.model.modelData,"wallWidth",r)}e.commitTransaction("change wallWidth"),e.skipsUndoManager=!1}"dragging"===t&&(i.isEnabled=!1,n.isEnabled=!0),e.nodes.iterator.each(function(t){t.clearAdornments()}),e.clearSelection()},GoToolsUI.prototype.updateUI=function(){return},GoToolsUI.prototype.updateStatistics=function(){return},GoToolsUI.prototype.fillRowsWithNodes=function(t,e,i){function n(t){return o.name+".setSelectionInfo("+o.goToolsName+".findPartForKey('"+t+"'))"}var o=(this.goTools,this),r=[];t.constructor!==Array?t.each(function(t){r.push(t)}):r=t;for(var a=0;a<r.length;a+=2){if(null===r[a].data)return void this.setSelectionInfo("Nothing selected");var s=r[a].data.key,l="MultiPurposeNode"!==r[a].data.caption?r[a].data.caption:r[a].data.text;if(r[a+1]!=undefined&&null!=r[a+1]){var h=r[a+1].data.key,u="MultiPurposeNode"!==r[a+1].data.caption?r[a+1].data.caption:r[a+1].data.text;e.innerHTML+=s===i?'<div class="row"><div class="col-2"><p class="data clickable selectedKey" onclick="'+n(s)+'">'+l+'</p></div><div class="col-2"><p class="data clickable" onclick="'+n(h)+'">'+u+"</p></div></div>":h===i?'<div class="row"><div class="col-2"><p class="data clickable" onclick="'+n(s)+'">'+l+'</p></div><div class="col-2"><p class="data clickable selectedKey" onclick="'+n(h)+'">'+u+"</p></div></div>":'<div class="row"><div class="col-2"><p class="data clickable"onclick="'+n(s)+'">'+l+'</p></div><div class="col-2"><p class="data clickable"onclick="'+n(h)+'">'+u+"</p></div></div>"}else e.innerHTML+=s===i?'<div class="row"><div class="col-2"><p class="data clickable selectedKey" onclick="'+n(s)+'">'+l+"</p></div></div>":'<div class="row"><div class="col-2"><p class="data clickable" onclick="'+n(s)+'">'+l+"</p></div></div>"}},GoToolsUI.prototype.setColor=function(){var t=this.goTools,e=t.selection.first(),i=document.getElementById(this.state.windows.selectionInfoWindow.colorPickerId);null!==i&&(t.startTransaction("recolor node"),t.model.setDataProperty(e.data,"color",i.value),t.model.setDataProperty(e.data,"stroke",invertColor(i.value)),t.commitTransaction("recolor node"))},GoToolsUI.prototype.setHeight=function(){var t=this.goTools,e=t.selection.first(),i=document.getElementById(this.state.windows.selectionInfoWindow.heightInputId),n=parseFloat(t.convertUnitsToPixels(i.value));if(isNaN(n))return alert("Please enter a number in the height input"),void setSelectionInfo(e,t);if(t.skipsUndoManager=!0,t.startTransaction("resize node"),!t.isReadOnly)if("WallGroup"!==e.category&&"WindowNode"!==e.category&&"DoorNode"!==e.category)t.model.setDataProperty(e.data,"height",n);else if("DoorNode"===e.category||"WindowNode"===e.category){var o=t.findPartForKey(e.data.group),r=e.location.copy();if(null!==o){var a=Math.sqrt(o.data.startpoint.distanceSquaredPoint(o.data.endpoint));a<n&&(n=a,r=new go.Point((o.data.startpoint.x+o.data.endpoint.x)/2,(o.data.startpoint.y+o.data.endpoint.y)/2))}"DoorNode"===e.category&&t.model.setDataProperty(e.data,"width",n),e.location=r,t.updateWallDimensions()}else{var s=e.data.startpoint.copy(),l=e.data.endpoint.copy(),h=s.directionPoint(l),u=new go.Point((s.x+l.x)/2,(s.y+l.y)/2),c=new go.Point(u.x+n/2,u.y),f=new go.Point(u.x-n/2,u.y);c.offset(-u.x,-u.y).rotate(h).offset(u.x,u.y),f.offset(-u.x,-u.y).rotate(h).offset(u.x,u.y);var d,p=null,g=Number.MAX_VALUE,y=0;if(e.memberParts.iterator.each(function(t){var e=getWallPartEndpoints(t),i=e[0],n=e[1],o=Math.sqrt(i.distanceSquaredPoint(s)),r=Math.sqrt(n.distanceSquaredPoint(s));o<g&&(g=o,p=i),o>y&&(y=o,d=i),r<g&&(g=r,p=n),r>y&&(y=r,d=n)}),null!==p){var m=Math.sqrt(f.distanceSquaredPoint(c)),v=Math.sqrt(p.distanceSquaredPoint(d));m<v&&(f=p,c=d)}var b=null,x=0;if(e.memberParts.iterator.each(function(t){for(var e=getWallPartEndpoints(t),i=0;i<e.length;i++){var n=e[i],o=parseFloat(Math.sqrt(n.distanceSquaredPoint(f)).toFixed(2)),r=parseFloat(Math.sqrt(n.distanceSquaredPoint(c)).toFixed(2)),a=parseFloat(Math.sqrt(f.distanceSquaredPoint(c)).toFixed(2));if((o+r).toFixed(2)!==a.toFixed(2)){var s=Math.sqrt(n.distanceSquaredPoint(f));s>x&&(x=s,b=n)}}}),null!==b){var w=Math.sqrt(f.distanceSquaredPoint(c));if(b.distanceSquaredPoint(f)<b.distanceSquaredPoint(c)){f=b;var k=Math.sqrt(f.distanceSquaredPoint(c));c=new go.Point(f.x+w/k*(c.x-f.x),f.y+w/k*(c.y-f.y))}else{c=b;var k=Math.sqrt(f.distanceSquaredPoint(c));f=new go.Point(c.x+w/k*(f.x-c.x),c.y+w/k*(f.y-c.y))}}t.model.setDataProperty(e.data,"startpoint",f),t.model.setDataProperty(e.data,"endpoint",c),t.updateWall(e)}t.commitTransaction("resize node"),t.updateWallDimensions(t),t.skipsUndoManager=!1},GoToolsUI.prototype.setWidth=function(){var t=this.goTools,e=t.selection.first(),i=document.getElementById(this.state.windows.selectionInfoWindow.widthInputId);if(null!==i){var n=parseFloat(t.convertUnitsToPixels(i.value));if(isNaN(n))return alert("Please enter a number in the width input"),void setSelectionInfo(e,t);if(t.skipsUndoManager=!0,t.startTransaction("resize node"),!t.isReadOnly)if("WindowNode"===e.category){var o=t.findPartForKey(e.data.group),r=e.location.copy();if(null!==o){var a=getWallPartStretch(e),s=Math.sqrt(a.point1.distanceSquaredPoint(a.point2));s<n&&(n=s,r=new go.Point((a.point1.x+a.point2.x)/2,(a.point1.y+a.point2.y)/2))}t.model.setDataProperty(e.data,"width",n),e.location=r,t.updateWallDimensions()}else"WallGroup"===e.category?(t.model.setDataProperty(e.data,"strokeWidth",n),e.memberParts.iterator.each(function(e){"DoorNode"===e.category&&t.model.setDataProperty(e.data,"doorOpeningHeight",n),"WindowNode"===e.category&&t.model.setDataProperty(e.data,"height",n)})):t.model.setDataProperty(e.data,"width",n);t.commitTransaction("resize node"),t.skipsUndoManager=!1}},GoToolsUI.prototype.applySelectionChanges=function(){var t=this.goTools;this.setHeight(),this.setWidth(),this.setColor(),t.goToolsUI.setSelectionInfo(t.selection.first(),t)},Inspector.showIfNode=function(t){return t instanceof go.Node},Inspector.showIfLink=function(t){return t instanceof go.Link},Inspector.showIfGroup=function(t){return t instanceof go.Group},Inspector.showIfPresent=function(t,e){return t instanceof go.Part&&(t=t.data),"object"==typeof t&&t[e]!==undefined},Inspector.prototype.inspectObject=function(t){var e=t;if(e===undefined&&(e=this.inspectsSelection?this._diagram.selection.first():this.inspectedObject),null===e||this.inspectedObject===e)return this.inspectedObject=e,void this.updateAllHTML();this.inspectedObject=e;var i=this._div;if(i.innerHTML="",null!==e){var n=e instanceof go.Part?e.data:e;if(n){var o=document.createElement("table"),r=document.createElement("tbody");this._inspectedProperties={},this.tabIndex=0;var a=this.declaredProperties;for(var s in a){var l=a[s];if(this.canShowProperty(s,l,e)){var h="";l.defaultValue!==undefined&&(h=l.defaultValue),n[s]!==undefined&&(h=n[s]),r.appendChild(this.buildPropertyRow(s,h||""))}}if(this.includesOwnProperties)for(var s in n)"__gohashid"!==s&&(this._inspectedProperties[s]||a[s]&&!this.canShowProperty(s,a[s],e)||r.appendChild(this.buildPropertyRow(s,n[s])));o.appendChild(r),i.appendChild(o)}}},Inspector.prototype.canShowProperty=function(t,e,i){return!1!==e.show&&("function"!=typeof e.show||e.show(i,t))},Inspector.prototype.canEditProperty=function(t,e,i){var n=i instanceof go.Part?i.data:i,o=typeof n[t];if("function"===o||"object"===o)return!1;if(e){if(!0===e.readOnly)return!1;if("function"==typeof e.readOnly)return!e.readOnly(i,t)}return!0},Inspector.prototype.buildPropertyRow=function(t,e){function i(){l.updateAllProperties()}var n=(this._div,document.createElement("tr")),o=document.createElement("td");o.textContent=t,n.appendChild(o);var r=document.createElement("td"),a=document.createElement("input"),s=this.declaredProperties[t];a.tabIndex=this.tabIndex++;var l=this;return a.value=e,a.disabled=!this.canEditProperty(t,s,this.inspectedObject),s!==undefined&&"color"===s.type&&(a.setAttribute("type","color"),"color"===a.type&&(a.addEventListener("input",i),a.addEventListener("change",i),a.value=this.setColor(e))),this._diagram.model.isReadOnly&&(a.disabled=!0),"color"!==a.type&&a.addEventListener("blur",i),r.appendChild(a),n.appendChild(r),this._inspectedProperties[t]=a,n},Inspector.prototype.setColor=function(t){var e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,e.fillStyle},Inspector.prototype.updateAllHTML=function(){var t=this._inspectedProperties,e=(this._diagram,this.inspectedObject instanceof go.Part),i=e?this.inspectedObject.data:this.inspectedObject;if(i)for(var n in t){var o=t[n],r=i[n];"color"===o.type?o.value=this.setColor(r):o.value=r}else for(var n in t){var o=t[n];"color"===o.type?o.value="#000000":o.value=""}},Inspector.prototype.updateAllProperties=function(){var t=this._inspectedProperties,e=this._diagram,i=this.inspectedObject instanceof go.Part,n=i?this.inspectedObject.data:this.inspectedObject;if(n){e.startTransaction("set all properties");for(var o in t){var r=t[o].value,a=this.declaredProperties[o];if(this.canEditProperty(o,a,this.inspectedObject)){var s="";switch(a!==undefined&&a.type!==undefined&&(s=a.type),""===s&&"boolean"==typeof n[o]&&(s="boolean"),s){case"boolean":r=!(0==r||"false"===r||"0"===r);break;case"number":r=parseFloat(r)}t[o].value=r,e.model.setDataProperty(n,o,r),null!==this.propertyModified&&this.propertyModified(o,r)}}e.commitTransaction("set all properties")}},window.DebugLocales={X:"X\u5750\u6807",Y:"Y\u5750\u6807",location:"\u5750\u6807","Offset X":"X\u504f\u79fb","Offset Y":"Y\u504f\u79fb",locationSpot:"\u4e2d\u5fc3\u70b9",resizable:"\u53ef\u8c03\u6574\u5927\u5c0f",rotatable:"\u53ef\u65cb\u8f6c",isShadowed:"\u662f\u5426\u6709\u9634\u5f71",type:"\u7c7b\u578b",Top:"\u9876\u90e8",Right:"\u53f3\u4fa7",Bottom:"\u5e95\u90e8",Left:"\u5de6\u4fa7",padding:"\u5185\u8fb9\u754c",defaultAlignment:"\u9ed8\u8ba4\u5bf9\u9f50\u65b9\u5f0f",defaultStretch:"\u9ed8\u8ba4\u62c9\u4f38\u65b9\u5f0f",Width:"\u5bbd\u5ea6",Height:"\u9ad8\u5ea6",gridCellSize:"\u7f51\u683c\u5927\u5c0f",gridOrigin:"\u7f51\u683c\u539f\u70b9",stretch:"\u62c9\u4f38",name:"\u540d\u79f0",opacity:"\u900f\u660e\u5ea6",visible:"\u53ef\u89c1",areaBackground:"\u533a\u57df\u80cc\u666f",background:"\u80cc\u666f",position:"\u4f4d\u7f6e",scale:"\u7f29\u653e",angle:"\u89d2\u5ea6",desiredSize:"\u9884\u671f\u5927\u5c0f",measuredBounds:"\u6d4b\u91cf\u8fb9\u754c",naturalBounds:"\u81ea\u7136\u8fb9\u754c",portId:"\u8fde\u7ebf\u7aef\u70b9",minSize:"\u6700\u5c0f\u5c3a\u5bf8",maxSize:"\u6700\u5927\u5c3a\u5bf8",isTreeExpanded:"\u662f\u5426\u53ef\u5c55\u5f00\u6811",category:"\u8282\u70b9\u7c7b\u578b",key:"\u4e3b\u952e",loc:"\u5750\u6807",__gohashid:"\u54c8\u5e0c\u503c",stroke:"\u63cf\u8fb9",fill:"\u586b\u5145",strokeWidth:"\u63cf\u8fb9\u7c97\u7ec6",strokeCap:"\u63cf\u8fb9\u5934\u90e8",strokeJoin:"\u63cf\u8fb9\u62d0\u89d2",strokeMiterLimit:"strokeMiterLimit",flaure:"flaure",figure:"\u5f62\u72b6",toArrow:"\u672b\u7aef\u7bad\u5934",fromArrow:"\u8d77\u70b9\u7bad\u5934",geometryStretch:"\u56fe\u5f62\u62c9\u4f38"},DebugInspector.prototype.populateDefault=function(t,e,i){(null===e||e(i))&&t.push(i);var n=function(i){if(i instanceof go.Panel)for(var o=i.elements;o.next();){var r=o.value;(null===e||e(r))&&t.push(r),n(r)}};n(i),(null===e||e(i.data))&&t.push(i.data)},DebugInspector.prototype.populatePropertyNames=function(t){t.push(this.propertyNames)},DebugInspector.prototype.change=function(t){this.inspectedProps={},this.setCollection(t),this.showObjectProperties(t)},DebugInspector.prototype.toggleVisibility=function(t){this.div.style.display=t?"block":"none",this.acceptResetDiv.style.display=t?"block":"none",this.chooser.style.display=t&&this.chooser.options.length>1?"block":"none"},DebugInspector.prototype.setCollection=function(t){this.collection=t},DebugInspector.prototype.rebuildViews=function(){for(var t=document.getElementsByClassName("sp-container");0!==t.length;)document.body.removeChild(t[0]);for(var e=this.div;0!==e.children.length;)e.removeChild(e.children[0]);this.acceptResetDiv.innerHTML="";for(var i=Object.keys(this.tracked),n=0;n<i.length;n++){for(var o=DebugInspector.createSection(i[n]),r=this.tracked[i[n]],a=0;a<r.length;a++){var s=r[a],l=this.inspectedProps[s];if(l&&!0===l.visible){o.appendChild(l.getDOM());var h=this.collection,u=l.dom,c=u.label||u.children[0];c.textContent=DebugLocales[s]||s;var f=u.children[1];if(l.options.readOnly)for(var d=0;d<u.children.length;d++)u.children[d].disabled=!0;var p=l.getType();if("Point"===p||"Size"===p||"Margin"===p||"Rect"===p||"Spot"==p)l.originalValue=l.getter(s).copy();else{var f;f="Brush"===p||"boolean"===p?u:u.children[1],l.originalValue=f.value}var g="";null!==h&&(g=l.getter(s)),l.inferredType=typeof g,g===undefined?g="":"(null)"===g?l.nullCheckBox.checked=!0:l.nullCheckBox&&(l.nullCheckBox.checked=!1),l.populate(g)}}e.appendChild(o)}var y=this;this.acceptButton&&this.buildButton("\u5e94\u7528",function(){y.setAllProperties(),y.rebuildViews()}),this.resetButton&&this.buildButton("\u91cd\u7f6e",function(){y.rebuildViews()})},DebugInspector.prototype.buildButton=function(t,e){if(this[t+"View"]===undefined){var i=document.createElement("input");i.type="button",i.value=t,i.addEventListener("click",e),this.viewName=i}this.acceptResetDiv.appendChild(this.viewName)},DebugInspector.prototype.setAllProperties=function(){if(null!==this.collection){var t=this.diagram;if(null!==t){var e=this.inspectedProps,i="set all properties";t.startTransaction(i);for(var n in e){var o=e[n];if(o&&null!==o.setter&&!o.options.readOnly){var r=o.isNull()?null:o.use(this);o.originalValue!==r&&((r instanceof go.Point||r instanceof go.Size||r instanceof go.Spot||r instanceof go.Rect||r instanceof go.Margin)&&o.originalValue.equals(r)||o.setter(t,o,n,r))}}t.commitTransaction(i)}}},DebugInspector.prototype.createProperty=function(t,e,i){var n=this.propertyPredicate;if(null===n||n(i,t)){var o=this.inspectedProps,r=new View(i,e);o[t]=r,r.name=t}},DebugInspector.prototype.appendProperty=function(t,e,i){var n=this.inspectedProps;this.createProperty(t,e,i),n[t]&&(n[t].visible=!0)},DebugInspector.prototype.hideAllProperties=function(){var t=this.inspectedProps;for(var e in t)t[e].visible=!1},DebugInspector.prototype.showObjectProperties=function(t){if(this.hideAllProperties(),null!==t){this.tracked={};var e=Object.getPrototypeOf(t);if(null!==this.propertyNames){var i=this.propertyNames,n=this.collection;for(var o in i)if(go[o]!==undefined&&go[o]._inspectedProperties!==undefined){var r=o;DebugInspector.createSection(r);this.tracked[r]=[];for(var a=i[o],s=0;s<a.length;s++){for(var l=a[s],h=null;null===h&&e&&e.constructor!==Object;)e.constructor._inspectedProperties[l]&&(h=e.constructor._inspectedProperties[l]),e=Object.getPrototypeOf(e);this.tracked[r].push(l),this.appendProperty(l,h,t)}}else{var r=o.substr(1),t=n.findObject(r);if(null===t)continue;DebugInspector.createSection(r);this.tracked[r]=[];for(var a=i[o],s=0;s<a.length;s++){var l=a[s];this.tracked[r].push(l),this.appendProperty(l,{},t)}}}else if(e.constructor===Object){var r="data";DebugInspector.createSection(r);this.tracked[r]=[];for(var l in t){var h={setter:View.defaultDataSetter};"__gohashid"===l&&(h.type="String",h.readOnly=!0),this.tracked[r].push(l),this.appendProperty(l,h,this.collection)}}else for(;e&&e.constructor!==Object;){var a=e.constructor._inspectedProperties,r=(new e.constructor).toString().split("#")[0].split("(")[0];DebugInspector.createSection(r);this.tracked[r]=[];for(var u in a)this.tracked[r].push(u),this.appendProperty(u,a[u],this.collection);e=Object.getPrototypeOf(e)}this.rebuildViews()}},DebugInspector.createSection=function(t){var e=document.createElement("div");e.className="inspector-section";var i=document.createElement("h3");return i.innerHTML=t+" \u5c5e\u6027",e.appendChild(i),e},View.prototype.getDOM=function(){return this.inialized||(this.dom=this.initialize(),this.inialized=!0),this.dom},View.prototype.getType=function(){return this.options.type||this.inferredType},View.prototype.isNullable=function(){if(this.options.nullable)return!0;var t=this.getType();return go[t]!==undefined&&!!go[t].nullable},View.prototype.isNull=function(){return this.isNullable()&&this.nullCheckBox&&this.nullCheckBox.checked},View.prototype.makeInspectorGroup=function(){var t=document.createElement("div");t.className="inspector-group";var e=document.createElement("label");e.textContent="LABEL",e.className="property-name";var i=e;if(this.isNullable()){t.className+=" inspector-nullable";var n=document.createElement("span");n.appendChild(e);var o=document.createElement("label"),r=document.createElement("span");r.textContent="Null?";var a=document.createElement("input");a.type="checkbox",o.appendChild(a),o.appendChild(r),n.appendChild(o),i=n,this.nullCheckBox=a}return t.appendChild(i),t.label=e,t},View.prototype.nFieldHTMLInit=function(t){for(var e=this.makeInspectorGroup(),i=2,n=[],o=[],r=function(){for(var t=document.createElement("div"),i=0;i<o.length;i++)t.appendChild(o[i]);t.className="row",e.appendChild(t),o=[]},a=0;a<t.length;a++){var s=document.createElement("label");s.textContent=DebugLocales[t[a]]||t[a],s.className="inspector-n-field-label";var l=document.createElement("input");l.className="input-short",n.push(l);var h=document.createElement("div");h.className="cell",h.appendChild(s),h.appendChild(l),o.push(h),o.length%i==0&&r()}return 0!==o.length&&r(),this.inputs=n,e},View.prototype.initialize=function(){var t=(this.dom,this.getType()),e=null;switch(t){case"Enum":e=this.makeInspectorGroup();var i=document.createElement("select");e.appendChild(i);break;case"Margin":e=this.nFieldHTMLInit(["Top","Right","Bottom","Left"]);break;case"Point":e=this.nFieldHTMLInit(["X","Y"]);break;case"Rect":e=this.nFieldHTMLInit(["X","Y","Width","Height"]);break;case"Size":e=this.nFieldHTMLInit(["Width","Height"]);break;case"Spot":e=this.nFieldHTMLInit(["X","Y","Offset X","Offset Y"]);var i=(this.inputs,document.createElement("select")),n=0,o=document.createElement("option");o.value=-1,o.text="Custom Spot",i.appendChild(o);for(var r in go.Spot)if(go.Spot[r]instanceof go.Spot){var a=document.createElement("option");a.value=n,a.text=r,n++,i.appendChild(a)}i.value=-1,i.div=e,e.dropdown=i;var s=this;i.onchange=function(){var t=i[i.selectedIndex].text;if("Custom Spot"!==t){var e=go.Spot.parse(t);s.inputs[0].value=e.x,s.inputs[1].value=e.y,s.inputs[2].value=e.offsetX,s.inputs[3].value=e.offsetY}},e.selectIndex=e.children.length,e.appendChild(i);break;case"Brush":e=this.makeInspectorGroup();var l=document.createElement("input");l.type="text",e.appendChild(l);break;case"boolean":e=this.makeInspectorGroup();var h=document.createElement("input");h.type="checkbox",h.className="inspector-boolean-control";var u=e.children[0];u.className="make-inline",e.insertBefore(h,u),e.input=h;break;case"number":default:e=this.makeInspectorGroup();var h=document.createElement("input");h.type="text","number"===this.getType()&&(h.className+=" right-align"),h.className+=" input-long",e.appendChild(h),e.input=h}return e},View.prototype.populate=function(t){var e=this.dom;switch(this.getType()){case"Enum":for(var i=this.options.enumValues,n=this.dom.children[1];0!==n.children.length;)n.removeChild(n.children[0]);if(0===n.length)for(var o=0;o<i.length;o++){var r=document.createElement("option");r.value=o,r.innerHTML=i[o].toString().split(".")[1],n.appendChild(r)}for(var a=-1,o=0;o<n.length;o++)if(n[o].text===t.toString().split(".")[1]){a=o;break}n.value=a;break;case"Margin":this.nFieldHTMLPopulate([t.top,t.left,t.bottom,t.right]);break;case"Point":this.nFieldHTMLPopulate([t.x,t.y]);break;case"Rect":this.nFieldHTMLPopulate([t.x,t.y,t.width,t.height]);break;case"Size":this.nFieldHTMLPopulate([t.width,t.height]);break;case"Spot":if(t instanceof go.Spot){var s=null;for(var l in go.Spot)if(go.Spot[l]instanceof go.Spot&&go.Spot[l].equals(t)){s=l;break}var n=e.dropdown;if(null!==s){for(var a=-1,o=0;o<n.children.length;o++){var h=n.children[o];if(h.text===s){a=parseInt(h.value);break}}n.value=a}}"String"==typeof t&&(t=go.Spot.parse(t)),this.nFieldHTMLPopulate([t.x,t.y,t.offsetX,t.offsetY]);break;case"Brush":var u=(this.nullCheckBox,e.children[1]);"(null)"===t&&(t="black");var c=$(u);if("string"==typeof t||t.type===go.Brush.Solid){var f=t;t instanceof go.Brush&&(f=t.color);var d={replacerClassName:"spectrum-control",color:f,showAlpha:!0,showInput:!0,clickoutFiresChange:!0,showButtons:!1,preferredFormat:"hex"};c.spectrum(d)}else c.spectrum("destroy");t instanceof go.Brush&&(t=ExtendedBrush.stringify(t)),u.value=t;break;case"boolean":e.children[0].checked=t;break;case"number":default:e.children[1].value=t}},View.prototype.nFieldHTMLPopulate=function(t){for(var e=this.inputs,i=0;i<t.length;i++)e[i].value=t[i]},View.prototype.use=function(t){var e=this.dom,i=this.getType(),n=null;switch(i){case"Enum":n=this.options.enumValues[e.children[1].selectedIndex];break;case"Margin":var o=this.nFieldHTMLUse(4);n=new go.Margin(o[0],o[1],o[2],o[3]);break;case"Point":var o=this.nFieldHTMLUse(2);n=new go.Point(o[0],o[1]);break;case"Rect":var o=this.nFieldHTMLUse(4);n=new go.Rect(o[0],o[1],o[2],o[3]);break;case"Size":var o=this.nFieldHTMLUse(2);n=new go.Size(o[0],o[1]);break
;case"Spot":var o=this.nFieldHTMLUse(4),r=this.dom.children[this.dom.selectIndex];if(0!==r.selectedIndex){var a=go.Spot.parse(r[r.selectedIndex].text),s=function(t,e){return t===e||isNaN(t)&&isNaN(e)};s(o[0],a.x)&&s(o[1],a.y)&&s(o[2],a.offsetX)&&s(o[3],a.offsetY)&&(n=a)}null===n&&(n=new go.Spot(o[0],o[1],o[2],o[3]));break;case"Brush":if(this.nullCheckBox.checked)n=null;else{var l=e.children[1].value,h=t.collection;h=h.part;n=ExtendedBrush.parse(l,h.measuredBounds.width,h.measuredBounds.height)}break;case"boolean":n=e.children[0].checked;break;case"number":n=parseFloat(e.input.value);break;default:n=e.input.value}return n},View.prototype.nFieldHTMLUse=function(){for(var t=[],e=this.inputs,i=0;i<e.length;i++)t[i]=parseFloat(e[i].value);return t},View.defaultGetter=function(t){var e=this.object[t];return null===e?"(null)":e},View.defaultDataGetter=function(t){return this.object[t]},View.defaultSetter=function(t,e,i,n){"number"===e.getType()&&(n=parseFloat(n)),this.object[i]=n},View.defaultDataSetter=function(t,e,i,n){t.model.setDataProperty(this.object,i,n)},go.GraphObject._inspectedProperties={stretch:{type:"Enum",enumValues:[go.GraphObject.None,go.GraphObject.Fill,go.GraphObject.Horizontal,go.GraphObject.Vertical,go.GraphObject.Default],defaultValue:go.GraphObject.Default},name:{type:"String",readOnly:!0},opacity:{type:"number",defaultValue:1},visible:{type:"boolean",defaultValue:!0},areaBackground:{type:"Brush",defaultValue:null},background:{type:"Brush",defaultValue:null},position:{type:"Point"},scale:{type:"number",defaultValue:1},angle:{type:"number",defaultValue:0},desiredSize:{type:"Size"},measuredBounds:{type:"Rect",readOnly:!0},naturalBounds:{type:"Rect",readOnly:!0},portId:{type:"string",nullable:!0,defaultValue:null},minSize:{type:"Size",defaultValue:new go.Size(0,0)},maxSize:{type:"Size",defaultValue:new go.Size(Infinity,Infinity)}},go.Shape._inspectedProperties={fill:{type:"Brush",defaultValue:"black"},stroke:{type:"Brush",defaultValue:"black"},strokeWidth:{type:"number",defaultValue:1},strokeCap:{type:"String",defaultValue:"butt"},strokeJoin:{type:"String",defaultValue:"miter"},strokeMiterLimit:{type:"number",defaultValue:10},figure:{type:"String",defaultValue:"None"},toArrow:{type:"String",defaultValue:"None"},fromArrow:{type:"String",defaultValue:"None"},geometryStretch:{type:"Enum",enumValues:[go.GraphObject.None,go.GraphObject.Fill,go.GraphObject.Uniform,go.GraphObject.Default],defaultValue:go.GraphObject.Default}},go.TextBlock._inspectedProperties={font:{type:"String",defaultValue:"10px sans-serif"},text:{type:"String"},textAlign:{type:"String",defaultValue:"start"},isMultiline:{type:"boolean",defaultValue:!0},isUnderline:{type:"boolean",defaultValue:!1},isStrikethrough:{type:"boolean",defaultValue:!1},wrap:{type:"Enum",enumValues:[go.TextBlock.WrapDesiredSize,go.TextBlock.WrapFit,go.TextBlock.None],defaultValue:go.TextBlock.WrapDesiredSize},overflow:{type:"Enum",enumValues:[go.TextBlock.OverflowClip,go.TextBlock.OverflowEllipsis],defaultValue:go.TextBlock.OverflowClip},stroke:{type:"Brush",defaultValue:"black"},lineCount:{type:"number",readOnly:!0},editable:{type:"boolean"}},go.Panel._inspectedProperties={type:{type:"Enum",enumValues:[go.Panel.Position,go.Panel.Vertical,go.Panel.Horizontal,go.Panel.Auto,go.Panel.Spot,go.Panel.Table,go.Panel.Viewbox,go.Panel.Link,go.Panel.TableRow,go.Panel.TableColumn,go.Panel.Grid],defaultValue:go.Panel.Position},padding:{type:"Margin",defaultValue:new go.Margin},defaultAlignment:{type:"Spot",defaultValue:go.Spot.Default},defaultStretch:{type:"Enum",enumValues:[go.GraphObject.None,go.GraphObject.Fill,go.GraphObject.Horizontal,go.GraphObject.Vertical,go.GraphObject.Default],defaultValue:go.GraphObject.Default},gridCellSize:{type:"Size",defaultValue:new go.Size(10,10)},gridOrigin:{type:"Point",defaultValue:new go.Point}},go.Part._inspectedProperties={location:{type:"Point"},locationSpot:{type:"Spot"},resizable:{type:"boolean",defaultValue:!1},rotatable:{type:"boolean",defaultValue:!1},isShadowed:{type:"boolean",defaultValue:!1}},go.Node._inspectedProperties={isTreeExpanded:{type:"boolean",defaultValue:!0}},go.Link._inspectedProperties={fromSpot:{type:"Spot"},toSpot:{type:"Spot"},relinkableFrom:{type:"boolean",defaultValue:!1},relinkableTo:{type:"boolean",defaultValue:!1},resegmentable:{type:"boolean",defaultValue:!1},reshapable:{type:"boolean",defaultValue:!1},midPoint:{type:"Point",readOnly:!0},midAngle:{type:"number",readOnly:!0},isOrthogonal:{type:"boolean",readOnly:!0},isAvoiding:{type:"boolean",readOnly:!0},corner:{type:"number",defaultValue:0},curve:{type:"Enum",enumValues:[go.Link.None,go.Link.Bezier,go.Link.JumpGap,go.Link.JumpOver],defaultValue:go.Link.None},curviness:{type:"number",defaultValue:NaN},routing:{type:"Enum",enumValues:[go.Link.Normal,go.Link.Orthogonal,go.Link.AvoidsNodes],defaultValue:go.Link.Normal},smoothness:{type:"number",defaultValue:.5}},go.Group._inspectedProperties={ungroupable:{type:"boolean",defaultValue:!1},isSubGraphExpanded:{type:"boolean",defaultValue:!0}},go.Picture._inspectedProperties={source:{type:"string"},imageStretch:{type:"Enum",enumValues:[go.GraphObject.None,go.GraphObject.Fill,go.GraphObject.Uniform,go.GraphObject.UniformToFill],defaultValue:go.GraphObject.None},naturalBounds:{type:"Rect",readOnly:!0},sourceRect:{type:"Rect",defaultValue:new go.Rect(NaN,NaN,NaN,NaN)}},go.Brush.nullable=!0,go.Diagram.inherit(ExtendedBrush,go.Brush),ExtendedBrush.parse=ExtendedBrush.parse=function(t,e,i){if(-1!==t.indexOf("linear"))return ExtendedBrush._parseLinearGradientCSS(t,e,i);if(-1!==t.indexOf("radial"))return ExtendedBrush._parseRadialGradientCSS(t,e,i);if(go.Brush.isValidColor(t)){var n=new go.Brush(go.Brush.Solid);return n.color=t,n}var n=new go.Brush(go.Brush.Pattern),o=document.createElement("img");return o.src=t,n.pattern=o,n},ExtendedBrush.stringify=ExtendedBrush.stringify=function(t){if(!(t instanceof go.Brush))throw new Error("ExtendedBrush.stringify requires a Brush argument, not: "+t);var e="";if(t.type===go.Brush.Solid)return t.color;if(t.type===go.Brush.Linear){e="linear-gradient(";var i=ExtendedBrush._angleBetweenSpots(t);isNaN(i)&&(i=180),e+=i+"deg",e+=ExtendedBrush._convertStopsToCSS(t),e+=")"}else t.type===go.Brush.Radial?(e="radial-gradient(",t.endRadius&&(e+=Math.round(t.endRadius)+"px "),t.ellipseHeight&&(e+=Math.round(t.ellipseHeight)+"px "),e+="at ",e+=100*t.start.x+"% ",e+=100*t.start.y+"% ",e+=ExtendedBrush._convertStopsToCSS(t),e+=")"):t.type===go.Brush.Pattern&&t.pattern&&(e=t.pattern.getAttribute("src"));return e},ExtendedBrush._convertStopsToCSS=function(t){for(var e=t.colorStops.iterator,i="";e.next();)i+=", "+e.value+" "+100*e.key+"%";return i},ExtendedBrush._UNITS=["px","pt","pc","in","cm","mm"],ExtendedBrush._lengthToPX=function(t,e){var i=96,n=2.54;switch(e){case"px":return t;case"pt":return 3*t/4;case"pc":return 9*t;case"in":return t*i;case"cm":return t*i/n;case"mm":return t*i/(10*n);default:return NaN}},ExtendedBrush._pxToPercent=function(t,e,i,n){return(n=parseFloat(n))%180==0?t/e:(n*=Math.PI/180,t/(Math.abs(i*Math.sin(n))+Math.abs(e*Math.cos(n))))},ExtendedBrush._parseLinearGradientCSS=function(t,e,i){var n=t.match(/\((.*)\)/g);if(null===n)throw new Error("Invalid CSS Linear Gradient: "+t);n=n[0],n=n.substring(1,n.length-1),n=n.split(/,(?![^\(]*\))/g),n[0]=n[0].trim(),go.Brush.isValidColor(n[0].split(/\s(?![^\(]*\))/g)[0])&&n.splice(0,0,"180deg"),n[0]=ExtendedBrush._linearGradientAngleToDegrees(n[0],e,i);var o=parseFloat(n[0])+180,r=ExtendedBrush._createColorStopArray(n),a=new go.Brush(go.Brush.Linear),s=ExtendedBrush._calculateLinearGradientSpots(o,e,i);a.start=s[0],a.end=s[1];for(var l=0;l<r.length;l++)a.addColorStop(r[l].position,r[l].color);return a},ExtendedBrush._createColorStopArray=function(t){for(var e=[],i=1;i<t.length;i++){t[i]=t[i].trim();var n=t[i].split(/\s+(?![^\(]*\))/g),o={};if(!go.Brush.isValidColor(n[0]))throw new Error("Invalid CSS Color in Linear Gradient: "+n[0]+" in "+t);if(n[1]!==undefined){var r=n[1].match(/[^\d.]+/g)[0];if(-1!==ExtendedBrush._UNITS.indexOf(r)){n[1]=parseFloat(n[1]);var a=ExtendedBrush._lengthToPX(n[1],r);o.position=ExtendedBrush._pxToPercent(a,w,h,angle)}else{if("%"!==r)throw new Error("Invalid Linear Gradient Unit: "+r+" in "+t);o.position=parseFloat(n[1])/100}}else o.position=NaN;o.color=n[0],e[i-1]=o}return isNaN(e[0].position)&&(e[0].position=0),isNaN(e[e.length-1].position)&&(e[e.length-1].position=1),ExtendedBrush._fixLinearGradientPositions(e),e},ExtendedBrush._fixLinearGradientPositions=function(t,e,i){for(e===undefined&&(e=0),i===undefined&&(i=t.length);e<i-1&&!isNaN(t[e+1].position);)e++;if(e!==i-1){for(var n=e+1;n<i&&isNaN(t[n].position);)n++;for(var o=(t[n].position-t[e].position)/(n-e),r=1;r<n-e;r++)t[r+e].position=Math.round(1e3*(t[e].position+r*o))/1e3;n<i-1&&ExtendedBrush._fixLinearGradientPositions(t,n,i)}},ExtendedBrush._calculateLinearGradientSpots=function(t,e,i){if(t=parseFloat(t),90===(t=(t%360+360)%360))return[new go.Spot(0,0,e,i/2),new go.Spot(0,0,0,i/2)];if(270===t)return[new go.Spot(0,0,0,i/2),new go.Spot(0,0,e,i/2)];var n=90-Math.abs(t%180-90),o=Math.tan(n*Math.PI/180),r=.5*(i*o-e)/(o*o+1),a=r*o;return t>=90&&t<=270&&(a=i-a),r=t<180?e+r:-r,[new go.Spot(0,0,r,a),new go.Spot(0,0,e-r,i-a)]},ExtendedBrush._applyLinearGradientSpots=function(t,e,i,n){var o=ExtendedBrush._calculateLinearGradientSpots(t,e,i);return n.start=o[0],n.end=o[1],n},ExtendedBrush._linearGradientAngleToDegrees=function(t,e,i){var n=t.indexOf("to ")<0,o=t.match(/\d/g),r=t.match(/0/g);if(null!==r&&o.length===r.length)return 0;if(!n){var a=0;t.indexOf("right")>=0?a=90:t.indexOf("left")>=0&&(a=-90);var s=0===a?0:a>0?1:-1;if(t.indexOf("top")>=0?a-=s*Math.atan(e/i)*180/Math.PI:t.indexOf("bottom")>=0&&(0===a?a=180:a+=s*Math.atan(e/i)*180/Math.PI),0===a&&t.indexOf("top")<0)throw new Error("Invalid CSS Linear Gradient direction: "+t);return Math.round(a)}switch(t=t.match(/[^a-z]+|\D+/g),t[1]){case"deg":return t[0];case"rad":return 180*t[0]/Math.PI;case"turn":return 360*t[0];case"grad":return 9*t[0]/10;default:throw new Error("Invalid CSS Linear Gradient direction: "+t[1])}},ExtendedBrush._angleBetweenSpots=function(t){var e=t.start,i=t.end;if(isNaN(e.x+e.y+i.x+i.y))throw new Error("The brush does not have valid spots");var n=(i.offsetX,e.offsetX,e.offsetY,i.offsetY,180*Math.atan((e.offsetX-i.offsetX)/(i.offsetY-e.offsetY))/Math.PI);return e.offsetY>i.offsetY&&(n+=180),(n+360)%360},ExtendedBrush._parseRadialGradientCSS=function(t,e,i){if(null===(t=t.match(/\((.*)\)/g)))throw new Error("Invalid CSS Linear Gradient");t=t[0],t=t.substring(1,t.length-1),t=t.split(/,(?![^\(]*\))/g),t[0]=t[0].trim();var n=go.Brush.isValidColor(t[0].split(" ")[0]),o=[e/2,i/2],r=new go.Spot(.5,.5,0,0);if(!n){var a=t[0];if(a=a.split("at"),1===a.length)r=new go.Spot(.5,.5,0,0);else{if(2!==a.length)throw new Error("invalid css radial gradient string");r=ExtendedBrush._parseCenter(a[1],e,i)}o=ExtendedBrush._parseShapeDescription(a[0],e,i,r)}var s=ExtendedBrush._createColorStopArray(t),l=new go.Brush(go.Brush.Radial);l.start=r,l.end=r,l.startRadius=0,l.endRadius=o[0],l.ellipseHeight=o[1];for(var h=0;h<s.length;h++)l.addColorStop(s[h].position,s[h].color);return l},ExtendedBrush._parseCenter=function(t,e,i){var n=[];t=t.trim();var o=t.split(/\s+/g);if(1===o.length)n=ExtendedBrush._englishPositionToCoordinate(o[0]);else if(2===o.length){var r=t.match(/\d+/g);if(null===r)n=ExtendedBrush._englishPositionToCoordinate(t);else if(1===r.length){var a,s;null===o[0].match(/\d+/g)?(s=o[0],a=o[1]):(s=o[1],a=o[0]),a=ExtendedBrush._parseLengthToPercent(a),n=ExtendedBrush._englishPositionToCoordinate(s),n[1]=a}else 2===r.length&&(n[0]=ExtendedBrush._parseLengthToPercent(o[0],e),n[1]=ExtendedBrush._parseLengthToPercent(o[1],i))}else if(3===o.length);else{if(4!==o.length)throw new Error("invalid CSS position description");switch(o[0]){case"right":n[0]=1-ExtendedBrush._parseLengthToPercent(n[1],e);case"left":n[0]=ExtendedBrush._parseLengthToPercent(n[1],e);default:throw new Error("invalid location keyword: "+o[0])}switch(o[2]){case"top":n[0]=ExtendedBrush._parseLengthToPercent(n[3],i);case"bottom":n[0]=1-ExtendedBrush._parseLengthToPercent(n[3],i);default:throw new Error("invalid location keyword: "+o[2])}}return new go.Spot(n[0],n[1],0,0)},ExtendedBrush._parseLengthToPercent=function(t,e){return t.indexOf("%")<0?ExtendedBrush._parseLengthToPX(t)/e:parseFloat(t)/100},ExtendedBrush._parseLengthToPX=function(t){var e=parseFloat(t.match(/\d+/g)[0]),i=t.match(/\D+/g)[0];return ExtendedBrush._lengthToPX(e,i)},ExtendedBrush._englishPositionToCoordinate=function(t){var e=.5,i=.5;return t.indexOf("bottom")>-1?i=1:t.indexOf("top")>-1&&(i=0),t.indexOf("left")>-1?e=0:t.indexOf("right")>-1&&(e=1),[e,i]},ExtendedBrush._parseShapeDescription=function(t,e,i,n){var o=n.x,r=n.y;t=t.trim();var a=t.split(" ");if(null===a)return[e/2,i/2];if(1===a.length){var s=Math.abs(e/2-o*e)+e/2,l=Math.abs(i/2-r*i)+i/2;if(t.indexOf("ellipse")>-1)return[s*Math.sqrt(2),l*Math.sqrt(2)];if(t.indexOf("circle")>-1){var h=Math.sqrt(s*s+l*l);return[h,h]}return ExtendedBrush._parseExtentKeyword(t,e,i,n)}if(2===a.length){var u=t.match(/\d+/g);if(null===u)return ExtendedBrush._parseExtentKeyword(t,e,i,n);if(1===u.length){if(a[0].indexOf("circle")>-1&&a[1].indexOf("%")<0){var h=ExtendedBrush._parseLengthToPX(a[1]);return[h,h]}throw new Error("Invalid CSS shape description")}if(2===u.length)return[ExtendedBrush._parseLengthToPX(a[0]),ExtendedBrush._parseLengthToPX(a[1])];throw new Error("Invalid CSS shape description")}if(3===a.length){if("ellipse"!==a[0])throw new Error("invalid CSS shape description");return[ExtendedBrush._parseLengthToPercent(a[1],e)*e,ExtendedBrush._parseLengthToPercent(a[2],i)*i]}throw new Error("invalid CSS shape description")},ExtendedBrush._parseExtentKeyword=function(t,e,i,n){if(!t)return[e/2,i/2];var o,r=n.x,a=n.y,s=Math.abs(e/2-r*e)+e/2,l=Math.abs(i/2-a*i)+i/2,h=t.split(" ");if(null===h)throw new Error("invalid extent keyword");if(o=h[h.length-1],t.indexOf("circle")>-1){switch(o){case"closest-corner":var u=Math.sqrt((e-s)*(e-s)+(i-l)*(i-l));break;case"farthest-corner":var u=Math.sqrt(s*s+l*l);break;case"closest-side":var u=Math.min(e-s,i-l);break;case"farthest-side":var u=Math.max(s,l);break;default:throw new Error("invalid extent keyword: "+o)}return[u,u]}switch(o){case"closest-corner":return[(e-s)*Math.sqrt(2),(i-l)*Math.sqrt(2)];case"farthest-corner":return[s*Math.sqrt(2),l*Math.sqrt(2)];case"closest-side":return[e-s,i-l];case"farthest-side":return[s,l];default:throw new Error("invalid extent keyword: "+o)}},ExtendedBrush._makePaletteFromOneColor=function(t,e){for(var i=ExtendedBrush._RGB_to_Lab(ExtendedBrush.CSSStringToRGB(t)),n=[],o=100/(e+2),r=Math.floor(i[0]/o)-1,a=1;a<=e;a++)n[a-1]=go.Brush.lightenBy(t,o*(a-r)/100);return n},ExtendedBrush._makePaletteFromTwoColors=function(t,e,i){t=ExtendedBrush._RGB_to_Lab(ExtendedBrush.CSSStringToRGB(t)),e=ExtendedBrush._RGB_to_Lab(ExtendedBrush.CSSStringToRGB(e));for(var n=[],o=(ExtendedBrush._MAX_Lab_A,ExtendedBrush._MIN_Lab_A,ExtendedBrush._MAX_Lab_B,ExtendedBrush._MIN_Lab_B,i-1),r=(t[1]-e[1])/o,a=(t[2]-e[2])/o,s=(t[0]-e[0])/o,l=0;l<i;l++){var h=ExtendedBrush._Lab_to_RGB([e[0]+l*s,e[1]+l*r,e[2]+l*a]),u=ExtendedBrush._RGBArrayToCSS(h);n[l]=u}return n},ExtendedBrush.makeColorPalette=ExtendedBrush.makeColorPalette=function(t,e,i){if(arguments.length<1)throw new Error("Please provide at least one color, and at most two color and a number");if(arguments.length>3)throw new Error("Please provide no more than two colors, and an optional number argument");var n=3;if("string"!=typeof t)throw new Error(t+" is not a string");var o=i===undefined,r=function(t){if("number"!=typeof t||isNaN(t)||t===Infinity||t<1)throw new Error("Please provide a number greater than or equal to one, not: "+t)};if(1===arguments.length)return ExtendedBrush._makePaletteFromOneColor(t,n);if("string"==typeof e)return o?ExtendedBrush._makePaletteFromTwoColors(t,e,n):(r(i),ExtendedBrush._makePaletteFromTwoColors(t,e,i));if("number"==typeof e){if(o){if(i=e,r(i),1===i){t=ExtendedBrush.CSSStringToRGB(t),t.splice(3,1);return[ExtendedBrush._RGBArrayToCSS(t)]}return ExtendedBrush._makePaletteFromOneColor(t,i)}throw new Error("Please provide only only one number")}throw new Error("Please provide either a color string or a number")},ExtendedBrush._sharedTempCtx=null,ExtendedBrush.CSSStringToRGB=function(t){if(!go.Brush.isValidColor(t))throw new Error("Invalid CSS Color String: "+t);var e=ExtendedBrush._sharedTempCtx;null===e&&(e=ExtendedBrush._sharedTempCtx=document.createElement("canvas").getContext("2d")),e.clearRect(0,0,1,1),e.fillStyle=t,e.fillRect(0,0,1,1);for(var i=e.getImageData(0,0,1,1).data,n=[],o=0;o<i.length;o++)n.push(i[o]);return n},ExtendedBrush._RGBArrayToCSS=function(t){if(3===t.length)var e="rgb(";else{if(4!==t.length)throw new Error("invalid RGB or RGBa array: "+t);var e="rgba("}for(var i=0;i<t.length;i++)e+=t[i]+(i!==t.length-1?", ":"");return e+")"},ExtendedBrush._MIN_Lab_A=-93,ExtendedBrush._MAX_Lab_A=92,ExtendedBrush._MIN_Lab_B=-114,ExtendedBrush._MAX_Lab_B=92,ExtendedBrush._RGB_to_Lab=function(t){return ExtendedBrush._XYZtoLab(ExtendedBrush._RGBtoXYZ(t))},ExtendedBrush._Lab_to_RGB=function(t){return ExtendedBrush._XYZtoRGB(ExtendedBrush._LabtoXYZ(t))},ExtendedBrush._sRGBtoXYZMatrix=[[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],ExtendedBrush._XYZtosRGBMatrix=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],ExtendedBrush._rowMultiplication=function(t,e){for(var i=0,n=0;n<e.length;n++)i+=t[n]*e[n];return i},ExtendedBrush._RGB_XYZ_Inverse_Companding=function(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},ExtendedBrush._XYZ_RGB_Companding=function(t){return 12.92*t<=.04045?12.92*t:1.055*Math.pow(t,.416667)-.055},ExtendedBrush._RGBtoXYZ=function(t){t.splice(3,1);var e,i=[];for(e=0;e<t.length;e++)t[e]=ExtendedBrush._RGB_XYZ_Inverse_Companding(t[e]);for(e=0;e<t.length;e++)i[e]=ExtendedBrush._rowMultiplication(ExtendedBrush._sRGBtoXYZMatrix[e],t);return i},ExtendedBrush._XYZtoRGB=function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=ExtendedBrush._rowMultiplication(ExtendedBrush._XYZtosRGBMatrix[e],t);for(e=0;e<t.length;e++)i[e]=255*ExtendedBrush._XYZ_RGB_Companding(i[e]),i[e]<0&&(i[e]=0),i[e]*=100,i[e]=Math.round(i[e]),i[e]/=100,i[e]=Math.floor(i[e]),i[e]>255&&(i[e]=255),i[e]<0&&(i[e]=0);return i},ExtendedBrush._Lab_EPSILON=216/24389,ExtendedBrush._Lab_KAPPA=24389/27,ExtendedBrush._XYZ_Lab_HelperFunction=function(t){return t>ExtendedBrush._Lab_EPSILON?Math.pow(t,1/3):(ExtendedBrush._Lab_KAPPA*t+16)/116},ExtendedBrush._XYZtoLab=function(t){var e=[],i=ExtendedBrush._XYZ_Lab_HelperFunction(t[1]);return e[0]=116*i-16,e[1]=500*(ExtendedBrush._XYZ_Lab_HelperFunction(t[0])-i),e[2]=200*(i-ExtendedBrush._XYZ_Lab_HelperFunction(t[2])),e},ExtendedBrush._Lab_XYZ_HelperFunction=function(t){var e=t*t*t;return e>ExtendedBrush._Lab_EPSILON?e:(116*t-16)/ExtendedBrush._Lab_KAPPA},ExtendedBrush._LabtoXYZ=function(t){var e=[];e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=-t[2]/200+e[1];var i=[];return i[1]=ExtendedBrush._Lab_XYZ_HelperFunction(e[1]),i[0]=ExtendedBrush._Lab_XYZ_HelperFunction(e[0]),i[2]=ExtendedBrush._Lab_XYZ_HelperFunction(e[2]),i},go.GraphObject.defineBuilder("HyperlinkText",function(t){function e(t){if(t instanceof go.TextBlock)return t;if(t instanceof go.Panel)for(var i=t.elements;i.next();){var n=e(i.value);if(null!==n)return n}return null}for(var i=go.GraphObject.takeBuilderArgument(t,undefined,function(t){return"string"==typeof t||"function"==typeof t}),n=go.GraphObject.takeBuilderArgument(t,null,function(t){return"string"==typeof t||"function"==typeof t}),o=!1,r=0;r<t.length;r++){var a=t[r];a&&a instanceof go.GraphObject&&(o=!0)}var s=function(t,e){var i=e._url;"function"==typeof i&&(i=i(e.findTemplateBinder())),window.open(i,"_blank")},l=go.GraphObject.make(go.Adornment,"Auto",go.GraphObject.make(go.Shape,{fill:"#EFEFCC"}),go.GraphObject.make(go.TextBlock,{margin:4},new go.Binding("text","",function(t){t=t.part.adornedObject;var e=t._url;return"function"==typeof e&&(e=e(t.findTemplateBinder())),e}).ofObject()));if("string"!=typeof n&&"function"!=typeof n&&o)return go.GraphObject.make(go.Panel,{_url:i,cursor:"pointer",mouseEnter:function(t,i){var n=e(i);null!==n&&(n.isUnderline=!0)},mouseLeave:function(t,i){var n=e(i);null!==n&&(n.isUnderline=!1)},click:s,toolTip:l});null===n&&"string"==typeof i&&(n=i);var h=go.GraphObject.make(go.TextBlock,{_url:i,cursor:"pointer",mouseEnter:function(t,e){e.isUnderline=!0},mouseLeave:function(t,e){e.isUnderline=!1},click:s,toolTip:l});return"string"==typeof n?h.text=n:"function"==typeof n?h.bind(new go.Binding("text","",n).ofObject()):"function"==typeof i&&h.bind(new go.Binding("text","",i).ofObject()),h});var icons={home:"M32 18.451l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18v12h-8v-8h-8v8h-8v-12l12-9z",droplet:"M27.998 19.797c-0-0.022-0.001-0.044-0.001-0.066-0.001-0.045-0.002-0.089-0.004-0.134-0.313-9.864-11.993-19.597-11.993-19.597s-11.68 9.733-11.993 19.598c-0.001 0.045-0.003 0.089-0.004 0.134-0 0.022-0.001 0.044-0.001 0.066-0.001 0.067-0.002 0.135-0.002 0.203 0 0.074 0.001 0.148 0.002 0.221 0 0.006 0 0.012 0 0.018 0.127 6.517 5.45 11.76 11.997 11.76s11.87-5.244 11.997-11.761c0-0.006 0-0.012 0-0.018 0.001-0.074 0.002-0.147 0.002-0.221 0-0.068-0.001-0.136-0.002-0.203zM23.998 20.148l-0 0.013c-0.041 2.103-0.892 4.073-2.395 5.548-1.504 1.477-3.495 2.291-5.604 2.291-0.389 0-0.775-0.028-1.154-0.082 4.346-2.589 7.257-7.335 7.257-12.76 0-0.608-0.037-1.207-0.108-1.796 1.259 2.311 1.939 4.462 2 6.363l0 0.005c0.001 0.030 0.002 0.059 0.002 0.089l0.001 0.045c0.001 0.046 0.002 0.091 0.002 0.137 0 0.049-0.001 0.099-0.002 0.148z",camera:"M9.5 19c0 3.59 2.91 6.5 6.5 6.5s6.5-2.91 6.5-6.5-2.91-6.5-6.5-6.5-6.5 2.91-6.5 6.5zM30 8h-7c-0.5-2-1-4-3-4h-8c-2 0-2.5 2-3 4h-7c-1.1 0-2 0.9-2 2v18c0 1.1 0.9 2 2 2h28c1.1 0 2-0.9 2-2v-18c0-1.1-0.9-2-2-2zM16 27.875c-4.902 0-8.875-3.973-8.875-8.875s3.973-8.875 8.875-8.875c4.902 0 8.875 3.973 8.875 8.875s-3.973 8.875-8.875 8.875zM30 14h-4v-2h4v2z",pacman:"M30.148 5.588c-2.934-3.42-7.288-5.588-12.148-5.588-8.837 0-16 7.163-16 16s7.163 16 16 16c4.86 0 9.213-2.167 12.148-5.588l-10.148-10.412 10.148-10.412zM22 3.769c1.232 0 2.231 0.999 2.231 2.231s-0.999 2.231-2.231 2.231-2.231-0.999-2.231-2.231c0-1.232 0.999-2.231 2.231-2.231z",spades:"M25.549 10.88c-6.049-4.496-8.133-8.094-9.549-10.88v0c-0 0-0-0-0-0v0c-1.415 2.785-3.5 6.384-9.549 10.88-10.314 7.665-0.606 18.365 7.93 12.476-0.556 3.654-2.454 6.318-4.381 7.465v1.179h12.001v-1.179c-1.928-1.147-3.825-3.811-4.382-7.465 8.535 5.889 18.244-4.811 7.93-12.476z",clubs:"M24.588 12.274c-1.845 0-3.503 0.769-4.683 2.022-0.5 0.531-1.368 1.16-2.306 1.713 0.441-1.683 1.834-3.803 2.801-4.733 1.239-1.193 2-2.87 2-4.734 0-3.59-2.859-6.503-6.4-6.541-3.541 0.038-6.4 2.951-6.4 6.541 0 1.865 0.761 3.542 2 4.734 0.967 0.93 2.36 3.050 2.801 4.733-0.939-0.553-1.806-1.182-2.306-1.713-1.18-1.253-2.838-2.022-4.683-2.022-3.575 0-6.471 2.927-6.471 6.541s2.897 6.542 6.471 6.542c1.845 0 3.503-0.792 4.683-2.045 0.525-0.558 1.451-1.254 2.447-1.832-0.094 4.615-2.298 8.005-4.541 9.341v1.179h12v-1.179c-2.244-1.335-4.448-4.726-4.541-9.341 0.995 0.578 1.922 1.274 2.447 1.832 1.18 1.253 2.838 2.045 4.683 2.045 3.575 0 6.471-2.928 6.471-6.542s-2.897-6.541-6.471-6.541z",diamonds:"M16 0l-10 16 10 16 10-16z",connection:"M20 18c3.308 0 6.308 1.346 8.481 3.519l-2.827 2.827c-1.449-1.449-3.449-2.346-5.654-2.346s-4.206 0.897-5.654 2.346l-2.827-2.827c2.173-2.173 5.173-3.519 8.481-3.519zM5.858 15.858c3.777-3.777 8.8-5.858 14.142-5.858s10.365 2.080 14.142 5.858l-2.828 2.828c-3.022-3.022-7.040-4.686-11.314-4.686s-8.292 1.664-11.314 4.686l-2.828-2.828zM30.899 4.201c3.334 1.41 6.329 3.429 8.899 6v0l-2.828 2.828c-4.533-4.533-10.56-7.029-16.971-7.029s-12.438 2.496-16.971 7.029l-2.828-2.828c2.571-2.571 5.565-4.589 8.899-6 3.453-1.461 7.12-2.201 10.899-2.201s7.446 0.741 10.899 2.201zM18 28c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2s-2-0.895-2-2z",feed:"M12 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM20.761 7.204c3.12 1.692 5.239 4.997 5.239 8.796s-2.119 7.104-5.239 8.796c1.377-2.191 2.239-5.321 2.239-8.796s-0.862-6.605-2.239-8.796zM9 16c0 3.475 0.862 6.605 2.239 8.796-3.12-1.692-5.239-4.997-5.239-8.796s2.119-7.104 5.239-8.796c-1.377 2.191-2.239 5.321-2.239 8.796zM3 16c0 5.372 1.7 10.193 4.395 13.491-4.447-2.842-7.395-7.822-7.395-13.491s2.948-10.649 7.395-13.491c-2.695 3.298-4.395 8.119-4.395 13.491zM24.605 2.509c4.447 2.842 7.395 7.822 7.395 13.491s-2.948 10.649-7.395 13.491c2.695-3.298 4.395-8.119 4.395-13.491s-1.7-10.193-4.395-13.491z",file:"M27.879 5.879l-3.757-3.757c-1.167-1.167-3.471-2.121-5.121-2.121h-14c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h22c1.65 0 3-1.35 3-3v-18c0-1.65-0.955-3.955-2.121-5.121zM20 4.236c0.069 0.025 0.139 0.053 0.211 0.082 0.564 0.234 0.956 0.505 1.082 0.631l3.757 3.757c0.126 0.126 0.397 0.517 0.631 1.082 0.030 0.072 0.057 0.143 0.082 0.211h-5.764v-5.764zM26 28h-20v-24h12v8h8v16zM8 16h16v2h-16zM8 20h16v2h-16zM8 24h16v2h-16z",history:"M18 2c7.732 0 14 6.268 14 14s-6.268 14-14 14v-3c2.938 0 5.701-1.144 7.778-3.222s3.222-4.84 3.222-7.778c0-2.938-1.144-5.701-3.222-7.778s-4.84-3.222-7.778-3.222c-2.938 0-5.701 1.144-7.778 3.222-1.598 1.598-2.643 3.601-3.041 5.778h5.819l-7 8-7-8h5.143c0.971-6.784 6.804-12 13.857-12zM24 14v4h-8v-10h4v6z",alarm:"M16 4c-7.732 0-14 6.268-14 14s6.268 14 14 14 14-6.268 14-14-6.268-14-14-14zM16 29.25c-6.213 0-11.25-5.037-11.25-11.25s5.037-11.25 11.25-11.25c6.213 0 11.25 5.037 11.25 11.25s-5.037 11.25-11.25 11.25zM29.212 8.974c0.501-0.877 0.788-1.892 0.788-2.974 0-3.314-2.686-6-6-6-1.932 0-3.65 0.913-4.747 2.331 4.121 0.851 7.663 3.287 9.96 6.643zM12.748 2.331c-1.097-1.418-2.816-2.331-4.748-2.331-3.314 0-6 2.686-6 6 0 1.082 0.287 2.098 0.788 2.974 2.297-3.356 5.838-5.792 9.96-6.643zM14 10h2v10h-2v-10zM16 18h6v2h-6v-2z","box-add":"M26 2h-20l-6 6v21c0 0.552 0.448 1 1 1h30c0.552 0 1-0.448 1-1v-21l-6-6zM16 26l-10-8h6v-6h8v6h6l-10 8zM4.828 6l2-2h18.343l2 2h-22.343z","box-remove":"M26 2h-20l-6 6v21c0 0.552 0.448 1 1 1h30c0.552 0 1-0.448 1-1v-21l-6-6zM20 20v6h-8v-6h-6l10-8 10 8h-6zM4.828 6l2-2h18.343l2 2h-22.343z",user:"M8 10c0-4.418 3.582-8 8-8s8 3.582 8 8c0 4.418-3.582 8-8 8s-8-3.582-8-8zM24 20h-16c-4.418 0-8 3.582-8 8v2h32v-2c0-4.418-3.582-8-8-8z",zoomin:"M31.008 27.231l-7.58-6.447c-0.784-0.705-1.622-1.029-2.299-0.998 1.789-2.096 2.87-4.815 2.87-7.787 0-6.627-5.373-12-12-12s-12 5.373-12 12c0 6.627 5.373 12 12 12 2.972 0 5.691-1.081 7.787-2.87-0.031 0.677 0.293 1.515 0.998 2.299l6.447 7.58c1.104 1.226 2.907 1.33 4.007 0.23s0.997-2.903-0.23-4.007zM12 20c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8zM14 6h-4v4h-4v4h4v4h4v-4h4v-4h-4z",zoomout:"M31.008 27.231l-7.58-6.447c-0.784-0.705-1.622-1.029-2.299-0.998 1.789-2.096 2.87-4.815 2.87-7.787 0-6.627-5.373-12-12-12s-12 5.373-12 12c0 6.627 5.373 12 12 12 2.972 0 5.691-1.081 7.787-2.87-0.031 0.677 0.293 1.515 0.998 2.299l6.447 7.58c1.104 1.226 2.907 1.33 4.007 0.23s0.997-2.903-0.23-4.007zM12 20c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8zM6 10h12v4h-12z",cog:"M29.181 19.070c-1.679-2.908-0.669-6.634 2.255-8.328l-3.145-5.447c-0.898 0.527-1.943 0.829-3.058 0.829-3.361 0-6.085-2.742-6.085-6.125h-6.289c0.008 1.044-0.252 2.103-0.811 3.070-1.679 2.908-5.411 3.897-8.339 2.211l-3.144 5.447c0.905 0.515 1.689 1.268 2.246 2.234 1.676 2.903 0.672 6.623-2.241 8.319l3.145 5.447c0.895-0.522 1.935-0.82 3.044-0.82 3.35 0 6.067 2.725 6.084 6.092h6.289c-0.003-1.034 0.259-2.080 0.811-3.038 1.676-2.903 5.399-3.894 8.325-2.219l3.145-5.447c-0.899-0.515-1.678-1.266-2.232-2.226zM16 22.479c-3.578 0-6.479-2.901-6.479-6.479s2.901-6.479 6.479-6.479c3.578 0 6.479 2.901 6.479 6.479s-2.901 6.479-6.479 6.479z",cogs:"M11.366 22.564l1.291-1.807-1.414-1.414-1.807 1.291c-0.335-0.187-0.694-0.337-1.071-0.444l-0.365-2.19h-2l-0.365 2.19c-0.377 0.107-0.736 0.256-1.071 0.444l-1.807-1.291-1.414 1.414 1.291 1.807c-0.187 0.335-0.337 0.694-0.443 1.071l-2.19 0.365v2l2.19 0.365c0.107 0.377 0.256 0.736 0.444 1.071l-1.291 1.807 1.414 1.414 1.807-1.291c0.335 0.187 0.694 0.337 1.071 0.444l0.365 2.19h2l0.365-2.19c0.377-0.107 0.736-0.256 1.071-0.444l1.807 1.291 1.414-1.414-1.291-1.807c0.187-0.335 0.337-0.694 0.444-1.071l2.19-0.365v-2l-2.19-0.365c-0.107-0.377-0.256-0.736-0.444-1.071zM7 27c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM32 12v-2l-2.106-0.383c-0.039-0.251-0.088-0.499-0.148-0.743l1.799-1.159-0.765-1.848-2.092 0.452c-0.132-0.216-0.273-0.426-0.422-0.629l1.219-1.761-1.414-1.414-1.761 1.219c-0.203-0.149-0.413-0.29-0.629-0.422l0.452-2.092-1.848-0.765-1.159 1.799c-0.244-0.059-0.492-0.109-0.743-0.148l-0.383-2.106h-2l-0.383 2.106c-0.251 0.039-0.499 0.088-0.743 0.148l-1.159-1.799-1.848 0.765 0.452 2.092c-0.216 0.132-0.426 0.273-0.629 0.422l-1.761-1.219-1.414 1.414 1.219 1.761c-0.149 0.203-0.29 0.413-0.422 0.629l-2.092-0.452-0.765 1.848 1.799 1.159c-0.059 0.244-0.109 0.492-0.148 0.743l-2.106 0.383v2l2.106 0.383c0.039 0.251 0.088 0.499 0.148 0.743l-1.799 1.159 0.765 1.848 2.092-0.452c0.132 0.216 0.273 0.426 0.422 0.629l-1.219 1.761 1.414 1.414 1.761-1.219c0.203 0.149 0.413 0.29 0.629 0.422l-0.452 2.092 1.848 0.765 1.159-1.799c0.244 0.059 0.492 0.109 0.743 0.148l0.383 2.106h2l0.383-2.106c0.251-0.039 0.499-0.088 0.743-0.148l1.159 1.799 1.848-0.765-0.452-2.092c0.216-0.132 0.426-0.273 0.629-0.422l1.761 1.219 1.414-1.414-1.219-1.761c0.149-0.203 0.29-0.413 0.422-0.629l2.092 0.452 0.765-1.848-1.799-1.159c0.059-0.244 0.109-0.492 0.148-0.743l2.106-0.383zM21 15.35c-2.402 0-4.35-1.948-4.35-4.35s1.948-4.35 4.35-4.35 4.35 1.948 4.35 4.35c0 2.402-1.948 4.35-4.35 4.35z",stats:"M4 28h28v4h-32v-32h4zM9 26c-1.657 0-3-1.343-3-3s1.343-3 3-3c0.088 0 0.176 0.005 0.262 0.012l3.225-5.375c-0.307-0.471-0.487-1.033-0.487-1.638 0-1.657 1.343-3 3-3s3 1.343 3 3c0 0.604-0.179 1.167-0.487 1.638l3.225 5.375c0.086-0.007 0.174-0.012 0.262-0.012 0.067 0 0.133 0.003 0.198 0.007l5.324-9.316c-0.329-0.482-0.522-1.064-0.522-1.691 0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3-0.067 0-0.133-0.003-0.198-0.007l-5.324 9.316c0.329 0.481 0.522 1.064 0.522 1.691 0 1.657-1.343 3-3 3s-3-1.343-3-3c0-0.604 0.179-1.167 0.487-1.638l-3.225-5.375c-0.086 0.007-0.174 0.012-0.262 0.012s-0.176-0.005-0.262-0.012l-3.225 5.375c0.307 0.471 0.487 1.033 0.487 1.637 0 1.657-1.343 3-3 3z",bars:"M0 26h32v4h-32zM4 18h4v6h-4zM10 10h4v14h-4zM16 16h4v8h-4zM22 4h4v20h-4z",bars2:"M9 12h-6c-0.55 0-1 0.45-1 1v18c0 0.55 0.45 1 1 1h6c0.55 0 1-0.45 1-1v-18c0-0.55-0.45-1-1-1zM9 30h-6v-8h6v8zM19 8h-6c-0.55 0-1 0.45-1 1v22c0 0.55 0.45 1 1 1h6c0.55 0 1-0.45 1-1v-22c0-0.55-0.45-1-1-1zM19 30h-6v-10h6v10zM29 4h-6c-0.55 0-1 0.45-1 1v26c0 0.55 0.45 1 1 1h6c0.55 0 1-0.45 1-1v-26c0-0.55-0.45-1-1-1zM29 30h-6v-12h6v12z",lab:"M29.884 25.14l-9.884-16.47v-6.671h1c0.55 0 1-0.45 1-1s-0.45-1-1-1h-10c-0.55 0-1 0.45-1 1s0.45 1 1 1h1v6.671l-9.884 16.47c-2.264 3.773-0.516 6.86 3.884 6.86h20c4.4 0 6.148-3.087 3.884-6.86zM7.532 20l6.468-10.779v-7.221h4v7.221l6.468 10.779h-16.935z",remove:"M6 32h20l2-22h-24zM20 4v-4h-8v4h-10v6l2-2h24l2 2v-6h-10zM18 4h-4v-2h4v2z","switch":"M20 4.581v4.249c1.131 0.494 2.172 1.2 3.071 2.099 1.889 1.889 2.929 4.4 2.929 7.071s-1.040 5.182-2.929 7.071c-1.889 1.889-4.4 2.929-7.071 2.929s-5.182-1.040-7.071-2.929c-1.889-1.889-2.929-4.4-2.929-7.071s1.040-5.182 2.929-7.071c0.899-0.899 1.94-1.606 3.071-2.099v-4.249c-5.783 1.721-10 7.077-10 13.419 0 7.732 6.268 14 14 14s14-6.268 14-14c0-6.342-4.217-11.698-10-13.419zM14 0h4v16h-4z",tree:"M30.5 24h-0.5v-6.5c0-1.93-1.57-3.5-3.5-3.5h-8.5v-4h0.5c0.825 0 1.5-0.675 1.5-1.5v-5c0-0.825-0.675-1.5-1.5-1.5h-5c-0.825 0-1.5 0.675-1.5 1.5v5c0 0.825 0.675 1.5 1.5 1.5h0.5v4h-8.5c-1.93 0-3.5 1.57-3.5 3.5v6.5h-0.5c-0.825 0-1.5 0.675-1.5 1.5v5c0 0.825 0.675 1.5 1.5 1.5h5c0.825 0 1.5-0.675 1.5-1.5v-5c0-0.825-0.675-1.5-1.5-1.5h-0.5v-6h8v6h-0.5c-0.825 0-1.5 0.675-1.5 1.5v5c0 0.825 0.675 1.5 1.5 1.5h5c0.825 0 1.5-0.675 1.5-1.5v-5c0-0.825-0.675-1.5-1.5-1.5h-0.5v-6h8v6h-0.5c-0.825 0-1.5 0.675-1.5 1.5v5c0 0.825 0.675 1.5 1.5 1.5h5c0.825 0 1.5-0.675 1.5-1.5v-5c0-0.825-0.675-1.5-1.5-1.5zM6 30h-4v-4h4v4zM18 30h-4v-4h4v4zM14 8v-4h4v4h-4zM30 30h-4v-4h4v4z",cloud:"M32 20.548c0-2.565-1.771-4.716-4.156-5.296-0.101-4.022-3.389-7.252-7.433-7.252-2.369 0-4.477 1.109-5.839 2.835-0.764-0.987-1.959-1.624-3.303-1.624-2.307 0-4.176 1.871-4.176 4.179 0 0.201 0.015 0.399 0.043 0.592-0.351-0.063-0.711-0.098-1.080-0.098-3.344-0-6.054 2.712-6.054 6.058s2.71 6.058 6.054 6.058l20.508-0c3.004-0.006 5.438-2.444 5.438-5.451z",download:"M23 14l-8 8-8-8h5v-12h6v12zM15 22h-15v8h30v-8h-15zM28 26h-4v-2h4v2z",
earth:"M27.314 4.686c3.022 3.022 4.686 7.040 4.686 11.314s-1.664 8.292-4.686 11.314c-3.022 3.022-7.040 4.686-11.314 4.686s-8.292-1.664-11.314-4.686c-3.022-3.022-4.686-7.040-4.686-11.314s1.664-8.292 4.686-11.314c3.022-3.022 7.040-4.686 11.314-4.686s8.292 1.664 11.314 4.686zM25.899 25.9c1.971-1.971 3.281-4.425 3.821-7.096-0.421 0.62-0.824 0.85-1.073-0.538-0.257-2.262-2.335-0.817-3.641-1.621-1.375 0.927-4.466-1.802-3.941 1.276 0.81 1.388 4.375-1.858 2.598 1.079-1.134 2.050-4.145 6.592-3.753 8.946 0.049 3.43-3.504 0.715-4.729-0.422-0.824-2.279-0.281-6.262-2.434-7.378-2.338-0.102-4.344-0.314-5.25-2.927-0.545-1.87 0.58-4.653 2.584-5.083 2.933-1.843 3.98 2.158 6.731 2.232 0.854-0.894 3.182-1.178 3.375-2.18-1.805-0.318 2.29-1.517-0.173-2.199-1.358 0.16-2.234 1.409-1.512 2.467-2.632 0.614-2.717-3.809-5.247-2.414-0.064 2.206-4.132 0.715-1.407 0.268 0.936-0.409-1.527-1.594-0.196-1.379 0.654-0.036 2.854-0.807 2.259-1.325 1.225-0.761 2.255 1.822 3.454-0.059 0.866-1.446-0.363-1.713-1.448-0.98-0.612-0.685 1.080-2.165 2.573-2.804 0.497-0.213 0.973-0.329 1.336-0.296 0.752 0.868 2.142 1.019 2.215-0.104-1.862-0.892-3.915-1.363-6.040-1.363-3.051 0-5.952 0.969-8.353 2.762 0.645 0.296 1.012 0.664 0.39 1.134-0.483 1.439-2.443 3.371-4.163 3.098-0.893 1.54-1.482 3.238-1.733 5.017 1.441 0.477 1.773 1.42 1.464 1.736-0.734 0.64-1.185 1.548-1.418 2.541 0.469 2.87 1.818 5.515 3.915 7.612 2.644 2.644 6.16 4.1 9.899 4.1s7.255-1.456 9.899-4.1z",heart:"M32 11.192c0 2.699-1.163 5.126-3.015 6.808h0.015l-10 10c-1 1-2 2-3 2s-2-1-3-2l-9.985-10c-1.852-1.682-3.015-4.109-3.015-6.808 0-5.077 4.116-9.192 9.192-9.192 2.699 0 5.126 1.163 6.808 3.015 1.682-1.852 4.109-3.015 6.808-3.015 5.077 0 9.192 4.116 9.192 9.192z",smiley:"M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2s-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2s-2-0.895-2-2zM22.003 19.602l2.573 1.544c-1.749 2.908-4.935 4.855-8.576 4.855s-6.827-1.946-8.576-4.855l2.573-1.544c1.224 2.036 3.454 3.398 6.003 3.398s4.779-1.362 6.003-3.398z",close:"M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z",checkmark:"M27 4l-15 15-7-7-5 5 12 12 20-20z",play:"M6 4l20 12-20 12z",pause:"M4 4h10v24h-10zM18 4h10v24h-10z",stop:"M4 4h24v24h-24z",shuffle:"M32 8l-8-8v6c-4.087 0-7.211 0.975-9.552 2.982-0.164 0.141-0.321 0.284-0.474 0.43 0.86 1.193 1.522 2.422 2.118 3.597 1.51-1.825 3.689-3.008 7.907-3.008v12c-6.764 0-8.285-3.043-10.211-6.894-1.072-2.144-2.181-4.361-4.237-6.124-2.341-2.006-5.465-2.982-9.552-2.982v4c6.764 0 8.285 3.043 10.211 6.894 1.072 2.144 2.181 4.361 4.237 6.124 2.341 2.006 5.465 2.982 9.552 2.982v6l8-8-8-8 8-8zM0 22v4c4.087 0 7.211-0.975 9.552-2.982 0.164-0.141 0.321-0.284 0.474-0.43-0.86-1.193-1.522-2.422-2.118-3.597-1.51 1.825-3.689 3.009-7.907 3.009z","arrow-up-right":"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM12 8c-1.105 0-2 0.895-2 2s0.895 2 2 2h5.172l-8.586 8.586c-0.781 0.781-0.781 2.047 0 2.829 0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l8.586-8.586v5.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-12h-12z",googleplus:"M0.025 27.177c-0.008-0.079-0.014-0.158-0.018-0.238 0.004 0.080 0.011 0.159 0.018 0.238zM7.372 17.661c2.875 0.086 4.804-2.897 4.308-6.662s-3.231-6.787-6.106-6.873c-2.876-0.085-4.804 2.796-4.308 6.562 0.496 3.765 3.23 6.887 6.106 6.973zM32 8v-2.666c0-2.934-2.399-5.334-5.333-5.334h-21.333c-2.884 0-5.25 2.32-5.33 5.185 1.824-1.606 4.354-2.947 6.965-2.947 2.791 0 11.164 0 11.164 0l-2.498 2.113h-3.54c2.348 0.9 3.599 3.629 3.599 6.429 0 2.351-1.307 4.374-3.153 5.812-1.801 1.403-2.143 1.991-2.143 3.184 0 1.018 1.93 2.75 2.938 3.462 2.949 2.079 3.904 4.010 3.904 7.233 0 0.513-0.064 1.026-0.19 1.53h9.617c2.934 0 5.333-2.398 5.333-5.334v-16.666h-6v6h-2v-6h-6v-2h6v-6h2v6h6zM5.809 23.936c0.675 0 1.294-0.018 1.936-0.018-0.848-0.823-1.52-1.831-1.52-3.074 0-0.738 0.236-1.448 0.567-2.079-0.337 0.024-0.681 0.031-1.035 0.031-2.324 0-4.297-0.752-5.756-1.995v2.101l0 6.304c1.67-0.793 3.653-1.269 5.809-1.269zM0.107 27.727c-0.035-0.171-0.061-0.344-0.079-0.52 0.018 0.176 0.045 0.349 0.079 0.52zM14.233 29.776c-0.471-1.838-2.139-2.749-4.465-4.361-0.846-0.273-1.778-0.434-2.778-0.444-2.801-0.030-5.41 1.092-6.882 2.762 0.498 2.428 2.657 4.267 5.226 4.267h8.951c0.057-0.348 0.084-0.707 0.084-1.076 0-0.392-0.048-0.775-0.137-1.148z",facebook:"M17.996 32h-5.996v-16h-4v-5.514l4-0.002-0.007-3.248c0-4.498 1.22-7.236 6.519-7.236h4.412v5.515h-2.757c-2.064 0-2.163 0.771-2.163 2.209l-0.008 2.76h4.959l-0.584 5.514-4.37 0.002-0.004 16z",twitter:"M26.667 0h-21.333c-2.934 0-5.334 2.4-5.334 5.334v21.332c0 2.936 2.4 5.334 5.334 5.334h21.333c2.934 0 5.333-2.398 5.333-5.334v-21.332c0-2.934-2.399-5.334-5.333-5.334zM26.189 10.682c0.010 0.229 0.015 0.46 0.015 0.692 0 7.069-5.288 15.221-14.958 15.221-2.969 0-5.732-0.886-8.059-2.404 0.411 0.050 0.83 0.075 1.254 0.075 2.463 0 4.73-0.855 6.529-2.29-2.3-0.043-4.242-1.59-4.911-3.715 0.321 0.063 0.65 0.096 0.989 0.096 0.479 0 0.944-0.066 1.385-0.188-2.405-0.492-4.217-2.654-4.217-5.245 0-0.023 0-0.045 0-0.067 0.709 0.401 1.519 0.641 2.381 0.669-1.411-0.959-2.339-2.597-2.339-4.453 0-0.98 0.259-1.899 0.712-2.689 2.593 3.237 6.467 5.366 10.836 5.589-0.090-0.392-0.136-0.8-0.136-1.219 0-2.954 2.354-5.349 5.257-5.349 1.512 0 2.879 0.65 3.838 1.689 1.198-0.24 2.323-0.685 3.338-1.298-0.393 1.249-1.226 2.298-2.311 2.96 1.063-0.129 2.077-0.417 3.019-0.842-0.705 1.073-1.596 2.015-2.623 2.769z",github:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM25.502 25.502c-1.235 1.235-2.672 2.204-4.272 2.881-0.406 0.172-0.819 0.323-1.238 0.453v-2.398c0-1.26-0.432-2.188-1.297-2.781 0.542-0.052 1.039-0.125 1.492-0.219s0.932-0.229 1.438-0.406 0.958-0.388 1.359-0.633 0.786-0.563 1.156-0.953 0.68-0.833 0.93-1.328 0.448-1.089 0.594-1.781 0.219-1.456 0.219-2.289c0-1.615-0.526-2.99-1.578-4.125 0.479-1.25 0.427-2.609-0.156-4.078l-0.391-0.047c-0.271-0.031-0.758 0.083-1.461 0.344s-1.492 0.688-2.367 1.281c-1.24-0.344-2.526-0.516-3.859-0.516-1.344 0-2.625 0.172-3.844 0.516-0.552-0.375-1.075-0.685-1.57-0.93s-0.891-0.411-1.188-0.5-0.573-0.143-0.828-0.164-0.419-0.026-0.492-0.016-0.125 0.021-0.156 0.031c-0.583 1.479-0.635 2.839-0.156 4.078-1.052 1.135-1.578 2.51-1.578 4.125 0 0.833 0.073 1.596 0.219 2.289s0.344 1.286 0.594 1.781 0.56 0.938 0.93 1.328 0.755 0.708 1.156 0.953 0.854 0.456 1.359 0.633 0.984 0.313 1.438 0.406 0.95 0.167 1.492 0.219c-0.854 0.583-1.281 1.51-1.281 2.781v2.445c-0.472-0.14-0.937-0.306-1.394-0.5-1.6-0.677-3.037-1.646-4.272-2.881s-2.204-2.672-2.881-4.272c-0.7-1.655-1.055-3.414-1.055-5.23s0.355-3.575 1.055-5.23c0.677-1.6 1.646-3.037 2.881-4.272s2.672-2.204 4.272-2.881c1.655-0.7 3.415-1.055 5.23-1.055s3.575 0.355 5.23 1.055c1.6 0.677 3.037 1.646 4.272 2.881s2.204 2.672 2.881 4.272c0.7 1.655 1.055 3.415 1.055 5.23s-0.355 3.575-1.055 5.23c-0.677 1.6-1.646 3.037-2.881 4.272z",tumblr:"M26.668 0h-21.334c-2.934 0-5.334 2.4-5.334 5.334v21.332c0 2.936 2.4 5.334 5.334 5.334h21.334c2.933 0 5.332-2.398 5.332-5.334v-21.332c-0-2.933-2.399-5.334-5.332-5.334zM22.866 25.771c-0.942 0.443-1.798 0.756-2.563 0.936-0.765 0.178-1.593 0.267-2.481 0.267-1.010 0-1.605-0.127-2.381-0.381-0.775-0.256-1.438-0.621-1.984-1.090-0.549-0.473-0.928-0.975-1.14-1.506s-0.317-1.303-0.317-2.313v-7.744h-3v-3.127c0.867-0.281 1.873-0.685 2.49-1.211 0.62-0.527 1.116-1.158 1.49-1.896 0.375-0.736 0.633-1.676 0.774-2.815h3.141v5.108h5.105v3.941h-5.106v5.662c0 1.281-0.017 2.020 0.119 2.383 0.135 0.361 0.473 0.736 0.841 0.953 0.489 0.293 1.047 0.439 1.676 0.439 1.118 0 2.231-0.363 3.336-1.090v3.482z",apple:"M24.734 17.003c-0.040-4.053 3.305-5.996 3.454-6.093-1.88-2.751-4.808-3.127-5.851-3.171-2.492-0.252-4.862 1.467-6.127 1.467-1.261 0-3.213-1.43-5.28-1.392-2.716 0.040-5.221 1.579-6.619 4.012-2.822 4.897-0.723 12.151 2.028 16.123 1.344 1.944 2.947 4.127 5.051 4.049 2.026-0.081 2.793-1.311 5.242-1.311s3.138 1.311 5.283 1.271c2.18-0.041 3.562-1.981 4.897-3.931 1.543-2.255 2.179-4.439 2.216-4.551-0.048-0.022-4.252-1.632-4.294-6.473zM20.705 5.11c1.117-1.355 1.871-3.235 1.665-5.11-1.609 0.066-3.559 1.072-4.713 2.423-1.036 1.199-1.942 3.113-1.699 4.951 1.796 0.14 3.629-0.913 4.747-2.264z",android:"M27 10c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM3 10c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM6 23c0 1.657 1.343 3 3 3h1v4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4h2v4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4h1c1.657 0 3-1.343 3-3v-11h-18v11zM18.706 2.797l1.266-2.431c0.064-0.122 0.016-0.274-0.106-0.337s-0.274-0.016-0.337 0.106l-1.285 2.468c-1.006-0.389-2.1-0.603-3.244-0.603s-2.237 0.214-3.244 0.603l-1.285-2.468c-0.063-0.122-0.215-0.17-0.337-0.106s-0.17 0.215-0.106 0.337l1.266 2.432c-2.832 1.282-4.883 3.987-5.238 7.203h17.889c-0.355-3.216-2.406-5.921-5.238-7.203zM11 8.45c-0.801 0-1.45-0.649-1.45-1.45s0.649-1.45 1.45-1.45 1.45 0.649 1.45 1.45c-0 0.801-0.649 1.45-1.45 1.45zM19 8.45c-0.801 0-1.45-0.649-1.45-1.45s0.649-1.45 1.45-1.45 1.45 0.649 1.45 1.45c0 0.801-0.649 1.45-1.45 1.45z",windows8:"M0.011 16l-0.011-9.752 12-1.63v11.382zM14 4.328l15.996-2.328v14h-15.996zM30 18l-0.004 14-15.996-2.25v-11.75zM12 29.495l-11.99-1.644-0.001-9.851h11.991z",html5:"M1.892 0l2.567 28.801 11.524 3.199 11.554-3.204 2.572-28.796h-28.216zM24.52 9.42h-13.517l0.322 3.617h12.874l-0.97 10.844-7.245 2.008-7.237-2.008-0.495-5.547h3.547l0.252 2.82 3.933 1.060 0.009-0.002 3.935-1.062 0.408-4.58h-12.242l-0.953-10.681h17.694l-0.316 3.532z",chrome:"M8.071 13.954l-4.579-7.931c2.932-3.671 7.445-6.023 12.508-6.023 5.857 0 10.978 3.148 13.767 7.844h-13.055c-0.235-0.020-0.472-0.031-0.711-0.031-3.809 0-7.018 2.614-7.929 6.142zM21.728 10.156h9.171c0.711 1.81 1.101 3.781 1.101 5.844 0 8.776-7.066 15.9-15.818 15.998l6.544-11.334c0.921-1.324 1.462-2.932 1.462-4.664 0-2.287-0.943-4.357-2.459-5.844zM10.188 16c0-3.205 2.607-5.813 5.813-5.813s5.813 2.607 5.813 5.813c0 3.205-2.608 5.813-5.813 5.813s-5.813-2.608-5.813-5.813zM18.193 23.889l-4.581 7.934c-7.704-1.153-13.613-7.797-13.613-15.822 0-2.851 0.746-5.526 2.053-7.845l6.532 11.314c1.308 2.785 4.14 4.718 7.415 4.718 0.759 0 1.495-0.104 2.193-0.299z",firefox:"M31.954 10.442l-0.371 2.377c0 0-0.53-4.402-1.179-6.047-0.995-2.521-1.438-2.501-1.441-2.498 0.667 1.694 0.546 2.604 0.546 2.604s-1.181-3.219-4.303-4.243c-3.459-1.134-5.33-0.824-5.547-0.765-0.033-0-0.064-0-0.095-0 0.026 0.002 0.050 0.005 0.076 0.007-0.001 0.001-0.003 0.001-0.003 0.002 0.014 0.017 3.822 0.666 4.497 1.594 0 0-1.617 0-3.227 0.464-0.073 0.021 5.923 0.749 7.148 6.74 0 0-0.657-1.371-1.47-1.604 0.535 1.626 0.397 4.712-0.112 6.245-0.066 0.197-0.133-0.853-1.135-1.305 0.321 2.301-0.019 5.952-1.616 6.957-0.124 0.078 1.001-3.603 0.226-2.18-4.46 6.838-9.731 3.155-12.101 1.535 1.215 0.264 3.52-0.041 4.541-0.8 0.001-0.001 0.002-0.002 0.004-0.003 1.108-0.758 1.765-1.311 2.354-1.18s0.982-0.46 0.524-0.985c-0.459-0.526-1.572-1.249-3.079-0.855-1.063 0.278-2.379 1.454-4.389 0.264-1.543-0.914-1.688-1.673-1.702-2.199 0.038-0.186 0.086-0.361 0.143-0.52 0.178-0.496 0.716-0.646 1.015-0.764 0.508 0.087 0.946 0.246 1.405 0.481 0.006-0.153 0.008-0.356-0.001-0.586 0.044-0.088 0.017-0.352-0.054-0.674-0.041-0.322-0.107-0.655-0.211-0.959 0-0 0.001-0 0.001-0 0.002-0.001 0.003-0.001 0.005-0.002s0.005-0.004 0.007-0.006c0-0.001 0.001-0.001 0.001-0.002 0.003-0.004 0.005-0.008 0.006-0.015 0.032-0.144 0.376-0.423 0.804-0.722 0.383-0.268 0.834-0.553 1.19-0.774 0.314-0.195 0.554-0.34 0.605-0.378 0.019-0.015 0.042-0.032 0.068-0.051 0.005-0.004 0.009-0.007 0.014-0.011 0.003-0.002 0.006-0.005 0.009-0.007 0.169-0.135 0.421-0.389 0.474-0.924 0-0.001 0-0.002 0-0.004 0.002-0.016 0.003-0.032 0.004-0.048 0.001-0.011 0.002-0.023 0.002-0.034 0-0.009 0.001-0.018 0.001-0.027 0.001-0.021 0.002-0.043 0.002-0.065 0-0.001 0-0.002 0-0.004 0.001-0.052-0-0.106-0.003-0.163-0.002-0.032-0.004-0.060-0.009-0.086-0-0.001-0.001-0.003-0.001-0.004-0.001-0.003-0.001-0.005-0.002-0.008-0.001-0.005-0.002-0.009-0.004-0.013-0-0.001-0-0.001-0.001-0.001-0.002-0.005-0.004-0.010-0.005-0.014-0-0-0-0-0-0.001-0.055-0.128-0.26-0.177-1.108-0.191-0.001-0-0.002-0-0.002-0v0c-0.346-0.006-0.798-0.006-1.391-0.004-1.039 0.004-1.613-1.016-1.797-1.41 0.251-1.389 0.977-2.379 2.17-3.051 0.023-0.013 0.018-0.023-0.009-0.031 0.233-0.141-2.82-0.004-4.225 1.782-1.247-0.31-2.333-0.289-3.269-0.069-0.18-0.005-0.404-0.027-0.67-0.083-0.623-0.564-1.514-1.606-1.562-2.85 0 0-0.003 0.002-0.008 0.006-0.001-0.012-0.002-0.024-0.002-0.036 0 0-1.897 1.458-1.613 5.434-0.001 0.064-0.002 0.125-0.004 0.184-0.514 0.696-0.768 1.282-0.787 1.411-0.455 0.926-0.917 2.32-1.292 4.437 0 0 0.263-0.833 0.79-1.777-0.388 1.188-0.693 3.036-0.514 5.808 0 0 0.047-0.615 0.215-1.5 0.131 1.719 0.704 3.841 2.152 6.337 2.78 4.791 7.052 7.211 11.775 7.582 0.839 0.069 1.689 0.071 2.544 0.006 0.079-0.006 0.157-0.011 0.236-0.018 0.968-0.068 1.942-0.214 2.914-0.449 13.287-3.212 11.842-19.256 11.842-19.256z",IE:"M22.944 19.651h7.377c0.057-0.512 0.080-1.034 0.080-1.569 0-2.507-0.673-4.858-1.848-6.883 1.215-3.228 1.172-5.968-0.455-7.606-1.547-1.54-5.697-1.29-10.388 0.787-0.347-0.026-0.697-0.040-1.051-0.040-6.439 0-11.841 4.431-13.335 10.402 2.020-2.586 4.145-4.461 6.984-5.826-0.258 0.242-1.764 1.739-2.018 1.993-7.486 7.484-9.847 17.26-7.306 19.8 1.931 1.93 5.43 1.604 9.449-0.364 1.869 0.952 3.984 1.488 6.226 1.488 6.035 0 11.15-3.885 13.003-9.295h-7.433c-1.023 1.887-3.023 3.171-5.319 3.171s-4.296-1.284-5.319-3.171c-0.455-0.852-0.716-1.83-0.716-2.864v-0.023h12.071zM10.884 16.025c0.171-3.035 2.694-5.456 5.774-5.456s5.604 2.421 5.774 5.456h-11.548zM28.030 5.119c1.048 1.059 1.021 3.007 0.125 5.438-1.535-2.341-3.766-4.186-6.4-5.239 2.816-1.207 5.106-1.367 6.274-0.199zM2.921 30.227c-1.337-1.337-0.934-4.144 0.788-7.526 1.072 3.008 3.161 5.534 5.854 7.161-2.982 1.354-5.423 1.584-6.643 0.365z",opera:"M15.939 0c-8.741 0-15.023 6.34-15.023 15.851 0 8.463 6.109 16.149 15.024 16.149 9.002 0 15.144-7.684 15.144-16.149 0-9.586-6.483-15.851-15.146-15.851zM21.511 15.579c-0.002 5.292-0.284 12.828-5.571 12.828v0.001c-5.212 0-5.42-7.54-5.42-12.822 0-6.199 0.58-12.143 5.42-12.143s5.571 6.018 5.571 12.136z",safari:"M16 2c-0.752 0-1.491 0.056-2.213 0.163-0.009-0.024-0.020-0.048-0.031-0.072 0.401-0.313 0.611-0.745 0.52-1.173-0.117-0.549-0.7-0.918-1.451-0.918-0.162 0-0.327 0.018-0.49 0.052-0.943 0.2-1.567 0.894-1.421 1.58 0.089 0.417 0.447 0.729 0.943 0.856-0.001 0.030-0.001 0.061 0.001 0.092-6.269 1.798-10.857 7.573-10.857 14.42 0 8.284 6.716 15 15 15s15-6.716 15-15c0-8.284-6.716-15-15-15zM11.403 1.528c-0.085-0.398 0.39-0.85 1.036-0.987 0.129-0.027 0.259-0.041 0.386-0.041 0.501 0 0.897 0.215 0.962 0.522 0.050 0.235-0.096 0.488-0.356 0.684-0.22-0.155-0.501-0.223-0.784-0.162-0.283 0.060-0.511 0.235-0.649 0.464-0.318-0.077-0.547-0.253-0.595-0.48zM24.043 25.043c-1.374 1.374-3.038 2.352-4.853 2.88l-1.325-2.149-0.336 2.499c-0.503 0.067-1.013 0.102-1.529 0.102-3.038 0-5.895-1.183-8.043-3.332-1.374-1.374-2.352-3.038-2.88-4.853l2.149-1.325-2.499-0.336c-0.067-0.503-0.102-1.013-0.102-1.529 0-3.038 1.183-5.895 3.332-8.043 1.374-1.374 3.038-2.352 4.853-2.88l1.325 2.149 0.336-2.499c0.503-0.067 1.013-0.102 1.529-0.102 3.038 0 5.895 1.183 8.043 3.332 1.374 1.374 2.352 3.038 2.88 4.853l-2.149 1.325 2.499 0.336c0.067 0.503 0.102 1.013 0.102 1.529 0 3.038-1.183 5.895-3.332 8.043zM23.778 9.222l-6.156 4.678c-0.458-0.239-0.965-0.377-1.482-0.398l-1.596-3.349-0.096 3.708c-0.415 0.204-0.784 0.489-1.090 0.842l-1.972-0.699 1.44 1.517c-0.198 0.422-0.308 0.876-0.326 1.338l-3.349 1.596 3.711 0.096c0.012 0.024 0.024 0.048 0.037 0.071l-4.678 6.156 6.156-4.678c0.458 0.239 0.965 0.377 1.482 0.398l1.596 3.349 0.096-3.708c0.415-0.204 0.785-0.489 1.090-0.842l1.972 0.699-1.44-1.517c0.198-0.422 0.308-0.876 0.326-1.338l3.349-1.596-3.71-0.096c-0.012-0.024-0.024-0.048-0.037-0.071l4.678-6.156zM16.003 13.892v0zM15.376 14.066c0.21-0.045 0.42-0.066 0.627-0.066 0.13 0 0.258 0.008 0.384 0.025l0.003 0.001-0-0.001c0.273 0.036 0.537 0.109 0.785 0.216l-2.236 1.699-1.699 2.236c-0.074-0.175-0.133-0.359-0.174-0.552-0.345-1.621 0.69-3.214 2.311-3.558zM17.566 19.559v0 0c-0.283 0.173-0.599 0.303-0.942 0.376-0.21 0.045-0.42 0.066-0.627 0.066-0.13 0-0.258-0.009-0.385-0.025l-0.002-0c-0.273-0.036-0.537-0.109-0.785-0.215l2.236-1.699 1.699-2.236c0.074 0.175 0.133 0.359 0.174 0.552 0.272 1.278-0.314 2.538-1.368 3.183z"};go.Diagram.inherit(ContinuousForceDirectedLayout,go.ForceDirectedLayout),ContinuousForceDirectedLayout.prototype.isFixed=function(t){return t.node.isSelected},ContinuousForceDirectedLayout.prototype.doLayout=function(t){if(!this._isObserving){this._isObserving=!0;var e=this;this.diagram.addModelChangedListener(function(t){(""!==t.modelChange||t.change===go.ChangedEvent.Transaction&&"StartingFirstTransaction"===t.propertyName)&&(e.network=null)})}var i=this.network;null===i?this.network=i=this.makeNetwork(t):this.diagram.nodes.each(function(t){var e=i.findVertex(t);null!==e&&(e.bounds=t.actualBounds)}),go.ForceDirectedLayout.prototype.doLayout.call(this,t),this.network=i},go.Diagram.inherit(FishboneLayout,go.TreeLayout),FishboneLayout.prototype.makeNetwork=function(t){var e=go.TreeLayout.prototype.makeNetwork.call(this,t);return new go.List(go.TreeVertex).addAll(e.vertexes).each(function(t){if(0!==t.destinationEdges.count){if(t.destinationEdges.count%2==1){var i=new go.TreeVertex;i.bounds=new go.Rect,i.focus=new go.Point,e.addVertex(i),e.linkVertexes(t,i,null)}var n=new go.TreeVertex;n.bounds=t.bounds,n.focus=t.focus,e.addVertex(n),e.linkVertexes(t,n,null)}}),e},FishboneLayout.prototype.assignTreeVertexValues=function(t){go.TreeLayout.prototype.assignTreeVertexValues.call(this,t),t._direction=0,null!==t.parent&&(0===t.angle||180===t.angle?t.layerSpacing-=t.bounds.width:t.layerSpacing-=t.bounds.height)},FishboneLayout.prototype.commitNodes=function(){this.network.edges.each(function(t){var e=t.link;if(null!==e){e.fromSpot=go.Spot.None,e.toSpot=go.Spot.None;var i=t.fromVertex,n=t.toVertex;0===i.angle?e.fromSpot=go.Spot.MiddleLeft:180===i.angle&&(e.fromSpot=go.Spot.MiddleRight),0===n.angle?e.toSpot=go.Spot.MiddleLeft:180===n.angle&&(e.toSpot=go.Spot.MiddleRight)}}),this.network.vertexes.each(function(t){var e=t.children.length;if(0!==e&&null!==t.parent){var i=t.children[e-1];t.centerX=i.centerX,t.centerY=i.centerY}});var t=this;this.network.vertexes.each(function(e){null===e.parent&&t.shift(e)}),go.TreeLayout.prototype.commitNodes.call(this)},FishboneLayout.prototype.commitLinks=function(){},FishboneLayout.prototype.shift=function(t){var e=t.parent;if(null!==e&&(90===t.angle||270===t.angle)){var i=e.parent;if(null!==i){var n=t.nodeSpacing;i._direction>0?90===i.angle?0===e.angle?(t._direction=1,270===t.angle&&this.shiftAll(2,-n,e,t)):180===e.angle&&(t._direction=-1,90===t.angle&&this.shiftAll(-2,n,e,t)):270===i.angle&&(0===e.angle?(t._direction=1,90===t.angle&&this.shiftAll(2,-n,e,t)):180===e.angle&&(t._direction=-1,270===t.angle&&this.shiftAll(-2,n,e,t))):i._direction<0&&(90===i.angle?0===e.angle?(t._direction=1,90===t.angle&&this.shiftAll(2,-n,e,t)):180===e.angle&&(t._direction=-1,270===t.angle&&this.shiftAll(-2,n,e,t)):270===i.angle&&(0===e.angle?(t._direction=1,270===t.angle&&this.shiftAll(2,-n,e,t)):180===e.angle&&(t._direction=-1,90===t.angle&&this.shiftAll(-2,n,e,t))))}else{var o=0===e.angle?1:-1;t._direction=o,this.shiftAll(o,0,e,t)}}for(var r=0;r<t.children.length;r++){var a=t.children[r];this.shift(a)}},FishboneLayout.prototype.shiftAll=function(t,e,i,n){var o=n.centerX;o+=t*Math.abs(i.centerY-n.centerY)/2,o+=e,n.centerX=o;for(var r=0;r<n.children.length;r++){var a=n.children[r];this.shiftAll(t,e,i,a)}},go.Diagram.inherit(FishboneLink,go.Link),FishboneLink.prototype.computePoints=function(){var t=go.Link.prototype.computePoints.call(this);if(t)if(this.fromSpot.equals(go.Spot.MiddleRight)||this.fromSpot.equals(go.Spot.MiddleLeft)){var e,i=this.fromNode;if(0===i.findLinksInto().count){var n=this.fromPort,o=n.getDocumentPoint(go.Spot.Center),r=o.copy();r.x+=this.fromSpot.equals(go.Spot.MiddleLeft)?99999:-99999,e=this.getLinkPointFromPoint(i,n,o,r,!0).copy(),this.setPoint(0,e);var a=this.fromEndSegmentLength;isNaN(a)&&(a=n.fromEndSegmentLength),e.x+=this.fromSpot.equals(go.Spot.MiddleLeft)?a:-a,this.setPoint(1,e)}else e=this.getPoint(1);var s=this.toNode,l=this.toPort,h=l.getDocumentPoint(go.Spot.Center),u=h.copy();u.x+=this.fromSpot.equals(go.Spot.MiddleLeft)?-49999.5:49999.5,u.y+=h.y<e.y?99999:-99999;var c=this.getLinkPointFromPoint(s,l,h,u,!1);this.setPoint(2,c);var f=Math.abs(c.y-e.y)/2;this.fromSpot.equals(go.Spot.MiddleLeft)&&(f=-f),this.insertPoint(2,new go.Point(c.x+f,e.y))}else if(this.toSpot.equals(go.Spot.MiddleRight)||this.toSpot.equals(go.Spot.MiddleLeft)){var e=this.getPoint(1),i=this.fromNode,n=this.fromPort,d=i.findLinksInto().first(),o=n.getDocumentPoint(go.Spot.Center),u=o.copy();u.x+=null!==d&&d.fromSpot.equals(go.Spot.MiddleLeft)?-49999.5:49999.5,u.y+=o.y<e.y?99999:-99999;var p=this.getLinkPointFromPoint(i,n,o,u,!0);this.setPoint(0,p);var f=Math.abs(e.y-p.y)/2;null!==d&&d.fromSpot.equals(go.Spot.MiddleLeft)&&(f=-f),this.insertPoint(1,new go.Point(p.x+f,e.y))}return t},go.Diagram.inherit(GenogramLayout,go.LayeredDigraphLayout),GenogramLayout.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof go.Diagram?(this.add(e,t.nodes,!0),this.add(e,t.links,!0)):t instanceof go.Group?this.add(e,t.memberParts,!1):t.iterator&&this.add(e,t.iterator,!1),e},GenogramLayout.prototype.add=function(t,e,i){for(var n=new go.Set,o=e.iterator;o.next();){var r=o.value;if(r instanceof go.Node&&(r.isLayoutPositioned&&r.isVisible()&&(!i||null===r.containingGroup)))if(r.isLinkLabel){var a=r.labeledLink,s=a.fromNode,l=a.toNode,h=t.addNode(r);h.width=s.actualBounds.width+this.spouseSpacing+l.actualBounds.width,h.height=Math.max(s.actualBounds.height,l.actualBounds.height),h.focus=new go.Point(s.actualBounds.width+this.spouseSpacing/2,h.height/2)}else{var u=0;if(r.linksConnected.each(function(t){t.isLabeledLink&&u++}),0===u)var h=t.addNode(r);else u>1&&n.add(r)}}for(o.reset();o.next();){var a=o.value;if(a instanceof go.Link&&(a.isLayoutPositioned&&a.isVisible()&&!(i&&null!==a.containingGroup||a.isLabeledLink))){var c=t.findVertex(a.fromNode),f=t.findVertex(a.toNode);null!==f?t.linkVertexes(c,f,a):a.toNode.linksConnected.each(function(e){if(e.isLabeledLink){var i=e.labelNodes.first(),n=t.findVertex(i);null!==n&&t.linkVertexes(c,n,a)}})}}for(;n.count>0;){var r=n.first(),d=new go.Set;this.extendCohort(d,r);var p=t.createVertex();t.addVertex(p);var u=new go.Set;d.each(function(t){t.linksConnected.each(function(t){u.add(t)})}),u.each(function(e){var i=e.labelNodes.first(),n=t.findVertex(i);null!==n&&t.linkVertexes(p,n,null)}),n.removeAll(d)}},GenogramLayout.prototype.extendCohort=function(t,e){if(!t.contains(e)){t.add(e);var i=this;e.linksConnected.each(function(e){e.isLabeledLink&&(i.extendCohort(t,e.fromNode),i.extendCohort(t,e.toNode))})}},GenogramLayout.prototype.assignLayers=function(){go.LayeredDigraphLayout.prototype.assignLayers.call(this);var t=0==this.direction||180==this.direction,e=[];this.network.vertexes.each(function(i){var n=i.layer,o=e[n];o===undefined&&(o=0);var r=t?i.width:i.height;r>o&&(e[n]=r)}),this.network.vertexes.each(function(i){var n=i.layer,o=e[n];t?(i.focus=new go.Point(0,i.height/2),i.width=o):(i.focus=new go.Point(i.width/2,0),i.height=o)})},GenogramLayout.prototype.commitNodes=function(){go.LayeredDigraphLayout.prototype.commitNodes.call(this),this.network.vertexes.each(function(t){null===t.node||t.node.isLinkLabel||(t.node.position=new go.Point(t.x,t.y))});var t=this;this.network.vertexes.each(function(e){if(null!==e.node&&e.node.isLinkLabel){var i=e.node,n=i.labeledLink;n.invalidateRoute();var o=n.fromNode,r=n.toNode;if("F"===o.data.s){var a=o;o=r,r=a}var s=t.findParentsMarriageLabelNode(o),l=t.findParentsMarriageLabelNode(r);if(null!==s&&null!==l&&s.position.x>l.position.x){var a=o;o=r,r=a}if(o.position=new go.Point(e.x,e.y),r.position=new go.Point(e.x+o.actualBounds.width+t.spouseSpacing,e.y),0===o.opacity){var h=new go.Point(e.centerX-o.actualBounds.width/2,e.y);o.position=h,r.position=h}else if(0===r.opacity){var h=new go.Point(e.centerX-r.actualBounds.width/2,e.y);o.position=h,r.position=h}}}),this.network.vertexes.each(function(e){if(!(null===e.node||e.node.linksConnected.count>1)){var i=t.findParentsMarriageLabelNode(e.node);if(null!==i&&1===i.linksConnected.count){var n=t.network.findVertex(i),o=e.node.actualBounds.copy();o.x=n.centerX-e.node.actualBounds.width/2;0===t.diagram.findObjectsIn(o,function(t){return t.part},function(t){return t!==e.node},!0).count&&e.node.move(o.position)}}})},GenogramLayout.prototype.findParentsMarriageLabelNode=function(t){for(var e=t.findNodesInto();e.next();){var i=e.value;if(i.isLinkLabel)return i}return null},go.Diagram.inherit(SankeyLayout,go.LayeredDigraphLayout),SankeyLayout.prototype.createNetwork=function(){return this.diagram.nodes.each(function(t){var e=getAutoHeightForNode(t),i="bold "+Math.max(12,Math.round(e/8))+"pt Segoe UI, sans-serif",n=t.findObject("SHAPE"),o=t.findObject("TEXT"),r=t.findObject("LTEXT");n&&(n.height=e),o&&(o.font=i),r&&(r.font=i)}),go.LayeredDigraphLayout.prototype.createNetwork.call(this)},SankeyLayout.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node){if(t.edgesCount>=1){for(var i=1,n=t.edges;n.next();){var o=n.value;if(null!=o.link){var r=o.link.computeThickness();r>i&&(i=r);break}}return Math.ceil(i/this.columnSpacing)}return 1}return go.LayeredDigraphLayout.prototype.nodeMinColumnSpace.call(this,t,e)},SankeyLayout.prototype.assignLayers=function(){go.LayeredDigraphLayout.prototype.assignLayers.call(this);for(var t=this.maxLayer,e=this.network.vertexes.iterator;e.next();){var i=e.value,n=i.node;n.key;0==i.destinationVertexes.count&&(i.layer=0),0==i.sourceVertexes.count&&(i.layer=t)}},SankeyLayout.prototype.commitLayout=function(){go.LayeredDigraphLayout.prototype.commitLayout.call(this);for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e&&e.curve===go.Link.Bezier&&e.invalidateRoute()}},go.Diagram.inherit(TimelineLayout,go.Layout),TimelineLayout.prototype.doLayout=function(t){var e=this.diagram;if(null!==e){t=this.collectParts(t),e.startTransaction("TimelineLayout");for(var i=null,n=[],o=t.iterator;o.next();){var r=o.value;if(!(r instanceof go.Link))if("timeline_line"!==r.category){n.push(r);var a=r.data.date;a===undefined&&(a=new Date,r.data.date=a)}else i=r}if(!i)throw Error("No node of category 'timeline_line' for TimelineLayout");if(i.location=new go.Point(0,0),n.length>0){var s=i.findMainElement(),l=(s.strokeWidth,s.actualBounds.x,s.actualBounds.y,i.data.lineSpacing);l||(l=30);for(var h=0;h<n.length;h++){for(var r=n[h],u=r.actualBounds,c=r.data.date,f=e.model.findNodeDataForKey("timeline"),d=f.start,p=d.getTime()+6e4*d.getTimezoneOffset(),g=c.getTime()+6e4*c.getTimezoneOffset(),y=g-p,m=864e5,v=y/m,b=i.graduatedPointForValue(v),x=new go.Point(b.x,b.y-u.height/2-l),w=0;w<h;w++){var k=new go.Rect(x.x,x.y,u.width,u.height),S=n[w].location,M=n[w].actualBounds,P=new go.Rect(S.x,S.y,M.width,M.height);k.intersectsRect(P)&&(x.offset(0,-M.height-10),w=0)}r.location=x}}e.commitTransaction("TimelineLayout")}},go.Diagram.inherit(WheelLayout,go.CircularLayout),WheelLayout.prototype.makeNetwork=function(t){var e=go.CircularLayout.prototype.makeNetwork.call(this,t);return e.vertexes.each(function(t){t.diameter=20}),e},WheelLayout.prototype.commitNodes=function(){go.CircularLayout.prototype.commitNodes.call(this),this.network.vertexes.each(function(t){var e=t.node;if(null!==e){var i=t.actualAngle;if(i>90&&i<270){e.findObject("TEXTBLOCK").angle=180}e.angle=i}})},go.Diagram.inherit(BalloonLink,go.Link),Object.defineProperty(BalloonLink.prototype,"base",{get:function(){return this._base},set:function(t){this._base=t}}),BalloonLink.prototype.makeGeometry=function(){var t=this.fromNode.actualBounds,e=this.toNode.actualBounds,i=this.pointsCount,n=t.center,o=this.getPoint(i-1);t.intersectsRect(e)&&(o=e.center);var r=this.routeBounds,a=o.directionPoint(n),s=new go.Point(this.base,0).rotate(a-90).add(n),l=new go.Point(this.base,0).rotate(a+90).add(n);this.getLinkPointFromPoint(this.fromNode,this.fromNode,s,o,!0,s),this.getLinkPointFromPoint(this.fromNode,this.fromNode,l,o,!0,l);var h=new go.PathFigure(o.x-r.x,o.y-r.y,!0);h.add(new go.PathSegment(go.PathSegment.Line,l.x-r.x,l.y-r.y));var u=0;return s.y>=t.bottom||l.y>=t.bottom?u=2:s.x<=t.x&&l.x<=t.x?u=1:s.x>=t.right&&l.x>=t.right&&(u=3),this.pathToCorner(u,t,h,r,s,l),this.pathToCorner(u+1,t,h,r,s,l),this.pathToCorner(u+2,t,h,r,s,l),this.pathToCorner(u+3,t,h,r,s,l),h.add(new go.PathSegment(go.PathSegment.Line,s.x-r.x,s.y-r.y).close()),(new go.Geometry).add(h)},BalloonLink.prototype.pathToCorner=function(t,e,i,n,o,r){switch(t%4){case 0:o.y<=e.y&&r.x<=e.x||i.add(new go.PathSegment(go.PathSegment.Line,e.x-n.x,e.y-n.y));break;case 1:o.x<=e.x&&r.y>=e.bottom||i.add(new go.PathSegment(go.PathSegment.Line,e.x-n.x,e.bottom-n.y));break;case 2:o.y>=e.bottom&&r.x>=e.right||i.add(new go.PathSegment(go.PathSegment.Line,e.right-n.x,e.bottom-n.y));break;case 3:o.x>=e.right&&r.y<=e.y||i.add(new go.PathSegment(go.PathSegment.Line,e.right-n.x,e.y-n.y))}},go.Diagram.inherit(BarLink,go.Link),BarLink.prototype.getLinkPoint=function(t,e,i,n,o,r,a){var s=new go.Rect(e.getDocumentPoint(go.Spot.TopLeft),e.getDocumentPoint(go.Spot.BottomRight)),l=a.getDocumentPoint(go.Spot.Center),h="timeline_line"===t.category?t.findMainElement():r.findMainElement(),u=h.actualBounds.y,c=s.top;return"timeline_line"===t.category?(c+=u,l.x<s.left?new go.Point(s.left,c):l.x>s.right?new go.Point(s.right,c):new go.Point(l.x,c)):new go.Point(s.centerX,s.bottom)},BarLink.prototype.getLinkDirection=function(){return 270},go.Diagram.inherit(DimensioningLink,go.Link),Object.defineProperty(DimensioningLink.prototype,"direction",{get:function(){return this._direction},set:function(t){if(!isNaN(t)&&0!==t&&90!==t&&180!==t&&270!==t)throw new Error("DimensioningLink: invalid new direction: "+t);this._direction=t}}),Object.defineProperty(DimensioningLink.prototype,"extension",{get:function(){return this._extension},set:function(t){this._extension=t}}),Object.defineProperty(DimensioningLink.prototype,"inset",{get:function(){return this._inset},set:function(t){if(!(t>=0))throw new Error("DimensioningLink: invalid new inset: "+t);this._inset=t}}),Object.defineProperty(DimensioningLink.prototype,"gap",{get:function(){return this._gap},set:function(t){if(!(t>=0))throw new Error("DimensioningLink: invalid new gap: "+t);this._gap=t}}),DimensioningLink.prototype.computePoints=function(){var t=this.fromNode;if(!t)return!1;var e=this.fromPort,i=this.computeSpot(!0),n=this.toNode;if(!n)return!1;var o=this.toPort,r=this.computeSpot(!1),a=this.getLinkPoint(t,e,i,!0,!0,n,o);if(!a.isReal())return!1;var s=this.getLinkPoint(n,o,r,!1,!0,t,e);if(!s.isReal())return!1;this.clearPoints();var l=this.direction;if(isNaN(l)){l=a.directionPoint(s);var h=new go.Point(this.extension,0);h.rotate(l+90);var u=new go.Point(this.extension-this.inset,0);u.rotate(l+90);var c=new go.Point(this.gap,0);c.rotate(l+90),this.addPointAt(a.x+c.x,a.y+c.y),this.addPointAt(a.x+h.x,a.y+h.y),this.addPointAt(a.x+u.x,a.y+u.y),this.addPointAt(s.x+u.x,s.y+u.y),this.addPointAt(s.x+h.x,s.y+h.y),this.addPointAt(s.x+c.x,s.y+c.y)}else{var f=(this.extension,0),d=0,p=0,g=0;0===l||180===l?(0===l?(f=Math.min(a.y,s.y)-this.extension,d=f+this.inset,p=a.y-this.gap,g=s.y-this.gap):(f=Math.max(a.y,s.y)+this.extension,d=f-this.inset,p=a.y+this.gap,g=s.y+this.gap),this.addPointAt(a.x,p),this.addPointAt(a.x+.01,f),this.addPointAt(a.x,d),this.addPointAt(s.x,d),this.addPointAt(s.x-.01,f),this.addPointAt(s.x,g)):90!==l&&270!==l||(90===l?(f=Math.max(a.x,s.x)+this.extension,d=f-this.inset,p=a.x+this.gap,g=s.x+this.gap):(f=Math.min(a.x,s.x)-this.extension,d=f+this.inset,p=a.x-this.gap,g=s.x-this.gap),this.addPointAt(p,a.y),this.addPointAt(f,a.y+.01),this.addPointAt(d,a.y),
this.addPointAt(d,s.y),this.addPointAt(f,s.y-.01),this.addPointAt(g,s.y))}return this.updateTargetBindings(),!0};var LinePrefix=20,LineSuffix=30,MessageSpacing=20,ActivityWidth=10,ActivityStart=5,ActivityEnd=5;go.Diagram.inherit(MessageLink,go.Link),MessageLink.prototype.getLinkPoint=function(t,e,i,n,o,r,a){var s=e.getDocumentPoint(go.Spot.Center),l=(new go.Rect(e.getDocumentPoint(go.Spot.TopLeft),e.getDocumentPoint(go.Spot.BottomRight)),a.getDocumentPoint(go.Spot.Center)),h=this.data,u=null!==h?h.time:this.time,c=this.findActivityWidth(t,u),f=l.x>s.x?s.x+c/2:s.x-c/2,d=convertTimeToY(u);return new go.Point(f,d)},MessageLink.prototype.findActivityWidth=function(t,e){var i=ActivityWidth;return t instanceof go.Group&&(t.memberParts.any(function(t){var i=t.data;return null!==i&&i.start<=e&&e<=i.start+i.duration})||(i=0)),i},MessageLink.prototype.getLinkDirection=function(t,e,i,n,o,r,a,s){var l=e.getDocumentPoint(go.Spot.Center);return s.getDocumentPoint(go.Spot.Center).x>l.x?0:180},MessageLink.prototype.computePoints=function(){if(this.fromNode===this.toNode){var t=this.data,e=null!==t?t.time:this.time,i=this.fromNode.port.getDocumentPoint(go.Spot.Center),n=this.findActivityWidth(this.fromNode,e),o=i.x+n/2,r=convertTimeToY(e);return this.clearPoints(),this.addPoint(new go.Point(o,r)),this.addPoint(new go.Point(o+50,r)),this.addPoint(new go.Point(o+50,r+5)),this.addPoint(new go.Point(o,r+5)),!0}return go.Link.prototype.computePoints.call(this)},go.Diagram.inherit(MessagingTool,go.LinkingTool),MessagingTool.prototype.doActivate=function(){go.LinkingTool.prototype.doActivate.call(this);var t=convertYToTime(this.diagram.firstInput.documentPoint.y);this.temporaryLink.time=Math.ceil(t)},MessagingTool.prototype.insertLink=function(t,e,i,n){var o=go.LinkingTool.prototype.insertLink.call(this,t,e,i,n);if(null!==o){var r=this.diagram.model,a=this.temporaryLink.time,s=1;o.data.time=a,r.setDataProperty(o.data,"text","msg");var l={group:o.data.to,start:a,duration:s};r.addNodeData(l),ensureLifelineHeights()}return o},function(t,e,i){"use strict";function n(t,i,n,o){for(var r=[],a=0;a<t.length;a++){var s=t[a];if(s){var l=tinycolor(s),h=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";h+=tinycolor.equals(i,s)?" sp-thumb-active":"";var u=l.toString(o.preferredFormat||"rgb"),c=y?"background-color:"+l.toRgbString():"filter:"+l.toFilter();r.push('<span title="'+u+'" data-color="'+l.toRgbString()+'" class="'+h+'"><span class="sp-thumb-inner" style="'+c+';" /></span>')}else{r.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+"sp-clear-display"+'"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+r.join("")+"</div>"}function o(){for(var t=0;t<p.length;t++)p[t]&&p[t].hide()}function r(t,i){var n=e.extend({},d,t);return n.callbacks={move:u(n.move,i),change:u(n.change,i),show:u(n.show,i),hide:u(n.hide,i),beforeShow:u(n.beforeShow,i)},n}function a(a,l){function u(){if(U.showPaletteOnly&&(U.showPalette=!0),It.text(U.showPaletteOnly?U.togglePaletteMoreText:U.togglePaletteLessText),U.palette){ct=U.palette.slice(0),ft=e.isArray(ct[0])?ct:[ct],dt={};for(var t=0;t<ft.length;t++)for(var i=0;i<ft[t].length;i++){var n=tinycolor(ft[t][i]).toRgbString();dt[n]=!0}}wt.toggleClass("sp-flat",_),wt.toggleClass("sp-input-disabled",!U.showInput),wt.toggleClass("sp-alpha-enabled",U.showAlpha),wt.toggleClass("sp-clear-enabled",Yt),wt.toggleClass("sp-buttons-disabled",!U.showButtons),wt.toggleClass("sp-palette-buttons-disabled",!U.togglePaletteOnly),wt.toggleClass("sp-palette-disabled",!U.showPalette),wt.toggleClass("sp-palette-only",U.showPaletteOnly),wt.toggleClass("sp-initial-disabled",!U.showInitial),wt.addClass(U.className).addClass(U.containerClassName),R()}function d(){function t(t){return t.data&&t.data.ignore?(F(e(t.target).closest(".sp-thumb-el").data("color")),I()):(F(e(t.target).closest(".sp-thumb-el").data("color")),I(),G(!0),U.hideAfterPaletteSelect&&B()),!1}if(g&&wt.find("*:not(input)").attr("unselectable","on"),u(),Gt&&bt.after(Rt).hide(),Yt||jt.hide(),_)bt.after(wt).hide();else{var i="parent"===U.appendTo?bt.parent():e(U.appendTo);1!==i.length&&(i=e("body")),i.append(wt)}x(),qt.bind("click.spectrum touchstart.spectrum",function(t){xt||N(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(bt.is(":disabled")||!0===U.disabled)&&V(),wt.click(h),At.change(L),At.bind("paste",function(){setTimeout(L,1)}),At.keydown(function(t){13==t.keyCode&&L()}),Ft.text(U.cancelText),Ft.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),D(),B()}),jt.attr("title",U.clearText),jt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Jt=!0,I(),_&&G(!0)}),Et.text(U.chooseText),Et.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),E()&&(G(!0),B())}),It.text(U.showPaletteOnly?U.togglePaletteMoreText:U.togglePaletteLessText),It.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),U.showPaletteOnly=!U.showPaletteOnly,U.showPaletteOnly||_||wt.css("left","-="+(kt.outerWidth(!0)+5)),u()}),c(Nt,function(t,e,i){ut=t/ot,Jt=!1,i.shiftKey&&(ut=Math.round(10*ut)/10),I()},P,T),c(Pt,function(t,e){st=parseFloat(e/it),Jt=!1,U.showAlpha||(ut=1),I()},P,T),c(St,function(t,e,i){if(i.shiftKey){if(!mt){var n=lt*Z,o=tt-ht*tt,r=Math.abs(t-n)>Math.abs(e-o);mt=r?"x":"y"}}else mt=null;var a=!mt||"x"===mt,s=!mt||"y"===mt;a&&(lt=parseFloat(t/Z)),s&&(ht=parseFloat((tt-e)/tt)),Jt=!1,U.showAlpha||(ut=1),I()},P,T),Ht?(F(Ht),O(),_t=Ut||tinycolor(Ht).format,w(Ht)):O(),_&&C();var n=g?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Bt.delegate(".sp-thumb-el",n,t),Dt.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},t)}function x(){if(J&&t.localStorage){try{var i=t.localStorage[J].split(",#");i.length>1&&(delete t.localStorage[J],e.each(i,function(t,e){w(e)}))}catch(t){}try{pt=t.localStorage[J].split(";")}catch(t){}}}function w(i){if(K){var n=tinycolor(i).toRgbString();if(!dt[n]&&-1===e.inArray(n,pt))for(pt.push(n);pt.length>gt;)pt.shift();if(J&&t.localStorage)try{t.localStorage[J]=pt.join(";")}catch(t){}}}function k(){var t=[];if(U.showPalette)for(var e=0;e<pt.length;e++){var i=tinycolor(pt[e]).toRgbString();dt[i]||t.push(pt[e])}return t.reverse().slice(0,U.maxSelectionSize)}function S(){var t=j(),i=e.map(ft,function(e,i){return n(e,t,"sp-palette-row sp-palette-row-"+i,U)});x(),pt&&i.push(n(k(),t,"sp-palette-row sp-palette-row-selection",U)),Bt.html(i.join(""))}function M(){if(U.showInitial){var t=Vt,e=j();Dt.html(n([t,e],e,"sp-palette-row-initial",U))}}function P(){(tt<=0||Z<=0||it<=0)&&R(),wt.addClass(yt),mt=null,bt.trigger("dragstart.spectrum",[j()])}function T(){wt.removeClass(yt),bt.trigger("dragstop.spectrum",[j()])}function L(){var t=At.val();if(null!==t&&""!==t||!Yt){var e=tinycolor(t);e.isValid()?(F(e),G(!0)):At.addClass("sp-validation-error")}else F(null),G(!0)}function N(){Q?B():C()}function C(){var i=e.Event("beforeShow.spectrum");if(Q)return void R();bt.trigger(i,[j()]),!1===$.beforeShow(j())||i.isDefaultPrevented()||(o(),Q=!0,e(vt).bind("click.spectrum",A),e(t).bind("resize.spectrum",X),Rt.addClass("sp-active"),wt.removeClass("sp-hidden"),R(),O(),Vt=j(),M(),$.show(Vt),bt.trigger("show.spectrum",[Vt]))}function A(t){t&&"click"==t.type&&2==t.button||(Kt?G(!0):D(),B())}function B(){Q&&!_&&(Q=!1,e(vt).unbind("click.spectrum",A),e(t).unbind("resize.spectrum",X),Rt.removeClass("sp-active"),wt.addClass("sp-hidden"),$.hide(j()),bt.trigger("hide.spectrum",[j()]))}function D(){F(Vt,!0)}function F(t,e){if(tinycolor.equals(t,j()))return void O();var i,n;!t&&Yt?Jt=!0:(Jt=!1,i=tinycolor(t),n=i.toHsv(),st=n.h%360/360,lt=n.s,ht=n.v,ut=n.a),O(),i&&i.isValid()&&!e&&(_t=Ut||i.getFormat())}function j(t){return t=t||{},Yt&&Jt?null:tinycolor.fromRatio({h:st,s:lt,v:ht,a:Math.round(100*ut)/100},{format:t.format||_t})}function E(){return!At.hasClass("sp-validation-error")}function I(){O(),$.move(j()),bt.trigger("move.spectrum",[j()])}function O(){At.removeClass("sp-validation-error"),z();var t=tinycolor.fromRatio({h:st,s:1,v:1});St.css("background-color",t.toHexString());var e=_t;ut<1&&(0!==ut||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var i=j({format:e}),n="";if(Wt.removeClass("sp-clear-display"),Wt.css("background-color","transparent"),!i&&Yt)Wt.addClass("sp-clear-display");else{var o=i.toHexString(),r=i.toRgbString();if(y||1===i.alpha?Wt.css("background-color",r):(Wt.css("background-color","transparent"),Wt.css("filter",i.toFilter())),U.showAlpha){var a=i.toRgb();a.a=0;var s=tinycolor(a).toRgbString(),l="linear-gradient(left, "+s+", "+o+")";g?Lt.css("filter",tinycolor(s).toFilter({gradientType:1},o)):(Lt.css("background","-webkit-"+l),Lt.css("background","-moz-"+l),Lt.css("background","-ms-"+l),Lt.css("background","linear-gradient(to right, "+s+", "+o+")"))}n=i.toString(e)}U.showInput&&At.val(n),U.showPalette&&S(),M()}function z(){var t=lt,e=ht;if(Yt&&Jt)Ct.hide(),Tt.hide(),Mt.hide();else{Ct.show(),Tt.show(),Mt.show();var i=t*Z,n=tt-e*tt;i=Math.max(-et,Math.min(Z-et,i-et)),n=Math.max(-et,Math.min(tt-et,n-et)),Mt.css({top:n+"px",left:i+"px"});var o=ut*ot;Ct.css({left:o-rt/2+"px"});var r=st*it;Tt.css({top:r-at+"px"})}}function G(t){var e=j(),i="",n=!tinycolor.equals(e,Vt);e&&(i=e.toString(_t),w(e)),Ot&&bt.val(i),t&&n&&($.change(e),bt.trigger("change",[e]))}function R(){Z=St.width(),tt=St.height(),et=Mt.height(),nt=Pt.width(),it=Pt.height(),at=Tt.height(),ot=Nt.width(),rt=Ct.width(),_||(wt.css("position","absolute"),wt.offset(s(wt,qt))),z(),U.showPalette&&S(),bt.trigger("reflow.spectrum")}function q(){bt.show(),qt.unbind("click.spectrum touchstart.spectrum"),wt.remove(),Rt.remove(),p[$t.id]=null}function W(t,n){return t===i?e.extend({},U):n===i?U[t]:(U[t]=n,void u())}function H(){xt=!1,bt.attr("disabled",!1),qt.removeClass("sp-disabled")}function V(){B(),xt=!0,bt.attr("disabled",!0),qt.addClass("sp-disabled")}var U=r(l,a),_=U.flat,K=U.showSelectionPalette,J=U.localStorageKey,Y=U.theme,$=U.callbacks,X=f(R,10),Q=!1,Z=0,tt=0,et=0,it=0,nt=0,ot=0,rt=0,at=0,st=0,lt=0,ht=0,ut=1,ct=[],ft=[],dt={},pt=U.selectionPalette.slice(0),gt=U.maxSelectionSize,yt="sp-dragging",mt=null,vt=a.ownerDocument,bt=(vt.body,e(a)),xt=!1,wt=e(b,vt).addClass(Y),kt=wt.find(".sp-picker-container"),St=wt.find(".sp-color"),Mt=wt.find(".sp-dragger"),Pt=wt.find(".sp-hue"),Tt=wt.find(".sp-slider"),Lt=wt.find(".sp-alpha-inner"),Nt=wt.find(".sp-alpha"),Ct=wt.find(".sp-alpha-handle"),At=wt.find(".sp-input"),Bt=wt.find(".sp-palette"),Dt=wt.find(".sp-initial"),Ft=wt.find(".sp-cancel"),jt=wt.find(".sp-clear"),Et=wt.find(".sp-choose"),It=wt.find(".sp-palette-toggle"),Ot=bt.is("input"),zt=Ot&&m&&"color"===bt.attr("type"),Gt=Ot&&!_,Rt=Gt?e(v).addClass(Y).addClass(U.className).addClass(U.replacerClassName):e([]),qt=Gt?Rt:bt,Wt=Rt.find(".sp-preview-inner"),Ht=U.color||Ot&&bt.val(),Vt=!1,Ut=U.preferredFormat,_t=Ut,Kt=!U.showButtons||U.clickoutFiresChange,Jt=!Ht,Yt=U.allowEmpty&&!zt;d();var $t={show:C,hide:B,toggle:N,reflow:R,option:W,enable:H,disable:V,set:function(t){F(t),G()},get:j,destroy:q,container:wt};return $t.id=p.push($t)-1,$t}function s(t,i){var n=0,o=t.outerWidth(),r=t.outerHeight(),a=i.outerHeight(),s=t[0].ownerDocument,l=s.documentElement,h=l.clientWidth+e(s).scrollLeft(),u=l.clientHeight+e(s).scrollTop(),c=i.offset();return c.top+=a,c.left-=Math.min(c.left,c.left+o>h&&h>o?Math.abs(c.left+o-h):0),c.top-=Math.min(c.top,c.top+r>u&&u>r?Math.abs(r+a-n):n),c}function l(){}function h(t){t.stopPropagation()}function u(t,e){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function c(i,n,o,r){function a(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function s(t){if(c){if(g&&u.documentMode<9&&!t.button)return h();var e=t.originalEvent.touches,o=e?e[0].pageX:t.pageX,r=e?e[0].pageY:t.pageY,s=Math.max(0,Math.min(o-f.left,p)),l=Math.max(0,Math.min(r-f.top,d));y&&a(t),n.apply(i,[s,l,t])}}function l(t){(t.which?3==t.which:2==t.button)||c||!1!==o.apply(i,arguments)&&(c=!0,d=e(i).height(),p=e(i).width(),f=e(i).offset(),e(u).bind(m),e(u.body).addClass("sp-dragging"),y||s(t),a(t))}function h(){c&&(e(u).unbind(m),e(u.body).removeClass("sp-dragging"),r.apply(i,arguments)),c=!1}n=n||function(){},o=o||function(){},r=r||function(){};var u=document,c=!1,f={},d=0,p=0,y="ontouchstart"in t,m={};m.selectstart=a,m.dragstart=a,m["touchmove mousemove"]=s,m["touchend mouseup"]=h,e(i).bind("touchstart mousedown",l)}function f(t,e,i){var n;return function(){var o=this,r=arguments,a=function(){n=null,t.apply(o,r)};i&&clearTimeout(n),!i&&n||(n=setTimeout(a,e))}}var d={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1},p=[],g=!!/msie/i.exec(t.navigator.userAgent),y=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),i=e.style;return i.cssText="background-color:rgba(0,0,0,.5)",t(i.backgroundColor,"rgba")||t(i.backgroundColor,"hsla")}(),m=function(){var t=e("<input type='color' value='!' />")[0];return"color"===t.type&&"!"!==t.value}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var t="";if(g)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),x="spectrum.id";e.fn.spectrum=function(t){if("string"==typeof t){var i=this,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=p[e(this).data(x)];if(o){var r=o[t];if(!r)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?i=o.get():"container"==t?i=o.container:"option"==t?i=o.option.apply(o,n):"destroy"==t?(o.destroy(),e(this).removeData(x)):r.apply(o,n)}}),i}return this.spectrum("destroy").each(function(){var i=e.extend({},t,e(this).data()),n=a(this,i);e(this).data(x,n.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=c,e.fn.spectrum.defaults=d,e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){m||e("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function e(t){var e={r:0,g:0,b:0},n=1,r=!1,s=!1;return"string"==typeof t&&(t=F(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=i(t.r,t.g,t.b),r=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=A(t.s),t.v=A(t.v),e=a(t.h,t.s,t.v),r=!0,s="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=A(t.s),t.l=A(t.l),e=o(t.h,t.s,t.l),r=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=S(n),{ok:r,format:t.format||s,r:G(255,R(e.r,0)),g:G(255,R(e.g,0)),b:G(255,R(e.b,0)),a:n}}function i(t,e,i){return{r:255*M(t,255),g:255*M(e,255),b:255*M(i,255)}}function n(t,e,i){t=M(t,255),e=M(e,255),i=M(i,255);var n,o,r=R(t,e,i),a=G(t,e,i),s=(r+a)/2;if(r==a)n=o=0;else{var l=r-a;switch(o=s>.5?l/(2-r-a):l/(r+a),r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:o,l:s}}function o(t,e,i){function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var o,r,a;if(t=M(t,360),e=M(e,100),i=M(i,100),0===e)o=r=a=i;else{var s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;o=n(l,s,t+1/3),r=n(l,s,t),a=n(l,s,t-1/3)}return{r:255*o,g:255*r,b:255*a}}function r(t,e,i){t=M(t,255),e=M(e,255),i=M(i,255);var n,o,r=R(t,e,i),a=G(t,e,i),s=r,l=r-a;if(o=0===r?0:l/r,r==a)n=0;else{switch(r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:o,v:s}}function a(t,e,i){t=6*M(t,360),e=M(e,100),i=M(i,100);var n=O.floor(t),o=t-n,r=i*(1-e),a=i*(1-o*e),s=i*(1-(1-o)*e),l=n%6;return{r:255*[i,a,r,r,s,i][l],g:255*[s,i,i,a,r,r][l],b:255*[r,r,s,i,i,a][l]}}function s(t,e,i,n){var o=[C(z(t).toString(16)),C(z(e).toString(16)),C(z(i).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function l(t,e,i,n){return[C(B(n)),C(z(t).toString(16)),C(z(e).toString(16)),C(z(i).toString(16))].join("")}function h(t,e){e=0===e?0:e||10;var i=W(t).toHsl();return i.s-=e/100,i.s=P(i.s),W(i)}function u(t,e){e=0===e?0:e||10;var i=W(t).toHsl();return i.s+=e/100,i.s=P(i.s),W(i)}function c(t){return W(t).desaturate(100)}function f(t,e){e=0===e?0:e||10;var i=W(t).toHsl();return i.l+=e/100,i.l=P(i.l),W(i)}function d(t,e){e=0===e?0:e||10;var i=W(t).toRgb();return i.r=R(0,G(255,i.r-z(-e/100*255))),i.g=R(0,G(255,i.g-z(-e/100*255))),i.b=R(0,G(255,i.b-z(-e/100*255))),W(i)}function p(t,e){e=0===e?0:e||10;var i=W(t).toHsl();return i.l-=e/100,i.l=P(i.l),W(i)}function g(t,e){var i=W(t).toHsl(),n=(z(i.h)+e)%360;return i.h=n<0?360+n:n,W(i)}function y(t){var e=W(t).toHsl();return e.h=(e.h+180)%360,W(e)}function m(t){var e=W(t).toHsl(),i=e.h;return[W(t),W({h:(i+120)%360,s:e.s,l:e.l}),W({h:(i+240)%360,s:e.s,l:e.l})]}function v(t){var e=W(t).toHsl(),i=e.h;return[W(t),W({h:(i+90)%360,s:e.s,l:e.l}),W({h:(i+180)%360,s:e.s,l:e.l}),W({h:(i+270)%360,s:e.s,l:e.l})]}function b(t){var e=W(t).toHsl(),i=e.h;return[W(t),W({h:(i+72)%360,s:e.s,l:e.l}),W({h:(i+216)%360,s:e.s,l:e.l})]}function x(t,e,i){e=e||6,i=i||30;var n=W(t).toHsl(),o=360/i,r=[W(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,r.push(W(n));return r}function w(t,e){e=e||6;for(var i=W(t).toHsv(),n=i.h,o=i.s,r=i.v,a=[],s=1/e;e--;)a.push(W({h:n,s:o,v:r})),r=(r+s)%1;return a}function k(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function S(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function M(t,e){L(t)&&(t="100%");var i=N(t);return t=G(e,R(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),O.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function P(t){return G(1,R(0,t))}function T(t){return parseInt(t,16)}function L(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function N(t){return"string"==typeof t&&-1!=t.indexOf("%")}function C(t){return 1==t.length?"0"+t:""+t}function A(t){return t<=1&&(t=100*t+"%"),t}function B(t){return Math.round(255*parseFloat(t)).toString(16)}function D(t){return T(t)/255}function F(t){t=t.replace(j,"").replace(E,"").toLowerCase();var e=!1;if(H[t])t=H[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=U.rgb.exec(t))?{r:i[1],g:i[2],b:i[3]}:(i=U.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=U.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=U.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=U.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=U.hex8.exec(t))?{a:D(i[1]),r:T(i[2]),g:T(i[3]),b:T(i[4]),format:e?"name":"hex8"}:(i=U.hex6.exec(t))?{r:T(i[1]),g:T(i[2]),b:T(i[3]),format:e?"name":"hex"}:!!(i=U.hex3.exec(t))&&{r:T(i[1]+""+i[1]),g:T(i[2]+""+i[2]),b:T(i[3]+""+i[3]),format:e?"name":"hex"}}var j=/^[\s,#]+/,E=/\s+$/,I=0,O=Math,z=O.round,G=O.min,R=O.max,q=O.random,W=function t(i,n){if(i=i||"",n=n||{},i instanceof t)return i;if(!(this instanceof t))return new t(i,n);var o=e(i);this._r=o.r,this._g=o.g,this._b=o.b,this._a=o.a,this._roundA=z(100*this._a)/100,this._format=n.format||o.format,this._gradientType=n.gradientType,this._r<1&&(this._r=z(this._r)),this._g<1&&(this._g=z(this._g)),this._b<1&&(this._b=z(this._b)),this._ok=o.ok,this._tc_id=I++};W.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=S(t),this._roundA=z(100*this._a)/100,this},toHsv:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=r(this._r,this._g,this._b),e=z(360*t.h),i=z(100*t.s),n=z(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=n(this._r,this._g,this._b),e=z(360*t.h),i=z(100*t.s),o=z(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+o+"%)":"hsla("+e+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:z(this._r),g:z(this._g),b:z(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+z(this._r)+", "+z(this._g)+", "+z(this._b)+")":"rgba("+z(this._r)+", "+z(this._g)+", "+z(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:z(100*M(this._r,255))+"%",g:z(100*M(this._g,255))+"%",b:z(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+z(100*M(this._r,255))+"%, "+z(100*M(this._g,255))+"%, "+z(100*M(this._b,255))+"%)":"rgba("+z(100*M(this._r,255))+"%, "+z(100*M(this._g,255))+"%, "+z(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(V[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+l(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){i=W(t).toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},W.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:A(t[n]));t=i}return W(t,e)},W.equals=function(t,e){return!(!t||!e)&&W(t).toRgbString()==W(e).toRgbString()},W.random=function(){return W.fromRatio({r:q(),g:q(),b:q()})},W.mix=function(t,e,i){i=0===i?0:i||50;var n,o=W(t).toRgb(),r=W(e).toRgb(),a=i/100,s=2*a-1,l=r.a-o.a;n=s*l==-1?s:(s+l)/(1+s*l),n=(n+1)/2;var h=1-n,u={r:r.r*n+o.r*h,g:r.g*n+o.g*h,b:r.b*n+o.b*h,a:r.a*a+o.a*(1-a)};return W(u)},W.readability=function(t,e){var i=W(t),n=W(e),o=i.toRgb(),r=n.toRgb(),a=i.getBrightness(),s=n.getBrightness(),l=Math.max(o.r,r.r)-Math.min(o.r,r.r)+Math.max(o.g,r.g)-Math.min(o.g,r.g)+Math.max(o.b,r.b)-Math.min(o.b,r.b);return{brightness:Math.abs(a-s),color:l}},W.isReadable=function(t,e){var i=W.readability(t,e);return i.brightness>125&&i.color>500},W.mostReadable=function(t,e){for(var i=null,n=0,o=!1,r=0;r<e.length;r++){var a=W.readability(t,e[r]),s=a.brightness>125&&a.color>500,l=a.brightness/125*3+a.color/500;(s&&!o||s&&o&&l>n||!s&&!o&&l>n)&&(o=s,n=l,i=W(e[r]))}return i};var H=W.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},V=W.hexNames=k(H),U=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",o="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();t.tinycolor=W}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}(window,jQuery);