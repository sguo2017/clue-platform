function diagram_ruler(){function o(){goTools.viewportBounds;goTools.startTransaction("add scales"),t(),goTools.add(n),goTools.add(a),goTools.add(i),goTools.add(s),goTools.commitTransaction("add scales")}function t(){var o=goTools.viewportBounds;goTools.startTransaction("update scales"),n.location=new go.Point(o.x,o.y),n.graduatedMin=o.x,n.graduatedMax=o.x+o.width,n.elt(0).width=o.width,a.location=new go.Point(o.x,o.y),a.graduatedMin=o.y,a.graduatedMax=o.y+o.height,a.elt(0).height=o.height,goTools.commitTransaction("update scales")}function e(){var o=goTools.viewportBounds,t=goTools.lastInput.documentPoint;goTools.startTransaction("update indicators"),i.location=new go.Point(Math.max(t.x,o.x),o.y),s.location=new go.Point(o.x,Math.max(t.y,o.y)),goTools.commitTransaction("update indicators")}var n=$$(go.Node,"Graduated",{graduatedTickUnit:10,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1},$$(go.Shape,{geometryString:"M0 0 H400"}),$$(go.Shape,{geometryString:"M0 0 V3",interval:1}),$$(go.Shape,{geometryString:"M0 0 V15",interval:5}),$$(go.TextBlock,{font:"10px sans-serif",interval:5,alignmentFocus:go.Spot.TopLeft,segmentOffset:new go.Point(0,7)})),a=$$(go.Node,"Graduated",{graduatedTickUnit:10,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1},$$(go.Shape,{geometryString:"M0 0 V400"}),$$(go.Shape,{geometryString:"M0 0 V3",interval:1,alignmentFocus:go.Spot.Bottom}),$$(go.Shape,{geometryString:"M0 0 V15",interval:5,alignmentFocus:go.Spot.Bottom}),$$(go.TextBlock,{font:"10px sans-serif",segmentOrientation:go.Link.OrientOpposite,interval:5,alignmentFocus:go.Spot.BottomLeft,segmentOffset:new go.Point(0,-7)})),i=$$(go.Node,{pickable:!1,layerName:"Foreground",visible:!1,isInDocumentBounds:!1,isAnimated:!1,locationSpot:go.Spot.Top},$$(go.Shape,{geometryString:"M0 0 V15",strokeWidth:2,stroke:"red"})),s=$$(go.Node,{pickable:!1,layerName:"Foreground",visible:!1,isInDocumentBounds:!1,isAnimated:!1,locationSpot:go.Spot.Left},$$(go.Shape,{geometryString:"M0 0 H15",strokeWidth:2,stroke:"red"}));goTools.addDiagramListener("InitialLayoutCompleted",o),goTools.addDiagramListener("ViewportBoundsChanged",t),goTools.addDiagramListener("ViewportBoundsChanged",e),goTools.toolManager.doMouseMove=function(){go.ToolManager.prototype.doMouseMove.call(this),e()},goTools.toolManager.linkingTool.doMouseMove=function(){go.LinkingTool.prototype.doMouseMove.call(this),e()},goTools.toolManager.draggingTool.doMouseMove=function(){go.DraggingTool.prototype.doMouseMove.call(this),e()},goTools.toolManager.dragSelectingTool.doMouseMove=function(){go.DragSelectingTool.prototype.doMouseMove.call(this),e()},$("#tools_main_diagram").unbind("mouseover").bind("mouseover",function(){goTools.startTransaction("show indicators"),i.visible=!0,s.visible=!0,goTools.commitTransaction("show indicators")}),$("#tools_main_diagram").unbind("mouseout").bind("mouseout",function(){goTools.startTransaction("hide indicators"),i.visible=!1,s.visible=!1,goTools.commitTransaction("hide indicators")})}