function makeContextMenu(){go.GraphObject.make;return $$(go.Adornment,"Vertical",$$("ContextMenuButton",$$(go.TextBlock,"Make Group"),{click:function(e,o){function t(e){var o=e.containingGroup;e.containingGroup=null,null!=o&&(0===o.memberParts.count?n.remove(o):1===o.memberParts.count&&(o.memberParts.first().containingGroup=null))}var n=o.part.diagram;n.startTransaction("group selection");var i=n.selection,a=[];i.iterator.each(function(e){e instanceof go.Group?e.memberParts.iterator.each(function(e){a.push(e)}):a.push(e)});for(var r=0;r<a.length;r++)a[r].isSelected=!0;n.startTransaction("ungroup selection");var i=n.selection,g=[];i.iterator.each(function(e){e instanceof go.Group?g.push(e):t(e)});for(var a=[],r=0;r<g.length;r++)g[r].memberParts.iterator.each(function(e){a.push(e)});for(var r=0;r<a.length;r++)t(a[r]);var a=n.nodes,l=[];for(a.iterator.each(function(e){e instanceof go.Group&&0===e.memberParts.count&&"WallGroup"!==e.category&&l.push(e)}),r=0;r<l.length;r++)n.remove(l[r]);n.commitTransaction("ungroup selection"),n.commandHandler.groupSelection();var d=n.selection.first();n.model.setDataProperty(d.data,"caption","Group"),n.model.setDataProperty(d.data,"notes","");var a=n.nodes,l=[];for(a.iterator.each(function(e){e instanceof go.Group&&0===e.memberParts.count&&"WallGroup"!==e.category&&l.push(e)}),r=0;r<l.length;r++)n.remove(l[r]);n.clearSelection(),n.select(d),n.commitTransaction("group selection")}},new go.Binding("visible","visible",function(e,o){var t=o.part.diagram;if(t.selection.count<=1)return!1;var n=!0;return t.selection.iterator.each(function(e){"WallGroup"!==e.category&&"WindowNode"!==e.category&&"DoorNode"!==e.category||(n=!1)}),n}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Ungroup"),{click:function(e,o){function t(e){var o=e.containingGroup;e.containingGroup=null,null!=o&&(0===o.memberParts.count?n.remove(o):1===o.memberParts.count&&(o.memberParts.first().containingGroup=null))}var n=o.part.diagram;n.startTransaction("ungroup selection");var i=n.selection,a=[];i.iterator.each(function(e){e instanceof go.Group?a.push(e):t(e)});for(var r=[],g=0;g<a.length;g++)a[g].memberParts.iterator.each(function(e){r.push(e)});for(var g=0;g<r.length;g++)t(r[g]);var r=n.nodes,l=[];for(r.iterator.each(function(e){e instanceof go.Group&&0===e.memberParts.count&&"WallGroup"!==e.category&&l.push(e)}),g=0;g<l.length;g++)n.remove(l[g]);n.commitTransaction("ungroup selection")}},new go.Binding("visible","",function(e,o){var t=o.part.diagram;if(null!==t){var n=t.selection.first();return n instanceof go.Node&&null!=n.containingGroup&&"WallGroup"!=n.containingGroup.category||n instanceof go.Group&&""===n.category}return!1}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Copy"),{click:function(e,o){o.part.diagram.commandHandler.copySelection()}},new go.Binding("visible","",function(e,o){return null!==o.part.diagram&&o.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Cut"),{click:function(e,o){o.part.diagram.commandHandler.cutSelection()}},new go.Binding("visible","",function(e,o){return null!==o.part.diagram&&o.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Delete"),{click:function(e,o){o.part.diagram.commandHandler.deleteSelection()}},new go.Binding("visible","",function(e,o){return null!==o.part.diagram&&o.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Paste"),{click:function(e,o){o.part.diagram.commandHandler.pasteSelection(o.part.diagram.lastInput.documentPoint)}}),$$("ContextMenuButton",$$(go.TextBlock,"Show Selection Info"),{click:function(e){if(e.diagram.floorplanUI){"visible"!==document.getElementById(e.diagram.floorplanUI.state.windows.selectionInfoWindow.id).style.visibility&&e.diagram.floorplanUI.hideShow("selectionInfoWindow")}}},new go.Binding("visible","",function(e,o){return null!==o.part.diagram&&o.part.diagram.selection.count>0}).ofObject()),$$("ContextMenuButton",$$(go.TextBlock,"Flip Dimension Side"),{click:function(e,o){var t=o.part.diagram;if(null!==t){t.startTransaction("flip dimension link side");var n=[];t.selection.iterator.each(function(e){"WallGroup"===e.category&&n.push(e)});for(var i=0;i<n.length;i++){var a=n[i],r=a.data.startpoint.copy(),g=a.data.endpoint.copy();t.model.setDataProperty(a.data,"startpoint",g),t.model.setDataProperty(a.data,"endpoint",r),t.updateWall(a)}t.commitTransaction("flip dimension link side")}}},new go.Binding("visible","",function(e,o){if(null!==o.part.diagram){var t=o.part.diagram.selection;if(0===t.count)return!1;var n=!1;return t.iterator.each(function(e){"WallGroup"===e.category&&(n=!0)}),n}return!1}).ofObject()))}function getWallPartEndpoints(e){var o=e.location,t=e.data.width;if(null!==e.containingGroup)var n=e.containingGroup.rotateObject.angle;else var n=180;var i=new go.Point(o.x+t/2,o.y),a=new go.Point(o.x-t/2,o.y);i.offset(-o.x,-o.y).rotate(n).offset(o.x,o.y),a.offset(-o.x,-o.y).rotate(n).offset(o.x,o.y);var r=[];return r.push(i),r.push(a),r}function getWallPartStretch(e){var o=e.containingGroup,t=o.data.startpoint.copy(),n=o.data.endpoint.copy(),i=new go.Set(go.Point),a=new go.Set(go.Point);o.memberParts.iterator.each(function(o){if(o.data.key!==e.data.key)for(var t=getWallPartEndpoints(o),n=0;n<t.length;n++)t[n].x<e.location.x||t[n].y>e.location.y&&t[n].x===e.location.x?i.add(t[n]):a.add(t[n])}),parseFloat(t.x.toFixed(2))<parseFloat(e.location.x.toFixed(2))||t.y>e.location.y&&parseFloat(t.x.toFixed(2))===parseFloat(e.location.x.toFixed(2))?i.add(t):a.add(t),parseFloat(n.x.toFixed(2))<parseFloat(e.location.x.toFixed(2))||n.y>e.location.y&&parseFloat(n.x.toFixed(2))===parseFloat(e.location.x.toFixed(2))?i.add(n):a.add(n);var r,g=Number.MAX_VALUE;i.iterator.each(function(o){var t=Math.sqrt(o.distanceSquaredPoint(e.location));t<g&&(g=t,r=o)});var l,d=Number.MAX_VALUE;return a.iterator.each(function(o){var t=Math.sqrt(o.distanceSquaredPoint(e.location));t<d&&(d=t,l=o)}),{point1:r,point2:l}}GoTools.prototype.makeNodeTemplateMap=function(){function e(e){if(e.includes("#")&&(e=e.substring(1)),6!=e.length)return console.error("Hex color must be six hex numbers in length."),!1;e=e.toUpperCase();var o=e.split(""),t="",n="FEDCBA9876".split(""),a=new Array;for(a.A="5",a.B="4",a.C="3",a.D="2",a.E="1",a.F="0",i=0;i<6;i++)if(isNaN(o[i])){if(!a[o[i]])return console.error("Hex colors must only include hex numbers 0-9, and A-F"),!1;t+=a[o[i]]}else t+=n[o[i]];return"#"+t}function o(){return[new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{locationSpot:go.Spot.Center,mouseEnter:function(e,o){var t=o.part.diagram;t&&!t.isReadOnly&&t.allowLink&&o.part.ports.each(function(e){e.stroke="white"})},mouseLeave:function(e,o){var t=o.part.diagram;t&&!t.isReadOnly&&t.allowLink&&o.part.ports.each(function(e){e.stroke=null})}}]}function t(e,o,t,n){return l(go.Shape,"Circle",{fill:"transparent",stroke:null,desiredSize:new go.Size(8,8),alignment:o,alignmentFocus:o,portId:e,fromSpot:o,toSpot:o,fromLinkable:t,toLinkable:n,cursor:"pointer"})}function n(e,o){var t=e.diagram.toolManager.draggingTool;e.diagram.startTransaction("rotate "+o.toString());var n=new go.Set(go.Node);n.add(e);var i=t.computeEffectiveCollection(n).toKeySet(),a=e.diagram.computePartsBounds(i),r=a.center;i.each(function(e){e.angle+=o,e.location=e.location.copy().subtract(r).rotate(o).add(r)}),e.diagram.commitTransaction("rotate "+o.toString())}function a(e,o,t){return"string"==typeof o&&(o=go.Spot.parse(o)),o&&o.isSpot()||(o=go.Spot.Right),"string"==typeof t&&(t=go.Spot.parse(t)),t&&t.isSpot()||(t=o.opposite()),l(go.Panel,"Spot",{name:e.toString(),alignment:o,alignmentFocus:t},l(go.Shape,"Circle",{name:"SEATSHAPE",desiredSize:new go.Size(40,40),fill:"burlywood",stroke:"white",strokeWidth:2},new go.Binding("fill")),l(go.TextBlock,e.toString(),{font:"10pt Verdana, sans-serif"},new go.Binding("angle","angle",function(e){return-e})))}function r(){return[{background:"transparent"},{layerName:"Background"},{locationSpot:go.Spot.Center,locationObjectName:"TABLESHAPE"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{rotatable:!0},new go.Binding("angle").makeTwoWay(),{mouseDragEnter:function(){},mouseDragLeave:function(){},mouseDrop:function(){}}]}function g(e){switch(e){case"A":return"green";case"B":return"orange";case"C":return"red";case"D":return"cyan";case"E":return"gold";case"F":return"pink";case"G":return"blue";case"H":return"brown";case"I":return"purple";case"J":return"chartreuse";case"K":return"lightgray";case"L":return"magenta";case"S":return"red";default:return"transparent"}}var l=go.GraphObject.make,d=function(e,o){if(null!==e.containingGroup&&"WallGroup"===e.containingGroup.category){var t=e.diagram,n=e.containingGroup,i=n.data.startpoint,a=n.data.endpoint;Math.sqrt(i.distanceSquaredPoint(e.location))+Math.sqrt(e.location.distanceSquaredPoint(a))!==Math.sqrt(i.distanceSquaredPoint(a))&&(e.location=e.location.copy().projectOntoLineSegmentPoint(i,a));var r=getWallPartStretch(e),g=r.point1,l=r.point2,d=Math.sqrt(g.distanceSquaredPoint(l)),c=e.data.width/2,s=new go.Point(g.x+c/d*(l.x-g.x),g.y+c/d*(l.y-g.y)),p=new go.Point(l.x+c/d*(g.x-l.x),l.y+c/d*(g.y-l.y));Math.abs((a.y-i.y)*o.x-(a.x-i.x)*o.y+a.x*i.y-a.y*i.x)/Math.sqrt(Math.pow(a.y-i.y,2)+Math.pow(a.x-i.x,2))>(20*n.data.strokeWidth<100?20*n.data.strokeWidth:100)&&(e.containingGroup=null,e.angle=0,allPointNodes.iterator.each(function(e){t.remove(e)}),allDimensionLinks.iterator.each(function(e){t.remove(e)}),allPointNodes.clear(),allDimensionLinks.clear(),t.updateWallDimensions()),o=o.copy().projectOntoLineSegmentPoint(s,p),t.skipsUndoManager=!0,t.startTransaction("set loc"),t.model.setDataProperty(e.data,"loc",go.Point.stringify(o)),t.commitTransaction("set loc"),t.skipsUndoManager=!1,t.updateWallDimensions()}return o};this.nodeTemplateMap.add("FurnitureNode",l(go.Node,"Spot",{resizable:!0,rotatable:!0,toolTip:function(){var e=go.GraphObject.make;return e(go.Adornment,"Auto",e(go.Shape,{fill:"#FFFFCC"}),e(go.TextBlock,{margin:4},new go.Binding("text","",function(e,o){var t=o.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===o.part.adornedObject.category?t.text:t.caption)+"\nNotes: "+t.notes}).ofObject()))}(),resizeAdornmentTemplate:function(){function e(e,t){return o(go.Shape,{alignment:e,cursor:t,figure:"Rectangle",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","color"),new go.Binding("stroke","stroke"))}var o=go.GraphObject.make;return o(go.Adornment,"Spot",{locationSpot:go.Spot.Center},o(go.Placeholder),e(go.Spot.Top,"n-resize"),e(go.Spot.TopRight,"n-resize"),e(go.Spot.BottomRight,"se-resize"),e(go.Spot.Right,"e-resize"),e(go.Spot.Bottom,"s-resize"),e(go.Spot.BottomLeft,"sw-resize"),e(go.Spot.Left,"w-resize"),e(go.Spot.TopLeft,"nw-resize"))}(),rotateAdornmentTemplate:function(){var e=go.GraphObject.make;return e(go.Adornment,{locationSpot:go.Spot.Center,locationObjectName:"CIRCLE"},e(go.Shape,"Circle",{name:"CIRCLE",cursor:"pointer",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","",function(e){return null===e.adornedPart?"#ffffff":e.adornedPart.data.color}).ofObject(),new go.Binding("stroke","",function(e){return null===e.adornedPart?"#000000":e.adornedPart.data.stroke}).ofObject()))}(),contextMenu:makeContextMenu(),locationObjectName:"SHAPE",resizeObjectName:"SHAPE",rotateObjectName:"SHAPE",minSize:new go.Size(5,5),locationSpot:go.Spot.Center,selectionAdorned:!1,doubleClick:function(e){e.diagram.floorplanUI&&e.diagram.floorplanUI.hideShow("selectionInfoWindow")}},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("layerName","isSelected",function(e){return e?"Foreground":""}).ofObject(),l(go.Shape,{strokeWidth:1,name:"SHAPE",stroke:"#000000",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgba(128, 128, 128, 0.5)"},new go.Binding("geometryString","geo"),new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("figure","shape").makeTwoWay(),new go.Binding("stroke","isSelected",function(o,t){return o?go.Brush.lightenBy(t.stroke,.5):e(t.part.data.color)}).ofObject(),new go.Binding("fill","color")))),this.nodeTemplateMap.add("MultiPurposeNode",l(go.Node,"Spot",{contextMenu:makeContextMenu(),toolTip:function(){var e=go.GraphObject.make;return e(go.Adornment,"Auto",e(go.Shape,{fill:"#FFFFCC"}),e(go.TextBlock,{margin:4},new go.Binding("text","",function(e,o){var t=o.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===o.part.adornedObject.category?t.text:t.caption)+"\nNotes: "+t.notes}).ofObject()))}(),locationSpot:go.Spot.Center,resizeAdornmentTemplate:function(){function e(e,t){return o(go.Shape,{alignment:e,cursor:t,figure:"Rectangle",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","color"),new go.Binding("stroke","stroke"))}var o=go.GraphObject.make;return o(go.Adornment,"Spot",{locationSpot:go.Spot.Center},o(go.Placeholder),e(go.Spot.Top,"n-resize"),e(go.Spot.TopRight,"n-resize"),e(go.Spot.BottomRight,"se-resize"),e(go.Spot.Right,"e-resize"),e(go.Spot.Bottom,"s-resize"),e(go.Spot.BottomLeft,"sw-resize"),e(go.Spot.Left,"w-resize"),e(go.Spot.TopLeft,"nw-resize"))}(),rotateAdornmentTemplate:function(){var e=go.GraphObject.make;return e(go.Adornment,{locationSpot:go.Spot.Center,locationObjectName:"CIRCLE"},e(go.Shape,"Circle",{name:"CIRCLE",cursor:"pointer",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"},new go.Binding("fill","",function(e){return null===e.adornedPart?"#ffffff":e.adornedPart.data.color}).ofObject(),new go.Binding("stroke","",function(e){return null===e.adornedPart?"#000000":e.adornedPart.data.stroke}).ofObject()))}(),locationObjectName:"SHAPE",resizable:!0,rotatable:!0,resizeObjectName:"SHAPE",rotateObjectName:"SHAPE",minSize:new go.Size(5,5),selectionAdorned:!1,doubleClick:function(e){e.diagram.floorplanUI&&e.diagram.floorplanUI.hideShow("selectionInfoWindow")}},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("layerName","isSelected",function(e){return e?"Foreground":""}).ofObject(),l(go.Shape,{strokeWidth:1,name:"SHAPE",fill:"rgba(128, 128, 128, 0.5)"},new go.Binding("angle","angle").makeTwoWay(),new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("stroke","isSelected",function(o,t){return o?go.Brush.lightenBy(t.stroke,.5):e(t.part.data.color)}).ofObject(),new go.Binding("fill","color")),l(go.TextBlock,{margin:5,wrap:go.TextBlock.WrapFit,textAlign:"center",editable:!0,isMultiline:!1,stroke:"#454545",font:"10pt sans-serif"},new go.Binding("text").makeTwoWay(),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("font","height",function(e){return e>25?"10pt sans-serif":e<25&&e>15?"8pt sans-serif":"6pt sans-serif"}),new go.Binding("stroke","color",function(o){return e(o)})))),this.nodeTemplateMap.add("WindowNode",l(go.Node,"Spot",{contextMenu:makeContextMenu(),selectionObjectName:"SHAPE",selectionAdorned:!1,locationSpot:go.Spot.Center,name:"NODE",toolTip:function(){var e=go.GraphObject.make;return e(go.Adornment,"Auto",e(go.Shape,{fill:"#FFFFCC"}),e(go.TextBlock,{margin:4},new go.Binding("text","",function(e,o){var t=o.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===o.part.adornedObject.category?t.text:t.caption)+"\nNotes: "+t.notes}).ofObject()))}(),minSize:new go.Size(5,5),resizable:!0,resizeAdornmentTemplate:l(go.Adornment,"Spot",{name:"WallPartResizeAdornment",locationSpot:go.Spot.Center},l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Left,cursor:"w-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"}),l(go.Shape,{alignment:go.Spot.Right,cursor:"e-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"})),resizeObjectName:"SHAPE",rotatable:!1,doubleClick:function(e){e.diagram.floorplanUI&&e.diagram.floorplanUI.hideShow("selectionInfoWindow")},dragComputation:d,layerName:"Foreground"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("angle","angle").makeTwoWay(),l(go.Shape,{name:"SHAPE",fill:"white",strokeWidth:0},new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject(),new go.Binding("fill","isSelected",function(e){return e?"lightgray":"white"}).ofObject()),l(go.Shape,{name:"LINESHAPE",fill:"darkgray",strokeWidth:0,height:10},new go.Binding("width","width",function(e){return e-10}),new go.Binding("height","height",function(e){return e/5}),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject()))),this.nodeTemplateMap.add("PaletteWallNode",l(go.Node,"Spot",{selectionAdorned:!1,locationSpot:go.Spot.Center},l(go.Shape,{name:"SHAPE",fill:"black",strokeWidth:0,height:10,figure:"Rectangle"},new go.Binding("width","width").makeTwoWay(),new go.Binding("height","height").makeTwoWay(),new go.Binding("fill","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject(),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject()))),this.nodeTemplateMap.add("DoorNode",l(go.Node,"Spot",{contextMenu:makeContextMenu(),selectionObjectName:"SHAPE",selectionAdornmentTemplate:l(go.Adornment,"Vertical",{name:"DoorSelectionAdornment"},l(go.Panel,"Auto",l(go.Shape,{fill:null,stroke:null}),l(go.Placeholder)),l(go.Panel,"Horizontal",{defaultStretch:go.GraphObject.Vertical},l("Button",l(go.Picture,{source:"/assets/gojs/tools/icons/flipDoorOpeningLeft.png",column:0,desiredSize:new go.Size(12,12)},new go.Binding("source","",function(e){return null===e.adornedPart?"/assets/gojs/tools/icons/flipDoorOpeningRight.png":"left"===e.adornedPart.data.swing?"/assets/gojs/tools/icons/flipDoorOpeningRight.png":"icons/flipDoorOpeningLeft.png"}).ofObject()),{click:function(e,o){var t=o.part.diagram;t.startTransaction("flip door");var n=o.part.adornedPart;"left"===n.data.swing?t.model.setDataProperty(n.data,"swing","right"):t.model.setDataProperty(n.data,"swing","left"),t.commitTransaction("flip door")},toolTip:l(go.Adornment,"Auto",l(go.Shape,{fill:"#FFFFCC"}),l(go.TextBlock,{margin:4,text:"Flip Door Opening"}))},new go.Binding("visible","",function(e){return null!==e.adornedPart&&null!==e.adornedPart.containingGroup}).ofObject()),l("Button",l(go.Picture,{source:"/assets/gojs/tools/icons/flipDoorSide.png",column:0,desiredSize:new go.Size(12,12)}),{click:function(e,o){var t=o.part.diagram;t.startTransaction("rotate door");var n=o.part.adornedPart;n.angle=(n.angle+180)%360,t.commitTransaction("rotate door")},toolTip:l(go.Adornment,"Auto",l(go.Shape,{fill:"#FFFFCC"}),l(go.TextBlock,{margin:4,text:"Flip Door Side"}))}),new go.Binding("visible","",function(e){return null!==e.adornedPart&&null!==e.adornedPart.containingGroup}).ofObject())),locationSpot:go.Spot.BottomCenter,resizable:!0,resizeObjectName:"OPENING_SHAPE",rotatable:!1,toolTip:function(){var e=go.GraphObject.make;return e(go.Adornment,"Auto",e(go.Shape,{fill:"#FFFFCC"}),e(go.TextBlock,{margin:4},new go.Binding("text","",function(e,o){var t=o.part.adornedObject.data;return"Name: "+("MultiPurposeNode"===o.part.adornedObject.category?t.text:t.caption)+"\nNotes: "+t.notes}).ofObject()))}(),minSize:new go.Size(10,10),doubleClick:function(e){e.diagram.floorplanUI&&e.diagram.floorplanUI.hideShow("selectionInfoWindow")},dragComputation:d,resizeAdornmentTemplate:l(go.Adornment,"Spot",{name:"WallPartResizeAdornment",locationSpot:go.Spot.Center},l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Left,cursor:"w-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"}),l(go.Shape,{alignment:go.Spot.Right,cursor:"e-resize",figure:"Diamond",desiredSize:new go.Size(7,7),fill:"#ffffff",stroke:"#808080"})),layerName:"Foreground"},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("locationSpot","doorOpeningHeight",function(e){return new go.Spot(.5,1,0,-e/2)}),l(go.Shape,{name:"SHAPE",strokeWidth:1},new go.Binding("width","width"),new go.Binding("height","width").makeTwoWay(),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject(),new go.Binding("fill","color"),new go.Binding("geometryString","swing",function(e){return"left"===e?"F1 M0,0 v-150 a150,150 0 0,1 150,150 ":"F1 M275,175 v-150 a150,150 0 0,0 -150,150 "})),l(go.Shape,{name:"OPENING_SHAPE",fill:"white",strokeWidth:0,height:5,width:40,alignment:go.Spot.BottomCenter,alignmentFocus:go.Spot.Center},new go.Binding("height","doorOpeningHeight").makeTwoWay(),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject(),new go.Binding("fill","isSelected",function(e){return e?"lightgray":"white"}).ofObject(),new go.Binding("width","width").makeTwoWay()))),this.nodeTemplateMap.add("color_box",l(go.Node,"Auto",l(go.Shape,"Rectangle",{fill:"white"},new go.Binding("fill","color")),l(go.TextBlock,{margin:5},new go.Binding("text","key")))),this.nodeTemplateMap.add("floor",l(go.Node,"Spot",{locationObjectName:"SHAPE",locationSpot:go.Spot.Center,toolTip:l(go.Adornment,go.Panel.Auto,l(go.Shape,"RoundedRectangle",{fill:"whitesmoke",stroke:"gray"}),l(go.TextBlock,{margin:3,editable:!0},new go.Binding("text","",function(e){return e.item!=undefined?e.item:"(unnamed item)"}))),selectionAdorned:!1},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("layerName","isSelected",function(e){return e?"Foreground":""}).ofObject(),{resizable:!0,resizeObjectName:"SHAPE"},{rotatable:!0,rotateObjectName:"SHAPE"},l(go.Shape,{name:"SHAPE",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgb(130, 130, 256)"},new go.Binding("geometryString","geo"),new go.Binding("fill","color"),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject(),new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("angle","angle").makeTwoWay())));var c=function(){return[new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("isShadowed","isSelected").ofObject(),{selectionAdorned:!1,shadowOffset:new go.Point(0,0),shadowBlur:15,shadowColor:"blue"}]},s=function(){return{name:"NODESHAPE",fill:"lightgray",stroke:"darkslategray",desiredSize:new go.Size(40,40),strokeWidth:2}},p=function(e){return{desiredSize:new go.Size(6,6),fill:"black",fromSpot:go.Spot.Right,fromLinkable:!e,toSpot:go.Spot.Left,toLinkable:e,toMaxLinks:1,cursor:"pointer"}};this.nodeTemplateMap.add("circuit.input",l(go.Node,"Spot",c(),l(go.Shape,"Circle",s(),{fill:"orangered"}),l(go.Shape,"Rectangle",p(!1),{portId:"",alignment:new go.Spot(1,.5)}),{doubleClick:function(e,o){e.diagram.startTransaction("Toggle Input");var t=o.findObject("NODESHAPE");t.fill="forestgreen"===t.fill?"orangered":"forestgreen",updateStates(),e.diagram.commitTransaction("Toggle Input")}})),this.nodeTemplateMap.add("circuit.output",l(go.Node,"Spot",c(),l(go.Shape,"Rectangle",s(),{fill:"forestgreen"}),l(go.Shape,"Rectangle",p(!0),{portId:"",alignment:new go.Spot(0,.5)}))),this.nodeTemplateMap.add("circuit.and",l(go.Node,"Spot",c(),l(go.Shape,"AndGate",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in1",alignment:new go.Spot(0,.3)}),l(go.Shape,"Rectangle",p(!0),{portId:"in2",alignment:new go.Spot(0,.7)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.or",l(go.Node,"Spot",c(),l(go.Shape,"OrGate",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in1",alignment:new go.Spot(.16,.3)}),l(go.Shape,"Rectangle",p(!0),{portId:"in2",alignment:new go.Spot(.16,.7)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.xor",l(go.Node,"Spot",c(),l(go.Shape,"XorGate",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in1",alignment:new go.Spot(.26,.3)}),l(go.Shape,"Rectangle",p(!0),{portId:"in2",alignment:new go.Spot(.26,.7)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.nor",l(go.Node,"Spot",c(),l(go.Shape,"NorGate",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in1",alignment:new go.Spot(.16,.3)}),l(go.Shape,"Rectangle",p(!0),{portId:"in2",alignment:new go.Spot(.16,.7)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.xnor",l(go.Node,"Spot",c(),l(go.Shape,"XnorGate",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in1",alignment:new go.Spot(.26,.3)}),l(go.Shape,"Rectangle",p(!0),{portId:"in2",alignment:new go.Spot(.26,.7)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.nand",l(go.Node,"Spot",c(),l(go.Shape,"NandGate",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in1",alignment:new go.Spot(0,.3)}),l(go.Shape,"Rectangle",p(!0),{portId:"in2",alignment:new go.Spot(0,.7)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("circuit.not",l(go.Node,"Spot",c(),l(go.Shape,"Inverter",s()),l(go.Shape,"Rectangle",p(!0),{portId:"in",alignment:new go.Spot(0,.5)}),l(go.Shape,"Rectangle",p(!1),{portId:"out",alignment:new go.Spot(1,.5)}))),this.nodeTemplateMap.add("flowchart.normal",l(go.Node,"Spot",o(),l(go.Panel,"Auto",l(go.Shape,"Rectangle",{fill:"#00A9C9",stroke:null},new go.Binding("figure","figure")),l(go.TextBlock,{font:"bold 11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke",margin:8,maxSize:new go.Size(160,NaN),wrap:go.TextBlock.WrapFit,editable:!0},new go.Binding("text").makeTwoWay())),t("T",go.Spot.Top,!1,!0),t("L",go.Spot.Left,!0,!0),t("R",go.Spot.Right,!0,!0),t("B",go.Spot.Bottom,!0,!1))),this.nodeTemplateMap.add("flowchart.start",l(go.Node,"Spot",o(),l(go.Panel,"Auto",l(go.Shape,"Circle",{minSize:new go.Size(40,40),fill:"#79C900",stroke:null}),l(go.TextBlock,"Start",{font:"bold 11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke"},new go.Binding("text"))),t("L",go.Spot.Left,!0,!1),t("R",go.Spot.Right,!0,!1),t("B",go.Spot.Bottom,!0,!1))),this.nodeTemplateMap.add("flowchart.end",l(go.Node,"Spot",o(),l(go.Panel,"Auto",l(go.Shape,"Circle",{minSize:new go.Size(40,40),fill:"#DC3C00",stroke:null}),l(go.TextBlock,"End",{font:"bold 11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke"},new go.Binding("text"))),t("T",go.Spot.Top,!1,!0),t("L",go.Spot.Left,!1,!0),t("R",go.Spot.Right,!1,!0))),this.nodeTemplateMap.add("flowchart.comment",l(go.Node,"Auto",o(),l(go.Shape,"File",{fill:"#EFFAB4",stroke:null}),l(go.TextBlock,{margin:5,maxSize:new go.Size(200,NaN),wrap:go.TextBlock.WrapFit,textAlign:"center",editable:!0,font:"bold 12pt Helvetica, Arial, sans-serif",stroke:"#454545"},new go.Binding("text").makeTwoWay()))),this.nodeTemplateMap.add("class_hierarchy",l(go.Node,l("HyperlinkText",function(e){return"../api/symbols/"+e.data.key+".html"},l(go.Panel,"Auto",l(go.Shape,{fill:"#1F4963",stroke:null}),l(go.TextBlock,{font:"bold 13px Helvetica, bold Arial, sans-serif",stroke:"white",margin:3},new go.Binding("text","key")))))),this.nodeTemplateMap.add("dom",l(go.Node,"Horizontal",{selectionChanged:function(e){e.isSelected?window.dom_names[e.data.name].style.backgroundColor="lightblue":window.dom_names[e.data.name].style.backgroundColor=""}},l(go.Panel,"Auto",l(go.Shape,{fill:"#1F4963",stroke:null}),l(go.TextBlock,{font:"bold 13px Helvetica, bold Arial, sans-serif",stroke:"white",margin:3},new go.Binding("text","key"))),l("TreeExpanderButton"))),this.nodeTemplateMap.add("shape",l(go.Node,"Vertical",{locationSpot:go.Spot.Center,locationObjectName:"SHAPE",selectionAdorned:!1,resizable:!0,resizeObjectName:"SHAPE",rotatable:!0,rotateObjectName:"SHAPE",layoutConditions:go.Part.LayoutStandard&~go.Part.LayoutNodeSized},new go.Binding("layerName","isHighlighted",function(e){return e?"Foreground":""}).ofObject(),l(go.Shape,{name:"SHAPE",width:40,height:40,stroke:"#C2185B",fill:"#F48FB1",strokeWidth:3},new go.Binding("figure","key")),l(go.TextBlock,{margin:4,font:"bold 18px sans-serif",background:"white"},new go.Binding("visible","isHighlighted").ofObject(),new go.Binding("text","key")))),this.nodeTemplateMap.add("icon",l(go.Node,"Auto",l(go.Shape,"Circle",{fill:"lightcoral",strokeWidth:4,stroke:"#888",width:40,height:40},new go.Binding("fill","color")),l(go.Shape,{margin:3,fill:"#F5F5F5",strokeWidth:0},new go.Binding("geometry","geo",function(e){var o=icons[e];return o===undefined&&(o="heart"),"string"==typeof o&&(o=icons[e]=go.Geometry.parse(o,!0).scale(.6,.6)),o})),{toolTip:l(go.Adornment,"Auto",l(go.Shape,{fill:"LightYellow",stroke:"#888",strokeWidth:2}),l(go.TextBlock,{margin:8,stroke:"#888",font:"bold 16px sans-serif"},new go.Binding("text","geo")))})),this.nodeTemplateMap.add("font-awesome",l(go.Node,"Auto",{rotatable:!0,locationSpot:go.Spot.Center,resizable:!0,width:32},l(go.TextBlock,{name:"TEXTBLOCK",stroke:"#000",margin:0,textAlign:"center",verticalAlignment:go.Spot.Center,font:"26px FontAwesome",editable:!1,isMultiline:!1},new go.Binding("text"),new go.Binding("font","width",function(e){return Math.round(e/32*26)+"px FontAwesome"}).ofObject()))),this.nodeTemplateMap.add("glyphicons",l(go.Node,"Auto",{rotatable:!0,locationSpot:go.Spot.Center,resizable:!0,width:32},l(go.TextBlock,{name:"TEXTBLOCK",stroke:"#000",margin:0,textAlign:"center",verticalAlignment:go.Spot.Bottom,font:"26px Glyphicons Halflings",editable:!1,isMultiline:!1},new go.Binding("text"),new go.Binding("font","width",function(e){return Math.round(e/32*26)+"px Glyphicons Halflings"}).ofObject()))),this.nodeTemplateMap.add("entity_relationship",l(go.Node,"Auto",{selectionAdorned:!0,resizable:!0,layoutConditions:go.Part.LayoutStandard&~go.Part.LayoutNodeSized,fromSpot:go.Spot.AllSides,toSpot:go.Spot.AllSides,isShadowed:!0,shadowColor:"#C5C1AA"},new go.Binding("location","location").makeTwoWay(),new go.Binding("desiredSize","visible",function(){return new go.Size(NaN,NaN)}).ofObject("LIST"),l(go.Shape,"Rectangle",{fill:this.brushes.lightgrad,stroke:"#756875",strokeWidth:3}),l(go.Panel,"Table",{margin:8,stretch:go.GraphObject.Fill},l(go.RowColumnDefinition,{row:0,sizing:go.RowColumnDefinition.None}),l(go.TextBlock,{row:0,alignment:go.Spot.Center,margin:new go.Margin(0,14,0,2),font:"bold 16px sans-serif"},new go.Binding("text","key")),l("PanelExpanderButton","LIST",{row:0,alignment:go.Spot.TopRight}),l(go.Panel,"Vertical",{name:"LIST",row:1,padding:3,alignment:go.Spot.TopLeft,defaultAlignment:go.Spot.Left,stretch:go.GraphObject.Horizontal,itemTemplate:l(go.Panel,"Horizontal",l(go.Shape,{desiredSize:new go.Size(10,10)},new go.Binding("figure","figure"),new go.Binding("fill","color")),l(go.TextBlock,{stroke:"#333333",font:"bold 14px sans-serif"},new go.Binding("text","name")))},new go.Binding("itemArray","items"))))),this.nodeTemplateMap.add("gantt",l(go.Node,"Auto",{fromSpot:go.Spot.Right,toSpot:new go.Spot(.001,0,11,0)},l(go.Shape,"Rectangle",{height:15},new go.Binding("fill","color"),new go.Binding("width","width",function(e){return e})),l(go.TextBlock,{margin:2,alignment:go.Spot.Left},new go.Binding("text","key")),new go.Binding("location","loc",function(e){return new go.Point(e.x,e.y)}))),this.nodeTemplateMap.add("gantt_start",l(go.Node,{fromSpot:go.Spot.Right,toSpot:go.Spot.Top,selectable:!1},l(go.Shape,"Diamond",{height:15,width:15}),new go.Binding("location","loc"))),this.nodeTemplateMap.add("gantt_end",l(go.Node,{fromSpot:go.Spot.Right,toSpot:go.Spot.Top,selectable:!1},l(go.Shape,"Diamond",{height:15,width:15}),new go.Binding("location","loc",function(e){return e.x>=0?new go.Point(e.x,e.y):e}))),this.nodeTemplateMap.add("gantt_date",l(go.Part,{selectable:!1},new go.Binding("location","loc",function(e){return new go.Point(e.x,e.y)}),l(go.TextBlock,new go.Binding("text","key")))),this.nodeTemplateMap.add("uml",l(go.Node,"Auto",{locationSpot:go.Spot.Center,fromSpot:go.Spot.AllSides,toSpot:go.Spot.AllSides},l(go.Shape,{fill:"lightyellow"}),l(go.Panel,"Table",{defaultRowSeparatorStroke:"black"},l(go.TextBlock,{row:0,columnSpan:2,margin:3,alignment:go.Spot.Center,font:"bold 12pt sans-serif",isMultiline:!1,editable:!0},new go.Binding("text","name").makeTwoWay()),l(go.TextBlock,"Properties",{row:1,font:"italic 10pt sans-serif"},new go.Binding("visible","visible",function(e){return!e}).ofObject("PROPERTIES")),l(go.Panel,"Vertical",{name:"PROPERTIES"},new go.Binding("itemArray","properties"),{row:1,margin:3,stretch:go.GraphObject.Fill,defaultAlignment:go.Spot.Left,background:"lightyellow",itemTemplate:l(go.Panel,"Horizontal",l(go.TextBlock,{isMultiline:!1,editable:!1,width:12
},new go.Binding("text","visibility",function(e){switch(e){case"public":return"+";case"private":return"-";case"protected":return"#";case"package":return"~";default:return e}})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","name").makeTwoWay(),new go.Binding("isUnderline","scope",function(e){return"c"===e[0]})),l(go.TextBlock,"",new go.Binding("text","type",function(e){return e?": ":""})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","type").makeTwoWay()),l(go.TextBlock,{isMultiline:!1,editable:!1},new go.Binding("text","default",function(e){return e?" = "+e:""})))}),l("PanelExpanderButton","PROPERTIES",{row:1,column:1,alignment:go.Spot.TopRight,visible:!1},new go.Binding("visible","properties",function(e){return e.length>0})),l(go.TextBlock,"Methods",{row:2,font:"italic 10pt sans-serif"},new go.Binding("visible","visible",function(e){return!e}).ofObject("METHODS")),l(go.Panel,"Vertical",{name:"METHODS"},new go.Binding("itemArray","methods"),{row:2,margin:3,stretch:go.GraphObject.Fill,defaultAlignment:go.Spot.Left,background:"lightyellow",itemTemplate:l(go.Panel,"Horizontal",l(go.TextBlock,{isMultiline:!1,editable:!1,width:12},new go.Binding("text","visibility",function(e){switch(e){case"public":return"+";case"private":return"-";case"protected":return"#";case"package":return"~";default:return e}})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","name").makeTwoWay(),new go.Binding("isUnderline","scope",function(e){return"c"===e[0]})),l(go.TextBlock,"()",new go.Binding("text","parameters",function(e){for(var o="(",t=0;t<e.length;t++){var n=e[t];t>0&&(o+=", "),o+=n.name+": "+n.type}return o+")"})),l(go.TextBlock,"",new go.Binding("text","type",function(e){return e?": ":""})),l(go.TextBlock,{isMultiline:!1,editable:!0},new go.Binding("text","type").makeTwoWay()))}),l("PanelExpanderButton","METHODS",{row:2,column:1,alignment:go.Spot.TopRight,visible:!1},new go.Binding("visible","methods",function(e){return e.length>0}))))),this.nodeTemplateMap.add("process_flow",l(go.Node,"Auto",{locationSpot:new go.Spot(.5,.5),locationObjectName:"SHAPE",resizable:!0,resizeObjectName:"SHAPE"},new go.Binding("location","pos",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.Shape,"Cylinder1",{name:"SHAPE",strokeWidth:2,fill:l(go.Brush,"Linear",{start:go.Spot.Left,end:go.Spot.Right,0:"gray",.5:"white",1:"gray"}),minSize:new go.Size(50,50),portId:"",fromSpot:go.Spot.AllSides,toSpot:go.Spot.AllSides},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify)),l(go.TextBlock,{alignment:go.Spot.Center,textAlign:"center",margin:5,editable:!0},new go.Binding("text").makeTwoWay()))),this.nodeTemplateMap.add("process_flow_value",l(go.Node,"Vertical",{locationSpot:new go.Spot(.5,1,0,-21),locationObjectName:"SHAPE",selectionObjectName:"SHAPE",rotatable:!0},new go.Binding("angle").makeTwoWay(),new go.Binding("location","pos",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.TextBlock,{alignment:go.Spot.Center,textAlign:"center",margin:5,editable:!0},new go.Binding("text").makeTwoWay(),new go.Binding("angle","angle",function(e){return 180===e?180:0}).ofObject()),l(go.Shape,{name:"SHAPE",geometryString:"F1 M0 0 L40 20 40 0 0 20z M20 10 L20 30 M12 30 L28 30",strokeWidth:2,fill:l(go.Brush,"Linear",{0:"gray",.35:"white",.7:"gray"}),portId:"",fromSpot:new go.Spot(1,.35),toSpot:new go.Spot(0,.35)}))),this.nodeTemplateMap.add("state_chart",l(go.Node,"Auto",new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.Shape,"RoundedRectangle",{parameter1:20,fill:l(go.Brush,"Linear",{0:"rgb(254, 201, 0)",1:"rgb(254, 162, 0)"}),stroke:null,portId:"",fromLinkable:!0,fromLinkableSelfNode:!0,fromLinkableDuplicates:!0,toLinkable:!0,toLinkableSelfNode:!0,toLinkableDuplicates:!0,cursor:"pointer"}),l(go.TextBlock,{font:"bold 11pt helvetica, bold arial, sans-serif",editable:!0},new go.Binding("text").makeTwoWay()),{selectionAdornmentTemplate:l(go.Adornment,"Spot",l(go.Panel,"Auto",l(go.Shape,{fill:null,stroke:"blue",strokeWidth:2}),l(go.Placeholder)),l("Button",{alignment:go.Spot.TopRight,click:function(e,o){var t=o.part,n=e.diagram;n.startTransaction("Add State");var i=t.adornedPart,a=i.data,r={category:"state_chart",text:"new"},g=i.location.copy();g.x+=200,r.loc=go.Point.stringify(g);var l=n.model;l.addNodeData(r);var d={from:l.getKeyForNodeData(a),to:l.getKeyForNodeData(r),text:"transition",category:"state_chart"};l.addLinkData(d);var c=n.findNodeForData(r);n.select(c),n.commitTransaction("Add State"),n.scrollToRect(c.actualBounds)}},l(go.Shape,"PlusLine",{width:6,height:6})))})),this.nodeTemplateMap.add("pipe_comment",l(go.Node,new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),l(go.TextBlock,{stroke:"brown",font:"9pt sans-serif"},new go.Binding("text")))),this.nodeTemplateMap.add("pipe",l(go.Node,"Spot",{locationObjectName:"SHAPE",locationSpot:go.Spot.Center,selectionAdorned:!1,itemTemplate:l(go.Panel,new go.Binding("portId","id"),new go.Binding("alignment","spot",go.Spot.parse),l(go.Shape,"XLine",{width:6,height:6,background:"transparent",fill:null,stroke:"gray"},new go.Binding("figure","id",function(e){return null===e||""===e?"XLine":"F"===e[0]?"CircleLine":"M"===e[0]?"PlusLine":"XLine"}),new go.Binding("angle","angle"))),linkConnected:function(e,o,t){""===o.category&&(t.visible=!1)},linkDisconnected:function(e,o,t){""===o.category&&(t.visible=!0)}},new go.Binding("itemArray","ports"),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("angle","angle").makeTwoWay(),new go.Binding("layerName","isSelected",function(e){return e?"Foreground":""}).ofObject(),l(go.Shape,{name:"SHAPE",geometryString:"F1 M0 0 L20 0 20 20 0 20 z",fill:"rgba(128, 128, 128, 0.5)"},new go.Binding("geometryString","geo"),new go.Binding("stroke","isSelected",function(e){return e?"dodgerblue":"black"}).ofObject()),{contextMenu:l(go.Adornment,"Vertical",l("ContextMenuButton",l(go.TextBlock,"Rotate +45"),{click:function(e,o){n(o.part.adornedPart,45)}}),l("ContextMenuButton",l(go.TextBlock,"Rotate -45"),{click:function(e,o){n(o.part.adornedPart,-45)}}),l("ContextMenuButton",l(go.TextBlock,"Rotate 180"),{click:function(e,o){n(o.part.adornedPart,180)}}),l("ContextMenuButton",l(go.TextBlock,"Detach"),{click:function(e,o){o.diagram.startTransaction("detach");var t=new go.Set(go.Link);o.diagram.selection.each(function(e){e instanceof go.Node&&e.linksConnected.each(function(o){""===o.category&&(o.getOtherNode(e).isSelected||t.add(o))})}),o.diagram.removeParts(t,!1),o.diagram.commitTransaction("detach")}}),l("ContextMenuButton",l(go.TextBlock,"Delete"),{click:function(e){e.diagram.commandHandler.deleteSelection()}}))})),this.nodeTemplateMap.add("FreehandDrawing",l(go.Part,{locationSpot:go.Spot.Center,isLayoutPositioned:!1},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{selectionAdorned:!0,selectionObjectName:"SHAPE",selectionAdornmentTemplate:l(go.Adornment,"Auto",l(go.Shape,{stroke:"dodgerblue",fill:null}),l(go.Placeholder,{margin:-1}))},{resizable:!0,resizeObjectName:"SHAPE"},{rotatable:!0,rotateObjectName:"SHAPE"},{reshapable:!0},l(go.Shape,{name:"SHAPE",fill:null,strokeWidth:1.5},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("angle").makeTwoWay(),new go.Binding("geometryString","geo").makeTwoWay(),new go.Binding("fill"),new go.Binding("stroke"),new go.Binding("strokeWidth")))),this.nodeTemplateMap.add("sankey",l(go.Node,go.Panel.Horizontal,{locationObjectName:"SHAPE",locationSpot:go.Spot.MiddleLeft,portSpreading:go.Node.SpreadingPacked},l(go.TextBlock,{font:"bold 12pt Segoe UI, sans-serif",stroke:"black",margin:5},{name:"LTEXT"},new go.Binding("text","ltext")),l(go.Shape,{name:"SHAPE",figure:"Rectangle",fill:"#2E8DEF",stroke:null,strokeWidth:0,portId:"",fromSpot:go.Spot.RightSide,toSpot:go.Spot.LeftSide,height:50,width:20},new go.Binding("fill","color")),l(go.TextBlock,{font:"bold 12pt Segoe UI, sans-serif",stroke:"black",margin:5},{name:"TEXT"},new go.Binding("text")))),this.nodeTemplateMap.add("pert",l(go.Node,"Auto",l(go.Shape,"Rectangle",{fill:"white",strokeWidth:2},new go.Binding("fill","critical",function(e){return e?"#F8BBD0":"#B3E5FC"}),new go.Binding("stroke","critical",function(e){return e?"#B71C1C":"#0288D1"})),l(go.Panel,"Table",{padding:.5},l(go.RowColumnDefinition,{column:1,separatorStroke:"black"}),l(go.RowColumnDefinition,{column:2,separatorStroke:"black"}),l(go.RowColumnDefinition,{row:1,separatorStroke:"black",background:"white",coversSeparators:!0}),l(go.RowColumnDefinition,{row:2,separatorStroke:"black"}),l(go.TextBlock,new go.Binding("text","earlyStart"),{row:0,column:0,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","length"),{row:0,column:1,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","",function(e){return(e.earlyStart+e.length).toFixed(2)}),{row:0,column:2,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","text"),{row:1,column:0,columnSpan:3,margin:5,textAlign:"center",font:"bold 14px sans-serif"}),l(go.TextBlock,new go.Binding("text","",function(e){return(e.lateFinish-e.length).toFixed(2)}),{row:2,column:0,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","",function(e){return(e.lateFinish-(e.earlyStart+e.length)).toFixed(2)}),{row:2,column:1,margin:5,textAlign:"center"}),l(go.TextBlock,new go.Binding("text","lateFinish"),{row:2,column:2,margin:5,textAlign:"center"})))),this.nodeTemplateMap.add("wheel",l(go.Node,"Horizontal",{selectionAdorned:!1,locationSpot:go.Spot.Center,locationObjectName:"SHAPE",mouseEnter:function(e,o){o.diagram.clearHighlighteds(),o.linksConnected.each(function(e){e.isHighlighted=!0,e.fromNode.isHighlighted=!0,e.toNode.isHighlighted=!0}),o.isHighlighted=!0;var t=o.findObject("TEXTBLOCK");null!==t&&(t.stroke="red")},mouseLeave:function(e,o){o.diagram.clearHighlighteds();var t=o.findObject("TEXTBLOCK");null!==t&&(t.stroke="black")}},new go.Binding("text","text"),l(go.Shape,"Ellipse",{name:"SHAPE",fill:"lightgray",stroke:"transparent",strokeWidth:2,desiredSize:new go.Size(20,20),portId:""},new go.Binding("fill","color"),new go.Binding("stroke","isHighlighted",function(e){return e?"red":"transparent"}).ofObject()),l(go.TextBlock,{name:"TEXTBLOCK"},new go.Binding("text","text")))),this.nodeTemplateMap.add("seating_person",l(go.Node,"Auto",{background:"transparent"},new go.Binding("layerName","isSelected",function(e){return e?"Foreground":""}).ofObject(),{locationSpot:go.Spot.Center},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("text","key"),{mouseDragEnter:function(e,o){highlightSeats(o,o.diagram.selection,!0)},mouseDragLeave:function(e,o){highlightSeats(o,o.diagram.selection,!1)},mouseDrop:function(e,o){assignPeopleToSeats(o,o.diagram.selection,e.documentPoint)}},l(go.Shape,"Rectangle",{fill:"blanchedalmond",stroke:null}),l(go.Panel,"Viewbox",{desiredSize:new go.Size(50,38)},l(go.TextBlock,{margin:2,desiredSize:new go.Size(55,NaN),font:"8pt Verdana, sans-serif",textAlign:"center",stroke:"darkblue"},new go.Binding("text","",function(e){var o=e.key;return e.plus&&(o+=" +"+e.plus.toString()),o}))))),this.nodeTemplateMap.add("TableR8",l(go.Node,"Spot",r(),l(go.Panel,"Spot",l(go.Shape,"Rectangle",{name:"TABLESHAPE",desiredSize:new go.Size(160,80),fill:"burlywood",stroke:null},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("fill")),l(go.TextBlock,{editable:!0,font:"bold 11pt Verdana, sans-serif"},new go.Binding("text","name").makeTwoWay(),new go.Binding("angle","angle",function(e){return-e}))),a(1,"0.2 0","0.5 1"),a(2,"0.5 0","0.5 1"),a(3,"0.8 0","0.5 1"),a(4,"1 0.5","0 0.5"),a(5,"0.8 1","0.5 0"),a(6,"0.5 1","0.5 0"),a(7,"0.2 1","0.5 0"),a(8,"0 0.5","1 0.5"))),this.nodeTemplateMap.add("TableR3",l(go.Node,"Spot",r(),l(go.Panel,"Spot",l(go.Shape,"Rectangle",{name:"TABLESHAPE",desiredSize:new go.Size(160,60),fill:"burlywood",stroke:null},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("fill")),l(go.TextBlock,{editable:!0,font:"bold 11pt Verdana, sans-serif"},new go.Binding("text","name").makeTwoWay(),new go.Binding("angle","angle",function(e){return-e}))),a(1,"0.2 0","0.5 1"),a(2,"0.5 0","0.5 1"),a(3,"0.8 0","0.5 1"))),this.nodeTemplateMap.add("TableC8",l(go.Node,"Spot",r(),l(go.Panel,"Spot",l(go.Shape,"Circle",{name:"TABLESHAPE",desiredSize:new go.Size(120,120),fill:"burlywood",stroke:null},new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),new go.Binding("fill")),l(go.TextBlock,{editable:!0,font:"bold 11pt Verdana, sans-serif"},new go.Binding("text","name").makeTwoWay(),new go.Binding("angle","angle",function(e){return-e}))),a(1,"0.50 0","0.5 1"),a(2,"0.85 0.15","0.15 0.85"),a(3,"1 0.5","0 0.5"),a(4,"0.85 0.85","0.15 0.15"),a(5,"0.50 1","0.5 0"),a(6,"0.15 0.85","0.85 0.15"),a(7,"0 0.5","1 0.5"),a(8,"0.15 0.15","0.85 0.85"))),this.nodeTemplateMap.add("timeline",l(go.Node,"Table",{locationSpot:go.Spot.Center,movable:!1},l(go.Panel,"Auto",l(go.Shape,"RoundedRectangle",{fill:"#252526",stroke:"#519ABA",strokeWidth:3}),l(go.Panel,"Table",l(go.TextBlock,{row:0,stroke:"#CCCCCC",wrap:go.TextBlock.WrapFit,font:"bold 12pt sans-serif",textAlign:"center",margin:4},new go.Binding("text","event")),l(go.TextBlock,{row:1,stroke:"#A074C4",textAlign:"center",margin:4},new go.Binding("text","date",function(e){return e.toLocaleDateString()})))))),this.nodeTemplateMap.add("timeline_line",l(go.Node,"Graduated",{movable:!1,copyable:!1,resizable:!0,resizeObjectName:"MAIN",background:"transparent",graduatedMin:0,graduatedMax:365,graduatedTickUnit:1,resizeAdornmentTemplate:l(go.Adornment,"Spot",l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Right,cursor:"e-resize",desiredSize:new go.Size(4,16),fill:"lightblue",stroke:"deepskyblue"}))},new go.Binding("graduatedMax","",function(){function e(e){var o=new Date(e);return o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),o}function o(o,t){return(e(t)-e(o))/864e5}var t=goTools.model.findNodeDataForKey("timeline");return o(t.start,t.end)}),l(go.Shape,"LineH",{name:"MAIN",stroke:"#519ABA",height:1,strokeWidth:3},new go.Binding("width","length").makeTwoWay()),l(go.Shape,{geometryString:"M0 0 V10",interval:7,stroke:"#519ABA",strokeWidth:2}),l(go.TextBlock,{font:"10pt sans-serif",stroke:"#333333",interval:14,alignmentFocus:go.Spot.MiddleRight,segmentOrientation:go.Link.OrientMinus90,segmentOffset:new go.Point(0,12),graduatedFunction:function(e){var o=goTools.model.findNodeDataForKey("timeline"),t=o.start,n=t.getTime()+6e4*t.getTimezoneOffset();return new Date(n+864e5*e).toLocaleDateString()}},new go.Binding("interval","length",function(e){return e>=800?7:400<=e&&e<800?14:200<=e&&e<400?21:140<=e&&e<200?28:110<=e&&e<140?35:365})))),this.nodeTemplateMap.add("sequence",l(go.Node,{locationSpot:go.Spot.Top,locationObjectName:"SHAPE",minLocation:new go.Point(NaN,LinePrefix-ActivityStart),maxLocation:new go.Point(NaN,19999),selectionObjectName:"SHAPE",resizable:!0,resizeObjectName:"SHAPE",resizeAdornmentTemplate:l(go.Adornment,"Spot",l(go.Placeholder),l(go.Shape,{alignment:go.Spot.Bottom,cursor:"col-resize",desiredSize:new go.Size(6,6),fill:"yellow"}))},new go.Binding("location","",function(e){var o=goTools.model.findNodeDataForKey(e.group);if(null===o)return new go.Point;var t=go.Point.parse(o.loc);return new go.Point(t.x,convertTimeToY(e.start)-ActivityStart)}).makeTwoWay(function(e,o){goTools.model.setDataProperty(o,"start",convertYToTime(e.y+ActivityStart))}),l(go.Shape,"Rectangle",{name:"SHAPE",fill:"white",stroke:"black",width:ActivityWidth,minSize:new go.Size(ActivityWidth,function(e){return ActivityStart+e*MessageSpacing+ActivityEnd}(.25))},new go.Binding("height","duration",function(e){return ActivityStart+e*MessageSpacing+ActivityEnd}).makeTwoWay(function(e){return(e-ActivityStart-ActivityEnd)/MessageSpacing})))),this.nodeTemplateMap.add("euler",l(go.Node,"Auto",{locationSpot:go.Spot.Center},new go.Binding("location","loc",go.Point.parse),l(go.Shape,"Ellipse",{fill:"transparent"},new go.Binding("stroke","color"),new go.Binding("strokeWidth","width"),new go.Binding("strokeDashArray","dash")),l("HyperlinkText",function(e){return"https://en.wikipedia.org/w/index.php?search="+encodeURIComponent(e.data.text)},function(e){return e.data.text},{margin:1,maxSize:new go.Size(80,80),textAlign:"center"}))),this.nodeTemplateMap.add("euler_center",l(go.Node,"Spot",{locationSpot:go.Spot.Center},new go.Binding("location","loc",go.Point.parse),l(go.Shape,"Circle",{fill:"rgba(128,128,128,0.1)",stroke:null,width:550,height:550}),l(go.Shape,"Circle",{fill:"rgba(128,128,128,0.05)",stroke:null,width:400,height:400}),l(go.Shape,"Circle",{fill:"rgba(128,128,128,0.033)",stroke:null,width:250,height:250}),l(go.Panel,"Spot",l(go.Shape,"Circle",{isPanelMain:!0,fill:"transparent",portId:""},new go.Binding("stroke","hicolor"),new go.Binding("strokeWidth","hiwidth")),l(go.Shape,"Circle",{isPanelMain:!0,fill:"transparent"},new go.Binding("stroke","color"),new go.Binding("strokeWidth","width"),new go.Binding("strokeDashArray","dash")),l("HyperlinkText",function(e){return"https://en.wikipedia.org/w/index.php?search="+encodeURIComponent(e.data.text)},function(e){return e.data.text},{margin:1,maxSize:new go.Size(80,80),textAlign:"center"})))),this.nodeTemplateMap.add("comment",l(go.Node,{background:"transparent"},l(go.TextBlock,{stroke:"brown",margin:3},new go.Binding("text")))),window.updateMindmapDirection=function(e,o){e.diagram.model.setDataProperty(e.data,"dir",o);for(var t=e.findTreeChildrenNodes();t.next();)updateMindmapDirection(t.value,o)},window.layoutMindMap=function(e){if(0===e.data.key){var o=e.diagram.findNodeForKey(0);if(null===o)return;e.diagram.startTransaction("Layout");var t=new go.Set(go.Part),n=new go.Set(go.Part);o.findLinksConnected().each(function(e){var i=e.toNode;"left"===i.data.dir?(n.add(o),n.add(e),n.addAll(i.findTreeParts())):(t.add(o),t.add(e),t.addAll(i.findTreeParts()))}),go.GraphObject.make(go.TreeLayout,{angle:0,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(t),go.GraphObject.make(go.TreeLayout,{angle:180,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(n),e.diagram.commitTransaction("Layout")}else go.GraphObject.make(go.TreeLayout,{angle:"left"===e.data.dir?180:0,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(e.findTreeParts())},this.nodeTemplateMap.add("mindmap",l(go.Node,"Vertical",{selectionObjectName:"TEXT"},l(go.TextBlock,{name:"TEXT",minSize:new go.Size(30,15),editable:!0},new go.Binding("text","text").makeTwoWay(),new go.Binding("scale","scale").makeTwoWay(),new go.Binding("font","font").makeTwoWay()),l(go.Shape,"LineH",{stretch:go.GraphObject.Horizontal,strokeWidth:3,height:3,portId:"",fromSpot:go.Spot.LeftRightSides,toSpot:go.Spot.LeftRightSides},new go.Binding("stroke","brush"),new go.Binding("fromSpot","dir",function(e){return"left"===e?go.Spot.Left:go.Spot.Right}),new go.Binding("toSpot","dir",function(e){return"left"===e?go.Spot.Right:go.Spot.Left})),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("locationSpot","dir",function(e){return"left"===e?go.Spot.Right:go.Spot.Left}),{selectionAdornmentTemplate:l(go.Adornment,"Spot",l(go.Panel,"Auto",l(go.Shape,{fill:null,stroke:"dodgerblue",strokeWidth:3}),l(go.Placeholder,{margin:new go.Margin(4,4,0,4)})),l("Button",{alignment:go.Spot.Right,alignmentFocus:go.Spot.Left,click:function(e,o){var t=o.part,n=t.diagram;n.startTransaction("Add Node");var i=t.adornedPart,a=i.data,r={category:"mindmap",text:"idea",brush:a.brush,dir:a.dir,parent:a.key};n.model.addNodeData(r),layoutMindMap(i),n.commitTransaction("Add Node")}},l(go.TextBlock,"+",{font:"bold 8pt sans-serif"}))),contextMenu:l(go.Adornment,"Vertical",l("ContextMenuButton",l(go.TextBlock,"Bigger"),{click:function(e,o){var t=o.part;t.diagram.startTransaction("Change Text Size"),t.adornedPart.findObject("TEXT").scale*=1.1,t.diagram.commitTransaction("Change Text Size")}}),l("ContextMenuButton",l(go.TextBlock,"Smaller"),{click:function(e,o){var t=o.part;t.diagram.startTransaction("Change Text Size"),t.adornedPart.findObject("TEXT").scale*=1/1.1,t.diagram.commitTransaction("Change Text Size")}}),l("ContextMenuButton",l(go.TextBlock,"Bold/Normal"),{click:function(e,o){var t=o.part;t.diagram.startTransaction("Change Text Weight");var n=t.adornedPart,i=n.findObject("TEXT"),a=i.font.indexOf("bold");i.font=a<0?"bold "+i.font:i.font.substr(a+5),t.diagram.commitTransaction("Change Text Weight")}}),l("ContextMenuButton",l(go.TextBlock,"Layout"),{click:function(e,o){var t=o.part;t.diagram.startTransaction("Subtree Layout"),layoutMindMap(t.adornedPart),t.diagram.commitTransaction("Subtree Layout")}}))}));var u=go.Geometry.parse("F M1 1 l19 0 0 19 -19 0z"),m=go.Geometry.parse("F M20 1 l19 0 0 19 -19 0z"),f=go.Geometry.parse("F M20 20 l19 0 0 19 -19 0z"),S=go.Geometry.parse("F M1 20 l19 0 0 19 -19 0z"),h=go.Geometry.parse("F M38 0 L40 0 40 2 2 40 0 40 0 38z"),w=go.Geometry.parse("F M20 20 B 180 90 20 20 19 19 z"),k=go.Geometry.parse("F M20 20 B 270 90 20 20 19 19 z"),B=go.Geometry.parse("F M20 20 B 0 90 20 20 19 19 z"),T=go.Geometry.parse("F M20 20 B 90 90 20 20 19 19 z"),b=l(go.Adornment,"Auto",{layerName:"Grid"},l(go.Shape,"Circle",{fill:"yellow",stroke:null}),l(go.Placeholder));this.nodeTemplateMap.add("genogram_male",l(go.Node,"Vertical",{locationSpot:go.Spot.Center,locationObjectName:"ICON"},l(go.Panel,{name:"ICON"},l(go.Shape,"Square",{width:40,height:40,strokeWidth:2,fill:"white",portId:""}),l(go.Panel,{itemTemplate:l(go.Panel,l(go.Shape,{stroke:null,strokeWidth:0},new go.Binding("fill","",g),new go.Binding("geometry","",function(e){switch(e){case"A":case"B":case"C":return u;case"D":case"E":case"F":return m;case"G":case"H":case"I":return f;case"J":case"K":case"L":return S;case"S":return h;default:return u}}))),margin:1},new go.Binding("itemArray","a"))),l(go.TextBlock,{textAlign:"center",maxSize:new go.Size(80,NaN)},new go.Binding("text","n")),{selectionAdornmentTemplate:b})),this.nodeTemplateMap.add("genogram_female",l(go.Node,"Vertical",{locationSpot:go.Spot.Center,locationObjectName:"ICON"},l(go.Panel,{name:"ICON"},l(go.Shape,"Circle",{width:40,height:40,strokeWidth:2,fill:"white",portId:""}),l(go.Panel,{itemTemplate:l(go.Panel,l(go.Shape,{stroke:null,strokeWidth:0},new go.Binding("fill","",g),new go.Binding("geometry","",function(e){switch(e){case"A":case"B":case"C":return w;case"D":case"E":case"F":return k;case"G":case"H":case"I":return B;case"J":case"K":case"L":return T;case"S":return h;default:return w}}))),margin:1},new go.Binding("itemArray","a"))),l(go.TextBlock,{textAlign:"center",maxSize:new go.Size(80,NaN)},new go.Binding("text","n")),{selectionAdornmentTemplate:b})),this.nodeTemplateMap.add("genogram_marriage_linklabel",l(go.Node,{selectable:!1,width:1,height:1,fromEndSegmentLength:20})),this.nodeTemplateMap.add("force_directed",l(go.Node,"Spot",{locationSpot:go.Spot.Center},new go.Binding("text","text"),l(go.Shape,"Ellipse",{fill:"lightgray",stroke:null,desiredSize:new go.Size(30,30)},new go.Binding("fill","fill")),l(go.TextBlock,new go.Binding("text","text"))))};